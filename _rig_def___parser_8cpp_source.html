<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Rigs of Rods: source/rig_file_input_output/RigDef_Parser.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="rorlogo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Rigs of Rods
   
   </div>
   <div id="projectbrief">Soft-body Physics Simulation</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">source/rig_file_input_output/RigDef_Parser.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_rig_def___parser_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">    This source file is part of Rigs of Rods</span>
<a name="l00003"></a>00003 <span class="comment">    Copyright 2005-2012 Pierre-Michel Ricordel</span>
<a name="l00004"></a>00004 <span class="comment">    Copyright 2007-2012 Thomas Fischer</span>
<a name="l00005"></a>00005 <span class="comment">    Copyright 2013-2014 Petr Ohlidal</span>
<a name="l00006"></a>00006 <span class="comment"></span>
<a name="l00007"></a>00007 <span class="comment">    For more information, see http://www.rigsofrods.com/</span>
<a name="l00008"></a>00008 <span class="comment"></span>
<a name="l00009"></a>00009 <span class="comment">    Rigs of Rods is free software: you can redistribute it and/or modify</span>
<a name="l00010"></a>00010 <span class="comment">    it under the terms of the GNU General Public License version 3, as</span>
<a name="l00011"></a>00011 <span class="comment">    published by the Free Software Foundation.</span>
<a name="l00012"></a>00012 <span class="comment"></span>
<a name="l00013"></a>00013 <span class="comment">    Rigs of Rods is distributed in the hope that it will be useful,</span>
<a name="l00014"></a>00014 <span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00015"></a>00015 <span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00016"></a>00016 <span class="comment">    GNU General Public License for more details.</span>
<a name="l00017"></a>00017 <span class="comment"></span>
<a name="l00018"></a>00018 <span class="comment">    You should have received a copy of the GNU General Public License</span>
<a name="l00019"></a>00019 <span class="comment">    along with Rigs of Rods.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00020"></a>00020 <span class="comment">*/</span>
<a name="l00021"></a>00021 
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="_rig_def___parser_8h.html">RigDef_Parser.h</a>&quot;</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="_rig_def___file_8h.html" title="Structures which represent a rig-definition file (1:1 match)">RigDef_File.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="_rig_def___regexes_8h.html" title="Defines regular expressions to verify and pull data from rig-def file. &#39;E&#39; stands for Expression...">RigDef_Regexes.h</a>&quot;</span>
<a name="l00032"></a>00032 <span class="preprocessor">#include &quot;<a class="code" href="_bit_flags_8h.html">BitFlags.h</a>&quot;</span>
<a name="l00033"></a>00033 <span class="preprocessor">#include &quot;<a class="code" href="_ro_r_prerequisites_8h.html">RoRPrerequisites.h</a>&quot;</span>
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 <span class="preprocessor">#include &lt;OgreException.h&gt;</span>
<a name="l00036"></a>00036 <span class="preprocessor">#include &lt;OgreString.h&gt;</span>
<a name="l00037"></a>00037 <span class="preprocessor">#include &lt;OgreStringVector.h&gt;</span>
<a name="l00038"></a>00038 <span class="preprocessor">#include &lt;OgreStringConverter.h&gt;</span>
<a name="l00039"></a>00039 
<a name="l00040"></a>00040 <span class="keyword">namespace </span>RigDef
<a name="l00041"></a>00041 {
<a name="l00042"></a>00042 
<a name="l00043"></a><a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">00043</a> <span class="preprocessor">#define STR_PARSE_INT(_STR_)  Ogre::StringConverter::parseInt(_STR_)</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a><a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">00045</a> <span class="preprocessor">#define STR_PARSE_REAL(_STR_) Ogre::StringConverter::parseReal(_STR_)</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a><a class="code" href="_rig_def___parser_8cpp.html#aa36143e7b00dfd8d2962e14f89047251">00047</a> <span class="preprocessor">#define STR_PARSE_BOOL(_STR_) Ogre::StringConverter::parseBool(_STR_)</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00050"></a><a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc">00050</a> <span class="preprocessor">#define PARSE_UNSAFE(VAR_LINE, MIN_ARGS, _BLOCK_)                      \</span>
<a name="l00051"></a>00051 <span class="preprocessor">    this-&gt;AddMessage(line, Message::TYPE_WARNING,                      \</span>
<a name="l00052"></a>00052 <span class="preprocessor">        &quot;Syntax check failed, parsing by legacy unsafe method...&quot;);    \</span>
<a name="l00053"></a>00053 <span class="preprocessor">    const int min_args = MIN_ARGS;                                     \</span>
<a name="l00054"></a>00054 <span class="preprocessor">    Ogre::StringVector values;                                         \</span>
<a name="l00055"></a>00055 <span class="preprocessor">    if (this-&gt;_ParseArgs(VAR_LINE, values, min_args) &lt; min_args)       \</span>
<a name="l00056"></a>00056 <span class="preprocessor">    {                                                                  \</span>
<a name="l00057"></a>00057 <span class="preprocessor">        std::stringstream msg;                                         \</span>
<a name="l00058"></a>00058 <span class="preprocessor">        msg &lt;&lt; &quot;Too few arguments, required number is &quot; &lt;&lt; min_args;   \</span>
<a name="l00059"></a>00059 <span class="preprocessor">        this-&gt;AddMessage(VAR_LINE, Message::TYPE_WARNING, msg.str());  \</span>
<a name="l00060"></a>00060 <span class="preprocessor">    }                                                                  \</span>
<a name="l00061"></a>00061 <span class="preprocessor">    else                                                               \</span>
<a name="l00062"></a>00062 <span class="preprocessor">    {                                                                  \</span>
<a name="l00063"></a>00063 <span class="preprocessor">        _BLOCK_                                                        \</span>
<a name="l00064"></a>00064 <span class="preprocessor">    }</span>
<a name="l00065"></a>00065 <span class="preprocessor"></span>
<a name="l00066"></a><a class="code" href="class_rig_def_1_1_parser.html#afaf6eb2a4dbb7f7f4813420fec539844">00066</a> <a class="code" href="class_rig_def_1_1_parser.html#afaf6eb2a4dbb7f7f4813420fec539844">Parser::Parser</a>():
<a name="l00067"></a>00067     m_ror_minimass(0)
<a name="l00068"></a>00068 {
<a name="l00069"></a>00069     <span class="comment">/* Push defaults */</span>
<a name="l00070"></a>00070     <a class="code" href="class_rig_def_1_1_parser.html#a562ae58c77e4a78a230c009d6436770f">m_ror_default_inertia</a> = boost::shared_ptr&lt;DefaultInertia&gt;(<span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_default_inertia.html">DefaultInertia</a>);
<a name="l00071"></a>00071     <a class="code" href="class_rig_def_1_1_parser.html#acf561e9e58fd57bb0f398274bc233963">m_ror_beam_defaults</a> = boost::shared_ptr&lt;BeamDefaults&gt;(<span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_beam_defaults.html">BeamDefaults</a>);
<a name="l00072"></a>00072     <a class="code" href="class_rig_def_1_1_parser.html#aa517e0bee8672c92d69f666f8b3a956b">m_ror_node_defaults</a> = boost::shared_ptr&lt;NodeDefaults&gt;(<span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_node_defaults.html">NodeDefaults</a>);
<a name="l00073"></a>00073 }
<a name="l00074"></a>00074 
<a name="l00075"></a><a class="code" href="class_rig_def_1_1_parser.html#a01b6569c2a06ad650f6fd8a350fdf6f6">00075</a> <a class="code" href="class_rig_def_1_1_parser.html#a01b6569c2a06ad650f6fd8a350fdf6f6">Parser::~Parser</a>()
<a name="l00076"></a>00076 {}
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="class_rig_def_1_1_parser.html#a572673469cf88cdebbd30e04df5629ff">00078</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a572673469cf88cdebbd30e04df5629ff">Parser::ParseLine</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l00079"></a>00079 {
<a name="l00080"></a>00080     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> line_length = line.length();
<a name="l00081"></a>00081     <span class="keywordflow">if</span> (line_length == 0)
<a name="l00082"></a>00082     {
<a name="l00083"></a>00083         <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>++;
<a name="l00084"></a>00084         <span class="keywordflow">return</span>;
<a name="l00085"></a>00085     }
<a name="l00086"></a>00086 
<a name="l00087"></a>00087     <span class="keywordtype">bool</span> line_finished = <span class="keyword">false</span>;
<a name="l00088"></a>00088     <span class="keywordtype">bool</span> scan_for_keyword = <span class="keyword">true</span>;
<a name="l00089"></a>00089 
<a name="l00090"></a>00090     <span class="comment">/* Check line type */</span>
<a name="l00091"></a>00091     boost::smatch line_type_result;
<a name="l00092"></a>00092     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a037398030caa70de742d6478b58605e6" title="Parser state.">m_in_block_comment</a>)
<a name="l00093"></a>00093     {
<a name="l00094"></a>00094         <span class="keywordflow">if</span> (boost::regex_match(line, Regexes::CHECK_BLOCK_COMMENT_END))
<a name="l00095"></a>00095         {
<a name="l00096"></a>00096             <a class="code" href="class_rig_def_1_1_parser.html#a037398030caa70de742d6478b58605e6" title="Parser state.">m_in_block_comment</a> = <span class="keyword">false</span>;
<a name="l00097"></a>00097         }
<a name="l00098"></a>00098         line_finished = <span class="keyword">true</span>;
<a name="l00099"></a>00099     }
<a name="l00100"></a>00100     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a93a82ead72771afe12321d9f85dc8547" title="Parser state.">m_in_description_section</a>)
<a name="l00101"></a>00101     {
<a name="l00102"></a>00102         <span class="keywordflow">if</span> (boost::regex_match(line, Regexes::CHECK_END_DESCRIPTION))
<a name="l00103"></a>00103         {
<a name="l00104"></a>00104             <a class="code" href="class_rig_def_1_1_parser.html#a93a82ead72771afe12321d9f85dc8547" title="Parser state.">m_in_description_section</a> = <span class="keyword">false</span>;
<a name="l00105"></a>00105         }
<a name="l00106"></a>00106         <span class="keywordflow">else</span>
<a name="l00107"></a>00107         {
<a name="l00108"></a>00108             <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;description.push_back(line);
<a name="l00109"></a>00109         }
<a name="l00110"></a>00110         line_finished = <span class="keyword">true</span>;
<a name="l00111"></a>00111     }
<a name="l00112"></a>00112     <span class="keywordflow">else</span>
<a name="l00113"></a>00113     {
<a name="l00114"></a>00114         <span class="keywordflow">if</span> (boost::regex_search(line, line_type_result, Regexes::IDENTIFY_LINE_TYPE))
<a name="l00115"></a>00115         {
<a name="l00116"></a>00116             <span class="keywordflow">if</span> (line_type_result[1].matched) <span class="comment">/* Block comment start */</span>
<a name="l00117"></a>00117             {
<a name="l00118"></a>00118                 <a class="code" href="class_rig_def_1_1_parser.html#a037398030caa70de742d6478b58605e6" title="Parser state.">m_in_block_comment</a> = <span class="keyword">true</span>;
<a name="l00119"></a>00119                 line_finished = <span class="keyword">true</span>;
<a name="l00120"></a>00120             }
<a name="l00121"></a>00121             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (line_type_result[2].matched || line_type_result[3].matched || line_type_result[4].matched) <span class="comment">/* Comment line || blank line */</span>
<a name="l00122"></a>00122             {
<a name="l00123"></a>00123                 <a class="code" href="class_rig_def_1_1_parser.html#ac022a88920a25de333ed324a8bd4e044" title="Parser state; Num. blank lines right above the current one.">m_num_contiguous_blank_lines</a>++;
<a name="l00124"></a>00124                 line_finished = <span class="keyword">true</span>;
<a name="l00125"></a>00125             }
<a name="l00126"></a>00126             <span class="keywordflow">else</span> <span class="comment">/* Line has content */</span>
<a name="l00127"></a>00127             {
<a name="l00128"></a>00128                 <a class="code" href="class_rig_def_1_1_parser.html#ac022a88920a25de333ed324a8bd4e044" title="Parser state; Num. blank lines right above the current one.">m_num_contiguous_blank_lines</a> = 0;
<a name="l00129"></a>00129             }
<a name="l00130"></a>00130         }
<a name="l00131"></a>00131     }
<a name="l00132"></a>00132 
<a name="l00133"></a>00133     <span class="comment">/* Continue? */</span>
<a name="l00134"></a>00134     <span class="keywordflow">if</span> (line_finished)
<a name="l00135"></a>00135     {
<a name="l00136"></a>00136         <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>++;
<a name="l00137"></a>00137         <span class="keywordflow">return</span>;
<a name="l00138"></a>00138     }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140     <span class="comment">/* Prepare for switching file section */</span>
<a name="l00141"></a>00141     Ogre::String <span class="keyword">const</span> &amp; current_module_name = <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;name;
<a name="l00142"></a>00142     <span class="keywordtype">bool</span> current_module_is_root = <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a> == <a class="code" href="class_rig_def_1_1_parser.html#a8508e8fdc2f0488cce6690a23e07cda6">m_root_module</a>;
<a name="l00143"></a>00143     <span class="keywordtype">bool</span> module_changed = <span class="keyword">false</span>;
<a name="l00144"></a>00144     Ogre::String new_module_name;
<a name="l00145"></a>00145     <span class="keywordtype">bool</span> new_module_is_root = <span class="keyword">false</span>;
<a name="l00146"></a>00146 
<a name="l00147"></a>00147     <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3">File::Section</a> new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9065cc0451e962990c61a34730745a49">File::SECTION_INVALID</a>;
<a name="l00148"></a>00148     <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabae">File::Subsection</a> new_subsection = <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea040016593637894eaf912d9c2c543185">File::SUBSECTION_INVALID</a>;
<a name="l00149"></a>00149 
<a name="l00150"></a>00150     <span class="comment">/* Detect keywords on current line */</span>
<a name="l00151"></a>00151     <span class="comment">/* NOTE: Please maintain alphabetical order */</span>
<a name="l00152"></a>00152     <span class="keywordflow">if</span> (scan_for_keyword)
<a name="l00153"></a>00153     {
<a name="l00154"></a>00154         <a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3">File::Keyword</a> keyword = <a class="code" href="class_rig_def_1_1_parser.html#a33ad8735b03d1d4d43bbd964b71f99be">IdentifyKeyword</a>(line);
<a name="l00155"></a>00155         <span class="keywordflow">switch</span> (keyword)
<a name="l00156"></a>00156         {
<a name="l00157"></a>00157             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a1c5772b1ec3afd9b63e87fb3d53293bc">File::KEYWORD_INVALID</a>): <span class="comment">/* No new section */</span>
<a name="l00158"></a>00158                 <span class="keywordflow">break</span>;
<a name="l00159"></a>00159 
<a name="l00160"></a>00160             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a02dd465b9ae26726bb22acd11af4b3b6">File::KEYWORD_ADD_ANIMATION</a>):
<a name="l00161"></a>00161                 <a class="code" href="class_rig_def_1_1_parser.html#a89b315c24ea8610869acc1e2faa30abf">ParseDirectiveAddAnimation</a>(line);
<a name="l00162"></a>00162                 line_finished = <span class="keyword">true</span>;
<a name="l00163"></a>00163                 <span class="keywordflow">break</span>;
<a name="l00164"></a>00164 
<a name="l00165"></a>00165             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a00656abdf764e0aeb74d0f533d0eff6e">File::KEYWORD_AIRBRAKES</a>):
<a name="l00166"></a>00166                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a557681a14fbd8eb79b31fb5ff66bb959">File::SECTION_AIRBRAKES</a>;
<a name="l00167"></a>00167                 line_finished = <span class="keyword">true</span>;
<a name="l00168"></a>00168                 <span class="keywordflow">break</span>;
<a name="l00169"></a>00169 
<a name="l00170"></a>00170             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a43e6010c01cc7eb80a0d72e176b6da44">File::KEYWORD_ANIMATORS</a>):
<a name="l00171"></a>00171                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3afe43c599bb22910e02c8e3e3ae29cf07">File::SECTION_ANIMATORS</a>;
<a name="l00172"></a>00172                 line_finished = <span class="keyword">true</span>;
<a name="l00173"></a>00173                 <span class="keywordflow">break</span>;
<a name="l00174"></a>00174 
<a name="l00175"></a>00175             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a2a7dbe5c30cfe457cdeb3bcdfcb11a43">File::KEYWORD_ANTI_LOCK_BRAKES</a>):
<a name="l00176"></a>00176                 <a class="code" href="class_rig_def_1_1_parser.html#ae96909f926a36b7a2e97608873c501ea">ParseAntiLockBrakes</a>(line);
<a name="l00177"></a>00177                 line_finished = <span class="keyword">true</span>;
<a name="l00178"></a>00178                 <span class="keywordflow">break</span>;
<a name="l00179"></a>00179 
<a name="l00180"></a>00180             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a58349e2b1d95560a0a0c168b94711ee8">File::KEYWORD_AXLES</a>):
<a name="l00181"></a>00181                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a4f8bee8e02af7db96289b085d8464a5e">File::SECTION_AXLES</a>;
<a name="l00182"></a>00182                 line_finished = <span class="keyword">true</span>;
<a name="l00183"></a>00183                 <span class="keywordflow">break</span>;
<a name="l00184"></a>00184 
<a name="l00185"></a>00185             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3afd2a7b566054f0ca421968dfa567618e">File::KEYWORD_AUTHOR</a>):
<a name="l00186"></a>00186                 <a class="code" href="class_rig_def_1_1_parser.html#a7ac80da7787fb1be3141f47c2acd70ea">ParseAuthor</a>(line);
<a name="l00187"></a>00187                 line_finished = <span class="keyword">true</span>;
<a name="l00188"></a>00188                 <span class="keywordflow">break</span>;
<a name="l00189"></a>00189 
<a name="l00190"></a>00190             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a28ac8fdfa3b5ee575cf89c53641ad130">File::KEYWORD_BACKMESH</a>):
<a name="l00191"></a>00191                 <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9072c5f4d5f452a6db0a34e5c96a15d1">File::SECTION_SUBMESH</a>)
<a name="l00192"></a>00192                 {
<a name="l00193"></a>00193                     <a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>-&gt;backmesh = <span class="keyword">true</span>;
<a name="l00194"></a>00194                 }
<a name="l00195"></a>00195                 <span class="keywordflow">else</span>
<a name="l00196"></a>00196                 {
<a name="l00197"></a>00197                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Misplaced sub-directive &#39;backmesh&#39; (belongs in section &#39;submesh&#39;), ignoring...&quot;</span>);
<a name="l00198"></a>00198                 }
<a name="l00199"></a>00199                 line_finished = <span class="keyword">true</span>;
<a name="l00200"></a>00200                 <span class="keywordflow">break</span>;
<a name="l00201"></a>00201 
<a name="l00202"></a>00202             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ad0b4c3d4462ef7883933c52480a6747c">File::KEYWORD_BEAMS</a>):
<a name="l00203"></a>00203                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a3a5d0d62d3fbb089f647273981cf5988">File::SECTION_BEAMS</a>;
<a name="l00204"></a>00204                 line_finished = <span class="keyword">true</span>;
<a name="l00205"></a>00205                 <span class="keywordflow">break</span>;
<a name="l00206"></a>00206 
<a name="l00207"></a>00207             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ac549532ec663679de34071e14cac458f">File::KEYWORD_BRAKES</a>):
<a name="l00208"></a>00208                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad88237d9869310b7f0b86952a23fbbdd">File::SECTION_BRAKES</a>;
<a name="l00209"></a>00209                 line_finished = <span class="keyword">true</span>;
<a name="l00210"></a>00210                 <span class="keywordflow">break</span>;
<a name="l00211"></a>00211 
<a name="l00212"></a>00212             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3acfab68ad78a12d9f0908f69b308c9f14">File::KEYWORD_CAB</a>):
<a name="l00213"></a>00213                 <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9072c5f4d5f452a6db0a34e5c96a15d1">File::SECTION_SUBMESH</a>)
<a name="l00214"></a>00214                 {
<a name="l00215"></a>00215                     new_subsection = <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea8ef2c093f242bbdf0c298ee7f5e8d167">File::SUBSECTION__SUBMESH__CAB</a>;
<a name="l00216"></a>00216                 }
<a name="l00217"></a>00217                 <span class="keywordflow">else</span>
<a name="l00218"></a>00218                 {
<a name="l00219"></a>00219                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Misplaced sub-section &#39;cab&#39; (belongs in section &#39;submesh&#39;), ignoring...&quot;</span>);
<a name="l00220"></a>00220                 }
<a name="l00221"></a>00221                 line_finished = <span class="keyword">true</span>;
<a name="l00222"></a>00222                 <span class="keywordflow">break</span>;
<a name="l00223"></a>00223 
<a name="l00224"></a>00224             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a44154c4e3f47c1ebb00e2914dd6008db">File::KEYWORD_CAMERAS</a>):
<a name="l00225"></a>00225                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9c0b4fb9650d18a2a499e5e1165bfeb4">File::SECTION_CAMERAS</a>;
<a name="l00226"></a>00226                 line_finished = <span class="keyword">true</span>;
<a name="l00227"></a>00227                 <span class="keywordflow">break</span>;
<a name="l00228"></a>00228 
<a name="l00229"></a>00229             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a0a2b1659933ae7d1cf3732f98112d8a8">File::KEYWORD_CAMERARAIL</a>):
<a name="l00230"></a>00230                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad0e83608ba8e70227b2f21d4a78f8edf">File::SECTION_CAMERA_RAIL</a>;
<a name="l00231"></a>00231                 line_finished = <span class="keyword">true</span>;
<a name="l00232"></a>00232                 <span class="keywordflow">break</span>;
<a name="l00233"></a>00233 
<a name="l00234"></a>00234             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a4fa605501562333355696b5b5be097a5">File::KEYWORD_CINECAM</a>):
<a name="l00235"></a>00235                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a93c6ffcc7f7fc98ed1ae9b1aa4ae1610">File::SECTION_CINECAM</a>;
<a name="l00236"></a>00236                 line_finished = <span class="keyword">true</span>;
<a name="l00237"></a>00237                 <span class="keywordflow">break</span>;
<a name="l00238"></a>00238 
<a name="l00239"></a>00239             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a885f0178b79fb02c6dcc27ec56f4b2b0">File::KEYWORD_COLLISIONBOXES</a>):
<a name="l00240"></a>00240                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3aeefd02d27e488fdffb48a60fc7c2ecec">File::SECTION_COLLISION_BOXES</a>;
<a name="l00241"></a>00241                 line_finished = <span class="keyword">true</span>;
<a name="l00242"></a>00242                 <span class="keywordflow">break</span>;
<a name="l00243"></a>00243 
<a name="l00244"></a>00244             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a2a787486861465bda7d13af3f6c782a1">File::KEYWORD_COMMANDS</a>):
<a name="l00245"></a>00245                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ac0439b29d935c183924ca3f3c447583a">File::SECTION_COMMANDS</a>;
<a name="l00246"></a>00246                 line_finished = <span class="keyword">true</span>;
<a name="l00247"></a>00247                 <span class="keywordflow">break</span>;
<a name="l00248"></a>00248 
<a name="l00249"></a>00249             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a1e62d93c2c2c1bc6f6ba9335161fda8b">File::KEYWORD_COMMANDS2</a>):
<a name="l00250"></a>00250                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3afb0dcd83339fb1deb57f042da48ab0cd">File::SECTION_COMMANDS_2</a>;
<a name="l00251"></a>00251                 line_finished = <span class="keyword">true</span>;
<a name="l00252"></a>00252                 <span class="keywordflow">break</span>;
<a name="l00253"></a>00253 
<a name="l00254"></a>00254             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a94f33d2fc80297b88781106c2239beaf">File::KEYWORD_CONTACTERS</a>):
<a name="l00255"></a>00255                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad5ec93856084ca1278ebf2f51046f186">File::SECTION_CONTACTERS</a>;
<a name="l00256"></a>00256                 line_finished = <span class="keyword">true</span>;
<a name="l00257"></a>00257                 <span class="keywordflow">break</span>;
<a name="l00258"></a>00258 
<a name="l00259"></a>00259             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a2c1a2d95b7eeefdffb3bc63643456d50">File::KEYWORD_CRUISECONTROL</a>):
<a name="l00260"></a>00260                 <a class="code" href="class_rig_def_1_1_parser.html#ac6913f32feb3270ee1150d5b24708f92">ParseCruiseControl</a>(line);
<a name="l00261"></a>00261                 line_finished = <span class="keyword">true</span>;
<a name="l00262"></a>00262                 <span class="keywordflow">break</span>;
<a name="l00263"></a>00263 
<a name="l00264"></a>00264             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a9a0e35a0985a503489bcd608eab92c10">File::KEYWORD_DESCRIPTION</a>):
<a name="l00265"></a>00265                 <a class="code" href="class_rig_def_1_1_parser.html#a93a82ead72771afe12321d9f85dc8547" title="Parser state.">m_in_description_section</a> = <span class="keyword">true</span>;
<a name="l00266"></a>00266                 line_finished = <span class="keyword">true</span>;
<a name="l00267"></a>00267                 <span class="keywordflow">break</span>;
<a name="l00268"></a>00268 
<a name="l00269"></a>00269             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a832ee6cba2205a3538fa1a574a2960b6">File::KEYWORD_DETACHER_GROUP</a>):
<a name="l00270"></a>00270                 <a class="code" href="class_rig_def_1_1_parser.html#a382a8fc6efb5c9451ef72d2beb491768">ParseDirectiveDetacherGroup</a>(line);
<a name="l00271"></a>00271                 line_finished = <span class="keyword">true</span>;
<a name="l00272"></a>00272                 <span class="keywordflow">break</span>;
<a name="l00273"></a>00273 
<a name="l00274"></a>00274             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3afe1b290f29e7d5afcf5c6708a137c4e2">File::KEYWORD_DISABLEDEFAULTSOUNDS</a>):
<a name="l00275"></a>00275                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00276"></a>00276                 {
<a name="l00277"></a>00277                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Directive &#39;disabledefaultsounds&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00278"></a>00278                 }
<a name="l00279"></a>00279                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;disable_default_sounds = <span class="keyword">true</span>;
<a name="l00280"></a>00280                 line_finished = <span class="keyword">true</span>;
<a name="l00281"></a>00281                 <span class="keywordflow">break</span>;
<a name="l00282"></a>00282 
<a name="l00283"></a>00283             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ab17589f200df831327f1579a575811ed">File::KEYWORD_ENABLE_ADVANCED_DEFORMATION</a>):
<a name="l00284"></a>00284                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00285"></a>00285                 {
<a name="l00286"></a>00286                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Directive &#39;enable_advanced_deformation&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00287"></a>00287                 }
<a name="l00288"></a>00288                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;enable_advanced_deformation = <span class="keyword">true</span>;
<a name="l00289"></a>00289                 line_finished = <span class="keyword">true</span>;
<a name="l00290"></a>00290                 <span class="keywordflow">break</span>;
<a name="l00291"></a>00291 
<a name="l00292"></a>00292             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aa0755cc465a000342ad9dc8fb488756e">File::KEYWORD_END</a>):
<a name="l00293"></a>00293                 <span class="comment">/* Ignore silently */</span>
<a name="l00294"></a>00294                 line_finished = <span class="keyword">true</span>;
<a name="l00295"></a>00295                 <span class="keywordflow">break</span>;
<a name="l00296"></a>00296 
<a name="l00297"></a>00297             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3afb1a062e32407b71701b7d8e9a346fd9">File::KEYWORD_END_SECTION</a>):
<a name="l00298"></a>00298                 module_changed = <span class="keyword">true</span>;
<a name="l00299"></a>00299                 new_module_is_root = <span class="keyword">true</span>;
<a name="l00300"></a>00300                 line_finished = <span class="keyword">true</span>;
<a name="l00301"></a>00301                 <span class="keywordflow">break</span>;
<a name="l00302"></a>00302 
<a name="l00303"></a>00303             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a7567c9998bfd6afec2e6258c6ccd1634">File::KEYWORD_ENGINE</a>):
<a name="l00304"></a>00304                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a1bd5075808cc480a26198ae2cc6832eb">File::SECTION_ENGINE</a>;
<a name="l00305"></a>00305                 line_finished = <span class="keyword">true</span>;
<a name="l00306"></a>00306                 <span class="keywordflow">break</span>;
<a name="l00307"></a>00307 
<a name="l00308"></a>00308             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aece38fe8adb4a5cd7ce897ac2414a933">File::KEYWORD_ENGOPTION</a>):
<a name="l00309"></a>00309                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a3295da06d0a51d15776724c5f9e19777">File::SECTION_ENGOPTION</a>;
<a name="l00310"></a>00310                 line_finished = <span class="keyword">true</span>;
<a name="l00311"></a>00311                 <span class="keywordflow">break</span>;
<a name="l00312"></a>00312 
<a name="l00313"></a>00313             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ae6c16ae998e0d133c6fde2a55149439d">File::KEYWORD_ENGTURBO</a>) :
<a name="l00314"></a>00314                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a5831e475426422aedd841627bbaa6729">File::SECTION_ENGTURBO</a>;
<a name="l00315"></a>00315                 line_finished = <span class="keyword">true</span>;
<a name="l00316"></a>00316                 <span class="keywordflow">break</span>;
<a name="l00317"></a>00317 
<a name="l00318"></a>00318             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aa0cbbcf5d70d210837b9b069a465d8a8">File::KEYWORD_ENVMAP</a>):
<a name="l00319"></a>00319                 <span class="comment">/* Ignored */</span>
<a name="l00320"></a>00320                 line_finished = <span class="keyword">true</span>;
<a name="l00321"></a>00321                 <span class="keywordflow">break</span>;
<a name="l00322"></a>00322 
<a name="l00323"></a>00323             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aedaa328d9ea3058999bed1801a558a10">File::KEYWORD_EXHAUSTS</a>):
<a name="l00324"></a>00324                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ac3ed052ec8b52802fef1c6a6451c7698">File::SECTION_EXHAUSTS</a>;
<a name="l00325"></a>00325                 line_finished = <span class="keyword">true</span>;
<a name="l00326"></a>00326                 <span class="keywordflow">break</span>;
<a name="l00327"></a>00327 
<a name="l00328"></a>00328             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ae36723a54b40720d159e2e58027be756">File::KEYWORD_EXTCAMERA</a>):
<a name="l00329"></a>00329                 <a class="code" href="class_rig_def_1_1_parser.html#aae2c8f807987242e471f73008a9007d4">ParseExtCamera</a>(line);
<a name="l00330"></a>00330                 line_finished = <span class="keyword">true</span>;
<a name="l00331"></a>00331                 <span class="keywordflow">break</span>;
<a name="l00332"></a>00332 
<a name="l00333"></a>00333             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a39c2af7343c33e1b74e7389dbf5c6590">File::KEYWORD_FILEFORMATVERSION</a>):
<a name="l00334"></a>00334                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00335"></a>00335                 {
<a name="l00336"></a>00336                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Inline section &#39;fileformatversion&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00337"></a>00337                 }
<a name="l00338"></a>00338                 <a class="code" href="class_rig_def_1_1_parser.html#a6a42afd4ccfb56359182341e31a9ec7b">ParseFileFormatVersion</a>(line);
<a name="l00339"></a>00339                 line_finished = <span class="keyword">true</span>;
<a name="l00340"></a>00340                 <span class="keywordflow">break</span>;
<a name="l00341"></a>00341 
<a name="l00342"></a>00342             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3af9b9cfe474484d67f8b129c84cead9a9">File::KEYWORD_FILEINFO</a>):
<a name="l00343"></a>00343                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00344"></a>00344                 {
<a name="l00345"></a>00345                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Inline-section &#39;fileinfo&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00346"></a>00346                 }
<a name="l00347"></a>00347                 <a class="code" href="class_rig_def_1_1_parser.html#a6c834bd0f46111131121c1c405a61709">ParseFileinfo</a>(line);
<a name="l00348"></a>00348                 line_finished = <span class="keyword">true</span>;
<a name="l00349"></a>00349                 <span class="keywordflow">break</span>;
<a name="l00350"></a>00350 
<a name="l00351"></a>00351             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ac807bf172353bae97de8f7b19ce8426c">File::KEYWORD_FIXES</a>):
<a name="l00352"></a>00352                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab6678d87161bb619c3711c7635d13978">File::SECTION_FIXES</a>;
<a name="l00353"></a>00353                 line_finished = <span class="keyword">true</span>;
<a name="l00354"></a>00354                 <span class="keywordflow">break</span>;
<a name="l00355"></a>00355 
<a name="l00356"></a>00356             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a687b9ca108823420bf982905cddc566a">File::KEYWORD_FLARES</a>):
<a name="l00357"></a>00357                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a6287c439552171a871836e49d4622e5c">File::SECTION_FLARES</a>;
<a name="l00358"></a>00358                 line_finished = <span class="keyword">true</span>;
<a name="l00359"></a>00359                 <span class="keywordflow">break</span>;
<a name="l00360"></a>00360 
<a name="l00361"></a>00361             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a925bba1a7abdb97b40cfc57eaab34fbd">File::KEYWORD_FLARES2</a>):
<a name="l00362"></a>00362                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ae1bbe81358c1dbbe5c47d1e67dab93a1">File::SECTION_FLARES_2</a>;
<a name="l00363"></a>00363                 line_finished = <span class="keyword">true</span>;
<a name="l00364"></a>00364                 <span class="keywordflow">break</span>;
<a name="l00365"></a>00365 
<a name="l00366"></a>00366             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a9f557f96ab9e4deca449a07035da238a">File::KEYWORD_FLEXBODIES</a>):
<a name="l00367"></a>00367                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3af0e945673c2558cc9197244582cb1c3a">File::SECTION_FLEXBODIES</a>;
<a name="l00368"></a>00368                 line_finished = <span class="keyword">true</span>;
<a name="l00369"></a>00369                 <span class="keywordflow">break</span>;
<a name="l00370"></a>00370 
<a name="l00371"></a>00371             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a77a19fece751c9e052effc201501954f">File::KEYWORD_FLEXBODY_CAMERA_MODE</a>):
<a name="l00372"></a>00372                 <a class="code" href="class_rig_def_1_1_parser.html#addad23a09d60687db3df110c981a8d7f">ParseDirectiveFlexbodyCameraMode</a>(line);
<a name="l00373"></a>00373                 line_finished = <span class="keyword">true</span>;
<a name="l00374"></a>00374                 <span class="keywordflow">break</span>;
<a name="l00375"></a>00375 
<a name="l00376"></a>00376             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a898749499636d20b0443ba82a0d9034f">File::KEYWORD_FLEXBODYWHEELS</a>):
<a name="l00377"></a>00377                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3af864109306b6c0424921d58c61720eab">File::SECTION_FLEX_BODY_WHEELS</a>;
<a name="l00378"></a>00378                 line_finished = <span class="keyword">true</span>;
<a name="l00379"></a>00379                 <span class="keywordflow">break</span>;
<a name="l00380"></a>00380 
<a name="l00381"></a>00381             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aaccc463098492ecd5ca460fc04799367">File::KEYWORD_FORWARDCOMMANDS</a>):
<a name="l00382"></a>00382                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00383"></a>00383                 {
<a name="l00384"></a>00384                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Directive &#39;forwardcommands&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00385"></a>00385                 }
<a name="l00386"></a>00386                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;forward_commands = <span class="keyword">true</span>;
<a name="l00387"></a>00387                 line_finished = <span class="keyword">true</span>;
<a name="l00388"></a>00388                 <span class="keywordflow">break</span>;
<a name="l00389"></a>00389 
<a name="l00390"></a>00390             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a6517aa34ff87419f36c079a39397a362">File::KEYWORD_FUSEDRAG</a>):
<a name="l00391"></a>00391                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a095e622bcfa7bd813f1191bd55a95212">File::SECTION_FUSEDRAG</a>;
<a name="l00392"></a>00392                 line_finished = <span class="keyword">true</span>;
<a name="l00393"></a>00393                 <span class="keywordflow">break</span>;
<a name="l00394"></a>00394 
<a name="l00395"></a>00395             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a657b879be9e60ab2989325ab288fb89a">File::KEYWORD_GLOBALS</a>):
<a name="l00396"></a>00396                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a418a964431ae2a9b5cd6943981b05ebe">File::SECTION_GLOBALS</a>;
<a name="l00397"></a>00397                 line_finished = <span class="keyword">true</span>;
<a name="l00398"></a>00398                 <span class="keywordflow">break</span>;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ac7019f53efabd27dc2e1562226a238bc">File::KEYWORD_GUID</a>):
<a name="l00401"></a>00401                 <a class="code" href="class_rig_def_1_1_parser.html#abd45553f5bbfa7d2c26ec2aa463555e9">ParseGuid</a>(line);
<a name="l00402"></a>00402                 line_finished = <span class="keyword">true</span>;
<a name="l00403"></a>00403                 <span class="keywordflow">break</span>;
<a name="l00404"></a>00404 
<a name="l00405"></a>00405             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a76a6abf8b9616c3ab1d825acc343ca77">File::KEYWORD_GUISETTINGS</a>):
<a name="l00406"></a>00406                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a62320731dc4403e7424da19f2f44ca13">File::SECTION_GUI_SETTINGS</a>;
<a name="l00407"></a>00407                 line_finished = <span class="keyword">true</span>;
<a name="l00408"></a>00408                 <span class="keywordflow">break</span>;
<a name="l00409"></a>00409 
<a name="l00410"></a>00410             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3af877bccc3df4ff11c4ce7a3922aaf86b">File::KEYWORD_HELP</a>):
<a name="l00411"></a>00411                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab727ad16bcd7357e8759526bea14159e">File::SECTION_HELP</a>;
<a name="l00412"></a>00412                 line_finished = <span class="keyword">true</span>;
<a name="l00413"></a>00413                 <span class="keywordflow">break</span>;
<a name="l00414"></a>00414 
<a name="l00415"></a>00415             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a5b9c087f87bca1a20a1a7bf0b810aaa0">File::KEYWORD_HIDE_IN_CHOOSER</a>):
<a name="l00416"></a>00416                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00417"></a>00417                 {
<a name="l00418"></a>00418                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Directive &#39;hideInChooser&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00419"></a>00419                 }
<a name="l00420"></a>00420                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;hide_in_chooser = <span class="keyword">true</span>;
<a name="l00421"></a>00421                 line_finished = <span class="keyword">true</span>;
<a name="l00422"></a>00422                 <span class="keywordflow">break</span>;
<a name="l00423"></a>00423 
<a name="l00424"></a>00424             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a53644fc67070b3ca256783c42b4bd8b6">File::KEYWORD_HOOKGROUP</a>):
<a name="l00425"></a>00425                 <span class="comment">/* Not supported yet, ignore */</span>
<a name="l00426"></a>00426                 line_finished = <span class="keyword">true</span>;
<a name="l00427"></a>00427                 <span class="keywordflow">break</span>;
<a name="l00428"></a>00428 
<a name="l00429"></a>00429             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ac785994e6521814ab76171c1d6c0a9da">File::KEYWORD_HOOKS</a>):
<a name="l00430"></a>00430                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3aa7d6baf781ac3d157b6349362db848af">File::SECTION_HOOKS</a>;
<a name="l00431"></a>00431                 line_finished = <span class="keyword">true</span>;
<a name="l00432"></a>00432                 <span class="keywordflow">break</span>;
<a name="l00433"></a>00433 
<a name="l00434"></a>00434             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ab2b3a77cca56149c99c4d699d3ed315f">File::KEYWORD_HYDROS</a>):
<a name="l00435"></a>00435                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a6a9967a35a4d46abd3e47fd12eb50e40">File::SECTION_HYDROS</a>;
<a name="l00436"></a>00436                 line_finished = <span class="keyword">true</span>;
<a name="l00437"></a>00437                 <span class="keywordflow">break</span>;
<a name="l00438"></a>00438 
<a name="l00439"></a>00439             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a4f2bc74a1a745e4715c9074b4167a91e">File::KEYWORD_IMPORTCOMMANDS</a>):
<a name="l00440"></a>00440                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;import_commands = <span class="keyword">true</span>;
<a name="l00441"></a>00441                 line_finished = <span class="keyword">true</span>;
<a name="l00442"></a>00442                 <span class="keywordflow">break</span>;
<a name="l00443"></a>00443 
<a name="l00444"></a>00444             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ab11a28ed2af9c828fdffb1630efb8896">File::KEYWORD_LOCKGROUPS</a>):
<a name="l00445"></a>00445                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a717f0f69ea6e180a8a70a1b6770ad439">File::SECTION_LOCKGROUPS</a>;
<a name="l00446"></a>00446                 line_finished = <span class="keyword">true</span>;
<a name="l00447"></a>00447                 <span class="keywordflow">break</span>;
<a name="l00448"></a>00448 
<a name="l00449"></a>00449             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a7471fe037413b67dfb7e5c3f5b7503d1">File::KEYWORD_LOCKGROUP_DEFAULT_NOLOCK</a>):
<a name="l00450"></a>00450                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00451"></a>00451                 {
<a name="l00452"></a>00452                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Directive &#39;lockgroup_default_nolock&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00453"></a>00453                 }
<a name="l00454"></a>00454                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;lockgroup_default_nolock = <span class="keyword">true</span>;
<a name="l00455"></a>00455                 line_finished = <span class="keyword">true</span>;
<a name="l00456"></a>00456                 <span class="keywordflow">break</span>;
<a name="l00457"></a>00457 
<a name="l00458"></a>00458             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a082fd286e710c7d126babe0d7ac018b8">File::KEYWORD_MANAGEDMATERIALS</a>):
<a name="l00459"></a>00459                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a69b6679e8b11e71f6f4fc25c6cc6486d">File::SECTION_MANAGED_MATERIALS</a>;
<a name="l00460"></a>00460                 line_finished = <span class="keyword">true</span>;
<a name="l00461"></a>00461                 <span class="keywordflow">break</span>;
<a name="l00462"></a>00462 
<a name="l00463"></a>00463             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a16eaba09d395727390640d310dfdc098">File::KEYWORD_MATERIALFLAREBINDINGS</a>):
<a name="l00464"></a>00464                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a898d573ad549a20767c0a732e68b41a7">File::SECTION_MATERIAL_FLARE_BINDINGS</a>;
<a name="l00465"></a>00465                 line_finished = <span class="keyword">true</span>;
<a name="l00466"></a>00466                 <span class="keywordflow">break</span>;
<a name="l00467"></a>00467 
<a name="l00468"></a>00468             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a3075e37548ce1e539d7f56fca035b56b">File::KEYWORD_MESHWHEELS</a>):
<a name="l00469"></a>00469                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a7e70d63e1710e464249cd69f01642bf7">File::SECTION_MESH_WHEELS</a>;
<a name="l00470"></a>00470                 line_finished = <span class="keyword">true</span>;
<a name="l00471"></a>00471                 <span class="keywordflow">break</span>;
<a name="l00472"></a>00472 
<a name="l00473"></a>00473             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3af8622fd1cf2cedf11cfe390251b32947">File::KEYWORD_MESHWHEELS2</a>):
<a name="l00474"></a>00474                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a4b2284fbd1a0ea9fdb5ce22a31071a82">File::SECTION_MESH_WHEELS_2</a>;
<a name="l00475"></a>00475                 line_finished = <span class="keyword">true</span>;
<a name="l00476"></a>00476                 <span class="keywordflow">break</span>;
<a name="l00477"></a>00477 
<a name="l00478"></a>00478             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a64a943757283b7eb73c47bea1dcc0cfd">File::KEYWORD_MINIMASS</a>):
<a name="l00479"></a>00479                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a7c05f839bbfdbdbbd9c92656c4d665f5">File::SECTION_MINIMASS</a>;
<a name="l00480"></a>00480                 line_finished = <span class="keyword">true</span>;
<a name="l00481"></a>00481                 <span class="keywordflow">break</span>;
<a name="l00482"></a>00482 
<a name="l00483"></a>00483             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aa6e4a49c5050f2909b223237a7c69b33">File::KEYWORD_NODECOLLISION</a>):
<a name="l00484"></a>00484                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a38957529ac4324b17a714d12fdcfd1a4">File::SECTION_NODE_COLLISION</a>;
<a name="l00485"></a>00485                 line_finished = <span class="keyword">true</span>;
<a name="l00486"></a>00486                 <span class="keywordflow">break</span>;
<a name="l00487"></a>00487 
<a name="l00488"></a>00488             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3abeabad55e7db566295c63ddef3bf435c">File::KEYWORD_NODES</a>):
<a name="l00489"></a>00489                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab21f910b6f0acba9a26288f750578e79">File::SECTION_NODES</a>;
<a name="l00490"></a>00490                 line_finished = <span class="keyword">true</span>;
<a name="l00491"></a>00491                 <span class="keywordflow">break</span>;
<a name="l00492"></a>00492 
<a name="l00493"></a>00493             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3adcb74615952c692889b06ccbc18862d6">File::KEYWORD_NODES2</a>):
<a name="l00494"></a>00494                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a584dd310bc4acf2286c64507705f54bb">File::SECTION_NODES_2</a>;
<a name="l00495"></a>00495                 line_finished = <span class="keyword">true</span>;
<a name="l00496"></a>00496                 <span class="keywordflow">break</span>;
<a name="l00497"></a>00497 
<a name="l00498"></a>00498             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3abbe97ab83c2f38d9da17ee50d411b94e">File::KEYWORD_PARTICLES</a>):
<a name="l00499"></a>00499                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a614cfff1ca56862de9692d13f1e9cf69">File::SECTION_PARTICLES</a>;
<a name="l00500"></a>00500                 line_finished = <span class="keyword">true</span>;
<a name="l00501"></a>00501                 <span class="keywordflow">break</span>;
<a name="l00502"></a>00502 
<a name="l00503"></a>00503             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ac397f226a4f0d8018cddab1e5630331a">File::KEYWORD_PISTONPROPS</a>):
<a name="l00504"></a>00504                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab6f2299b3c5d23448e7680595c4e4137">File::SECTION_PISTONPROPS</a>;
<a name="l00505"></a>00505                 line_finished = <span class="keyword">true</span>;
<a name="l00506"></a>00506                 <span class="keywordflow">break</span>;
<a name="l00507"></a>00507 
<a name="l00508"></a>00508             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a6778defd5211d623c8c6c46fcbc4d1f5">File::KEYWORD_PROP_CAMERA_MODE</a>):
<a name="l00509"></a>00509                 <a class="code" href="class_rig_def_1_1_parser.html#a66298bf2aa7a61d3ffed0145c5c1da0a">ParseDirectivePropCameraMode</a>(line);
<a name="l00510"></a>00510                 line_finished = <span class="keyword">true</span>;
<a name="l00511"></a>00511                 <span class="keywordflow">break</span>;
<a name="l00512"></a>00512 
<a name="l00513"></a>00513             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a6df6331c33d142f284dbc5dfa4085d08">File::KEYWORD_PROPS</a>):
<a name="l00514"></a>00514                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ac7789a08e9a47e907375f8d78eb4bf28">File::SECTION_PROPS</a>;
<a name="l00515"></a>00515                 line_finished = <span class="keyword">true</span>;
<a name="l00516"></a>00516                 <span class="keywordflow">break</span>;
<a name="l00517"></a>00517 
<a name="l00518"></a>00518             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3abda71ccf93db143b77b8fa0f91435e43">File::KEYWORD_RAILGROUPS</a>):
<a name="l00519"></a>00519                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a4e3bc048421b685578dfea2dd9e76415">File::SECTION_RAILGROUPS</a>;
<a name="l00520"></a>00520                 line_finished = <span class="keyword">true</span>;
<a name="l00521"></a>00521                 <span class="keywordflow">break</span>;
<a name="l00522"></a>00522 
<a name="l00523"></a>00523             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a622c37f7f34642439f1e8c9f61f2a3ff">File::KEYWORD_RESCUER</a>):
<a name="l00524"></a>00524                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00525"></a>00525                 {
<a name="l00526"></a>00526                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Directive &#39;rescuer&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00527"></a>00527                 }
<a name="l00528"></a>00528                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;rescuer = <span class="keyword">true</span>;
<a name="l00529"></a>00529                 line_finished = <span class="keyword">true</span>;
<a name="l00530"></a>00530                 <span class="keywordflow">break</span>;
<a name="l00531"></a>00531 
<a name="l00532"></a>00532             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a0e6eeb725959e74b91bfffeec72a7ddb">File::KEYWORD_RIGIDIFIERS</a>):
<a name="l00533"></a>00533                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Rigidifiers are not supported, ignoring...&quot;</span>);
<a name="l00534"></a>00534                 line_finished = <span class="keyword">true</span>;
<a name="l00535"></a>00535                 <span class="keywordflow">break</span>;
<a name="l00536"></a>00536 
<a name="l00537"></a>00537             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aa0bbc2df086e5769381766fd35a08467">File::KEYWORD_ROLLON</a>):
<a name="l00538"></a>00538                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00539"></a>00539                 {
<a name="l00540"></a>00540                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Directive &#39;rollon&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00541"></a>00541                 }
<a name="l00542"></a>00542                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;rollon = <span class="keyword">true</span>;
<a name="l00543"></a>00543                 line_finished = <span class="keyword">true</span>;
<a name="l00544"></a>00544                 <span class="keywordflow">break</span>;
<a name="l00545"></a>00545 
<a name="l00546"></a>00546             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a9ab7a90a695d00562a65df87675825b4">File::KEYWORD_ROPABLES</a>):
<a name="l00547"></a>00547                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a8e3330757c0abd1fd1396bb714d1bcf5">File::SECTION_ROPABLES</a>;
<a name="l00548"></a>00548                 line_finished = <span class="keyword">true</span>;
<a name="l00549"></a>00549                 <span class="keywordflow">break</span>;
<a name="l00550"></a>00550 
<a name="l00551"></a>00551             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ac0b5a69af15015576c09180a5efeecae">File::KEYWORD_ROPES</a>):
<a name="l00552"></a>00552                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a570ea5086faf1b13d8fcee785b741c61">File::SECTION_ROPES</a>;
<a name="l00553"></a>00553                 line_finished = <span class="keyword">true</span>;
<a name="l00554"></a>00554                 <span class="keywordflow">break</span>;
<a name="l00555"></a>00555 
<a name="l00556"></a>00556             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a8241a088c6cc101ff66d79096a211cf8">File::KEYWORD_ROTATORS</a>):
<a name="l00557"></a>00557                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a5a951b8381d6e7e6039b14744fa36ded">File::SECTION_ROTATORS</a>;
<a name="l00558"></a>00558                 line_finished = <span class="keyword">true</span>;
<a name="l00559"></a>00559                 <span class="keywordflow">break</span>;
<a name="l00560"></a>00560 
<a name="l00561"></a>00561             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a2a70cd5d50b8479ce1014eba5a06d636">File::KEYWORD_ROTATORS2</a>):
<a name="l00562"></a>00562                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3aa3c8d2a3a1bd761418eadcdbcb53f677">File::SECTION_ROTATORS_2</a>;
<a name="l00563"></a>00563                 line_finished = <span class="keyword">true</span>;
<a name="l00564"></a>00564                 <span class="keywordflow">break</span>;
<a name="l00565"></a>00565 
<a name="l00566"></a>00566             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a6befc0ed8ee229cfd884cf6734a12b2a">File::KEYWORD_SCREWPROPS</a>):
<a name="l00567"></a>00567                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a0c51fb474f4bb17d44136878d3507b2b">File::SECTION_SCREWPROPS</a>;
<a name="l00568"></a>00568                 line_finished = <span class="keyword">true</span>;
<a name="l00569"></a>00569                 <span class="keywordflow">break</span>;
<a name="l00570"></a>00570 
<a name="l00571"></a>00571             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a0851112d08e33857089d007626159cb1">File::KEYWORD_SECTION</a>):
<a name="l00572"></a>00572                 {
<a name="l00573"></a>00573                     std::pair&lt;bool, Ogre::String&gt; result = <a class="code" href="class_rig_def_1_1_parser.html#a1302932396c4ddec89f56bf02f9278ce">GetModuleName</a>(line);
<a name="l00574"></a>00574                     <span class="keywordflow">if</span> (result.first)
<a name="l00575"></a>00575                     {
<a name="l00576"></a>00576                         new_module_name = result.second;
<a name="l00577"></a>00577                         module_changed = <span class="keyword">true</span>;
<a name="l00578"></a>00578                     }
<a name="l00579"></a>00579                 }
<a name="l00580"></a>00580                 line_finished = <span class="keyword">true</span>;
<a name="l00581"></a>00581                 <span class="keywordflow">break</span>;
<a name="l00582"></a>00582 
<a name="l00583"></a>00583             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a3d04f27fcc7da553cf2916ec22cbb1e6">File::KEYWORD_SECTIONCONFIG</a>):
<a name="l00584"></a>00584                 <span class="comment">/* Ignored */</span>
<a name="l00585"></a>00585                 line_finished = <span class="keyword">true</span>;
<a name="l00586"></a>00586                 <span class="keywordflow">break</span>;
<a name="l00587"></a>00587 
<a name="l00588"></a>00588             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a88b5ef93fa85f30425a61b47744e1e2d">File::KEYWORD_SET_BEAM_DEFAULTS</a>):
<a name="l00589"></a>00589                 <a class="code" href="class_rig_def_1_1_parser.html#aa7947438fbafe5c606b36c6436617002">ParseDirectiveSetBeamDefaults</a>(line);
<a name="l00590"></a>00590                 line_finished = <span class="keyword">true</span>;
<a name="l00591"></a>00591                 <span class="keywordflow">break</span>;
<a name="l00592"></a>00592 
<a name="l00593"></a>00593             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a1f38f7050b50cfb21950af714c0fb0b5">File::KEYWORD_SET_BEAM_DEFAULTS_SCALE</a>):
<a name="l00594"></a>00594                 <a class="code" href="class_rig_def_1_1_parser.html#ac66f0cffff38d1c74aec140ebb48ec9d">ParseDirectiveSetBeamDefaultsScale</a>(line);
<a name="l00595"></a>00595                 line_finished = <span class="keyword">true</span>;
<a name="l00596"></a>00596                 <span class="keywordflow">break</span>;
<a name="l00597"></a>00597 
<a name="l00598"></a>00598             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a959fb631ac2e6c676b1fcd86d47b1103">File::KEYWORD_SET_COLLISION_RANGE</a>):
<a name="l00599"></a>00599                 <a class="code" href="class_rig_def_1_1_parser.html#a61c230b72ffc7d1a1db0c4123630858e">ParseSetCollisionRange</a>(line);
<a name="l00600"></a>00600                 line_finished = <span class="keyword">true</span>;
<a name="l00601"></a>00601                 <span class="keywordflow">break</span>;
<a name="l00602"></a>00602 
<a name="l00603"></a>00603             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a0a0344848e38f07490f798af4800161f">File::KEYWORD_SET_INERTIA_DEFAULTS</a>):
<a name="l00604"></a>00604                 <a class="code" href="class_rig_def_1_1_parser.html#aa97b576c0424313c62f430dac370edf1">ParseDirectiveSetInertiaDefaults</a>(line);
<a name="l00605"></a>00605                 line_finished = <span class="keyword">true</span>;
<a name="l00606"></a>00606                 <span class="keywordflow">break</span>;
<a name="l00607"></a>00607 
<a name="l00608"></a>00608             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a58e32daba642e5a8c0be18766dd191ad">File::KEYWORD_SET_MANAGEDMATERIALS_OPTIONS</a>):
<a name="l00609"></a>00609                 <a class="code" href="class_rig_def_1_1_parser.html#aaec52db2c1724db29b52725d1c4884d9">ParseDirectiveSetManagedMaterialsOptions</a>(line);
<a name="l00610"></a>00610                 line_finished = <span class="keyword">true</span>;
<a name="l00611"></a>00611                 <span class="keywordflow">break</span>;
<a name="l00612"></a>00612 
<a name="l00613"></a>00613             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a0468cabdefd120144e0c951897ae8017">File::KEYWORD_SET_NODE_DEFAULTS</a>):
<a name="l00614"></a>00614                 <a class="code" href="class_rig_def_1_1_parser.html#abd86a890091ebd98eafc28e465861c50">ParseDirectiveSetNodeDefaults</a>(line);
<a name="l00615"></a>00615                 line_finished = <span class="keyword">true</span>;
<a name="l00616"></a>00616                 <span class="keywordflow">break</span>;
<a name="l00617"></a>00617 
<a name="l00618"></a>00618             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a324fe9880821ae0e87517484802d0ffe">File::KEYWORD_SET_SKELETON_SETTINGS</a>):
<a name="l00619"></a>00619                 <a class="code" href="class_rig_def_1_1_parser.html#a6cb831fce75a9938b549237f882b8fc9">ParseSetSkeletonSettings</a>(line);
<a name="l00620"></a>00620                 line_finished = <span class="keyword">true</span>;
<a name="l00621"></a>00621                 <span class="keywordflow">break</span>;
<a name="l00622"></a>00622 
<a name="l00623"></a>00623             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a9f6516bfbe703a78922cbe00df637bac">File::KEYWORD_SHOCKS</a>):
<a name="l00624"></a>00624                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a52b9b9ca92bd9977a7f59dfa8b7f130a">File::SECTION_SHOCKS</a>;
<a name="l00625"></a>00625                 line_finished = <span class="keyword">true</span>;
<a name="l00626"></a>00626                 <span class="keywordflow">break</span>;
<a name="l00627"></a>00627 
<a name="l00628"></a>00628             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a79bc23ca78568c5baf068f69f488045d">File::KEYWORD_SHOCKS2</a>):
<a name="l00629"></a>00629                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a10375f11a6ed0497b64c119772fb11e0">File::SECTION_SHOCKS_2</a>;
<a name="l00630"></a>00630                 line_finished = <span class="keyword">true</span>;
<a name="l00631"></a>00631                 <span class="keywordflow">break</span>;
<a name="l00632"></a>00632 
<a name="l00633"></a>00633             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3afc2702abe7d2b70ea9b2236b660cfd1c">File::KEYWORD_SLIDENODE_CONNECT_INSTANTLY</a>):
<a name="l00634"></a>00634                 <span class="keywordflow">if</span> (! current_module_is_root)
<a name="l00635"></a>00635                 {
<a name="l00636"></a>00636                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Directive &#39;slidenode_connect_instantly&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l00637"></a>00637                 }
<a name="l00638"></a>00638                 <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;slide_nodes_connect_instantly = <span class="keyword">true</span>;
<a name="l00639"></a>00639                 line_finished = <span class="keyword">true</span>;
<a name="l00640"></a>00640                 <span class="keywordflow">break</span>;
<a name="l00641"></a>00641 
<a name="l00642"></a>00642             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a892d737d5dfe9bf69b34afddf44d5ac4">File::KEYWORD_SLIDENODES</a>):
<a name="l00643"></a>00643                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad868b5e57b1d74b2a99e97014ac69433">File::SECTION_SLIDENODES</a>;
<a name="l00644"></a>00644                 line_finished = <span class="keyword">true</span>;
<a name="l00645"></a>00645                 <span class="keywordflow">break</span>;
<a name="l00646"></a>00646 
<a name="l00647"></a>00647             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ad2e78ff66a75c49013dc1213942dc0ec">File::KEYWORD_SLOPE_BRAKE</a>):
<a name="l00648"></a>00648                 <a class="code" href="class_rig_def_1_1_parser.html#ad9376d5aabb1373391a692f2978f99d6">ParseSlopeBrake</a>(line);
<a name="l00649"></a>00649                 line_finished = <span class="keyword">true</span>;
<a name="l00650"></a>00650                 <span class="keywordflow">break</span>;
<a name="l00651"></a>00651 
<a name="l00652"></a>00652             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ae1eac3295bec00013d68e647febad783">File::KEYWORD_SOUNDSOURCES</a>):
<a name="l00653"></a>00653                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a302791545a31fee7fd275f121ed5b55d">File::SECTION_SOUNDSOURCES</a>;
<a name="l00654"></a>00654                 line_finished = <span class="keyword">true</span>;
<a name="l00655"></a>00655                 <span class="keywordflow">break</span>;
<a name="l00656"></a>00656 
<a name="l00657"></a>00657             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a52292daa17b126de652d58878c8b0bf1">File::KEYWORD_SOUNDSOURCES2</a>):
<a name="l00658"></a>00658                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a01db610bafd5d1c727e67ad7b48e64f7">File::SECTION_SOUNDSOURCES2</a>;
<a name="l00659"></a>00659                 line_finished = <span class="keyword">true</span>;
<a name="l00660"></a>00660                 <span class="keywordflow">break</span>;
<a name="l00661"></a>00661 
<a name="l00662"></a>00662 <span class="preprocessor">#if 0 // Not supported yet</span>
<a name="l00663"></a>00663 <span class="preprocessor"></span>            <span class="keywordflow">case</span> (File::KEYWORD_SOUNDSOURCES3):
<a name="l00664"></a>00664                 new_section = File::SECTION_;
<a name="l00665"></a>00665                 line_finished = <span class="keyword">true</span>;
<a name="l00666"></a>00666                 <span class="keywordflow">break</span>;
<a name="l00667"></a>00667 <span class="preprocessor">#endif</span>
<a name="l00668"></a>00668 <span class="preprocessor"></span>            <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ab0ac112d3d3d024e04c40c7e4a32b494">File::KEYWORD_SPEEDLIMITER</a>):
<a name="l00669"></a>00669                 <a class="code" href="class_rig_def_1_1_parser.html#a641890714c22f010d624bb9f6c6259e5">ParseSpeedLimiter</a>(line);
<a name="l00670"></a>00670                 line_finished = <span class="keyword">true</span>;
<a name="l00671"></a>00671                 <span class="keywordflow">break</span>;
<a name="l00672"></a>00672 
<a name="l00673"></a>00673             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a5a08b19a89c168922d73a630be2c1f96">File::KEYWORD_SUBMESH_GROUNDMODEL</a>):
<a name="l00674"></a>00674                 <a class="code" href="class_rig_def_1_1_parser.html#a4ba258100b510788f03a46acc84cd65c">ParseSubmeshGroundModel</a>(line);
<a name="l00675"></a>00675                 line_finished = <span class="keyword">true</span>;
<a name="l00676"></a>00676                 <span class="keywordflow">break</span>;
<a name="l00677"></a>00677 
<a name="l00678"></a>00678             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a3e4c3ea72df716f17bd4e3e8d1d9dc90">File::KEYWORD_SUBMESH</a>):
<a name="l00679"></a>00679                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9072c5f4d5f452a6db0a34e5c96a15d1">File::SECTION_SUBMESH</a>;
<a name="l00680"></a>00680                 line_finished = <span class="keyword">true</span>;
<a name="l00681"></a>00681                 <span class="keywordflow">break</span>;
<a name="l00682"></a>00682 
<a name="l00683"></a>00683             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a1b73e0056dcd8da8f4a9557dfb683245">File::KEYWORD_TEXCOORDS</a>):
<a name="l00684"></a>00684                 <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9072c5f4d5f452a6db0a34e5c96a15d1">File::SECTION_SUBMESH</a>)
<a name="l00685"></a>00685                 {
<a name="l00686"></a>00686                     new_subsection = <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaeaa8f7beeb2c069c79e31a25faf9d1eb8b">File::SUBSECTION__SUBMESH__TEXCOORDS</a>;
<a name="l00687"></a>00687                 }
<a name="l00688"></a>00688                 <span class="keywordflow">else</span>
<a name="l00689"></a>00689                 {
<a name="l00690"></a>00690                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Misplaced sub-section &#39;texcoords&#39; (belongs in section &#39;submesh&#39;), ignoring...&quot;</span>);
<a name="l00691"></a>00691                 }
<a name="l00692"></a>00692                 line_finished = <span class="keyword">true</span>;
<a name="l00693"></a>00693                 <span class="keywordflow">break</span>;
<a name="l00694"></a>00694 
<a name="l00695"></a>00695             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aba5ce9cd6b1f1c44da122ac47f83984a">File::KEYWORD_TIES</a>):
<a name="l00696"></a>00696                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a43aec5d6ff9eaec6405035c75c7be104">File::SECTION_TIES</a>;
<a name="l00697"></a>00697                 line_finished = <span class="keyword">true</span>;
<a name="l00698"></a>00698                 <span class="keywordflow">break</span>;
<a name="l00699"></a>00699 
<a name="l00700"></a>00700             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a8fe9bf37e4ce3e2fb9c8393f10851701">File::KEYWORD_TORQUECURVE</a>):
<a name="l00701"></a>00701                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a26cd8c660131d80c14f3b50e7a79c360">File::SECTION_TORQUE_CURVE</a>;
<a name="l00702"></a>00702                 line_finished = <span class="keyword">true</span>;
<a name="l00703"></a>00703                 <span class="keywordflow">break</span>;
<a name="l00704"></a>00704 
<a name="l00705"></a>00705             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ae8c56a98d770778456bd06c181473d90">File::KEYWORD_TRACTION_CONTROL</a>):
<a name="l00706"></a>00706                 <a class="code" href="class_rig_def_1_1_parser.html#a3f41e21c3e79edaf707548c887f390db">ParseTractionControl</a>(line);
<a name="l00707"></a>00707                 line_finished = <span class="keyword">true</span>;
<a name="l00708"></a>00708                 <span class="keywordflow">break</span>;
<a name="l00709"></a>00709 
<a name="l00710"></a>00710             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a3b92a7c353baf2d56c033dad5427360f">File::KEYWORD_TRIGGERS</a>):
<a name="l00711"></a>00711                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a28c82d463e8cba9d409ad691518a872b">File::SECTION_TRIGGERS</a>;
<a name="l00712"></a>00712                 line_finished = <span class="keyword">true</span>;
<a name="l00713"></a>00713                 <span class="keywordflow">break</span>;
<a name="l00714"></a>00714 
<a name="l00715"></a>00715             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ab978bf2bf45d9389065293251b5de7f7">File::KEYWORD_TURBOJETS</a>):
<a name="l00716"></a>00716                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab14092a732479b4bebce92d667784999">File::SECTION_TURBOJETS</a>;
<a name="l00717"></a>00717                 line_finished = <span class="keyword">true</span>;
<a name="l00718"></a>00718                 <span class="keywordflow">break</span>;
<a name="l00719"></a>00719 
<a name="l00720"></a>00720             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3ad4ce6ddefc834389c6bff8f789fe4032">File::KEYWORD_TURBOPROPS</a>):
<a name="l00721"></a>00721                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a54df59a95aa3716a65ec19802e9028b3">File::SECTION_TURBOPROPS</a>;
<a name="l00722"></a>00722                 line_finished = <span class="keyword">true</span>;
<a name="l00723"></a>00723                 <span class="keywordflow">break</span>;
<a name="l00724"></a>00724 
<a name="l00725"></a>00725             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a2898bff705371dddd61810bfb0f22d1d">File::KEYWORD_TURBOPROPS2</a>):
<a name="l00726"></a>00726                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Turboprops2 are not supported, ignoring...&quot;</span>);
<a name="l00727"></a>00727                 line_finished = <span class="keyword">true</span>;
<a name="l00728"></a>00728                 <span class="keywordflow">break</span>;
<a name="l00729"></a>00729 
<a name="l00730"></a>00730             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a75ae70eeeb2a54149c37e114fb81d0f5">File::KEYWORD_VIDEOCAMERA</a>):
<a name="l00731"></a>00731                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a1f47154c5052cf1b7d575db0f69477dd">File::SECTION_VIDEO_CAMERA</a>;
<a name="l00732"></a>00732                 line_finished = <span class="keyword">true</span>;
<a name="l00733"></a>00733                 <span class="keywordflow">break</span>;
<a name="l00734"></a>00734 
<a name="l00735"></a>00735             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aee3e3b2faa2d33fa6aa1ddb2c859586d">File::KEYWORD_WHEELS</a>):
<a name="l00736"></a>00736                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a44fde84b0949ed4da58b7894918ad9b4">File::SECTION_WHEELS</a>;
<a name="l00737"></a>00737                 line_finished = <span class="keyword">true</span>;
<a name="l00738"></a>00738                 <span class="keywordflow">break</span>;
<a name="l00739"></a>00739 
<a name="l00740"></a>00740             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aa9f7311050b4eb77977c470136c793aa">File::KEYWORD_WHEELS2</a>):
<a name="l00741"></a>00741                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad37624cbd2bba9432fd1d3bea9e7614f">File::SECTION_WHEELS_2</a>;
<a name="l00742"></a>00742                 line_finished = <span class="keyword">true</span>;
<a name="l00743"></a>00743                 <span class="keywordflow">break</span>;
<a name="l00744"></a>00744 
<a name="l00745"></a>00745             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aec30083ce860e8874f37a453cb5fa653">File::KEYWORD_WINGS</a>):
<a name="l00746"></a>00746                 new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad7e1036237552a5fea2fb317390460f8">File::SECTION_WINGS</a>;
<a name="l00747"></a>00747                 line_finished = <span class="keyword">true</span>;
<a name="l00748"></a>00748                 <span class="keywordflow">break</span>;
<a name="l00749"></a>00749 
<a name="l00750"></a>00750         }
<a name="l00751"></a>00751     }
<a name="l00752"></a>00752 
<a name="l00753"></a>00753     <span class="keywordflow">if</span> (module_changed)
<a name="l00754"></a>00754     {
<a name="l00755"></a>00755         new_section = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a4daca4ee07a5de8c209e079765ea43fd" title="Right after rig name, for example.">File::SECTION_NONE</a>; <span class="comment">/* Make parser commit unfinished work, actual module switch happens afterwards. */</span>    
<a name="l00756"></a>00756     }
<a name="l00757"></a>00757 
<a name="l00758"></a>00758     <span class="comment">/* Section-specific switch logic */</span>
<a name="l00759"></a>00759     <span class="keywordflow">if</span> (new_section != <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9065cc0451e962990c61a34730745a49">File::SECTION_INVALID</a>)
<a name="l00760"></a>00760     {
<a name="l00761"></a>00761         <span class="comment">/* Exit sections */</span>
<a name="l00762"></a>00762         <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9072c5f4d5f452a6db0a34e5c96a15d1">File::SECTION_SUBMESH</a>)
<a name="l00763"></a>00763         {
<a name="l00764"></a>00764             <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;submeshes.push_back(*<a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>);
<a name="l00765"></a>00765             <a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>.reset();
<a name="l00766"></a>00766             <a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> = <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea2fc6aec3ca8ec236d683b6824cac783d">File::SUBSECTION_NONE</a>;
<a name="l00767"></a>00767         }
<a name="l00768"></a>00768         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad0e83608ba8e70227b2f21d4a78f8edf">File::SECTION_CAMERA_RAIL</a>)
<a name="l00769"></a>00769         {
<a name="l00770"></a>00770             <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ac262cf9239e4786121c0ee2a3b55611e" title="Parser state.">m_current_camera_rail</a>-&gt;nodes.size() == 0)
<a name="l00771"></a>00771             {
<a name="l00772"></a>00772                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Empty section &#39;camerarail&#39;, ignoring...&quot;</span>);
<a name="l00773"></a>00773             }
<a name="l00774"></a>00774             <span class="keywordflow">else</span>
<a name="l00775"></a>00775             {
<a name="l00776"></a>00776                 <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;camera_rails.push_back(*<a class="code" href="class_rig_def_1_1_parser.html#ac262cf9239e4786121c0ee2a3b55611e" title="Parser state.">m_current_camera_rail</a>);
<a name="l00777"></a>00777                 <a class="code" href="class_rig_def_1_1_parser.html#ac262cf9239e4786121c0ee2a3b55611e" title="Parser state.">m_current_camera_rail</a>.reset();
<a name="l00778"></a>00778             }
<a name="l00779"></a>00779         }
<a name="l00780"></a>00780         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3af0e945673c2558cc9197244582cb1c3a">File::SECTION_FLEXBODIES</a>)
<a name="l00781"></a>00781         {
<a name="l00782"></a>00782             <a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> = <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea2fc6aec3ca8ec236d683b6824cac783d">File::SUBSECTION_NONE</a>;
<a name="l00783"></a>00783         }
<a name="l00784"></a>00784         
<a name="l00785"></a>00785         <span class="comment">/* Enter sections */</span>
<a name="l00786"></a>00786         <span class="keywordflow">if</span> (new_section == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9072c5f4d5f452a6db0a34e5c96a15d1">File::SECTION_SUBMESH</a>)
<a name="l00787"></a>00787         {
<a name="l00788"></a>00788             <a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a> = boost::shared_ptr&lt;Submesh&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_submesh.html">Submesh</a>() );
<a name="l00789"></a>00789         }
<a name="l00790"></a>00790         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_section == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad0e83608ba8e70227b2f21d4a78f8edf">File::SECTION_CAMERA_RAIL</a>)
<a name="l00791"></a>00791         {
<a name="l00792"></a>00792             <a class="code" href="class_rig_def_1_1_parser.html#ac262cf9239e4786121c0ee2a3b55611e" title="Parser state.">m_current_camera_rail</a> = boost::shared_ptr&lt;CameraRail&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_camera_rail.html">CameraRail</a>() );
<a name="l00793"></a>00793         }
<a name="l00794"></a>00794         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_section == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3af0e945673c2558cc9197244582cb1c3a">File::SECTION_FLEXBODIES</a>)
<a name="l00795"></a>00795         {
<a name="l00796"></a>00796             <a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> = <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea26c6f5e01284a4eeeec2614d3812579b">File::SUBSECTION__FLEXBODIES__PROPLIKE_LINE</a>;
<a name="l00797"></a>00797         }
<a name="l00798"></a>00798         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_section == <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a62320731dc4403e7424da19f2f44ca13">File::SECTION_GUI_SETTINGS</a>)
<a name="l00799"></a>00799         {
<a name="l00800"></a>00800             <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings == <span class="keyword">nullptr</span>)
<a name="l00801"></a>00801             {
<a name="l00802"></a>00802                 <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings = boost::shared_ptr&lt;GuiSettings&gt; ( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_gui_settings.html">GuiSettings</a>() );
<a name="l00803"></a>00803             }
<a name="l00804"></a>00804         }
<a name="l00805"></a>00805 
<a name="l00806"></a>00806         <a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> = new_section;
<a name="l00807"></a>00807     }
<a name="l00808"></a>00808     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (new_subsection != <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea040016593637894eaf912d9c2c543185">File::SUBSECTION_INVALID</a>)
<a name="l00809"></a>00809     {
<a name="l00810"></a>00810         <a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> = new_subsection;
<a name="l00811"></a>00811     }
<a name="l00812"></a>00812 
<a name="l00813"></a>00813     <span class="comment">/* Module-switching */</span>
<a name="l00814"></a>00814     <span class="keywordflow">if</span> (module_changed)
<a name="l00815"></a>00815     {
<a name="l00816"></a>00816         <a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a>.reset(); <span class="comment">// Set to nullptr</span>
<a name="l00817"></a>00817 
<a name="l00818"></a>00818         <span class="keywordflow">if</span> (new_module_is_root)
<a name="l00819"></a>00819         {
<a name="l00820"></a>00820             <span class="keywordflow">if</span> (current_module_is_root)
<a name="l00821"></a>00821             {
<a name="l00822"></a>00822                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Misplaced keyword &#39;end_section&#39;, ignoring...&quot;</span>);
<a name="l00823"></a>00823             }
<a name="l00824"></a>00824             <span class="keywordflow">else</span>
<a name="l00825"></a>00825             {
<a name="l00826"></a>00826                 <a class="code" href="class_rig_def_1_1_parser.html#a7d47c54e0875d806b9e5557ae1816909">RestoreRootModule</a>();
<a name="l00827"></a>00827             }
<a name="l00828"></a>00828         }
<a name="l00829"></a>00829         <span class="keywordflow">else</span>
<a name="l00830"></a>00830         {
<a name="l00831"></a>00831             <span class="keywordflow">if</span> (current_module_name == new_module_name)
<a name="l00832"></a>00832             {
<a name="l00833"></a>00833                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Attempt to re-enter current module, ignoring...&quot;</span>);
<a name="l00834"></a>00834             }
<a name="l00835"></a>00835             <span class="keywordflow">else</span>
<a name="l00836"></a>00836             {
<a name="l00837"></a>00837                 <a class="code" href="class_rig_def_1_1_parser.html#a858de6caf1406d0264cf211e1af6c64a">SetCurrentModule</a>(new_module_name);
<a name="l00838"></a>00838             }
<a name="l00839"></a>00839         }
<a name="l00840"></a>00840     }
<a name="l00841"></a>00841 
<a name="l00842"></a>00842     <span class="comment">/* Continue? */</span>
<a name="l00843"></a>00843     <span class="keywordflow">if</span> (line_finished)
<a name="l00844"></a>00844     {
<a name="l00845"></a>00845         <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>++;
<a name="l00846"></a>00846         <span class="keywordflow">return</span>;
<a name="l00847"></a>00847     }
<a name="l00848"></a>00848 
<a name="l00849"></a>00849     <span class="comment">/* Parse current section, if any */</span>
<a name="l00850"></a>00850     <span class="comment">/* NOTE: Please maintain alphabetical order */</span>
<a name="l00851"></a>00851     <span class="keywordflow">switch</span> (<a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a>)
<a name="l00852"></a>00852     {
<a name="l00853"></a>00853 
<a name="l00854"></a>00854         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a557681a14fbd8eb79b31fb5ff66bb959">File::SECTION_AIRBRAKES</a>):
<a name="l00855"></a>00855             <a class="code" href="class_rig_def_1_1_parser.html#a41ed1c66aa3754e36123e0bdb320ab69">ParseAirbrakes</a>(line);
<a name="l00856"></a>00856             line_finished = <span class="keyword">true</span>;
<a name="l00857"></a>00857             <span class="keywordflow">break</span>;
<a name="l00858"></a>00858 
<a name="l00859"></a>00859         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3afe43c599bb22910e02c8e3e3ae29cf07">File::SECTION_ANIMATORS</a>):
<a name="l00860"></a>00860             <a class="code" href="class_rig_def_1_1_parser.html#ab8fd3f263bf51736b6c18420f27d8338">ParseAnimator</a>(line);
<a name="l00861"></a>00861             line_finished = <span class="keyword">true</span>;
<a name="l00862"></a>00862             <span class="keywordflow">break</span>;
<a name="l00863"></a>00863 
<a name="l00864"></a>00864         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a4f8bee8e02af7db96289b085d8464a5e">File::SECTION_AXLES</a>):
<a name="l00865"></a>00865             <a class="code" href="class_rig_def_1_1_parser.html#a0a2f5ed5d6bcbb452c389ee838e08af9">ParseAxles</a>(line);
<a name="l00866"></a>00866             line_finished = <span class="keyword">true</span>;
<a name="l00867"></a>00867             <span class="keywordflow">break</span>;
<a name="l00868"></a>00868 
<a name="l00869"></a>00869         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a98a961751b1beb9b62a0a96ba4d90c5c" title="The very start of file.">File::SECTION_TRUCK_NAME</a>):
<a name="l00870"></a>00870             <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;name = Ogre::String(line);
<a name="l00871"></a>00871             Ogre::StringUtil::trim(<a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;name);
<a name="l00872"></a>00872             <a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a4daca4ee07a5de8c209e079765ea43fd" title="Right after rig name, for example.">File::SECTION_NONE</a>;
<a name="l00873"></a>00873             line_finished = <span class="keyword">true</span>;
<a name="l00874"></a>00874             <span class="keywordflow">break</span>;
<a name="l00875"></a>00875 
<a name="l00876"></a>00876         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a3a5d0d62d3fbb089f647273981cf5988">File::SECTION_BEAMS</a>):
<a name="l00877"></a>00877             <a class="code" href="class_rig_def_1_1_parser.html#a74ae363db4d69c0355653f29aa749a98">ParseBeams</a>(line);
<a name="l00878"></a>00878             line_finished = <span class="keyword">true</span>;
<a name="l00879"></a>00879             <span class="keywordflow">break</span>;
<a name="l00880"></a>00880 
<a name="l00881"></a>00881         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad88237d9869310b7f0b86952a23fbbdd">File::SECTION_BRAKES</a>):
<a name="l00882"></a>00882             <a class="code" href="class_rig_def_1_1_parser.html#a2419db0af008818ecf81b6c159c7b6ca">ParseBrakes</a>(line);
<a name="l00883"></a>00883             line_finished = <span class="keyword">true</span>;
<a name="l00884"></a>00884             <span class="keywordflow">break</span>;
<a name="l00885"></a>00885 
<a name="l00886"></a>00886         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9c0b4fb9650d18a2a499e5e1165bfeb4">File::SECTION_CAMERAS</a>):
<a name="l00887"></a>00887             <a class="code" href="class_rig_def_1_1_parser.html#aac94e5e037064337d070297fcccb10e5">ParseCameras</a>(line);
<a name="l00888"></a>00888             line_finished = <span class="keyword">true</span>;
<a name="l00889"></a>00889             <span class="keywordflow">break</span>;
<a name="l00890"></a>00890 
<a name="l00891"></a>00891         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad0e83608ba8e70227b2f21d4a78f8edf">File::SECTION_CAMERA_RAIL</a>):
<a name="l00892"></a>00892             <a class="code" href="class_rig_def_1_1_parser.html#a6cf111f38eac29685809319e862a033a">ParseCameraRails</a>(line);
<a name="l00893"></a>00893             line_finished = <span class="keyword">true</span>;
<a name="l00894"></a>00894             <span class="keywordflow">break</span>;
<a name="l00895"></a>00895 
<a name="l00896"></a>00896         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a93c6ffcc7f7fc98ed1ae9b1aa4ae1610">File::SECTION_CINECAM</a>):
<a name="l00897"></a>00897             <a class="code" href="class_rig_def_1_1_parser.html#a19b37e847fe07c225efbe5a71a560205">ParseCinecam</a>(line);
<a name="l00898"></a>00898             line_finished = <span class="keyword">true</span>;
<a name="l00899"></a>00899             <span class="keywordflow">break</span>;
<a name="l00900"></a>00900 
<a name="l00901"></a>00901         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ac0439b29d935c183924ca3f3c447583a">File::SECTION_COMMANDS</a>):
<a name="l00902"></a>00902             <a class="code" href="class_rig_def_1_1_parser.html#ad01d2a3409dc148e467b3e332fc6c748">ParseCommand</a>(line);
<a name="l00903"></a>00903             line_finished = <span class="keyword">true</span>;
<a name="l00904"></a>00904             <span class="keywordflow">break</span>;
<a name="l00905"></a>00905 
<a name="l00906"></a>00906         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3afb0dcd83339fb1deb57f042da48ab0cd">File::SECTION_COMMANDS_2</a>):
<a name="l00907"></a>00907             <a class="code" href="class_rig_def_1_1_parser.html#ad41b431ec6ba556cd97793cd9b0fe838">ParseCommand2</a>(line);
<a name="l00908"></a>00908             line_finished = <span class="keyword">true</span>;
<a name="l00909"></a>00909             <span class="keywordflow">break</span>;
<a name="l00910"></a>00910 
<a name="l00911"></a>00911         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3aeefd02d27e488fdffb48a60fc7c2ecec">File::SECTION_COLLISION_BOXES</a>):
<a name="l00912"></a>00912             <a class="code" href="class_rig_def_1_1_parser.html#a65b5cad02a89ab851252f29b9220516b">ParseCollisionBox</a>(line);
<a name="l00913"></a>00913             line_finished = <span class="keyword">true</span>;
<a name="l00914"></a>00914             <span class="keywordflow">break</span>;
<a name="l00915"></a>00915 
<a name="l00916"></a>00916         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad5ec93856084ca1278ebf2f51046f186">File::SECTION_CONTACTERS</a>):
<a name="l00917"></a>00917             <a class="code" href="class_rig_def_1_1_parser.html#a16d307023239cfa3a1e5b5fd12b7b7d8">ParseContacter</a>(line);
<a name="l00918"></a>00918             line_finished = <span class="keyword">true</span>;
<a name="l00919"></a>00919             <span class="keywordflow">break</span>;
<a name="l00920"></a>00920 
<a name="l00921"></a>00921         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a1bd5075808cc480a26198ae2cc6832eb">File::SECTION_ENGINE</a>):
<a name="l00922"></a>00922             <a class="code" href="class_rig_def_1_1_parser.html#aae06f7d75f8edb0b990ada445a90777a">ParseEngine</a>(line);
<a name="l00923"></a>00923             line_finished = <span class="keyword">true</span>;
<a name="l00924"></a>00924             <span class="keywordflow">break</span>;
<a name="l00925"></a>00925 
<a name="l00926"></a>00926         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a3295da06d0a51d15776724c5f9e19777">File::SECTION_ENGOPTION</a>):
<a name="l00927"></a>00927             <a class="code" href="class_rig_def_1_1_parser.html#ab188a07d936f638b27009fa3197971c3">ParseEngoption</a>(line);
<a name="l00928"></a>00928             line_finished = <span class="keyword">true</span>;
<a name="l00929"></a>00929             <span class="keywordflow">break</span>;
<a name="l00930"></a>00930 
<a name="l00931"></a>00931         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a5831e475426422aedd841627bbaa6729">File::SECTION_ENGTURBO</a>) :
<a name="l00932"></a>00932             <a class="code" href="class_rig_def_1_1_parser.html#ae7341cc97f799ecf5f3d85b6a1d15a40">ParseEngturbo</a>(line);
<a name="l00933"></a>00933             line_finished = <span class="keyword">true</span>;
<a name="l00934"></a>00934             <span class="keywordflow">break</span>;
<a name="l00935"></a>00935 
<a name="l00936"></a>00936         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ac3ed052ec8b52802fef1c6a6451c7698">File::SECTION_EXHAUSTS</a>):
<a name="l00937"></a>00937             <a class="code" href="class_rig_def_1_1_parser.html#ac6f8f36025bd562d984ba92df39e31c3">ParseExhaust</a>(line);
<a name="l00938"></a>00938             line_finished = <span class="keyword">true</span>;
<a name="l00939"></a>00939             <span class="keywordflow">break</span>;
<a name="l00940"></a>00940 
<a name="l00941"></a>00941         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab6678d87161bb619c3711c7635d13978">File::SECTION_FIXES</a>):
<a name="l00942"></a>00942             <a class="code" href="class_rig_def_1_1_parser.html#a7adc777e513df348711bad786546f29d">ParseFixes</a>(line);
<a name="l00943"></a>00943             line_finished = <span class="keyword">true</span>;
<a name="l00944"></a>00944             <span class="keywordflow">break</span>;
<a name="l00945"></a>00945 
<a name="l00946"></a>00946         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a6287c439552171a871836e49d4622e5c">File::SECTION_FLARES</a>):
<a name="l00947"></a>00947             <a class="code" href="class_rig_def_1_1_parser.html#aaccc0e4e316b8d9ca99c9eb61c5ad354">ParseFlare</a>(line);
<a name="l00948"></a>00948             line_finished = <span class="keyword">true</span>;
<a name="l00949"></a>00949             <span class="keywordflow">break</span>;
<a name="l00950"></a>00950 
<a name="l00951"></a>00951         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ae1bbe81358c1dbbe5c47d1e67dab93a1">File::SECTION_FLARES_2</a>):
<a name="l00952"></a>00952             <a class="code" href="class_rig_def_1_1_parser.html#a9a9133c34a4fe9cb9825875d192cfd77">ParseFlare2</a>(line);
<a name="l00953"></a>00953             line_finished = <span class="keyword">true</span>;
<a name="l00954"></a>00954             <span class="keywordflow">break</span>;
<a name="l00955"></a>00955 
<a name="l00956"></a>00956         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3af0e945673c2558cc9197244582cb1c3a">File::SECTION_FLEXBODIES</a>):
<a name="l00957"></a>00957             <a class="code" href="class_rig_def_1_1_parser.html#a5e2fe6960b56e23449f55c9761aecc8c">ParseFlexbody</a>(line);
<a name="l00958"></a>00958             line_finished = <span class="keyword">true</span>;
<a name="l00959"></a>00959             <span class="keywordflow">break</span>;
<a name="l00960"></a>00960 
<a name="l00961"></a>00961         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3af864109306b6c0424921d58c61720eab">File::SECTION_FLEX_BODY_WHEELS</a>):
<a name="l00962"></a>00962             <a class="code" href="class_rig_def_1_1_parser.html#a73d91d4b6836f6367de2a4b7e272fffe">ParseFlexBodyWheel</a>(line);
<a name="l00963"></a>00963             line_finished = <span class="keyword">true</span>;
<a name="l00964"></a>00964             <span class="keywordflow">break</span>;
<a name="l00965"></a>00965 
<a name="l00966"></a>00966         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a095e622bcfa7bd813f1191bd55a95212">File::SECTION_FUSEDRAG</a>):
<a name="l00967"></a>00967             <a class="code" href="class_rig_def_1_1_parser.html#a696d8b73da8c6e684c5cb464552b3953">ParseFusedrag</a>(line);
<a name="l00968"></a>00968             line_finished = <span class="keyword">true</span>;
<a name="l00969"></a>00969             <span class="keywordflow">break</span>;
<a name="l00970"></a>00970 
<a name="l00971"></a>00971         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a418a964431ae2a9b5cd6943981b05ebe">File::SECTION_GLOBALS</a>):
<a name="l00972"></a>00972             <a class="code" href="class_rig_def_1_1_parser.html#ab592cbae0dd1ea444b7e6759a91a7522">ParseGlobals</a>(line);
<a name="l00973"></a>00973             line_finished = <span class="keyword">true</span>;
<a name="l00974"></a>00974             <span class="keywordflow">break</span>;
<a name="l00975"></a>00975 
<a name="l00976"></a>00976         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a62320731dc4403e7424da19f2f44ca13">File::SECTION_GUI_SETTINGS</a>):
<a name="l00977"></a>00977             <a class="code" href="class_rig_def_1_1_parser.html#af413ee4931873dda62239e4aa8406e21">ParseGuiSettings</a>(line);
<a name="l00978"></a>00978             line_finished = <span class="keyword">true</span>;
<a name="l00979"></a>00979             <span class="keywordflow">break</span>;
<a name="l00980"></a>00980 
<a name="l00981"></a>00981         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab727ad16bcd7357e8759526bea14159e">File::SECTION_HELP</a>):
<a name="l00982"></a>00982             <a class="code" href="class_rig_def_1_1_parser.html#a0e769d1478a9a65605f958b0908e3f54">ParseHelp</a>(line);
<a name="l00983"></a>00983             line_finished = <span class="keyword">true</span>;
<a name="l00984"></a>00984             <span class="keywordflow">break</span>;
<a name="l00985"></a>00985 
<a name="l00986"></a>00986         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3aa7d6baf781ac3d157b6349362db848af">File::SECTION_HOOKS</a>):
<a name="l00987"></a>00987             <a class="code" href="class_rig_def_1_1_parser.html#a03bba23d065715ad40ba7a2ddec29d44">ParseHook</a>(line);
<a name="l00988"></a>00988             line_finished = <span class="keyword">true</span>;
<a name="l00989"></a>00989             <span class="keywordflow">break</span>;
<a name="l00990"></a>00990 
<a name="l00991"></a>00991         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a6a9967a35a4d46abd3e47fd12eb50e40">File::SECTION_HYDROS</a>):
<a name="l00992"></a>00992             <a class="code" href="class_rig_def_1_1_parser.html#a3cd3657d5464b37f5bd3bdb89cca1c13">ParseHydros</a>(line);
<a name="l00993"></a>00993             line_finished = <span class="keyword">true</span>;
<a name="l00994"></a>00994             <span class="keywordflow">break</span>;
<a name="l00995"></a>00995 
<a name="l00996"></a>00996         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a717f0f69ea6e180a8a70a1b6770ad439">File::SECTION_LOCKGROUPS</a>):
<a name="l00997"></a>00997             <a class="code" href="class_rig_def_1_1_parser.html#a86f98f10a1a77a4db31e77fe250050ed">ParseLockgroups</a>(line);
<a name="l00998"></a>00998             line_finished = <span class="keyword">true</span>;
<a name="l00999"></a>00999             <span class="keywordflow">break</span>;
<a name="l01000"></a>01000 
<a name="l01001"></a>01001         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a69b6679e8b11e71f6f4fc25c6cc6486d">File::SECTION_MANAGED_MATERIALS</a>):
<a name="l01002"></a>01002             <a class="code" href="class_rig_def_1_1_parser.html#abcbdd3618941c337a8c4b57fd2055c60">ParseManagedMaterials</a>(line);
<a name="l01003"></a>01003             line_finished = <span class="keyword">true</span>;
<a name="l01004"></a>01004             <span class="keywordflow">break</span>;
<a name="l01005"></a>01005 
<a name="l01006"></a>01006         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a898d573ad549a20767c0a732e68b41a7">File::SECTION_MATERIAL_FLARE_BINDINGS</a>):
<a name="l01007"></a>01007             <a class="code" href="class_rig_def_1_1_parser.html#aa5a840b9a94e3b31a2d896271ad06aa7">ParseMaterialFlareBindings</a>(line);
<a name="l01008"></a>01008             line_finished = <span class="keyword">true</span>;
<a name="l01009"></a>01009             <span class="keywordflow">break</span>;
<a name="l01010"></a>01010 
<a name="l01011"></a>01011         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a7e70d63e1710e464249cd69f01642bf7">File::SECTION_MESH_WHEELS</a>):
<a name="l01012"></a>01012             <a class="code" href="class_rig_def_1_1_parser.html#a3c4118b030b2ba4269e6170c67b2bf8c">ParseMeshWheel</a>(line);
<a name="l01013"></a>01013             line_finished = <span class="keyword">true</span>;
<a name="l01014"></a>01014             <span class="keywordflow">break</span>;
<a name="l01015"></a>01015 
<a name="l01016"></a>01016         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a4b2284fbd1a0ea9fdb5ce22a31071a82">File::SECTION_MESH_WHEELS_2</a>):
<a name="l01017"></a>01017             <a class="code" href="class_rig_def_1_1_parser.html#a7ed61128050ad919e11f37ae76f82851">ParseMeshWheel2</a>(line);
<a name="l01018"></a>01018             line_finished = <span class="keyword">true</span>;
<a name="l01019"></a>01019             <span class="keywordflow">break</span>;
<a name="l01020"></a>01020 
<a name="l01021"></a>01021         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a7c05f839bbfdbdbbd9c92656c4d665f5">File::SECTION_MINIMASS</a>):
<a name="l01022"></a>01022             <a class="code" href="class_rig_def_1_1_parser.html#a65bc45221430550391f457118db1ca83">ParseMinimass</a>(line);
<a name="l01023"></a>01023             line_finished = <span class="keyword">true</span>;
<a name="l01024"></a>01024             <span class="keywordflow">break</span>;
<a name="l01025"></a>01025 
<a name="l01026"></a>01026         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a38957529ac4324b17a714d12fdcfd1a4">File::SECTION_NODE_COLLISION</a>):
<a name="l01027"></a>01027             <a class="code" href="class_rig_def_1_1_parser.html#a3f901124d8c3c2b4bd35cd341a9207c9">ParseNodeCollision</a>(line);
<a name="l01028"></a>01028             line_finished = <span class="keyword">true</span>;
<a name="l01029"></a>01029             <span class="keywordflow">break</span>;
<a name="l01030"></a>01030 
<a name="l01031"></a>01031         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab21f910b6f0acba9a26288f750578e79">File::SECTION_NODES</a>):
<a name="l01032"></a>01032             <a class="code" href="class_rig_def_1_1_parser.html#aeef236d9824cfd26d4637fd01d0d8721">ParseNode</a>(line);
<a name="l01033"></a>01033             line_finished = <span class="keyword">true</span>;
<a name="l01034"></a>01034             <span class="keywordflow">break</span>;
<a name="l01035"></a>01035 
<a name="l01036"></a>01036         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a584dd310bc4acf2286c64507705f54bb">File::SECTION_NODES_2</a>):
<a name="l01037"></a>01037             <a class="code" href="class_rig_def_1_1_parser.html#a70c0c03437114386dcbf0ea1daa4412d">ParseNode2</a>(line);
<a name="l01038"></a>01038             line_finished = <span class="keyword">true</span>;
<a name="l01039"></a>01039             <span class="keywordflow">break</span>;
<a name="l01040"></a>01040 
<a name="l01041"></a>01041         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a614cfff1ca56862de9692d13f1e9cf69">File::SECTION_PARTICLES</a>):
<a name="l01042"></a>01042             <a class="code" href="class_rig_def_1_1_parser.html#af14675f517ec0c342adc19ef3d4dc263">ParseParticles</a>(line);
<a name="l01043"></a>01043             line_finished = <span class="keyword">true</span>;
<a name="l01044"></a>01044             <span class="keywordflow">break</span>;
<a name="l01045"></a>01045 
<a name="l01046"></a>01046         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab6f2299b3c5d23448e7680595c4e4137">File::SECTION_PISTONPROPS</a>):
<a name="l01047"></a>01047             <a class="code" href="class_rig_def_1_1_parser.html#a3353082f0c16f09e49f656171eb3b9cf">ParsePistonprops</a>(line);
<a name="l01048"></a>01048             line_finished = <span class="keyword">true</span>;
<a name="l01049"></a>01049             <span class="keywordflow">break</span>;
<a name="l01050"></a>01050 
<a name="l01051"></a>01051         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ac7789a08e9a47e907375f8d78eb4bf28">File::SECTION_PROPS</a>):
<a name="l01052"></a>01052             <a class="code" href="class_rig_def_1_1_parser.html#a92308cd2682122faee6fc7217f44915c">ParseProps</a>(line);
<a name="l01053"></a>01053             line_finished = <span class="keyword">true</span>;
<a name="l01054"></a>01054             <span class="keywordflow">break</span>;
<a name="l01055"></a>01055 
<a name="l01056"></a>01056         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a4e3bc048421b685578dfea2dd9e76415">File::SECTION_RAILGROUPS</a>):
<a name="l01057"></a>01057             <a class="code" href="class_rig_def_1_1_parser.html#a05de583f8e4730e5c27e0354eb163c25">ParseRailGroups</a>(line);
<a name="l01058"></a>01058             line_finished = <span class="keyword">true</span>;
<a name="l01059"></a>01059             <span class="keywordflow">break</span>;
<a name="l01060"></a>01060 
<a name="l01061"></a>01061         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a8e3330757c0abd1fd1396bb714d1bcf5">File::SECTION_ROPABLES</a>):
<a name="l01062"></a>01062             <a class="code" href="class_rig_def_1_1_parser.html#a6a543c6eee67415eea81c87478dbd81b">ParseRopables</a>(line);
<a name="l01063"></a>01063             line_finished = <span class="keyword">true</span>;
<a name="l01064"></a>01064             <span class="keywordflow">break</span>;
<a name="l01065"></a>01065 
<a name="l01066"></a>01066         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a570ea5086faf1b13d8fcee785b741c61">File::SECTION_ROPES</a>):
<a name="l01067"></a>01067             <a class="code" href="class_rig_def_1_1_parser.html#aa5e786b8c0b0bba8b15203ac0209bf84">ParseRopes</a>(line);
<a name="l01068"></a>01068             line_finished = <span class="keyword">true</span>;
<a name="l01069"></a>01069             <span class="keywordflow">break</span>;
<a name="l01070"></a>01070 
<a name="l01071"></a>01071         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a5a951b8381d6e7e6039b14744fa36ded">File::SECTION_ROTATORS</a>):
<a name="l01072"></a>01072             <a class="code" href="class_rig_def_1_1_parser.html#a0d01a57dae830cd0e3375269e6237327">ParseRotators</a>(line);
<a name="l01073"></a>01073             line_finished = <span class="keyword">true</span>;
<a name="l01074"></a>01074             <span class="keywordflow">break</span>;
<a name="l01075"></a>01075 
<a name="l01076"></a>01076         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3aa3c8d2a3a1bd761418eadcdbcb53f677">File::SECTION_ROTATORS_2</a>):
<a name="l01077"></a>01077             <a class="code" href="class_rig_def_1_1_parser.html#aa21d76ad02c7e983788fa855a39b3279">ParseRotators2</a>(line);
<a name="l01078"></a>01078             line_finished = <span class="keyword">true</span>;
<a name="l01079"></a>01079             <span class="keywordflow">break</span>;
<a name="l01080"></a>01080 
<a name="l01081"></a>01081         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a0c51fb474f4bb17d44136878d3507b2b">File::SECTION_SCREWPROPS</a>):
<a name="l01082"></a>01082             <a class="code" href="class_rig_def_1_1_parser.html#a48d5bdd67ce5429a471895b26479d63a">ParseScrewprops</a>(line);
<a name="l01083"></a>01083             line_finished = <span class="keyword">true</span>;
<a name="l01084"></a>01084             <span class="keywordflow">break</span>;
<a name="l01085"></a>01085 
<a name="l01086"></a>01086         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a52b9b9ca92bd9977a7f59dfa8b7f130a">File::SECTION_SHOCKS</a>):
<a name="l01087"></a>01087             <a class="code" href="class_rig_def_1_1_parser.html#aba8fac0375be0fee3f5e5cc43e3e3d4f">ParseShock</a>(line);
<a name="l01088"></a>01088             line_finished = <span class="keyword">true</span>;
<a name="l01089"></a>01089             <span class="keywordflow">break</span>;
<a name="l01090"></a>01090 
<a name="l01091"></a>01091         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a10375f11a6ed0497b64c119772fb11e0">File::SECTION_SHOCKS_2</a>):
<a name="l01092"></a>01092             <a class="code" href="class_rig_def_1_1_parser.html#aa58eef572576bcaf2806676ba35925bc">ParseShock2</a>(line);
<a name="l01093"></a>01093             line_finished = <span class="keyword">true</span>;
<a name="l01094"></a>01094             <span class="keywordflow">break</span>;
<a name="l01095"></a>01095 
<a name="l01096"></a>01096         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad868b5e57b1d74b2a99e97014ac69433">File::SECTION_SLIDENODES</a>):
<a name="l01097"></a>01097             <a class="code" href="class_rig_def_1_1_parser.html#a597ee7a42599a7fafa2f792a700fa424">ParseSlidenodes</a>(line);
<a name="l01098"></a>01098             line_finished = <span class="keyword">true</span>;
<a name="l01099"></a>01099             <span class="keywordflow">break</span>;
<a name="l01100"></a>01100 
<a name="l01101"></a>01101         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a302791545a31fee7fd275f121ed5b55d">File::SECTION_SOUNDSOURCES</a>):
<a name="l01102"></a>01102             <a class="code" href="class_rig_def_1_1_parser.html#a7a4064b3e3133d0423c13db1317b71f1">ParseSoundsources</a>(line);
<a name="l01103"></a>01103             line_finished = <span class="keyword">true</span>;
<a name="l01104"></a>01104             <span class="keywordflow">break</span>;
<a name="l01105"></a>01105 
<a name="l01106"></a>01106         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a01db610bafd5d1c727e67ad7b48e64f7">File::SECTION_SOUNDSOURCES2</a>):
<a name="l01107"></a>01107             <a class="code" href="class_rig_def_1_1_parser.html#acdcc6e7d9b3ecb18b185e1c2a1d6d159">ParseSoundsources2</a>(line);
<a name="l01108"></a>01108             line_finished = <span class="keyword">true</span>;
<a name="l01109"></a>01109             <span class="keywordflow">break</span>;
<a name="l01110"></a>01110 
<a name="l01111"></a>01111         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a9072c5f4d5f452a6db0a34e5c96a15d1">File::SECTION_SUBMESH</a>):
<a name="l01112"></a>01112             <a class="code" href="class_rig_def_1_1_parser.html#a98fa78e63766beded3eb3c45c5cfe1e0">ParseSubmesh</a>(line);
<a name="l01113"></a>01113             line_finished = <span class="keyword">true</span>;
<a name="l01114"></a>01114             <span class="keywordflow">break</span>;
<a name="l01115"></a>01115 
<a name="l01116"></a>01116         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a43aec5d6ff9eaec6405035c75c7be104">File::SECTION_TIES</a>):
<a name="l01117"></a>01117             <a class="code" href="class_rig_def_1_1_parser.html#a19c0eb7e4c5193edf96a5509bebe2569">ParseTies</a>(line);
<a name="l01118"></a>01118             line_finished = <span class="keyword">true</span>;
<a name="l01119"></a>01119             <span class="keywordflow">break</span>;
<a name="l01120"></a>01120 
<a name="l01121"></a>01121         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a26cd8c660131d80c14f3b50e7a79c360">File::SECTION_TORQUE_CURVE</a>):
<a name="l01122"></a>01122             <a class="code" href="class_rig_def_1_1_parser.html#a5f5f61a3d9524ab37f94621e3a947eec">ParseTorqueCurve</a>(line);
<a name="l01123"></a>01123             line_finished = <span class="keyword">true</span>;
<a name="l01124"></a>01124             <span class="keywordflow">break</span>;
<a name="l01125"></a>01125 
<a name="l01126"></a>01126         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a28c82d463e8cba9d409ad691518a872b">File::SECTION_TRIGGERS</a>):
<a name="l01127"></a>01127             <a class="code" href="class_rig_def_1_1_parser.html#a250e1c8e47a6bdf7547fcfef37a68f10">ParseTriggers</a>(line);
<a name="l01128"></a>01128             line_finished = <span class="keyword">true</span>;
<a name="l01129"></a>01129             <span class="keywordflow">break</span>;
<a name="l01130"></a>01130 
<a name="l01131"></a>01131         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ab14092a732479b4bebce92d667784999">File::SECTION_TURBOJETS</a>):
<a name="l01132"></a>01132             <a class="code" href="class_rig_def_1_1_parser.html#a7cd0140e27cde69a550c799d1d3058ef">ParseTurbojets</a>(line);
<a name="l01133"></a>01133             line_finished = <span class="keyword">true</span>;
<a name="l01134"></a>01134             <span class="keywordflow">break</span>;
<a name="l01135"></a>01135 
<a name="l01136"></a>01136         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a54df59a95aa3716a65ec19802e9028b3">File::SECTION_TURBOPROPS</a>):
<a name="l01137"></a>01137             <a class="code" href="class_rig_def_1_1_parser.html#a7963b4b7db2fe9d258083ee98daffc6b">ParseTurboprops</a>(line);
<a name="l01138"></a>01138             line_finished = <span class="keyword">true</span>;
<a name="l01139"></a>01139             <span class="keywordflow">break</span>;
<a name="l01140"></a>01140 
<a name="l01141"></a>01141         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a1f47154c5052cf1b7d575db0f69477dd">File::SECTION_VIDEO_CAMERA</a>):
<a name="l01142"></a>01142             <a class="code" href="class_rig_def_1_1_parser.html#a7419e2958fec0006d5368792ecbb385d">ParseVideoCamera</a>(line);
<a name="l01143"></a>01143             line_finished = <span class="keyword">true</span>;
<a name="l01144"></a>01144             <span class="keywordflow">break</span>;
<a name="l01145"></a>01145 
<a name="l01146"></a>01146         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a44fde84b0949ed4da58b7894918ad9b4">File::SECTION_WHEELS</a>):
<a name="l01147"></a>01147             <a class="code" href="class_rig_def_1_1_parser.html#a0f34d838e437b636bb4896289de849b6">ParseWheel</a>(line);
<a name="l01148"></a>01148             line_finished = <span class="keyword">true</span>;
<a name="l01149"></a>01149             <span class="keywordflow">break</span>;
<a name="l01150"></a>01150 
<a name="l01151"></a>01151         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad37624cbd2bba9432fd1d3bea9e7614f">File::SECTION_WHEELS_2</a>):
<a name="l01152"></a>01152             <a class="code" href="class_rig_def_1_1_parser.html#a69555aa127752797c2b16a454ba03ede">ParseWheel2</a>(line);
<a name="l01153"></a>01153             line_finished = <span class="keyword">true</span>;
<a name="l01154"></a>01154             <span class="keywordflow">break</span>;
<a name="l01155"></a>01155 
<a name="l01156"></a>01156         <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3ad7e1036237552a5fea2fb317390460f8">File::SECTION_WINGS</a>):
<a name="l01157"></a>01157             <a class="code" href="class_rig_def_1_1_parser.html#a931eac3f30e1ac9f4028506f764dbd6b">ParseWing</a>(line);
<a name="l01158"></a>01158             line_finished = <span class="keyword">true</span>;
<a name="l01159"></a>01159             <span class="keywordflow">break</span>;
<a name="l01160"></a>01160 
<a name="l01161"></a>01161         <span class="keywordflow">default</span>:
<a name="l01162"></a>01162             <span class="keywordflow">break</span>;
<a name="l01163"></a>01163     };
<a name="l01164"></a>01164 
<a name="l01165"></a>01165     <span class="comment">/* Continue? */</span>
<a name="l01166"></a>01166     <span class="keywordflow">if</span> (line_finished)
<a name="l01167"></a>01167     {
<a name="l01168"></a>01168         <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>++;
<a name="l01169"></a>01169         <span class="keywordflow">return</span>;
<a name="l01170"></a>01170     }
<a name="l01171"></a>01171 }
<a name="l01172"></a>01172 
<a name="l01173"></a>01173 <span class="comment">/* -------------------------------------------------------------------------- */</span>
<a name="l01174"></a>01174 <span class="comment">/* Parsing individual keywords</span>
<a name="l01175"></a>01175 <span class="comment">/* -------------------------------------------------------------------------- */</span>
<a name="l01176"></a>01176 
<a name="l01177"></a>01177 <span class="preprocessor">#if 0 </span><span class="comment">/* TEMPLATE */</span>
<a name="l01178"></a>01178 
<a name="l01179"></a>01179 <span class="keywordtype">void</span> Parser::Parse(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01180"></a>01180 {
<a name="l01181"></a>01181     boost::smatch results;
<a name="l01182"></a>01182     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes:))
<a name="l01183"></a>01183     {
<a name="l01184"></a>01184         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01185"></a>01185         <span class="keywordflow">return</span>;
<a name="l01186"></a>01186     }
<a name="l01187"></a>01187     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01188"></a>01188 }
<a name="l01189"></a>01189 
<a name="l01190"></a>01190 <span class="preprocessor">#endif</span>
<a name="l01191"></a>01191 <span class="preprocessor"></span>
<a name="l01192"></a><a class="code" href="class_rig_def_1_1_parser.html#a931eac3f30e1ac9f4028506f764dbd6b">01192</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a931eac3f30e1ac9f4028506f764dbd6b">Parser::ParseWing</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01193"></a>01193 {
<a name="l01194"></a>01194     
<a name="l01195"></a>01195     boost::smatch results;
<a name="l01196"></a>01196     <span class="keywordflow">try</span>
<a name="l01197"></a>01197     {
<a name="l01198"></a>01198         <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_WINGS))
<a name="l01199"></a>01199         {
<a name="l01200"></a>01200             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01201"></a>01201             <span class="keywordflow">return</span>;
<a name="l01202"></a>01202         }
<a name="l01203"></a>01203     }
<a name="l01204"></a>01204     <span class="keywordflow">catch</span>(std::runtime_error e)
<a name="l01205"></a>01205     {
<a name="l01206"></a>01206         std::stringstream msg;
<a name="l01207"></a>01207         msg &lt;&lt; <span class="stringliteral">&quot;Wing not parsed, internal parser failure occured, message: &quot;</span> &lt;&lt; e.what();
<a name="l01208"></a>01208         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4a4c922b155c371ce84feb0039d875ce19">Message::TYPE_FATAL_ERROR</a>, msg.str());
<a name="l01209"></a>01209         <span class="keywordflow">return</span>;
<a name="l01210"></a>01210     }
<a name="l01211"></a>01211     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01212"></a>01212 
<a name="l01213"></a>01213     <a class="code" href="struct_rig_def_1_1_wing.html">Wing</a> wing;
<a name="l01214"></a>01214 
<a name="l01215"></a>01215     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 8; i++)
<a name="l01216"></a>01216     {
<a name="l01217"></a>01217         wing.<a class="code" href="struct_rig_def_1_1_wing.html#af9fd01597d96acddff7ea98a70d37dbd">nodes</a>[i] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[i + 1]);
<a name="l01218"></a>01218     }
<a name="l01219"></a>01219 
<a name="l01220"></a>01220     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; 8; i++)
<a name="l01221"></a>01221     {
<a name="l01222"></a>01222         wing.<a class="code" href="struct_rig_def_1_1_wing.html#a166182b49b3061e80ba9f79beef69eb3">tex_coords</a>[i] = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i + 9]);
<a name="l01223"></a>01223     }
<a name="l01224"></a>01224 
<a name="l01225"></a>01225     <span class="keywordflow">if</span> (results[17].matched)
<a name="l01226"></a>01226     {
<a name="l01227"></a>01227         std::string control_surface_str = results[18];
<a name="l01228"></a>01228         wing.<a class="code" href="struct_rig_def_1_1_wing.html#a6acc0c0b70dddeff6573c05b2390f43d">control_surface</a> = <a class="code" href="struct_rig_def_1_1_wing.html#a55d942c80318e33b4a7a9b093a0b601e">Wing::Control</a>(control_surface_str.at(0));
<a name="l01229"></a>01229 
<a name="l01230"></a>01230         <span class="keywordflow">if</span> (results[19].matched)
<a name="l01231"></a>01231         {
<a name="l01232"></a>01232             wing.<a class="code" href="struct_rig_def_1_1_wing.html#a2da399224c067ba5af014e6c265c1438">chord_point</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[20]);
<a name="l01233"></a>01233 
<a name="l01234"></a>01234             <span class="keywordflow">if</span> (results[21].matched)
<a name="l01235"></a>01235             {
<a name="l01236"></a>01236                 wing.<a class="code" href="struct_rig_def_1_1_wing.html#a16d628e5fd4e734527487ba682af69c0">min_deflection</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[22]);
<a name="l01237"></a>01237 
<a name="l01238"></a>01238                 <span class="keywordflow">if</span> (results[23].matched)
<a name="l01239"></a>01239                 {
<a name="l01240"></a>01240                     wing.<a class="code" href="struct_rig_def_1_1_wing.html#aa761ba06bf76f4be332ff3a9b5094312">max_deflection</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[24]);
<a name="l01241"></a>01241 
<a name="l01242"></a>01242                     <span class="keywordflow">if</span> (results[25].matched)
<a name="l01243"></a>01243                     {
<a name="l01244"></a>01244                         wing.<a class="code" href="struct_rig_def_1_1_wing.html#a866db6e2fa1a3161b71f242cd756da5d">airfoil</a> = results[26];
<a name="l01245"></a>01245 
<a name="l01246"></a>01246                         <span class="keywordflow">if</span> (results[27].matched)
<a name="l01247"></a>01247                         {
<a name="l01248"></a>01248                             wing.<a class="code" href="struct_rig_def_1_1_wing.html#a199f9f522298b8454fd45f687e4ce841">efficacy_coef</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[28]);
<a name="l01249"></a>01249                         }
<a name="l01250"></a>01250                     }
<a name="l01251"></a>01251                 }
<a name="l01252"></a>01252             }
<a name="l01253"></a>01253         }
<a name="l01254"></a>01254     }
<a name="l01255"></a>01255 
<a name="l01256"></a>01256     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;wings.push_back(wing);
<a name="l01257"></a>01257 }
<a name="l01258"></a>01258 
<a name="l01259"></a><a class="code" href="class_rig_def_1_1_parser.html#a61c230b72ffc7d1a1db0c4123630858e">01259</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a61c230b72ffc7d1a1db0c4123630858e">Parser::ParseSetCollisionRange</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01260"></a>01260 {
<a name="l01261"></a>01261     boost::smatch results;
<a name="l01262"></a>01262     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_SET_COLLISION_RANGE))
<a name="l01263"></a>01263     {
<a name="l01264"></a>01264         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01265"></a>01265         <span class="keywordflow">return</span>;
<a name="l01266"></a>01266     }
<a name="l01267"></a>01267     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01268"></a>01268 
<a name="l01269"></a>01269     <span class="keywordflow">if</span> (results[1].matched)
<a name="l01270"></a>01270     {
<a name="l01271"></a>01271         <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;collision_range = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01272"></a>01272         <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;_collision_range_set = <span class="keyword">true</span>;
<a name="l01273"></a>01273     }
<a name="l01274"></a>01274 }
<a name="l01275"></a>01275 
<a name="l01276"></a><a class="code" href="class_rig_def_1_1_parser.html#a69555aa127752797c2b16a454ba03ede">01276</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a69555aa127752797c2b16a454ba03ede">Parser::ParseWheel2</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01277"></a>01277 {
<a name="l01278"></a>01278     boost::smatch results;
<a name="l01279"></a>01279     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_WHEELS2))
<a name="l01280"></a>01280     {
<a name="l01281"></a>01281         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01282"></a>01282         <span class="keywordflow">return</span>;
<a name="l01283"></a>01283     }
<a name="l01284"></a>01284     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01285"></a>01285 
<a name="l01286"></a>01286     <a class="code" href="struct_rig_def_1_1_wheel2.html">Wheel2</a> wheel_2;
<a name="l01287"></a>01287     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afda1fbd28f08d9e58295e37f9f9eca77">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l01288"></a>01288     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a0c714a88324f6175af48909dea5b82ab">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l01289"></a>01289 
<a name="l01290"></a>01290     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a8947716de1b3ef17a2da4706123647a5">rim_radius</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01291"></a>01291     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#aba28567b0b52e5ec6fd64dfc0a5108bd">tyre_radius</a>   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l01292"></a>01292     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a7a96dd584f67f6db7367e3b9f883ef70">width</a>         = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l01293"></a>01293     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>      = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[4]);
<a name="l01294"></a>01294     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[0]      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l01295"></a>01295     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[1]      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[6]);
<a name="l01296"></a>01296     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[7]);
<a name="l01297"></a>01297     <span class="keywordflow">if</span> (wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a654831f9421f9d314d849f966f70a04d">Num</a>() == 9999) <span class="comment">/* Special null value */</span>
<a name="l01298"></a>01298     {
<a name="l01299"></a>01299         wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a4a6abb34a80d8f0037de0c5120c87bad">Invalidate</a>();
<a name="l01300"></a>01300     }
<a name="l01301"></a>01301 
<a name="l01302"></a>01302     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l01303"></a>01303     {
<a name="l01304"></a>01304         <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a639c4f71bc37fc08f02a5b603ee14033">GenerateNodesForWheel</a>(<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aa9f7311050b4eb77977c470136c793aa">File::KEYWORD_WHEELS2</a>, wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>, wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a5912183c0dfa018a32190a5bc89b53c8">IsValidAnyState</a>());
<a name="l01305"></a>01305     }
<a name="l01306"></a>01306 
<a name="l01307"></a>01307     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> braking = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[8]);
<a name="l01308"></a>01308     <span class="keywordflow">if</span> (braking &gt;= 0 &amp;&amp; braking &lt;= 4)
<a name="l01309"></a>01309     {
<a name="l01310"></a>01310         wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a46964892b687b17c70c62eac98c3f46f">braking</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#aadb771065ed24e681acf7ab7e2520bc5">Wheels::Braking</a>(braking);
<a name="l01311"></a>01311     }
<a name="l01312"></a>01312     <span class="keywordflow">else</span>
<a name="l01313"></a>01313     {
<a name="l01314"></a>01314         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Invalid &#39;braking&#39; value, setting BRAKING_NO (0).&quot;</span>);
<a name="l01315"></a>01315     }
<a name="l01316"></a>01316 
<a name="l01317"></a>01317     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> propulsion = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[9]);
<a name="l01318"></a>01318     <span class="keywordflow">if</span> (propulsion &gt;= 0 &amp;&amp; propulsion &lt;= 2)
<a name="l01319"></a>01319     {
<a name="l01320"></a>01320         wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2e99bb276d0543791e33f412f727171a">propulsion</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#a07d9912ae1c5e7f667cb8c75661dbbfd">Wheels::Propulsion</a>(propulsion);
<a name="l01321"></a>01321     }
<a name="l01322"></a>01322     <span class="keywordflow">else</span>
<a name="l01323"></a>01323     {
<a name="l01324"></a>01324         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Invalid &#39;propulsion&#39; value, setting PROPULSION_NONE (0).&quot;</span>);
<a name="l01325"></a>01325     }
<a name="l01326"></a>01326     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afa59c7e5491ae69b016b3c1cf62c4eb4">reference_arm_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[10]);
<a name="l01327"></a>01327 
<a name="l01328"></a>01328     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a049388b5d59e7a9c8495826da07cabbe">mass</a>               = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l01329"></a>01329     wheel_2.<a class="code" href="struct_rig_def_1_1_wheel2.html#ac7fe9bc2faea336ae9b15ed15a859233">rim_springiness</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[12]);
<a name="l01330"></a>01330     wheel_2.<a class="code" href="struct_rig_def_1_1_wheel2.html#afa9867e9a67c8ab4c21f5ba77fc2cb42">rim_damping</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l01331"></a>01331     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#ad3d997d002b790fba62a9cf73690e94d">tyre_springiness</a>   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[14]);
<a name="l01332"></a>01332     wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a610463f462d96962e86e0121dbf94c62">tyre_damping</a>       = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[15]);
<a name="l01333"></a>01333     wheel_2.<a class="code" href="struct_rig_def_1_1_wheel2.html#a20715e03f4b17512e17bd946f158eb1b">face_material_name</a> = results[16];
<a name="l01334"></a>01334     wheel_2.<a class="code" href="struct_rig_def_1_1_wheel2.html#aa6417eaa7aa54d449cf57980e58721e0">band_material_name</a> = results[17];
<a name="l01335"></a>01335 
<a name="l01336"></a>01336     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;wheels_2.push_back(wheel_2);
<a name="l01337"></a>01337 }
<a name="l01338"></a>01338 
<a name="l01339"></a><a class="code" href="class_rig_def_1_1_parser.html#a0f34d838e437b636bb4896289de849b6">01339</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a0f34d838e437b636bb4896289de849b6">Parser::ParseWheel</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01340"></a>01340 {
<a name="l01341"></a>01341     boost::smatch results;
<a name="l01342"></a>01342     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_WHEELS))
<a name="l01343"></a>01343     {
<a name="l01344"></a>01344         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01345"></a>01345         <span class="keywordflow">return</span>;
<a name="l01346"></a>01346     }
<a name="l01347"></a>01347     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01348"></a>01348 
<a name="l01349"></a>01349     <a class="code" href="struct_rig_def_1_1_wheel.html">Wheel</a> wheel;
<a name="l01350"></a>01350     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afda1fbd28f08d9e58295e37f9f9eca77">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l01351"></a>01351     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a0c714a88324f6175af48909dea5b82ab">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l01352"></a>01352 
<a name="l01353"></a>01353     wheel.<a class="code" href="struct_rig_def_1_1_wheel.html#a906e2dac6a8360135aeb06254ddf98f2">radius</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01354"></a>01354     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a7a96dd584f67f6db7367e3b9f883ef70">width</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l01355"></a>01355     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[3]);
<a name="l01356"></a>01356     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[4]);
<a name="l01357"></a>01357     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l01358"></a>01358     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[6]);
<a name="l01359"></a>01359     <span class="keywordflow">if</span> (wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a654831f9421f9d314d849f966f70a04d">Num</a>() == 9999) <span class="comment">/* Special null value */</span>
<a name="l01360"></a>01360     {
<a name="l01361"></a>01361         wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a4a6abb34a80d8f0037de0c5120c87bad">Invalidate</a>();
<a name="l01362"></a>01362     }
<a name="l01363"></a>01363 
<a name="l01364"></a>01364     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l01365"></a>01365     {
<a name="l01366"></a>01366         <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a639c4f71bc37fc08f02a5b603ee14033">GenerateNodesForWheel</a>(<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3aee3e3b2faa2d33fa6aa1ddb2c859586d">File::KEYWORD_WHEELS</a>, wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>, wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a5912183c0dfa018a32190a5bc89b53c8">IsValidAnyState</a>());
<a name="l01367"></a>01367     }
<a name="l01368"></a>01368 
<a name="l01369"></a>01369     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> braking = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[7]);
<a name="l01370"></a>01370     <span class="keywordflow">if</span> (braking &gt;= 0 &amp;&amp; braking &lt;= 4)
<a name="l01371"></a>01371     {
<a name="l01372"></a>01372         wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a46964892b687b17c70c62eac98c3f46f">braking</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#aadb771065ed24e681acf7ab7e2520bc5">Wheels::Braking</a>(braking);
<a name="l01373"></a>01373     }
<a name="l01374"></a>01374     <span class="keywordflow">else</span>
<a name="l01375"></a>01375     {
<a name="l01376"></a>01376         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Invalid &#39;braking&#39; value, setting BRAKING_NO (0).&quot;</span>);
<a name="l01377"></a>01377     }
<a name="l01378"></a>01378 
<a name="l01379"></a>01379     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> propulsion = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[8]);
<a name="l01380"></a>01380     <span class="keywordflow">if</span> (propulsion &gt;= 0 &amp;&amp; propulsion &lt;= 2)
<a name="l01381"></a>01381     {
<a name="l01382"></a>01382         wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2e99bb276d0543791e33f412f727171a">propulsion</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#a07d9912ae1c5e7f667cb8c75661dbbfd">Wheels::Propulsion</a>(propulsion);
<a name="l01383"></a>01383     }
<a name="l01384"></a>01384     <span class="keywordflow">else</span>
<a name="l01385"></a>01385     {
<a name="l01386"></a>01386         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Invalid &#39;propulsion&#39; value, setting PROPULSION_NONE (0).&quot;</span>);
<a name="l01387"></a>01387     }
<a name="l01388"></a>01388     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afa59c7e5491ae69b016b3c1cf62c4eb4">reference_arm_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[9]);
<a name="l01389"></a>01389 
<a name="l01390"></a>01390     wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a049388b5d59e7a9c8495826da07cabbe">mass</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[10]);
<a name="l01391"></a>01391     wheel.<a class="code" href="struct_rig_def_1_1_wheel.html#ae6e58725b52ac956379910702bc481aa">springiness</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l01392"></a>01392     wheel.<a class="code" href="struct_rig_def_1_1_wheel.html#a3b8c333fcd89cb2346995e0a98c8128b">damping</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[12]);
<a name="l01393"></a>01393     wheel.<a class="code" href="struct_rig_def_1_1_wheel.html#afd866793928126d98e6c161fec8a344d">face_material_name</a> = results[13];
<a name="l01394"></a>01394     wheel.<a class="code" href="struct_rig_def_1_1_wheel.html#ab52ab4c6189604fe1d5fa45adfd59c10">band_material_name</a> = results[14];
<a name="l01395"></a>01395 
<a name="l01396"></a>01396     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;wheels.push_back(wheel);
<a name="l01397"></a>01397 }
<a name="l01398"></a>01398 
<a name="l01399"></a><a class="code" href="class_rig_def_1_1_parser.html#a3f41e21c3e79edaf707548c887f390db">01399</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a3f41e21c3e79edaf707548c887f390db">Parser::ParseTractionControl</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01400"></a>01400 {
<a name="l01401"></a>01401     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control != <span class="keyword">nullptr</span>)
<a name="l01402"></a>01402     {
<a name="l01403"></a>01403         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Multiple inline-sections &#39;TractionControl&#39; in a module, using last one ...&quot;</span>);
<a name="l01404"></a>01404     }
<a name="l01405"></a>01405     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control = boost::shared_ptr&lt;TractionControl&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_traction_control.html">TractionControl</a>() );
<a name="l01406"></a>01406 
<a name="l01407"></a>01407     boost::smatch results;
<a name="l01408"></a>01408     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_TRACTION_CONTROL))
<a name="l01409"></a>01409     {
<a name="l01410"></a>01410         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01411"></a>01411         <span class="keywordflow">return</span>;
<a name="l01412"></a>01412     }
<a name="l01413"></a>01413     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01414"></a>01414 
<a name="l01415"></a>01415     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;regulation_force = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01416"></a>01416     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;wheel_slip = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l01417"></a>01417 
<a name="l01418"></a>01418     <span class="keywordflow">if</span> (results[3].matched)
<a name="l01419"></a>01419     {
<a name="l01420"></a>01420         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;fade_speed = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l01421"></a>01421 
<a name="l01422"></a>01422         <span class="keywordflow">if</span> (results[5].matched)
<a name="l01423"></a>01423         {
<a name="l01424"></a>01424             <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;pulse_per_sec = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[6]);
<a name="l01425"></a>01425 
<a name="l01426"></a>01426             <span class="keywordflow">if</span> (results[7].matched)
<a name="l01427"></a>01427             {
<a name="l01428"></a>01428                 <span class="comment">/* parse mode */</span>
<a name="l01429"></a>01429                 Ogre::StringVector tokens = Ogre::StringUtil::split(results[8], <span class="stringliteral">&quot;&amp;&quot;</span>);
<a name="l01430"></a>01430                 Ogre::StringVector::iterator iter = tokens.begin();
<a name="l01431"></a>01431                 <span class="keywordflow">for</span> ( ; iter != tokens.end(); iter++)
<a name="l01432"></a>01432                 {
<a name="l01433"></a>01433                     boost::smatch results;
<a name="l01434"></a>01434                     <span class="keywordflow">if</span> (! boost::regex_search(*iter, results, Regexes::TRACTION_CONTROL_MODE))
<a name="l01435"></a>01435                     {
<a name="l01436"></a>01436                         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(*iter, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid mode keyword, ignoring whole line...&quot;</span>);
<a name="l01437"></a>01437                         <span class="keywordflow">return</span>;
<a name="l01438"></a>01438                     }
<a name="l01439"></a>01439                     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01440"></a>01440 
<a name="l01441"></a>01441                     <span class="keywordflow">if</span> (results[1].matched)
<a name="l01442"></a>01442                     {
<a name="l01443"></a>01443                         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;mode, AntiLockBrakes::MODE_ON);
<a name="l01444"></a>01444                         <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;mode, AntiLockBrakes::MODE_OFF);
<a name="l01445"></a>01445                     }
<a name="l01446"></a>01446                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[2].matched)
<a name="l01447"></a>01447                     {
<a name="l01448"></a>01448                         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;mode, AntiLockBrakes::MODE_OFF);
<a name="l01449"></a>01449                         <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;mode, AntiLockBrakes::MODE_ON);
<a name="l01450"></a>01450                     }
<a name="l01451"></a>01451                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[3].matched)
<a name="l01452"></a>01452                     {
<a name="l01453"></a>01453                         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;mode, AntiLockBrakes::MODE_NO_DASHBOARD);
<a name="l01454"></a>01454                     }
<a name="l01455"></a>01455                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[4].matched)
<a name="l01456"></a>01456                     {
<a name="l01457"></a>01457                         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;traction_control-&gt;mode, AntiLockBrakes::MODE_NO_TOGGLE);
<a name="l01458"></a>01458                     }
<a name="l01459"></a>01459                 }
<a name="l01460"></a>01460             }
<a name="l01461"></a>01461         }
<a name="l01462"></a>01462     }
<a name="l01463"></a>01463 }
<a name="l01464"></a>01464 
<a name="l01465"></a><a class="code" href="class_rig_def_1_1_parser.html#a4ba258100b510788f03a46acc84cd65c">01465</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a4ba258100b510788f03a46acc84cd65c">Parser::ParseSubmeshGroundModel</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01466"></a>01466 {
<a name="l01467"></a>01467     boost::smatch results;
<a name="l01468"></a>01468     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_SUBMESH_GROUNDMODEL))
<a name="l01469"></a>01469     {
<a name="l01470"></a>01470         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid format of inline-section &#39;submesh_groundmodel&#39;, ignoring...&quot;</span>);
<a name="l01471"></a>01471         <span class="keywordflow">return</span>;
<a name="l01472"></a>01472     }
<a name="l01473"></a>01473     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01474"></a>01474 
<a name="l01475"></a>01475     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;submeshes_ground_model_name = results[1];
<a name="l01476"></a>01476 }
<a name="l01477"></a>01477 
<a name="l01478"></a><a class="code" href="class_rig_def_1_1_parser.html#a641890714c22f010d624bb9f6c6259e5">01478</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a641890714c22f010d624bb9f6c6259e5">Parser::ParseSpeedLimiter</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01479"></a>01479 {
<a name="l01480"></a>01480     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;speed_limiter != <span class="keyword">nullptr</span>)
<a name="l01481"></a>01481     {
<a name="l01482"></a>01482         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Multiple inline-sections &#39;speedlimiter&#39; in a module, using last one ...&quot;</span>);
<a name="l01483"></a>01483     }
<a name="l01484"></a>01484     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;speed_limiter = boost::shared_ptr&lt;SpeedLimiter&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_speed_limiter.html">SpeedLimiter</a>() );
<a name="l01485"></a>01485 
<a name="l01486"></a>01486     boost::smatch results;
<a name="l01487"></a>01487     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_SPEEDLIMITER))
<a name="l01488"></a>01488     {
<a name="l01489"></a>01489         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01490"></a>01490         <span class="keywordflow">return</span>;
<a name="l01491"></a>01491     }
<a name="l01492"></a>01492     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01493"></a>01493 
<a name="l01494"></a>01494     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;speed_limiter-&gt;max_speed = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01495"></a>01495 }
<a name="l01496"></a>01496 
<a name="l01497"></a><a class="code" href="class_rig_def_1_1_parser.html#ad9376d5aabb1373391a692f2978f99d6">01497</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ad9376d5aabb1373391a692f2978f99d6">Parser::ParseSlopeBrake</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01498"></a>01498 {
<a name="l01499"></a>01499     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;slope_brake != <span class="keyword">nullptr</span>)
<a name="l01500"></a>01500     {
<a name="l01501"></a>01501         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Multiple inline-sections &#39;SlopeBrake&#39; in a module, using last one ...&quot;</span>);
<a name="l01502"></a>01502     }
<a name="l01503"></a>01503     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;slope_brake = boost::shared_ptr&lt;SlopeBrake&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_slope_brake.html">SlopeBrake</a>() );
<a name="l01504"></a>01504 
<a name="l01505"></a>01505     boost::smatch results;
<a name="l01506"></a>01506     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_SLOPE_BRAKE))
<a name="l01507"></a>01507     {
<a name="l01508"></a>01508         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01509"></a>01509         <span class="keywordflow">return</span>;
<a name="l01510"></a>01510     }
<a name="l01511"></a>01511     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01512"></a>01512 
<a name="l01513"></a>01513     <span class="keywordflow">if</span> (results[1].matched)
<a name="l01514"></a>01514     {
<a name="l01515"></a>01515         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;slope_brake-&gt;regulating_force = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l01516"></a>01516         
<a name="l01517"></a>01517         <span class="keywordflow">if</span> (results[3].matched)
<a name="l01518"></a>01518         {
<a name="l01519"></a>01519             <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;slope_brake-&gt;attach_angle = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l01520"></a>01520 
<a name="l01521"></a>01521             <span class="keywordflow">if</span> (results[5].matched)
<a name="l01522"></a>01522             {
<a name="l01523"></a>01523                 <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;slope_brake-&gt;release_angle = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[6]);
<a name="l01524"></a>01524             }
<a name="l01525"></a>01525         }
<a name="l01526"></a>01526     }
<a name="l01527"></a>01527 
<a name="l01528"></a>01528 }
<a name="l01529"></a>01529 
<a name="l01530"></a><a class="code" href="class_rig_def_1_1_parser.html#a6cb831fce75a9938b549237f882b8fc9">01530</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a6cb831fce75a9938b549237f882b8fc9">Parser::ParseSetSkeletonSettings</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01531"></a>01531 {
<a name="l01532"></a>01532     boost::smatch results;
<a name="l01533"></a>01533     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_SET_SKELETON_DISPLAY))
<a name="l01534"></a>01534     {
<a name="l01535"></a>01535         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01536"></a>01536         <span class="keywordflow">return</span>;
<a name="l01537"></a>01537     }
<a name="l01538"></a>01538     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01539"></a>01539 
<a name="l01540"></a>01540     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;skeleton_settings == <span class="keyword">nullptr</span>)
<a name="l01541"></a>01541     {
<a name="l01542"></a>01542         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;skeleton_settings = boost::shared_ptr&lt;RigDef::SkeletonSettings&gt;(<span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_skeleton_settings.html">SkeletonSettings</a>());
<a name="l01543"></a>01543     }
<a name="l01544"></a>01544 
<a name="l01545"></a>01545     <span class="keywordtype">float</span> visibility_meters = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01546"></a>01546     <span class="keywordflow">if</span> (visibility_meters &lt; 0)
<a name="l01547"></a>01547     {
<a name="l01548"></a>01548         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;skeleton_settings-&gt;visibility_range_meters = <a class="code" href="class_rig_def_1_1_parser.html#a0eafa3d17e4dbb149a57343c5e64a91b">m_ror_skeleton_settings</a>.<a class="code" href="struct_rig_def_1_1_skeleton_settings.html#a52ad3ac019c6d70ac8ddf23f2f45c7e6">visibility_range_meters</a>;
<a name="l01549"></a>01549     } 
<a name="l01550"></a>01550     <span class="keywordflow">else</span>
<a name="l01551"></a>01551     {
<a name="l01552"></a>01552         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;skeleton_settings-&gt;visibility_range_meters = visibility_meters;
<a name="l01553"></a>01553     }
<a name="l01554"></a>01554 
<a name="l01555"></a>01555     <span class="keywordflow">if</span> (results[2].matched)
<a name="l01556"></a>01556     {
<a name="l01557"></a>01557         <span class="keywordtype">float</span> beam_thickness_meters = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l01558"></a>01558         <span class="keywordflow">if</span> (beam_thickness_meters &lt; 0)
<a name="l01559"></a>01559         {
<a name="l01560"></a>01560             <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;skeleton_settings-&gt;beam_thickness_meters = <a class="code" href="class_rig_def_1_1_parser.html#a0eafa3d17e4dbb149a57343c5e64a91b">m_ror_skeleton_settings</a>.<a class="code" href="struct_rig_def_1_1_skeleton_settings.html#ab8d6978401f7e6528a3c58fc4192e07a">beam_thickness_meters</a>;
<a name="l01561"></a>01561         }
<a name="l01562"></a>01562         <span class="keywordflow">else</span>
<a name="l01563"></a>01563         {
<a name="l01564"></a>01564             <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;skeleton_settings-&gt;beam_thickness_meters = beam_thickness_meters;
<a name="l01565"></a>01565         }
<a name="l01566"></a>01566     }
<a name="l01567"></a>01567 }
<a name="l01568"></a>01568 
<a name="l01569"></a><a class="code" href="class_rig_def_1_1_parser.html#afee8962bfcd7a274af3c0315f07aecb1">01569</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#afee8962bfcd7a274af3c0315f07aecb1">Parser::VerifyAndProcessDirectiveSetNodeDefaults</a>(
<a name="l01570"></a>01570     Ogre::String <span class="keyword">const</span> &amp; line,
<a name="l01571"></a>01571     <span class="keywordtype">float</span> load_weight,
<a name="l01572"></a>01572     <span class="keywordtype">float</span> friction,
<a name="l01573"></a>01573     <span class="keywordtype">float</span> volume, 
<a name="l01574"></a>01574     <span class="keywordtype">float</span> surface, 
<a name="l01575"></a>01575     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options)
<a name="l01576"></a>01576 {
<a name="l01577"></a>01577     <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a> = boost::shared_ptr&lt;NodeDefaults&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_node_defaults.html">NodeDefaults</a>(*<a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>) );
<a name="l01578"></a>01578 
<a name="l01579"></a>01579     <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>-&gt;load_weight = (load_weight &lt; 0) ? <a class="code" href="class_rig_def_1_1_parser.html#aa517e0bee8672c92d69f666f8b3a956b">m_ror_node_defaults</a>-&gt;load_weight : load_weight;
<a name="l01580"></a>01580     <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>-&gt;friction    = (friction    &lt; 0) ? <a class="code" href="class_rig_def_1_1_parser.html#aa517e0bee8672c92d69f666f8b3a956b">m_ror_node_defaults</a>-&gt;friction    : friction;
<a name="l01581"></a>01581     <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>-&gt;volume      = (volume      &lt; 0) ? <a class="code" href="class_rig_def_1_1_parser.html#aa517e0bee8672c92d69f666f8b3a956b">m_ror_node_defaults</a>-&gt;volume      : volume;
<a name="l01582"></a>01582     <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>-&gt;surface     = (surface     &lt; 0) ? <a class="code" href="class_rig_def_1_1_parser.html#aa517e0bee8672c92d69f666f8b3a956b">m_ror_node_defaults</a>-&gt;surface     : surface;
<a name="l01583"></a>01583 
<a name="l01584"></a>01584     <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>-&gt;options     = options;
<a name="l01585"></a>01585 }
<a name="l01586"></a>01586 
<a name="l01587"></a><a class="code" href="class_rig_def_1_1_parser.html#a9c8f9bcdee727cd331810b865d64c415">01587</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a9c8f9bcdee727cd331810b865d64c415">Parser::LogParsedDirectiveSetNodeDefaultsData</a>(Ogre::String <span class="keyword">const</span> &amp; line, <span class="keywordtype">float</span> load_weight, <span class="keywordtype">float</span> friction, <span class="keywordtype">float</span> volume, <span class="keywordtype">float</span> surface, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options)
<a name="l01588"></a>01588 {
<a name="l01589"></a>01589     std::stringstream msg;
<a name="l01590"></a>01590     msg &lt;&lt; <span class="stringliteral">&quot;Parsed data for verification:&quot;</span>
<a name="l01591"></a>01591         &lt;&lt; <span class="stringliteral">&quot;\n\tLoadWeight: &quot;</span> &lt;&lt; load_weight
<a name="l01592"></a>01592         &lt;&lt; <span class="stringliteral">&quot;\n\t  Friction: &quot;</span> &lt;&lt; friction
<a name="l01593"></a>01593         &lt;&lt; <span class="stringliteral">&quot;\n\t    Volume: &quot;</span> &lt;&lt; volume
<a name="l01594"></a>01594         &lt;&lt; <span class="stringliteral">&quot;\n\t   Surface: &quot;</span> &lt;&lt; surface
<a name="l01595"></a>01595         &lt;&lt; <span class="stringliteral">&quot;\n\t   Options: &quot;</span>;
<a name="l01596"></a>01596         
<a name="l01597"></a>01597     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_l_LOAD_WEIGHT)       )  { msg &lt;&lt; <span class="stringliteral">&quot; l_LOAD_WEIGHT&quot;</span>; }
<a name="l01598"></a>01598     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_n_MOUSE_GRAB)        )  { msg &lt;&lt; <span class="stringliteral">&quot; n_MOUSE_GRAB&quot;</span>; }
<a name="l01599"></a>01599     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_m_NO_MOUSE_GRAB)     )  { msg &lt;&lt; <span class="stringliteral">&quot; m_NO_MOUSE_GRAB&quot;</span>; }
<a name="l01600"></a>01600     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_f_NO_SPARKS)         )  { msg &lt;&lt; <span class="stringliteral">&quot; f_NO_SPARKS&quot;</span>; }
<a name="l01601"></a>01601     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_x_EXHAUST_POINT)     )  { msg &lt;&lt; <span class="stringliteral">&quot; x_EXHAUST_POINT&quot;</span>; }
<a name="l01602"></a>01602     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_y_EXHAUST_DIRECTION) )  { msg &lt;&lt; <span class="stringliteral">&quot; y_EXHAUST_DIRECTION&quot;</span>; }
<a name="l01603"></a>01603     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_c_NO_GROUND_CONTACT) )  { msg &lt;&lt; <span class="stringliteral">&quot; c_NO_GROUND_CONTACT&quot;</span>; }
<a name="l01604"></a>01604     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_h_HOOK_POINT)        )  { msg &lt;&lt; <span class="stringliteral">&quot; h_HOOK_POINT&quot;</span>; }
<a name="l01605"></a>01605     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_e_TERRAIN_EDIT_POINT))  { msg &lt;&lt; <span class="stringliteral">&quot; e_TERRAIN_EDIT_POINT&quot;</span>; }
<a name="l01606"></a>01606     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_b_EXTRA_BUOYANCY)    )  { msg &lt;&lt; <span class="stringliteral">&quot; b_EXTRA_BUOYANCY&quot;</span>; }
<a name="l01607"></a>01607     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_p_NO_PARTICLES)      )  { msg &lt;&lt; <span class="stringliteral">&quot; p_NO_PARTICLES&quot;</span>; }
<a name="l01608"></a>01608     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(options, Node::OPTION_L_LOG)               )  { msg &lt;&lt; <span class="stringliteral">&quot; L_LOG&quot;</span>; }
<a name="l01609"></a>01609 
<a name="l01610"></a>01610     this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l01611"></a>01611 }
<a name="l01612"></a>01612 
<a name="l01613"></a><a class="code" href="class_rig_def_1_1_parser.html#a0d6a07c9b1335e6ccca3c6781b8d9a1e">01613</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a0d6a07c9b1335e6ccca3c6781b8d9a1e">Parser::ParseDirectiveSetNodeDefaultsUnsafe</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01614"></a>01614 {
<a name="l01615"></a>01615     <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 2,
<a name="l01616"></a>01616     {
<a name="l01617"></a>01617         <span class="keywordtype">int</span> num_args = values.size();
<a name="l01618"></a>01618 
<a name="l01619"></a>01619         <span class="comment">// NOTE: Arguments start at index [1], [0] is the keyword</span>
<a name="l01620"></a>01620         <span class="keywordtype">float</span> load_weight =                  <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[1]);
<a name="l01621"></a>01621         <span class="keywordtype">float</span> friction    = (num_args &gt; 2) ? <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[2]) : -1;
<a name="l01622"></a>01622         <span class="keywordtype">float</span> volume      = (num_args &gt; 3) ? <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[3]) : -1;
<a name="l01623"></a>01623         <span class="keywordtype">float</span> surface     = (num_args &gt; 4) ? <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[4]) : -1;
<a name="l01624"></a>01624         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options = 0;
<a name="l01625"></a>01625         <span class="keywordflow">if</span> (num_args &gt; 5) { this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#aa0448d0c351e3163aa33245881947a40">_ParseNodeOptions</a>(options, values[5]); }
<a name="l01626"></a>01626 
<a name="l01627"></a>01627         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a9c8f9bcdee727cd331810b865d64c415">LogParsedDirectiveSetNodeDefaultsData</a>(line, load_weight, friction, volume, surface, options);
<a name="l01628"></a>01628         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#afee8962bfcd7a274af3c0315f07aecb1">VerifyAndProcessDirectiveSetNodeDefaults</a>(line, load_weight, friction, volume, surface, options);
<a name="l01629"></a>01629     });
<a name="l01630"></a>01630 }
<a name="l01631"></a>01631 
<a name="l01632"></a><a class="code" href="class_rig_def_1_1_parser.html#abd86a890091ebd98eafc28e465861c50">01632</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#abd86a890091ebd98eafc28e465861c50">Parser::ParseDirectiveSetNodeDefaults</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01633"></a>01633 {
<a name="l01634"></a>01634     boost::smatch results;
<a name="l01635"></a>01635     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_SET_NODE_DEFAULTS))
<a name="l01636"></a>01636     {
<a name="l01637"></a>01637         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a0d6a07c9b1335e6ccca3c6781b8d9a1e">ParseDirectiveSetNodeDefaultsUnsafe</a>(line);
<a name="l01638"></a>01638         <span class="keywordflow">return</span>;
<a name="l01639"></a>01639     }
<a name="l01640"></a>01640     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01641"></a>01641 
<a name="l01642"></a>01642     <span class="comment">// NOTE: -1 resets to default value</span>
<a name="l01643"></a>01643     <span class="keywordtype">float</span> load_weight = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01644"></a>01644     <span class="keywordtype">float</span> friction    = (results[2].matched) ? <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4])  : -1;
<a name="l01645"></a>01645     <span class="keywordtype">float</span> volume      = (results[4].matched) ? <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7])  : -1;
<a name="l01646"></a>01646     <span class="keywordtype">float</span> surface     = (results[6].matched) ? <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[10]) : -1;
<a name="l01647"></a>01647     
<a name="l01648"></a>01648     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options = 0;
<a name="l01649"></a>01649     <span class="keywordflow">if</span> (results[11].matched)
<a name="l01650"></a>01650     {
<a name="l01651"></a>01651         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#aa0448d0c351e3163aa33245881947a40">_ParseNodeOptions</a>(options, results[13]);
<a name="l01652"></a>01652     }
<a name="l01653"></a>01653 
<a name="l01654"></a>01654     this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#afee8962bfcd7a274af3c0315f07aecb1">VerifyAndProcessDirectiveSetNodeDefaults</a>(line, load_weight, friction, volume, surface, options);
<a name="l01655"></a>01655 }
<a name="l01656"></a>01656 
<a name="l01657"></a><a class="code" href="class_rig_def_1_1_parser.html#aa0448d0c351e3163aa33245881947a40">01657</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aa0448d0c351e3163aa33245881947a40">Parser::_ParseNodeOptions</a>(<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> &amp; options, <span class="keyword">const</span> std::string &amp; options_str)
<a name="l01658"></a>01658 {
<a name="l01659"></a>01659     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; options_str.length(); i++)
<a name="l01660"></a>01660     {
<a name="l01661"></a>01661         <span class="keyword">const</span> <span class="keywordtype">char</span> c = options_str.at(i);
<a name="l01662"></a>01662         <span class="keywordflow">switch</span>(c)
<a name="l01663"></a>01663         {
<a name="l01664"></a>01664             <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:
<a name="l01665"></a>01665                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_l_LOAD_WEIGHT);
<a name="l01666"></a>01666                 <span class="keywordflow">break</span>;
<a name="l01667"></a>01667             <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:
<a name="l01668"></a>01668                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_n_MOUSE_GRAB);
<a name="l01669"></a>01669                 <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(options, Node::OPTION_m_NO_MOUSE_GRAB);
<a name="l01670"></a>01670                 <span class="keywordflow">break</span>;
<a name="l01671"></a>01671             <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:
<a name="l01672"></a>01672                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_m_NO_MOUSE_GRAB);
<a name="l01673"></a>01673                 <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(options, Node::OPTION_n_MOUSE_GRAB);
<a name="l01674"></a>01674                 <span class="keywordflow">break</span>;
<a name="l01675"></a>01675             <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:
<a name="l01676"></a>01676                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_f_NO_SPARKS);
<a name="l01677"></a>01677                 <span class="keywordflow">break</span>;
<a name="l01678"></a>01678             <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:
<a name="l01679"></a>01679                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_x_EXHAUST_POINT);
<a name="l01680"></a>01680                 <span class="keywordflow">break</span>;
<a name="l01681"></a>01681             <span class="keywordflow">case</span> <span class="charliteral">&#39;y&#39;</span>:
<a name="l01682"></a>01682                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_y_EXHAUST_DIRECTION);
<a name="l01683"></a>01683                 <span class="keywordflow">break</span>;
<a name="l01684"></a>01684             <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:
<a name="l01685"></a>01685                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_c_NO_GROUND_CONTACT);
<a name="l01686"></a>01686                 <span class="keywordflow">break</span>;
<a name="l01687"></a>01687             <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:
<a name="l01688"></a>01688                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_h_HOOK_POINT);
<a name="l01689"></a>01689                 <span class="keywordflow">break</span>;
<a name="l01690"></a>01690             <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>:
<a name="l01691"></a>01691                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_e_TERRAIN_EDIT_POINT);
<a name="l01692"></a>01692                 <span class="keywordflow">break</span>;
<a name="l01693"></a>01693             <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:
<a name="l01694"></a>01694                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_b_EXTRA_BUOYANCY);
<a name="l01695"></a>01695                 <span class="keywordflow">break</span>;
<a name="l01696"></a>01696             <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:
<a name="l01697"></a>01697                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_p_NO_PARTICLES);
<a name="l01698"></a>01698                 <span class="keywordflow">break</span>;
<a name="l01699"></a>01699             <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:
<a name="l01700"></a>01700                 <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Node::OPTION_L_LOG);
<a name="l01701"></a>01701                 <span class="keywordflow">break</span>;
<a name="l01702"></a>01702 
<a name="l01703"></a>01703             <span class="keywordflow">default</span>:
<a name="l01704"></a>01704                 this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(options_str, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Ignoring invalid option: &quot;</span>) + c);
<a name="l01705"></a>01705                 <span class="keywordflow">break</span>;
<a name="l01706"></a>01706         }
<a name="l01707"></a>01707     }
<a name="l01708"></a>01708 }
<a name="l01709"></a>01709 
<a name="l01710"></a><a class="code" href="class_rig_def_1_1_parser.html#aaec52db2c1724db29b52725d1c4884d9">01710</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aaec52db2c1724db29b52725d1c4884d9">Parser::ParseDirectiveSetManagedMaterialsOptions</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01711"></a>01711 {
<a name="l01712"></a>01712     boost::smatch results;
<a name="l01713"></a>01713     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_SET_MANAGEDMATERIALS_OPTIONS))
<a name="l01714"></a>01714     {
<a name="l01715"></a>01715         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01716"></a>01716         <span class="keywordflow">return</span>;
<a name="l01717"></a>01717     }
<a name="l01718"></a>01718     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01719"></a>01719 
<a name="l01720"></a>01720     <span class="comment">/* Param 1: double-sided */</span>
<a name="l01721"></a>01721     Ogre::String input = results[1];
<a name="l01722"></a>01722     <span class="keywordtype">int</span> double_sided = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(input); <span class="comment">/* Let&#39;s do it the way old parser did, even though &quot;input&quot; can be any string */</span>
<a name="l01723"></a>01723     <span class="keywordflow">if</span> (! boost::regex_match(input, boost::regex(<span class="stringliteral">&quot;0|1&quot;</span>, boost::regex::extended)))
<a name="l01724"></a>01724     {
<a name="l01725"></a>01725         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(
<a name="l01726"></a>01726             line, 
<a name="l01727"></a>01727             <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, 
<a name="l01728"></a>01728             <span class="stringliteral">&quot;Directive &#39;set_managedmaterials_options&#39;:&quot;</span>
<a name="l01729"></a>01729                 <span class="stringliteral">&quot; Invalid value of parameter ~1: &#39;&quot;</span> + input + <span class="stringliteral">&quot;&#39;, should be only &#39;0&#39; or &#39;1&#39;.&quot;</span>
<a name="l01730"></a>01730                 <span class="stringliteral">&quot; Interpreting as &#39;0&#39; for backwards compatibility. Please fix.&quot;</span>
<a name="l01731"></a>01731             );
<a name="l01732"></a>01732     }
<a name="l01733"></a>01733     <a class="code" href="class_rig_def_1_1_parser.html#a78576d147f653bb182bf30a3d5e90c93">m_current_managed_material_options</a>.<a class="code" href="struct_rig_def_1_1_managed_materials_options.html#aec4abc6b63dcea79172f0080bda1d9f3">double_sided</a> = double_sided != 0;
<a name="l01734"></a>01734 }
<a name="l01735"></a>01735 
<a name="l01736"></a><a class="code" href="class_rig_def_1_1_parser.html#ac66f0cffff38d1c74aec140ebb48ec9d">01736</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ac66f0cffff38d1c74aec140ebb48ec9d">Parser::ParseDirectiveSetBeamDefaultsScale</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01737"></a>01737 {
<a name="l01738"></a>01738     boost::smatch results;
<a name="l01739"></a>01739     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_SET_BEAM_DEFAULTS_SCALE))
<a name="l01740"></a>01740     {
<a name="l01741"></a>01741         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01742"></a>01742         <span class="keywordflow">return</span>;
<a name="l01743"></a>01743     }
<a name="l01744"></a>01744     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01745"></a>01745 
<a name="l01746"></a>01746     <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a> = boost::shared_ptr&lt;BeamDefaults&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_beam_defaults.html">BeamDefaults</a>(*<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>) );
<a name="l01747"></a>01747 
<a name="l01748"></a>01748     <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;scale.springiness = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01749"></a>01749 
<a name="l01750"></a>01750     <span class="keywordflow">if</span> (results[2].matched)
<a name="l01751"></a>01751     {
<a name="l01752"></a>01752         <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;scale.damping_constant = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l01753"></a>01753 
<a name="l01754"></a>01754         <span class="keywordflow">if</span> (results[4].matched)
<a name="l01755"></a>01755         {
<a name="l01756"></a>01756             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;scale.deformation_threshold_constant = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l01757"></a>01757 
<a name="l01758"></a>01758             <span class="keywordflow">if</span> (results[6].matched)
<a name="l01759"></a>01759             {
<a name="l01760"></a>01760                 <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;scale.breaking_threshold_constant = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l01761"></a>01761             }
<a name="l01762"></a>01762         }
<a name="l01763"></a>01763     }
<a name="l01764"></a>01764 }
<a name="l01765"></a>01765 
<a name="l01766"></a><a class="code" href="class_rig_def_1_1_parser.html#aa7947438fbafe5c606b36c6436617002">01766</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aa7947438fbafe5c606b36c6436617002">Parser::ParseDirectiveSetBeamDefaults</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01767"></a>01767 {
<a name="l01768"></a>01768     boost::smatch results;
<a name="l01769"></a>01769     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_SET_BEAM_DEFAULTS))
<a name="l01770"></a>01770     {
<a name="l01771"></a>01771         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l01772"></a>01772         <span class="keywordflow">return</span>;
<a name="l01773"></a>01773     }
<a name="l01774"></a>01774     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01775"></a>01775 
<a name="l01776"></a>01776     <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a> = boost::shared_ptr&lt;BeamDefaults&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_beam_defaults.html">BeamDefaults</a>(*<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>) );
<a name="l01777"></a>01777     <span class="comment">/*</span>
<a name="l01778"></a>01778 <span class="comment">    What&#39;s the state of &quot;enable_advanced_deformation&quot; feature at this point?</span>
<a name="l01779"></a>01779 <span class="comment">    Directive &quot;enable_advanced_deformation&quot; alters the effects of BeamDefaults</span>
<a name="l01780"></a>01780 <span class="comment">    Since the old parser worked on-the-fly, only BeamDefaults defined after the directive were affected</span>
<a name="l01781"></a>01781 <span class="comment">    */</span>
<a name="l01782"></a>01782     <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_enable_advanced_deformation = <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;enable_advanced_deformation;
<a name="l01783"></a>01783     <span class="comment">/*</span>
<a name="l01784"></a>01784 <span class="comment">    The &quot;_enable_advanced_deformation&quot; must only be aplied to BeamDefaults supplied by users, </span>
<a name="l01785"></a>01785 <span class="comment">        not on the initial defaults used by parser.</span>
<a name="l01786"></a>01786 <span class="comment">    */</span>
<a name="l01787"></a>01787     <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_is_user_defined = <span class="keyword">true</span>;
<a name="l01788"></a>01788 
<a name="l01789"></a>01789     <span class="comment">/* Springiness */</span>
<a name="l01790"></a>01790     <span class="keywordtype">float</span> default_spring = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l01791"></a>01791     <span class="keywordflow">if</span> (default_spring &lt; 0) <span class="comment">/* NULL value =&gt; reset to default */</span>
<a name="l01792"></a>01792     {
<a name="l01793"></a>01793         <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;springiness = <a class="code" href="class_rig_def_1_1_parser.html#acf561e9e58fd57bb0f398274bc233963">m_ror_beam_defaults</a>-&gt;springiness;
<a name="l01794"></a>01794         <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#af7b46e1b5520510edb869cfe029a3e3c">BeamDefaults::PARAM_SPRINGINESS</a>);
<a name="l01795"></a>01795     }
<a name="l01796"></a>01796     <span class="keywordflow">else</span>
<a name="l01797"></a>01797     {
<a name="l01798"></a>01798         <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;springiness = default_spring;
<a name="l01799"></a>01799         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#af7b46e1b5520510edb869cfe029a3e3c">BeamDefaults::PARAM_SPRINGINESS</a>);
<a name="l01800"></a>01800     }
<a name="l01801"></a>01801 
<a name="l01802"></a>01802     <span class="comment">/* Damping constant */</span>
<a name="l01803"></a>01803     <span class="keywordflow">if</span> (results[2].matched)
<a name="l01804"></a>01804     {
<a name="l01805"></a>01805         <span class="keywordtype">float</span> default_damp = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l01806"></a>01806         <span class="keywordflow">if</span> (default_damp &lt; 0) <span class="comment">/* NULL value =&gt; reset to default */</span>
<a name="l01807"></a>01807         {
<a name="l01808"></a>01808             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;damping_constant = <a class="code" href="class_rig_def_1_1_parser.html#acf561e9e58fd57bb0f398274bc233963">m_ror_beam_defaults</a>-&gt;damping_constant;
<a name="l01809"></a>01809             <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#a1ce9974494d4f01b0a07e0fc0b60d25a">BeamDefaults::PARAM_DAMPING_CONSTANT</a>);
<a name="l01810"></a>01810         }
<a name="l01811"></a>01811         <span class="keywordflow">else</span>
<a name="l01812"></a>01812         {
<a name="l01813"></a>01813             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;damping_constant = default_damp;
<a name="l01814"></a>01814             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#a1ce9974494d4f01b0a07e0fc0b60d25a">BeamDefaults::PARAM_DAMPING_CONSTANT</a>);
<a name="l01815"></a>01815         }
<a name="l01816"></a>01816     }
<a name="l01817"></a>01817     <span class="keywordflow">else</span>
<a name="l01818"></a>01818     {
<a name="l01819"></a>01819         <span class="keywordflow">return</span>;
<a name="l01820"></a>01820     }
<a name="l01821"></a>01821 
<a name="l01822"></a>01822     <span class="comment">/* Deformation threshold constant */</span>
<a name="l01823"></a>01823     <span class="keywordflow">if</span> (results[4].matched)
<a name="l01824"></a>01824     {
<a name="l01825"></a>01825         <span class="keywordtype">float</span> default_deform = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l01826"></a>01826         <span class="keywordflow">if</span> (default_deform &lt; 0) <span class="comment">/* NULL value =&gt; reset to default */</span>
<a name="l01827"></a>01827         {
<a name="l01828"></a>01828             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;deformation_threshold_constant = <a class="code" href="class_rig_def_1_1_parser.html#acf561e9e58fd57bb0f398274bc233963">m_ror_beam_defaults</a>-&gt;deformation_threshold_constant;
<a name="l01829"></a>01829             <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#a23f57243d47ffc2a544c09591e35a6a7">BeamDefaults::PARAM_DEFORM_THRESHOLD_CONSTANT</a>);
<a name="l01830"></a>01830         }
<a name="l01831"></a>01831         <span class="keywordflow">else</span>
<a name="l01832"></a>01832         {
<a name="l01833"></a>01833             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;deformation_threshold_constant = default_deform;
<a name="l01834"></a>01834             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#a23f57243d47ffc2a544c09591e35a6a7">BeamDefaults::PARAM_DEFORM_THRESHOLD_CONSTANT</a>);
<a name="l01835"></a>01835         }
<a name="l01836"></a>01836     }
<a name="l01837"></a>01837     <span class="keywordflow">else</span>
<a name="l01838"></a>01838     {
<a name="l01839"></a>01839         <span class="keywordflow">return</span>;
<a name="l01840"></a>01840     }
<a name="l01841"></a>01841 
<a name="l01842"></a>01842     <span class="comment">/* Breaking threshold constant */</span>
<a name="l01843"></a>01843     <span class="keywordflow">if</span> (results[6].matched)
<a name="l01844"></a>01844     {
<a name="l01845"></a>01845         <span class="keywordtype">float</span> default_break = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l01846"></a>01846         <span class="keywordflow">if</span> (default_break &lt; 0) <span class="comment">/* NULL value =&gt; reset to default */</span>
<a name="l01847"></a>01847         {
<a name="l01848"></a>01848             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;breaking_threshold_constant = <a class="code" href="class_rig_def_1_1_parser.html#acf561e9e58fd57bb0f398274bc233963">m_ror_beam_defaults</a>-&gt;breaking_threshold_constant;
<a name="l01849"></a>01849             <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#a23f57243d47ffc2a544c09591e35a6a7">BeamDefaults::PARAM_DEFORM_THRESHOLD_CONSTANT</a>);
<a name="l01850"></a>01850         }
<a name="l01851"></a>01851         <span class="keywordflow">else</span>
<a name="l01852"></a>01852         {
<a name="l01853"></a>01853             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;breaking_threshold_constant = default_break;
<a name="l01854"></a>01854             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#a359a45855e40597d612bda6003a71ce2">BeamDefaults::PARAM_BREAK_THRESHOLD_CONSTANT</a>);
<a name="l01855"></a>01855         }
<a name="l01856"></a>01856     }
<a name="l01857"></a>01857     <span class="keywordflow">else</span>
<a name="l01858"></a>01858     {
<a name="l01859"></a>01859         <span class="keywordflow">return</span>;
<a name="l01860"></a>01860     }
<a name="l01861"></a>01861 
<a name="l01862"></a>01862     <span class="comment">/* Beam diameter */</span>
<a name="l01863"></a>01863     <span class="keywordflow">if</span> (results[8].matched)
<a name="l01864"></a>01864     {
<a name="l01865"></a>01865         <span class="keywordtype">float</span> default_beam_diameter = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l01866"></a>01866         <span class="keywordflow">if</span> (default_beam_diameter &lt; 0) <span class="comment">/* NULL value =&gt; reset to default */</span>
<a name="l01867"></a>01867         {
<a name="l01868"></a>01868             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;visual_beam_diameter = <a class="code" href="class_rig_def_1_1_parser.html#acf561e9e58fd57bb0f398274bc233963">m_ror_beam_defaults</a>-&gt;visual_beam_diameter;
<a name="l01869"></a>01869             <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#a8a40c88b19741302763654ac8c5164bd">BeamDefaults::PARAM_BEAM_DIAMETER</a>);
<a name="l01870"></a>01870         }
<a name="l01871"></a>01871         <span class="keywordflow">else</span>
<a name="l01872"></a>01872         {
<a name="l01873"></a>01873             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;visual_beam_diameter = default_beam_diameter;
<a name="l01874"></a>01874             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#a8a40c88b19741302763654ac8c5164bd">BeamDefaults::PARAM_BEAM_DIAMETER</a>);
<a name="l01875"></a>01875         }
<a name="l01876"></a>01876     }
<a name="l01877"></a>01877     <span class="keywordflow">else</span>
<a name="l01878"></a>01878     {
<a name="l01879"></a>01879         <span class="keywordflow">return</span>; 
<a name="l01880"></a>01880     }
<a name="l01881"></a>01881 
<a name="l01882"></a>01882     <span class="keywordflow">if</span> (results[10].matched)
<a name="l01883"></a>01883     {
<a name="l01884"></a>01884         <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;beam_material_name = results[11];
<a name="l01885"></a>01885     }
<a name="l01886"></a>01886     <span class="keywordflow">else</span>
<a name="l01887"></a>01887     {
<a name="l01888"></a>01888         <span class="keywordflow">return</span>;
<a name="l01889"></a>01889     }
<a name="l01890"></a>01890 
<a name="l01891"></a>01891     <span class="comment">/* Plastic deformation coefficient */</span>
<a name="l01892"></a>01892     <span class="keywordflow">if</span> (results[12].matched)
<a name="l01893"></a>01893     {
<a name="l01894"></a>01894         <span class="keywordtype">float</span> default_plastic_coefficient = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l01895"></a>01895         <span class="keywordflow">if</span> (default_plastic_coefficient &lt; 0) <span class="comment">/* NULL value =&gt; reset to default */</span>
<a name="l01896"></a>01896         {
<a name="l01897"></a>01897             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;plastic_deformation_coefficient = <a class="code" href="class_rig_def_1_1_parser.html#acf561e9e58fd57bb0f398274bc233963">m_ror_beam_defaults</a>-&gt;plastic_deformation_coefficient;
<a name="l01898"></a>01898             <a class="code" href="_bit_flags_8h.html#a2acc2f1379be18c803fa356995d0dabd">BITMASK_SET_0</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#ad686f0ab8f3b53ec53ae94c07a782d24">BeamDefaults::PARAM_PLASTIC_DEFORM_COEFFICIENT</a>);
<a name="l01899"></a>01899         }
<a name="l01900"></a>01900         <span class="keywordflow">else</span>
<a name="l01901"></a>01901         {
<a name="l01902"></a>01902             <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;plastic_deformation_coefficient = default_plastic_coefficient;
<a name="l01903"></a>01903             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(<a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>-&gt;_user_specified_fields, <a class="code" href="struct_rig_def_1_1_beam_defaults.html#ad686f0ab8f3b53ec53ae94c07a782d24">BeamDefaults::PARAM_PLASTIC_DEFORM_COEFFICIENT</a>);
<a name="l01904"></a>01904         }
<a name="l01905"></a>01905     }
<a name="l01906"></a>01906 
<a name="l01907"></a>01907     <span class="keywordflow">return</span>;
<a name="l01908"></a>01908 }
<a name="l01909"></a>01909 
<a name="l01910"></a><a class="code" href="class_rig_def_1_1_parser.html#a66298bf2aa7a61d3ffed0145c5c1da0a">01910</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a66298bf2aa7a61d3ffed0145c5c1da0a">Parser::ParseDirectivePropCameraMode</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01911"></a>01911 {
<a name="l01912"></a>01912     assert(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a> != <span class="keyword">nullptr</span>);
<a name="l01913"></a>01913 
<a name="l01914"></a>01914     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;props.size() == 0)
<a name="l01915"></a>01915     {
<a name="l01916"></a>01916         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Directive &#39;prop_camera_mode&#39; found but no &#39;prop&#39; defined, ignoring...&quot;</span>);
<a name="l01917"></a>01917         <span class="keywordflow">return</span>;
<a name="l01918"></a>01918     }
<a name="l01919"></a>01919 
<a name="l01920"></a>01920     boost::smatch results;
<a name="l01921"></a>01921     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_PROP_CAMERA_MODE))
<a name="l01922"></a>01922     {
<a name="l01923"></a>01923         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid format of directive &#39;prop_camera_mode&#39;, ignoring...&quot;</span>);
<a name="l01924"></a>01924         <span class="keywordflow">return</span>;
<a name="l01925"></a>01925     }
<a name="l01926"></a>01926     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l01927"></a>01927 
<a name="l01928"></a>01928     <a class="code" href="class_rig_def_1_1_parser.html#afde15d2836dababf775619489e53d91c">_ParseCameraSettings</a>(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;props.back().camera_settings, results[1]);
<a name="l01929"></a>01929 }
<a name="l01930"></a>01930 
<a name="l01931"></a><a class="code" href="class_rig_def_1_1_parser.html#a1e2242fe439ea0329a900983f814a651">01931</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a1e2242fe439ea0329a900983f814a651">Parser::VerifyAndProcessMeshWheel</a>(Ogre::String <span class="keyword">const</span> &amp; line, <a class="code" href="struct_rig_def_1_1_mesh_wheel.html">MeshWheel</a>&amp; mesh_wheel, <span class="keywordtype">int</span> braking, <span class="keywordtype">int</span> propulsion, <span class="keywordtype">char</span> side_char)
<a name="l01932"></a>01932 {
<a name="l01933"></a>01933     <span class="comment">// Axle rigidity node (9999 = null)</span>
<a name="l01934"></a>01934     <span class="keywordflow">if</span> (mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a5912183c0dfa018a32190a5bc89b53c8">IsValidAnyState</a>() &amp;&amp; mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a654831f9421f9d314d849f966f70a04d">Num</a>() == 9999)
<a name="l01935"></a>01935     {
<a name="l01936"></a>01936         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a4a6abb34a80d8f0037de0c5120c87bad">Invalidate</a>();
<a name="l01937"></a>01937     }
<a name="l01938"></a>01938 
<a name="l01939"></a>01939     <span class="keywordflow">if</span> (braking &lt; 0 || braking &gt; 4)
<a name="l01940"></a>01940     {
<a name="l01941"></a>01941         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid value of parameter ~7 (braking), using 0 (no braking)&quot;</span>);
<a name="l01942"></a>01942         braking = 0;
<a name="l01943"></a>01943     }
<a name="l01944"></a>01944     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a46964892b687b17c70c62eac98c3f46f">braking</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#aadb771065ed24e681acf7ab7e2520bc5">Wheels::Braking</a>(braking);
<a name="l01945"></a>01945 
<a name="l01946"></a>01946     <span class="keywordflow">if</span> (propulsion &lt; 0 || propulsion &gt; 2)
<a name="l01947"></a>01947     {
<a name="l01948"></a>01948         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid value of parameter ~8 (propulsion), using 0 (no propulsion)&quot;</span>);
<a name="l01949"></a>01949         braking = 0;
<a name="l01950"></a>01950     }
<a name="l01951"></a>01951     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2e99bb276d0543791e33f412f727171a">propulsion</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#a07d9912ae1c5e7f667cb8c75661dbbfd">Wheels::Propulsion</a>(propulsion);
<a name="l01952"></a>01952 
<a name="l01953"></a>01953     mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a1c790d8fbe8e794963a4795a2c71c066">side</a> = <a class="code" href="struct_rig_def_1_1_mesh_wheel.html#af699d01e3d1bda900be710256d58f9f7abcee8ea57fa8ca53df33f548c504460f">MeshWheel::SIDE_RIGHT</a>;
<a name="l01954"></a>01954     <span class="keywordflow">if</span> (side_char != <span class="charliteral">&#39;r&#39;</span>)
<a name="l01955"></a>01955     {
<a name="l01956"></a>01956         <span class="keywordflow">if</span> (side_char != <span class="charliteral">&#39;l&#39;</span>)
<a name="l01957"></a>01957         {
<a name="l01958"></a>01958             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Invalid SIDE flag (acceptable are [r/l]), parsing as LEFT for backwards compatibility: &quot;</span>) + side_char);
<a name="l01959"></a>01959         }
<a name="l01960"></a>01960         mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a1c790d8fbe8e794963a4795a2c71c066">side</a> = <a class="code" href="struct_rig_def_1_1_mesh_wheel.html#af699d01e3d1bda900be710256d58f9f7ab1b494ef80c74dffd8ff89f9f6f8cc46">MeshWheel::SIDE_LEFT</a>;
<a name="l01961"></a>01961     }
<a name="l01962"></a>01962 
<a name="l01963"></a>01963     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l01964"></a>01964     {
<a name="l01965"></a>01965         <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a639c4f71bc37fc08f02a5b603ee14033">GenerateNodesForWheel</a>(<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a3075e37548ce1e539d7f56fca035b56b">File::KEYWORD_MESHWHEELS</a>, mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>, mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a5912183c0dfa018a32190a5bc89b53c8">IsValidAnyState</a>());
<a name="l01966"></a>01966     }
<a name="l01967"></a>01967 
<a name="l01968"></a>01968     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;mesh_wheels.push_back(mesh_wheel);
<a name="l01969"></a>01969 }
<a name="l01970"></a>01970 
<a name="l01971"></a><a class="code" href="class_rig_def_1_1_parser.html#ae348aa2d7c7f8df85055e7da645f8b1b">01971</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ae348aa2d7c7f8df85055e7da645f8b1b">Parser::ParseMeshWheelUnsafe</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l01972"></a>01972 {
<a name="l01973"></a>01973     <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 16,
<a name="l01974"></a>01974     {
<a name="l01975"></a>01975         <a class="code" href="struct_rig_def_1_1_mesh_wheel.html">MeshWheel</a> mesh_wheel;
<a name="l01976"></a>01976         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afda1fbd28f08d9e58295e37f9f9eca77">node_defaults</a>      = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l01977"></a>01977         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a0c714a88324f6175af48909dea5b82ab">beam_defaults</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l01978"></a>01978 
<a name="l01979"></a>01979         mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a1940add20de2127b3a1dab8be6246368">tyre_radius</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 0]);
<a name="l01980"></a>01980         mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a68d9460a2c63c863476987672d58c01f">rim_radius</a>         = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 1]);
<a name="l01981"></a>01981         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a7a96dd584f67f6db7367e3b9f883ef70">width</a>              = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 2]);
<a name="l01982"></a>01982         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>           = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 3]);
<a name="l01983"></a>01983         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[0]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 4]);
<a name="l01984"></a>01984         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[1]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 5]);
<a name="l01985"></a>01985         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 6]);
<a name="l01986"></a>01986         <span class="keywordtype">int</span> braking                   = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 7]);
<a name="l01987"></a>01987         <span class="keywordtype">int</span> propulsion                = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 8]);
<a name="l01988"></a>01988         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afa59c7e5491ae69b016b3c1cf62c4eb4">reference_arm_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 9]);
<a name="l01989"></a>01989         mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a049388b5d59e7a9c8495826da07cabbe">mass</a>               = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[10]);
<a name="l01990"></a>01990         mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a7aad96759a4a928bab56cb63e78db2e7">spring</a>             = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[11]);
<a name="l01991"></a>01991         mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a5f3d5a2415bec8eb5ac515c701a2da7c">damping</a>            = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[12]);
<a name="l01992"></a>01992         <span class="keywordtype">char</span> side_char                =                values[13].at(0);
<a name="l01993"></a>01993         mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a09cabf7baa4911b9ef88757fa7e99ec5">mesh_name</a>          =                values[14];
<a name="l01994"></a>01994         mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a5ea041d0cba6dd6e4e19a528cf3ac2a7">material_name</a>      =                values[15];
<a name="l01995"></a>01995 
<a name="l01996"></a>01996         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a1e2242fe439ea0329a900983f814a651">VerifyAndProcessMeshWheel</a>(line, mesh_wheel, braking, propulsion, side_char);
<a name="l01997"></a>01997     });
<a name="l01998"></a>01998 }
<a name="l01999"></a>01999 
<a name="l02000"></a><a class="code" href="class_rig_def_1_1_parser.html#a3c4118b030b2ba4269e6170c67b2bf8c">02000</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a3c4118b030b2ba4269e6170c67b2bf8c">Parser::ParseMeshWheel</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02001"></a>02001 {
<a name="l02002"></a>02002     boost::smatch results;
<a name="l02003"></a>02003     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_MESHWHEELS_MESHWHEELS2))
<a name="l02004"></a>02004     {
<a name="l02005"></a>02005         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#ae348aa2d7c7f8df85055e7da645f8b1b">ParseMeshWheelUnsafe</a>(line);
<a name="l02006"></a>02006         <span class="keywordflow">return</span>;
<a name="l02007"></a>02007     }
<a name="l02008"></a>02008     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02009"></a>02009 
<a name="l02010"></a>02010     <a class="code" href="struct_rig_def_1_1_mesh_wheel.html">MeshWheel</a> mesh_wheel;
<a name="l02011"></a>02011     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afda1fbd28f08d9e58295e37f9f9eca77">node_defaults</a>      = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l02012"></a>02012     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a0c714a88324f6175af48909dea5b82ab">beam_defaults</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l02013"></a>02013 
<a name="l02014"></a>02014     mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a1940add20de2127b3a1dab8be6246368">tyre_radius</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 1]);
<a name="l02015"></a>02015     mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a68d9460a2c63c863476987672d58c01f">rim_radius</a>         = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 3]);
<a name="l02016"></a>02016     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a7a96dd584f67f6db7367e3b9f883ef70">width</a>              = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 5]);
<a name="l02017"></a>02017     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>           = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[ 7]);
<a name="l02018"></a>02018     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[0]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[ 9]);
<a name="l02019"></a>02019     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[1]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[11]);
<a name="l02020"></a>02020     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[13]);
<a name="l02021"></a>02021     <span class="keywordtype">int</span> braking                   = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[15]);
<a name="l02022"></a>02022     <span class="keywordtype">int</span> propulsion                = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[17]);
<a name="l02023"></a>02023     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afa59c7e5491ae69b016b3c1cf62c4eb4">reference_arm_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[19]);
<a name="l02024"></a>02024     mesh_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a049388b5d59e7a9c8495826da07cabbe">mass</a>               = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[21]);
<a name="l02025"></a>02025     mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a7aad96759a4a928bab56cb63e78db2e7">spring</a>             = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[23]);
<a name="l02026"></a>02026     mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a5f3d5a2415bec8eb5ac515c701a2da7c">damping</a>            = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[25]);
<a name="l02027"></a>02027     <span class="keywordtype">char</span> side_char                =                results[27].str().at(0);
<a name="l02028"></a>02028     mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a09cabf7baa4911b9ef88757fa7e99ec5">mesh_name</a>          =                results[29];
<a name="l02029"></a>02029     mesh_wheel.<a class="code" href="struct_rig_def_1_1_mesh_wheel.html#a5ea041d0cba6dd6e4e19a528cf3ac2a7">material_name</a>      =                results[31];
<a name="l02030"></a>02030 
<a name="l02031"></a>02031     this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a1e2242fe439ea0329a900983f814a651">VerifyAndProcessMeshWheel</a>(line, mesh_wheel, braking, propulsion, side_char);
<a name="l02032"></a>02032 }
<a name="l02033"></a>02033 
<a name="l02034"></a><a class="code" href="class_rig_def_1_1_parser.html#aaf8107e3a91246135337153c53e69e5c">02034</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aaf8107e3a91246135337153c53e69e5c">Parser::ParseMeshWheel2Unsafe</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02035"></a>02035 {
<a name="l02036"></a>02036     <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 16,
<a name="l02037"></a>02037     {
<a name="l02038"></a>02038         <a class="code" href="struct_rig_def_1_1_mesh_wheel2.html">MeshWheel2</a> mesh_wheel_2;
<a name="l02039"></a>02039         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afda1fbd28f08d9e58295e37f9f9eca77">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l02040"></a>02040         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a0c714a88324f6175af48909dea5b82ab">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l02041"></a>02041 
<a name="l02042"></a>02042         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#aba28567b0b52e5ec6fd64dfc0a5108bd">tyre_radius</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 0]);
<a name="l02043"></a>02043         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a8947716de1b3ef17a2da4706123647a5">rim_radius</a>         = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 1]);
<a name="l02044"></a>02044         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a7a96dd584f67f6db7367e3b9f883ef70">width</a>              = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 2]);
<a name="l02045"></a>02045         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>           = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 3]);
<a name="l02046"></a>02046         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[0]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 4]);
<a name="l02047"></a>02047         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[1]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 5]);
<a name="l02048"></a>02048         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 6]);
<a name="l02049"></a>02049         <span class="keywordtype">int</span> braking                     = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 7]);
<a name="l02050"></a>02050         <span class="keywordtype">int</span> propulsion                  = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 8]);
<a name="l02051"></a>02051         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afa59c7e5491ae69b016b3c1cf62c4eb4">reference_arm_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 9]);
<a name="l02052"></a>02052         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a049388b5d59e7a9c8495826da07cabbe">mass</a>               = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[10]);
<a name="l02053"></a>02053         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#ad3d997d002b790fba62a9cf73690e94d">tyre_springiness</a>   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[11]);
<a name="l02054"></a>02054         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a610463f462d96962e86e0121dbf94c62">tyre_damping</a>       = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[12]);
<a name="l02055"></a>02055         <span class="keywordtype">char</span> side_char                  =                values[13].at(0);
<a name="l02056"></a>02056         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_mesh_wheel2.html#a6f70cd49a9acbb47ec7f1c6b77f5ed3f">mesh_name</a>          =                values[14];
<a name="l02057"></a>02057         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_mesh_wheel2.html#a416c9d3cadd3f84f2c641b61a20aa478">material_name</a>      =                values[15];
<a name="l02058"></a>02058 
<a name="l02059"></a>02059         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a5c5afec432a28a9c14994933922b67b7">VerifyAndProcessMeshWheel2</a>(line, mesh_wheel_2, braking, propulsion, side_char);
<a name="l02060"></a>02060     });
<a name="l02061"></a>02061 }
<a name="l02062"></a>02062 
<a name="l02063"></a><a class="code" href="class_rig_def_1_1_parser.html#a7ed61128050ad919e11f37ae76f82851">02063</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7ed61128050ad919e11f37ae76f82851">Parser::ParseMeshWheel2</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02064"></a>02064 {
<a name="l02065"></a>02065     boost::smatch results;
<a name="l02066"></a>02066     <span class="keywordflow">if</span> (!boost::regex_search(line, results, Regexes::SECTION_MESHWHEELS_MESHWHEELS2))
<a name="l02067"></a>02067     {
<a name="l02068"></a>02068         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#aaf8107e3a91246135337153c53e69e5c">ParseMeshWheel2Unsafe</a>(line);
<a name="l02069"></a>02069         <span class="keywordflow">return</span>;
<a name="l02070"></a>02070     }
<a name="l02071"></a>02071     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02072"></a>02072 
<a name="l02073"></a>02073     <a class="code" href="struct_rig_def_1_1_mesh_wheel2.html">MeshWheel2</a> mesh_wheel_2;
<a name="l02074"></a>02074     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afda1fbd28f08d9e58295e37f9f9eca77">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l02075"></a>02075     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a0c714a88324f6175af48909dea5b82ab">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l02076"></a>02076 
<a name="l02077"></a>02077     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#aba28567b0b52e5ec6fd64dfc0a5108bd">tyre_radius</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 1]);
<a name="l02078"></a>02078     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a8947716de1b3ef17a2da4706123647a5">rim_radius</a>         = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 3]);
<a name="l02079"></a>02079     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a7a96dd584f67f6db7367e3b9f883ef70">width</a>              = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 5]);
<a name="l02080"></a>02080     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>           = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[ 7]);
<a name="l02081"></a>02081     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[0]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[ 9]);
<a name="l02082"></a>02082     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[1]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[11]);
<a name="l02083"></a>02083     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[13]);
<a name="l02084"></a>02084     <span class="keywordtype">int</span> braking                     = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[15]);
<a name="l02085"></a>02085     <span class="keywordtype">int</span> propulsion                  = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[17]);
<a name="l02086"></a>02086     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afa59c7e5491ae69b016b3c1cf62c4eb4">reference_arm_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[19]);
<a name="l02087"></a>02087     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a049388b5d59e7a9c8495826da07cabbe">mass</a>               = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[21]);
<a name="l02088"></a>02088     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#ad3d997d002b790fba62a9cf73690e94d">tyre_springiness</a>   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[23]);
<a name="l02089"></a>02089     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a610463f462d96962e86e0121dbf94c62">tyre_damping</a>       = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[25]);
<a name="l02090"></a>02090     <span class="keywordtype">char</span> side_char                  =                results[27].str().at(0);
<a name="l02091"></a>02091     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_mesh_wheel2.html#a6f70cd49a9acbb47ec7f1c6b77f5ed3f">mesh_name</a>          =                results[29];
<a name="l02092"></a>02092     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_mesh_wheel2.html#a416c9d3cadd3f84f2c641b61a20aa478">material_name</a>      =                results[31];
<a name="l02093"></a>02093 
<a name="l02094"></a>02094     this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a5c5afec432a28a9c14994933922b67b7">VerifyAndProcessMeshWheel2</a>(line, mesh_wheel_2, braking, propulsion, side_char);
<a name="l02095"></a>02095 }
<a name="l02096"></a>02096 
<a name="l02097"></a><a class="code" href="class_rig_def_1_1_parser.html#a5c5afec432a28a9c14994933922b67b7">02097</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a5c5afec432a28a9c14994933922b67b7">Parser::VerifyAndProcessMeshWheel2</a>(Ogre::String <span class="keyword">const</span> &amp; line, <a class="code" href="struct_rig_def_1_1_mesh_wheel2.html">MeshWheel2</a>&amp; mesh_wheel_2, <span class="keywordtype">int</span> braking, <span class="keywordtype">int</span> propulsion, <span class="keywordtype">char</span> side_char)
<a name="l02098"></a>02098 {
<a name="l02099"></a>02099     <span class="comment">// Axle rigidity node (9999 = null)</span>
<a name="l02100"></a>02100     <span class="keywordflow">if</span> (mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a5912183c0dfa018a32190a5bc89b53c8">IsValidAnyState</a>() &amp;&amp; mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a654831f9421f9d314d849f966f70a04d">Num</a>() == 9999)
<a name="l02101"></a>02101     {
<a name="l02102"></a>02102         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a4a6abb34a80d8f0037de0c5120c87bad">Invalidate</a>();
<a name="l02103"></a>02103     }
<a name="l02104"></a>02104 
<a name="l02105"></a>02105     <span class="keywordflow">if</span> (braking &lt; 0 || braking &gt; 4)
<a name="l02106"></a>02106     {
<a name="l02107"></a>02107         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid value of parameter ~7 (braking), using 0 (no braking)&quot;</span>);
<a name="l02108"></a>02108         braking = 0;
<a name="l02109"></a>02109     }
<a name="l02110"></a>02110     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a46964892b687b17c70c62eac98c3f46f">braking</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#aadb771065ed24e681acf7ab7e2520bc5">Wheels::Braking</a>(braking);
<a name="l02111"></a>02111 
<a name="l02112"></a>02112     <span class="keywordflow">if</span> (propulsion &lt; 0 || propulsion &gt; 2)
<a name="l02113"></a>02113     {
<a name="l02114"></a>02114         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid value of parameter ~8 (propulsion), using 0 (no propulsion)&quot;</span>);
<a name="l02115"></a>02115         braking = 0;
<a name="l02116"></a>02116     }
<a name="l02117"></a>02117     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2e99bb276d0543791e33f412f727171a">propulsion</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#a07d9912ae1c5e7f667cb8c75661dbbfd">Wheels::Propulsion</a>(propulsion);
<a name="l02118"></a>02118 
<a name="l02119"></a>02119     mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_mesh_wheel2.html#a698d95a43779ef502495c7bc4ef0449a">side</a> = <a class="code" href="struct_rig_def_1_1_mesh_wheel.html#af699d01e3d1bda900be710256d58f9f7abcee8ea57fa8ca53df33f548c504460f">MeshWheel::SIDE_RIGHT</a>;
<a name="l02120"></a>02120     <span class="keywordflow">if</span> (side_char != <span class="charliteral">&#39;r&#39;</span>)
<a name="l02121"></a>02121     {
<a name="l02122"></a>02122         <span class="keywordflow">if</span> (side_char != <span class="charliteral">&#39;l&#39;</span>)
<a name="l02123"></a>02123         {
<a name="l02124"></a>02124             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Invalid SIDE flag (acceptable are [r/l]), parsing as LEFT for backwards compatibility: &quot;</span>) + side_char);
<a name="l02125"></a>02125         }
<a name="l02126"></a>02126         mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_mesh_wheel2.html#a698d95a43779ef502495c7bc4ef0449a">side</a> = <a class="code" href="struct_rig_def_1_1_mesh_wheel.html#af699d01e3d1bda900be710256d58f9f7ab1b494ef80c74dffd8ff89f9f6f8cc46">MeshWheel::SIDE_LEFT</a>;
<a name="l02127"></a>02127     }
<a name="l02128"></a>02128 
<a name="l02129"></a>02129     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l02130"></a>02130     {
<a name="l02131"></a>02131         <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a639c4f71bc37fc08f02a5b603ee14033">GenerateNodesForWheel</a>(<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3af8622fd1cf2cedf11cfe390251b32947">File::KEYWORD_MESHWHEELS2</a>, mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>, mesh_wheel_2.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a5912183c0dfa018a32190a5bc89b53c8">IsValidAnyState</a>());
<a name="l02132"></a>02132     }
<a name="l02133"></a>02133 
<a name="l02134"></a>02134     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;mesh_wheels_2.push_back(mesh_wheel_2);
<a name="l02135"></a>02135 }
<a name="l02136"></a>02136 
<a name="l02137"></a><a class="code" href="class_rig_def_1_1_parser.html#a03bba23d065715ad40ba7a2ddec29d44">02137</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a03bba23d065715ad40ba7a2ddec29d44">Parser::ParseHook</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02138"></a>02138 {
<a name="l02139"></a>02139     boost::smatch results;
<a name="l02140"></a>02140     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_HOOKS))
<a name="l02141"></a>02141     {
<a name="l02142"></a>02142         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02143"></a>02143         <span class="keywordflow">return</span>;
<a name="l02144"></a>02144     }
<a name="l02145"></a>02145     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02146"></a>02146 
<a name="l02147"></a>02147     <a class="code" href="struct_rig_def_1_1_hook.html">Hook</a> hook;
<a name="l02148"></a>02148     hook.<a class="code" href="struct_rig_def_1_1_hook.html#a01f2d5f1ab67a86f5a6845eb5515a94d">node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l02149"></a>02149 
<a name="l02150"></a>02150     Ogre::StringVector tokens = Ogre::StringUtil::split(results[2], <span class="stringliteral">&quot;,&quot;</span>);
<a name="l02151"></a>02151     Ogre::StringVector::iterator iter = tokens.begin();
<a name="l02152"></a>02152     <span class="keywordflow">for</span> ( ; iter != tokens.end(); iter++)
<a name="l02153"></a>02153     {
<a name="l02154"></a>02154         boost::smatch results;
<a name="l02155"></a>02155         <span class="keywordflow">if</span> (! boost::regex_search(*iter, results, Regexes::HOOKS_OPTIONS))
<a name="l02156"></a>02156         {
<a name="l02157"></a>02157             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(*iter, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid option of &#39;hooks&#39;, ignoring...&quot;</span>);
<a name="l02158"></a>02158             <span class="keywordflow">return</span>;
<a name="l02159"></a>02159         }
<a name="l02160"></a>02160 
<a name="l02161"></a>02161         <span class="keywordflow">if</span> (! results[1].matched) 
<a name="l02162"></a>02162         {
<a name="l02163"></a>02163             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(*iter, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid option of &#39;hooks&#39;, ignoring...&quot;</span>);
<a name="l02164"></a>02164             <span class="keywordflow">return</span>;
<a name="l02165"></a>02165         }
<a name="l02166"></a>02166         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[2].matched) 
<a name="l02167"></a>02167         {
<a name="l02168"></a>02168             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(hook.<a class="code" href="struct_rig_def_1_1_hook.html#aeae478518568ac4c0c8a2be16745c744">flags</a>, Hook::FLAG_SELF_LOCK);
<a name="l02169"></a>02169         }
<a name="l02170"></a>02170         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[3].matched) 
<a name="l02171"></a>02171         {
<a name="l02172"></a>02172             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(hook.<a class="code" href="struct_rig_def_1_1_hook.html#aeae478518568ac4c0c8a2be16745c744">flags</a>, Hook::FLAG_AUTO_LOCK);
<a name="l02173"></a>02173         }
<a name="l02174"></a>02174         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[4].matched) 
<a name="l02175"></a>02175         {
<a name="l02176"></a>02176             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(hook.<a class="code" href="struct_rig_def_1_1_hook.html#aeae478518568ac4c0c8a2be16745c744">flags</a>, Hook::FLAG_NO_DISABLE);
<a name="l02177"></a>02177         }
<a name="l02178"></a>02178         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[5].matched) 
<a name="l02179"></a>02179         {
<a name="l02180"></a>02180             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(hook.<a class="code" href="struct_rig_def_1_1_hook.html#aeae478518568ac4c0c8a2be16745c744">flags</a>, Hook::FLAG_NO_ROPE);
<a name="l02181"></a>02181         }
<a name="l02182"></a>02182         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[6].matched) 
<a name="l02183"></a>02183         {
<a name="l02184"></a>02184             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(hook.<a class="code" href="struct_rig_def_1_1_hook.html#aeae478518568ac4c0c8a2be16745c744">flags</a>, Hook::FLAG_VISIBLE);
<a name="l02185"></a>02185         }
<a name="l02186"></a>02186         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[7].matched) 
<a name="l02187"></a>02187         {
<a name="l02188"></a>02188             hook.<a class="code" href="struct_rig_def_1_1_hook.html#ac3636e93d80f1661fc35d0f11e9962a7">option_hook_range</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[8]);
<a name="l02189"></a>02189         }
<a name="l02190"></a>02190         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[9].matched) 
<a name="l02191"></a>02191         {
<a name="l02192"></a>02192             hook.<a class="code" href="struct_rig_def_1_1_hook.html#a097d4679b1e15280132d779875b1f738">option_max_force</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[10]);
<a name="l02193"></a>02193         }
<a name="l02194"></a>02194         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[11].matched) 
<a name="l02195"></a>02195         {
<a name="l02196"></a>02196             hook.<a class="code" href="struct_rig_def_1_1_hook.html#a811b7a7360afc101c1eab7112a9fb3bc">option_hookgroup</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[12]);
<a name="l02197"></a>02197         }
<a name="l02198"></a>02198         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[13].matched) 
<a name="l02199"></a>02199         {
<a name="l02200"></a>02200             hook.<a class="code" href="struct_rig_def_1_1_hook.html#a40a5ee3b921373bb4cbd5047225bfc9b">option_lockgroup</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[14]);
<a name="l02201"></a>02201         }
<a name="l02202"></a>02202         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[15].matched) 
<a name="l02203"></a>02203         {
<a name="l02204"></a>02204             hook.<a class="code" href="struct_rig_def_1_1_hook.html#aad124f3192fff9addc2ecbecb8c8eec6">option_timer</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[16]);
<a name="l02205"></a>02205         }
<a name="l02206"></a>02206         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[17].matched) 
<a name="l02207"></a>02207         {
<a name="l02208"></a>02208             hook.<a class="code" href="struct_rig_def_1_1_hook.html#a3b467ae3c087117ded123c54f1cc790f">option_minimum_range_meters</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[18]);
<a name="l02209"></a>02209         }
<a name="l02210"></a>02210         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[19].matched) 
<a name="l02211"></a>02211         {
<a name="l02212"></a>02212             hook.<a class="code" href="struct_rig_def_1_1_hook.html#aaeee104bc6070537c7a94dc4087a4f23">option_speed_coef</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[20]);
<a name="l02213"></a>02213         }
<a name="l02214"></a>02214     }
<a name="l02215"></a>02215 
<a name="l02216"></a>02216     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;hooks.push_back(hook);
<a name="l02217"></a>02217 }
<a name="l02218"></a>02218 
<a name="l02219"></a><a class="code" href="class_rig_def_1_1_parser.html#a0e769d1478a9a65605f958b0908e3f54">02219</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a0e769d1478a9a65605f958b0908e3f54">Parser::ParseHelp</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02220"></a>02220 {
<a name="l02221"></a>02221     <span class="keywordflow">if</span> (! <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;help_panel_material_name.empty())
<a name="l02222"></a>02222     {
<a name="l02223"></a>02223         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Multiple lines of section &#39;help&#39;, using the last found...&quot;</span>);
<a name="l02224"></a>02224     }
<a name="l02225"></a>02225 
<a name="l02226"></a>02226     boost::smatch results;
<a name="l02227"></a>02227     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_HELP))
<a name="l02228"></a>02228     {
<a name="l02229"></a>02229         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02230"></a>02230         <span class="keywordflow">return</span>;
<a name="l02231"></a>02231     }
<a name="l02232"></a>02232     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02233"></a>02233 
<a name="l02234"></a>02234     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;help_panel_material_name = results[1];
<a name="l02235"></a>02235 }
<a name="l02236"></a>02236 
<a name="l02237"></a><a class="code" href="class_rig_def_1_1_parser.html#af413ee4931873dda62239e4aa8406e21">02237</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#af413ee4931873dda62239e4aa8406e21">Parser::ParseGuiSettings</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02238"></a>02238 {
<a name="l02239"></a>02239     boost::smatch results;
<a name="l02240"></a>02240     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_GUISETTINGS))
<a name="l02241"></a>02241     {
<a name="l02242"></a>02242         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02243"></a>02243         <span class="keywordflow">return</span>;
<a name="l02244"></a>02244     }
<a name="l02245"></a>02245     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02246"></a>02246 
<a name="l02247"></a>02247     <span class="keywordflow">if</span> (results[3].matched)
<a name="l02248"></a>02248     {
<a name="l02249"></a>02249         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;tacho_material = results[3];
<a name="l02250"></a>02250     }
<a name="l02251"></a>02251     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[5].matched)
<a name="l02252"></a>02252     {
<a name="l02253"></a>02253         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;speedo_material = results[5];
<a name="l02254"></a>02254     }
<a name="l02255"></a>02255     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[7].matched)
<a name="l02256"></a>02256     {
<a name="l02257"></a>02257         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;speedo_highest_kph = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[7]);
<a name="l02258"></a>02258     }
<a name="l02259"></a>02259     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[9].matched)
<a name="l02260"></a>02260     {
<a name="l02261"></a>02261         <span class="keywordtype">int</span> input = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[9]);
<a name="l02262"></a>02262         <span class="keywordflow">if</span> ( input != 0 &amp;&amp; input != 1 ) <span class="comment">// This is backwards compatible, legacy check was: 1. parse VALUE_STR as int 2. compare (VALUE_INT == 1)</span>
<a name="l02263"></a>02263         {
<a name="l02264"></a>02264             std::stringstream msg;
<a name="l02265"></a>02265             msg &lt;&lt; <span class="stringliteral">&quot;Param &#39;Use Max RPM&#39; has invalid value &#39;&quot;</span> &lt;&lt; results[9] &lt;&lt; <span class="stringliteral">&quot;&#39;. Valid values are &#39;0&#39; (no) or &#39;1&#39; (yes). Parsing as &#39;0&#39; (no). Please fix.&quot;</span>;
<a name="l02266"></a>02266             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l02267"></a>02267         }
<a name="l02268"></a>02268         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;use_max_rpm = (input == 1);
<a name="l02269"></a>02269     }
<a name="l02270"></a>02270     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[11].matched)
<a name="l02271"></a>02271     {
<a name="l02272"></a>02272         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;help_material = results[11];
<a name="l02273"></a>02273     }
<a name="l02274"></a>02274     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[12].matched)
<a name="l02275"></a>02275     {
<a name="l02276"></a>02276         <span class="keywordflow">if</span> (results[14].matched)
<a name="l02277"></a>02277         {
<a name="l02278"></a>02278             <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;interactive_overview_map_mode = <a class="code" href="struct_rig_def_1_1_gui_settings.html#a0f8cee9056b236d7aa4467a9e0b4da78a8a72a417c9647882e63c0b488d2a2700">GuiSettings::MAP_MODE_OFF</a>;
<a name="l02279"></a>02279         }
<a name="l02280"></a>02280         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[15].matched)
<a name="l02281"></a>02281         {
<a name="l02282"></a>02282             <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;interactive_overview_map_mode = <a class="code" href="struct_rig_def_1_1_gui_settings.html#a0f8cee9056b236d7aa4467a9e0b4da78a337016f6a0bae11b4f6c3cf0c671a2bb">GuiSettings::MAP_MODE_SIMPLE</a>;
<a name="l02283"></a>02283         }
<a name="l02284"></a>02284         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[16].matched)
<a name="l02285"></a>02285         {
<a name="l02286"></a>02286             <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;interactive_overview_map_mode = <a class="code" href="struct_rig_def_1_1_gui_settings.html#a0f8cee9056b236d7aa4467a9e0b4da78a9dfd97e56f17c081dc51e220dc7d4783">GuiSettings::MAP_MODE_ZOOM</a>;
<a name="l02287"></a>02287         }
<a name="l02288"></a>02288     }
<a name="l02289"></a>02289     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[18].matched)
<a name="l02290"></a>02290     {
<a name="l02291"></a>02291         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;dashboard_layouts.push_back(results[18]);
<a name="l02292"></a>02292     }
<a name="l02293"></a>02293     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[20].matched)
<a name="l02294"></a>02294     {
<a name="l02295"></a>02295         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;gui_settings-&gt;rtt_dashboard_layouts.push_back(results[20]);
<a name="l02296"></a>02296     }
<a name="l02297"></a>02297     <span class="keywordflow">else</span>
<a name="l02298"></a>02298     {
<a name="l02299"></a>02299         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02300"></a>02300     }
<a name="l02301"></a>02301 }
<a name="l02302"></a>02302 
<a name="l02303"></a><a class="code" href="class_rig_def_1_1_parser.html#abd45553f5bbfa7d2c26ec2aa463555e9">02303</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#abd45553f5bbfa7d2c26ec2aa463555e9">Parser::ParseGuid</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02304"></a>02304 {
<a name="l02305"></a>02305     <span class="keywordflow">if</span> (! <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;guid.empty())
<a name="l02306"></a>02306     {
<a name="l02307"></a>02307         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Multiple sections &#39;guid&#39;, using the last defined...&quot;</span>);
<a name="l02308"></a>02308     }
<a name="l02309"></a>02309 
<a name="l02310"></a>02310     boost::smatch results;
<a name="l02311"></a>02311     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_GUID))
<a name="l02312"></a>02312     {
<a name="l02313"></a>02313         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid inline-section &#39;guid&#39;, ignoring...&quot;</span>);
<a name="l02314"></a>02314         <span class="keywordflow">return</span>;
<a name="l02315"></a>02315     }
<a name="l02316"></a>02316     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02317"></a>02317 
<a name="l02318"></a>02318     <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;guid = results[1];
<a name="l02319"></a>02319 }
<a name="l02320"></a>02320 
<a name="l02321"></a><a class="code" href="class_rig_def_1_1_parser.html#ab592cbae0dd1ea444b7e6759a91a7522">02321</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ab592cbae0dd1ea444b7e6759a91a7522">Parser::ParseGlobals</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02322"></a>02322 {
<a name="l02323"></a>02323     boost::smatch results;
<a name="l02324"></a>02324     <span class="keyword">const</span> boost::regex &amp; regex = Regexes::SECTION_GLOBALS;
<a name="l02325"></a>02325     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_GLOBALS))
<a name="l02326"></a>02326     {
<a name="l02327"></a>02327         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02328"></a>02328         <span class="keywordflow">return</span>;
<a name="l02329"></a>02329     }
<a name="l02330"></a>02330 
<a name="l02331"></a>02331     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;globals != <span class="keyword">nullptr</span>)
<a name="l02332"></a>02332     {
<a name="l02333"></a>02333         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Multiple sections &#39;globals&#39; in one module, using the first one found.&quot;</span>);
<a name="l02334"></a>02334         <span class="keywordflow">return</span>;
<a name="l02335"></a>02335     }
<a name="l02336"></a>02336 
<a name="l02337"></a>02337     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02338"></a>02338 
<a name="l02339"></a>02339     <a class="code" href="struct_rig_def_1_1_globals.html">Globals</a> globals;
<a name="l02340"></a>02340     globals.<a class="code" href="struct_rig_def_1_1_globals.html#a7df0742afda289790b6b0beb1d0357c7">dry_mass</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l02341"></a>02341     globals.<a class="code" href="struct_rig_def_1_1_globals.html#a40605f47fa039afe62c7e56d127c6236">cargo_mass</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l02342"></a>02342     <span class="keywordflow">if</span> (results[3].matched)
<a name="l02343"></a>02343     {
<a name="l02344"></a>02344         globals.<a class="code" href="struct_rig_def_1_1_globals.html#a7fa30f1f005f4f9b5d9ce5f7a8dd8ca8">material_name</a> = results[4];
<a name="l02345"></a>02345     }
<a name="l02346"></a>02346 
<a name="l02347"></a>02347     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;globals = boost::shared_ptr&lt;Globals&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_globals.html">Globals</a>(globals) );
<a name="l02348"></a>02348 }
<a name="l02349"></a>02349 
<a name="l02350"></a><a class="code" href="class_rig_def_1_1_parser.html#a696d8b73da8c6e684c5cb464552b3953">02350</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a696d8b73da8c6e684c5cb464552b3953">Parser::ParseFusedrag</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02351"></a>02351 {
<a name="l02352"></a>02352     boost::smatch results;
<a name="l02353"></a>02353     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_FUSEDRAG))
<a name="l02354"></a>02354     {
<a name="l02355"></a>02355         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02356"></a>02356         <span class="keywordflow">return</span>;
<a name="l02357"></a>02357     }
<a name="l02358"></a>02358     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02359"></a>02359 
<a name="l02360"></a>02360     <a class="code" href="struct_rig_def_1_1_fusedrag.html">Fusedrag</a> fusedrag;
<a name="l02361"></a>02361     fusedrag.<a class="code" href="struct_rig_def_1_1_fusedrag.html#ab835953a261cb4749a86abfe4b2f7a57">front_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l02362"></a>02362     fusedrag.<a class="code" href="struct_rig_def_1_1_fusedrag.html#a2efe22f9f139c92c680c45d8a3779d57">rear_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l02363"></a>02363 
<a name="l02364"></a>02364     <span class="keywordflow">if</span> (results[3].matched)
<a name="l02365"></a>02365     {
<a name="l02366"></a>02366         fusedrag.<a class="code" href="struct_rig_def_1_1_fusedrag.html#ade27250a1d499d0c5782e10368dba628">approximate_width</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l02367"></a>02367         fusedrag.<a class="code" href="struct_rig_def_1_1_fusedrag.html#a386e5c4c276721a79d00ef61e656cfd2">airfoil_name</a> = results[5];
<a name="l02368"></a>02368 
<a name="l02369"></a>02369         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;fusedrag.push_back(fusedrag);
<a name="l02370"></a>02370     }
<a name="l02371"></a>02371     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[6].matched)
<a name="l02372"></a>02372     {
<a name="l02373"></a>02373         fusedrag.<a class="code" href="struct_rig_def_1_1_fusedrag.html#ab11e1d8b1d40bc97ea990500057e6d0e">autocalc</a> = <span class="keyword">true</span>;
<a name="l02374"></a>02374 
<a name="l02375"></a>02375         <span class="keywordflow">if</span> (results[7].matched)
<a name="l02376"></a>02376         {
<a name="l02377"></a>02377             fusedrag.<a class="code" href="struct_rig_def_1_1_fusedrag.html#aedb2d863626ae5bcfda5fb1740620265">area_coefficient</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[8]);
<a name="l02378"></a>02378 
<a name="l02379"></a>02379             <span class="keywordflow">if</span> (results[9].matched)
<a name="l02380"></a>02380             {
<a name="l02381"></a>02381                 fusedrag.<a class="code" href="struct_rig_def_1_1_fusedrag.html#a386e5c4c276721a79d00ef61e656cfd2">airfoil_name</a> = results[10];
<a name="l02382"></a>02382             }
<a name="l02383"></a>02383         }
<a name="l02384"></a>02384 
<a name="l02385"></a>02385         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;fusedrag.push_back(fusedrag);
<a name="l02386"></a>02386     }
<a name="l02387"></a>02387     <span class="keywordflow">else</span>
<a name="l02388"></a>02388     {
<a name="l02389"></a>02389         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02390"></a>02390         <span class="keywordflow">return</span>;
<a name="l02391"></a>02391     }
<a name="l02392"></a>02392 }
<a name="l02393"></a>02393 
<a name="l02394"></a><a class="code" href="class_rig_def_1_1_parser.html#afde15d2836dababf775619489e53d91c">02394</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#afde15d2836dababf775619489e53d91c">Parser::_ParseCameraSettings</a>(<a class="code" href="struct_rig_def_1_1_camera_settings.html">CameraSettings</a> &amp; camera_settings, Ogre::String input_str)
<a name="l02395"></a>02395 {
<a name="l02396"></a>02396     <span class="keywordtype">int</span> input = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(input_str);
<a name="l02397"></a>02397     <span class="keywordflow">if</span> (input &gt;= 0)
<a name="l02398"></a>02398     {
<a name="l02399"></a>02399         camera_settings.<a class="code" href="struct_rig_def_1_1_camera_settings.html#a1edd2dcb5809cd604eb3d2bfbbaf5743">mode</a> = <a class="code" href="struct_rig_def_1_1_camera_settings.html#ae863ff86c38d3a617fcb5fd119e9ddd1ae078e87947501801495854dfe1a88d7f">CameraSettings::MODE_CINECAM</a>;
<a name="l02400"></a>02400         camera_settings.<a class="code" href="struct_rig_def_1_1_camera_settings.html#a63d33756893eea35b13933ebaa998266">cinecam_index</a> = input;
<a name="l02401"></a>02401     }
<a name="l02402"></a>02402     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (input &gt;= -2)
<a name="l02403"></a>02403     {
<a name="l02404"></a>02404         camera_settings.<a class="code" href="struct_rig_def_1_1_camera_settings.html#a1edd2dcb5809cd604eb3d2bfbbaf5743">mode</a> = <a class="code" href="struct_rig_def_1_1_camera_settings.html#ae863ff86c38d3a617fcb5fd119e9ddd1">CameraSettings::Mode</a>(input);
<a name="l02405"></a>02405     }
<a name="l02406"></a>02406     <span class="keywordflow">else</span>
<a name="l02407"></a>02407     {
<a name="l02408"></a>02408         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(input_str, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid value of camera setting, ignoring...&quot;</span>);
<a name="l02409"></a>02409         <span class="keywordflow">return</span>;
<a name="l02410"></a>02410     }
<a name="l02411"></a>02411 }
<a name="l02412"></a>02412 
<a name="l02413"></a><a class="code" href="class_rig_def_1_1_parser.html#addad23a09d60687db3df110c981a8d7f">02413</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#addad23a09d60687db3df110c981a8d7f">Parser::ParseDirectiveFlexbodyCameraMode</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02414"></a>02414 {
<a name="l02415"></a>02415     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a> == <span class="keyword">nullptr</span>)
<a name="l02416"></a>02416     {
<a name="l02417"></a>02417         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;No flexbody to update, ignoring...&quot;</span>);
<a name="l02418"></a>02418         <span class="keywordflow">return</span>;
<a name="l02419"></a>02419     }
<a name="l02420"></a>02420 
<a name="l02421"></a>02421     boost::smatch results;
<a name="l02422"></a>02422     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_FLEXBODY_CAMERA_MODE))
<a name="l02423"></a>02423     {
<a name="l02424"></a>02424         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02425"></a>02425         <span class="keywordflow">return</span>;
<a name="l02426"></a>02426     }
<a name="l02427"></a>02427     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02428"></a>02428 
<a name="l02429"></a>02429     <a class="code" href="class_rig_def_1_1_parser.html#afde15d2836dababf775619489e53d91c">_ParseCameraSettings</a>(<a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a>-&gt;camera_settings, results[1]);
<a name="l02430"></a>02430 }
<a name="l02431"></a>02431 
<a name="l02432"></a><a class="code" href="class_rig_def_1_1_parser.html#a5bac969579361161e98cf4c6bcc66a1f">02432</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_rig_def_1_1_parser.html#a5bac969579361161e98cf4c6bcc66a1f">Parser::_ParseCabOptions</a>(Ogre::String <span class="keyword">const</span> &amp; options_str)
<a name="l02433"></a>02433 {
<a name="l02434"></a>02434     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cab_options = 0;
<a name="l02435"></a>02435     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; options_str.length(); i++)
<a name="l02436"></a>02436     {
<a name="l02437"></a>02437         <span class="keywordflow">switch</span> (options_str.at(i))
<a name="l02438"></a>02438         {
<a name="l02439"></a>02439         <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:
<a name="l02440"></a>02440             cab_options |= <a class="code" href="struct_rig_def_1_1_cab.html#ab9ca6727614d82936118bd72fda9ed8c">Cab::OPTION_c_CONTACT</a>;
<a name="l02441"></a>02441             <span class="keywordflow">break</span>;
<a name="l02442"></a>02442         <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:
<a name="l02443"></a>02443             cab_options |= <a class="code" href="struct_rig_def_1_1_cab.html#a9e807c56e3fcf501644a590ead107f0c">Cab::OPTION_b_BUOYANT</a>;
<a name="l02444"></a>02444             <span class="keywordflow">break</span>;
<a name="l02445"></a>02445         <span class="keywordflow">case</span> <span class="charliteral">&#39;D&#39;</span>:
<a name="l02446"></a>02446             cab_options |= (<a class="code" href="struct_rig_def_1_1_cab.html#ab9ca6727614d82936118bd72fda9ed8c">Cab::OPTION_c_CONTACT</a> | <a class="code" href="struct_rig_def_1_1_cab.html#a9e807c56e3fcf501644a590ead107f0c">Cab::OPTION_b_BUOYANT</a>);
<a name="l02447"></a>02447             <span class="keywordflow">break</span>;
<a name="l02448"></a>02448         <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:
<a name="l02449"></a>02449             cab_options |= <a class="code" href="struct_rig_def_1_1_cab.html#ab2db444140540ee627487748513b8f8b">Cab::OPTION_p_10xTOUGHER</a>;
<a name="l02450"></a>02450             <span class="keywordflow">break</span>;
<a name="l02451"></a>02451         <span class="keywordflow">case</span> <span class="charliteral">&#39;u&#39;</span>:
<a name="l02452"></a>02452             cab_options |= <a class="code" href="struct_rig_def_1_1_cab.html#a527ef97a08f09bd243f0e7bf223ed801">Cab::OPTION_u_INVULNERABLE</a>;
<a name="l02453"></a>02453             <span class="keywordflow">break</span>;
<a name="l02454"></a>02454         <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>:
<a name="l02455"></a>02455             cab_options |= (<a class="code" href="struct_rig_def_1_1_cab.html#ab2db444140540ee627487748513b8f8b">Cab::OPTION_p_10xTOUGHER</a> | <a class="code" href="struct_rig_def_1_1_cab.html#a9e807c56e3fcf501644a590ead107f0c">Cab::OPTION_b_BUOYANT</a>);
<a name="l02456"></a>02456             <span class="keywordflow">break</span>;
<a name="l02457"></a>02457         <span class="keywordflow">case</span> <span class="charliteral">&#39;S&#39;</span>:
<a name="l02458"></a>02458             cab_options |= (<a class="code" href="struct_rig_def_1_1_cab.html#a527ef97a08f09bd243f0e7bf223ed801">Cab::OPTION_u_INVULNERABLE</a> | <a class="code" href="struct_rig_def_1_1_cab.html#a9e807c56e3fcf501644a590ead107f0c">Cab::OPTION_b_BUOYANT</a>);
<a name="l02459"></a>02459             <span class="keywordflow">break</span>;
<a name="l02460"></a>02460         <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:
<a name="l02461"></a>02461             <span class="keywordflow">break</span>; <span class="comment">/* Placeholder, does nothing */</span>
<a name="l02462"></a>02462 
<a name="l02463"></a>02463         <span class="keywordflow">default</span>:
<a name="l02464"></a>02464             std::stringstream msg;
<a name="l02465"></a>02465             msg &lt;&lt; <span class="stringliteral">&quot;Subsection &#39;submesh/cab&#39;: Invalid option &#39;&quot;</span> &lt;&lt; options_str.at(i) &lt;&lt; <span class="stringliteral">&quot;&#39;, ignoring...&quot;</span>;
<a name="l02466"></a>02466             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(options_str, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l02467"></a>02467             <span class="keywordflow">break</span>;
<a name="l02468"></a>02468         }
<a name="l02469"></a>02469     }
<a name="l02470"></a>02470     <span class="keywordflow">return</span> cab_options;
<a name="l02471"></a>02471 }
<a name="l02472"></a>02472 
<a name="l02473"></a><a class="code" href="class_rig_def_1_1_parser.html#a3edd51f79fef295f1d53c0bbc2507211">02473</a> <span class="keywordtype">bool</span> <a class="code" href="class_rig_def_1_1_parser.html#a3edd51f79fef295f1d53c0bbc2507211">Parser::_TryParseCab</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02474"></a>02474 {
<a name="l02475"></a>02475     boost::smatch results;
<a name="l02476"></a>02476     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SUBMESH_SUBSECTION_CAB))
<a name="l02477"></a>02477     {
<a name="l02478"></a>02478         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l02479"></a>02479     }
<a name="l02480"></a>02480     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02481"></a>02481 
<a name="l02482"></a>02482     <a class="code" href="struct_rig_def_1_1_cab.html">Cab</a> cab;
<a name="l02483"></a>02483     cab.<a class="code" href="struct_rig_def_1_1_cab.html#a669b26c47231e22fc72da26d7df21554">nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l02484"></a>02484     cab.<a class="code" href="struct_rig_def_1_1_cab.html#a669b26c47231e22fc72da26d7df21554">nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l02485"></a>02485     cab.<a class="code" href="struct_rig_def_1_1_cab.html#a669b26c47231e22fc72da26d7df21554">nodes</a>[2] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l02486"></a>02486 
<a name="l02487"></a>02487     <span class="keywordflow">if</span> (results[6].matched)
<a name="l02488"></a>02488     {
<a name="l02489"></a>02489         cab.<a class="code" href="struct_rig_def_1_1_cab.html#a1e78b5f7bd8c85f0c3fc5992824ce01d">options</a> = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a5bac969579361161e98cf4c6bcc66a1f">_ParseCabOptions</a>(results[8].str());
<a name="l02490"></a>02490     }
<a name="l02491"></a>02491 
<a name="l02492"></a>02492     <a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>-&gt;cab_triangles.push_back(cab);
<a name="l02493"></a>02493     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l02494"></a>02494 }
<a name="l02495"></a>02495 
<a name="l02496"></a><a class="code" href="class_rig_def_1_1_parser.html#aab233c75ad99ecd1e929ddfde77f3f74">02496</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aab233c75ad99ecd1e929ddfde77f3f74">Parser::ParseSubmeshUnsafe</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02497"></a>02497 {
<a name="l02498"></a>02498     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> == <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea8ef2c093f242bbdf0c298ee7f5e8d167">File::SUBSECTION__SUBMESH__CAB</a>)
<a name="l02499"></a>02499     {
<a name="l02500"></a>02500         <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 3,
<a name="l02501"></a>02501         {
<a name="l02502"></a>02502             <a class="code" href="struct_rig_def_1_1_cab.html">Cab</a> cab;
<a name="l02503"></a>02503             cab.<a class="code" href="struct_rig_def_1_1_cab.html#a669b26c47231e22fc72da26d7df21554">nodes</a>[0] = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[0]);
<a name="l02504"></a>02504             cab.<a class="code" href="struct_rig_def_1_1_cab.html#a669b26c47231e22fc72da26d7df21554">nodes</a>[1] = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[1]);
<a name="l02505"></a>02505             cab.<a class="code" href="struct_rig_def_1_1_cab.html#a669b26c47231e22fc72da26d7df21554">nodes</a>[2] = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[2]);
<a name="l02506"></a>02506             <span class="keywordflow">if</span> (values.size() &gt; 3)
<a name="l02507"></a>02507             {
<a name="l02508"></a>02508                 cab.<a class="code" href="struct_rig_def_1_1_cab.html#a1e78b5f7bd8c85f0c3fc5992824ce01d">options</a> = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a5bac969579361161e98cf4c6bcc66a1f">_ParseCabOptions</a>(values[3]);
<a name="l02509"></a>02509             }
<a name="l02510"></a>02510 
<a name="l02511"></a>02511             <a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>-&gt;cab_triangles.push_back(cab);
<a name="l02512"></a>02512         });
<a name="l02513"></a>02513     }
<a name="l02514"></a>02514     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> == <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaeaa8f7beeb2c069c79e31a25faf9d1eb8b">File::SUBSECTION__SUBMESH__TEXCOORDS</a>)
<a name="l02515"></a>02515     {
<a name="l02516"></a>02516         <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 3,
<a name="l02517"></a>02517         {
<a name="l02518"></a>02518             <a class="code" href="struct_rig_def_1_1_texcoord.html">Texcoord</a> texcoord;
<a name="l02519"></a>02519             texcoord.<a class="code" href="struct_rig_def_1_1_texcoord.html#a90f2f8b54e38ae1302ae3a9e6fb7df48">node</a> = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[0]);
<a name="l02520"></a>02520             texcoord.<a class="code" href="struct_rig_def_1_1_texcoord.html#a3bc5670c3d9843fc13c9d691b91e0c45">u</a>    =      <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[1]);
<a name="l02521"></a>02521             texcoord.<a class="code" href="struct_rig_def_1_1_texcoord.html#afb31ce2f3a75ac732174fcb3e72d7935">v</a>    =      <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[2]);
<a name="l02522"></a>02522 
<a name="l02523"></a>02523             <a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>-&gt;texcoords.push_back(texcoord);
<a name="l02524"></a>02524         });
<a name="l02525"></a>02525     }
<a name="l02526"></a>02526 }
<a name="l02527"></a>02527 
<a name="l02528"></a><a class="code" href="class_rig_def_1_1_parser.html#a98fa78e63766beded3eb3c45c5cfe1e0">02528</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a98fa78e63766beded3eb3c45c5cfe1e0">Parser::ParseSubmesh</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02529"></a>02529 {
<a name="l02530"></a>02530     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> == <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea8ef2c093f242bbdf0c298ee7f5e8d167">File::SUBSECTION__SUBMESH__CAB</a>)
<a name="l02531"></a>02531     {
<a name="l02532"></a>02532         <span class="keywordflow">if</span> (!this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a3edd51f79fef295f1d53c0bbc2507211">_TryParseCab</a>(line))
<a name="l02533"></a>02533         {
<a name="l02534"></a>02534             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#aab233c75ad99ecd1e929ddfde77f3f74">ParseSubmeshUnsafe</a>(line);
<a name="l02535"></a>02535         }
<a name="l02536"></a>02536     }
<a name="l02537"></a>02537     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> == <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaeaa8f7beeb2c069c79e31a25faf9d1eb8b">File::SUBSECTION__SUBMESH__TEXCOORDS</a>)
<a name="l02538"></a>02538     {
<a name="l02539"></a>02539         boost::smatch results;
<a name="l02540"></a>02540         <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SUBMESH_SUBSECTION_TEXCOORDS))
<a name="l02541"></a>02541         {
<a name="l02542"></a>02542             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#aab233c75ad99ecd1e929ddfde77f3f74">ParseSubmeshUnsafe</a>(line);
<a name="l02543"></a>02543             <span class="keywordflow">return</span>;
<a name="l02544"></a>02544         }
<a name="l02545"></a>02545         <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02546"></a>02546 
<a name="l02547"></a>02547         <a class="code" href="struct_rig_def_1_1_texcoord.html">Texcoord</a> texcoord;
<a name="l02548"></a>02548         texcoord.<a class="code" href="struct_rig_def_1_1_texcoord.html#a90f2f8b54e38ae1302ae3a9e6fb7df48">node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l02549"></a>02549         texcoord.<a class="code" href="struct_rig_def_1_1_texcoord.html#a3bc5670c3d9843fc13c9d691b91e0c45">u</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l02550"></a>02550         texcoord.<a class="code" href="struct_rig_def_1_1_texcoord.html#afb31ce2f3a75ac732174fcb3e72d7935">v</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l02551"></a>02551 
<a name="l02552"></a>02552         <a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>-&gt;texcoords.push_back(texcoord);
<a name="l02553"></a>02553     }
<a name="l02554"></a>02554     <span class="comment">// Experiment, left here for future use</span>
<a name="l02555"></a>02555     <span class="comment">//else if (this-&gt;_TryParseCab(line))</span>
<a name="l02556"></a>02556     <span class="comment">//{</span>
<a name="l02557"></a>02557     <span class="comment">//    AddMessage(line, Message::TYPE_WARNING, &quot;Section submesh has no subsection defined, but subsequent line matches &#39;cab&#39; entry. Parsed as &#39;cab&#39;.&quot;);</span>
<a name="l02558"></a>02558     <span class="comment">//}</span>
<a name="l02559"></a>02559     <span class="keywordflow">else</span>
<a name="l02560"></a>02560     {
<a name="l02561"></a>02561         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Section submesh has no subsection defined, line not parsed.&quot;</span>);
<a name="l02562"></a>02562     }
<a name="l02563"></a>02563 }
<a name="l02564"></a>02564 
<a name="l02565"></a><a class="code" href="class_rig_def_1_1_parser.html#a174c33654077b6e02d463dc70ca45f4d">02565</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a174c33654077b6e02d463dc70ca45f4d">Parser::_ImportLegacyFlexbodyForsetLine</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02566"></a>02566 {
<a name="l02567"></a>02567     <span class="comment">// &quot;forset&quot; keyword is obsolete in fileformatversion &gt;= 450</span>
<a name="l02568"></a>02568     <span class="comment">// This code is import-only</span>
<a name="l02569"></a>02569 
<a name="l02570"></a>02570     boost::smatch line_results;
<a name="l02571"></a>02571     <span class="keywordflow">if</span> (! boost::regex_search(line, line_results, Regexes::FLEXBODIES_SUBSECTION_FORSET_LINE))
<a name="l02572"></a>02572     {
<a name="l02573"></a>02573         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02574"></a>02574         <span class="keywordflow">return</span>;
<a name="l02575"></a>02575     }
<a name="l02576"></a>02576 
<a name="l02577"></a>02577     Ogre::StringVector tokens = Ogre::StringUtil::split(line_results[2], <span class="stringliteral">&quot;,&quot;</span>);
<a name="l02578"></a>02578     <span class="comment">// NOTE: This splitting process silently ignores duplicate comma &quot;,,&quot;. Empty string element is not generated.</span>
<a name="l02579"></a>02579     <span class="keyword">auto</span> itor = tokens.begin();
<a name="l02580"></a>02580     <span class="keyword">auto</span> end  = tokens.end();
<a name="l02581"></a>02581     <span class="keywordflow">for</span> ( ; itor != end; ++itor)
<a name="l02582"></a>02582     {
<a name="l02583"></a>02583         <span class="keywordtype">unsigned</span> noderef_flags = Node::Ref::IMPORT_STATE_IS_VALID;
<a name="l02584"></a>02584         boost::smatch results;
<a name="l02585"></a>02585         <span class="keywordflow">if</span> (! boost::regex_search(*itor, results, Regexes::FORSET_ELEMENT))
<a name="l02586"></a>02586         {
<a name="l02587"></a>02587             <span class="comment">/* Invalid element, attempt to parse as node number for backwards compatibility */</span>
<a name="l02588"></a>02588             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> result = strtoul((*itor).c_str(), <span class="keyword">nullptr</span>, 10);
<a name="l02589"></a>02589             std::stringstream msg;
<a name="l02590"></a>02590             msg &lt;&lt; <span class="stringliteral">&quot;Subsection &#39;forset&#39;: Invalid element &#39;&quot;</span> &lt;&lt; *itor &lt;&lt; <span class="stringliteral">&quot;&#39;, parsing as &#39;&quot;</span> &lt;&lt; result &lt;&lt; <span class="stringliteral">&quot;&#39; for backwards compatibility. Please fix.&quot;</span>;
<a name="l02591"></a>02591             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l02592"></a>02592                 
<a name="l02593"></a>02593             <a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a>-&gt;node_list_to_import.push_back(<a class="code" href="struct_rig_def_1_1_node_1_1_range.html">Node::Range</a>(<a class="code" href="class_rig_def_1_1_node_1_1_ref.html">Node::Ref</a>(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(result), result, noderef_flags, <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>)));
<a name="l02594"></a>02594         }
<a name="l02595"></a>02595         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[1].matched) <span class="comment">/* Range of numbered nodes */</span>
<a name="l02596"></a>02596         {
<a name="l02597"></a>02597             <span class="keywordtype">int</span> start_node_index = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[2]);
<a name="l02598"></a>02598             <span class="keywordtype">int</span> end_node_index = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[3]);
<a name="l02599"></a>02599             <a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a>-&gt;node_list_to_import.push_back(
<a name="l02600"></a>02600                 <a class="code" href="struct_rig_def_1_1_node_1_1_range.html">Node::Range</a>(
<a name="l02601"></a>02601                     <a class="code" href="class_rig_def_1_1_node_1_1_ref.html">Node::Ref</a>(results[2], static_cast&lt;unsigned&gt;(start_node_index), noderef_flags, <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>), 
<a name="l02602"></a>02602                     <a class="code" href="class_rig_def_1_1_node_1_1_ref.html">Node::Ref</a>(results[3], static_cast&lt;unsigned&gt;(end_node_index), noderef_flags, <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>)));
<a name="l02603"></a>02603         }
<a name="l02604"></a>02604         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(results[4].matched) <span class="comment">/* Single numbered node */</span>
<a name="l02605"></a>02605         {
<a name="l02606"></a>02606             <span class="keywordtype">int</span> node_index = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[4]);
<a name="l02607"></a>02607             <a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a>-&gt;node_list_to_import.push_back(<a class="code" href="struct_rig_def_1_1_node_1_1_range.html">Node::Range</a>(<a class="code" href="class_rig_def_1_1_node_1_1_ref.html">Node::Ref</a>(results[4], static_cast&lt;unsigned&gt;(node_index), noderef_flags, <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>)));
<a name="l02608"></a>02608         }           
<a name="l02609"></a>02609     }
<a name="l02610"></a>02610 }
<a name="l02611"></a>02611 
<a name="l02612"></a><a class="code" href="class_rig_def_1_1_parser.html#a5e2fe6960b56e23449f55c9761aecc8c">02612</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a5e2fe6960b56e23449f55c9761aecc8c">Parser::ParseFlexbody</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02613"></a>02613 {
<a name="l02614"></a>02614     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> == <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea26c6f5e01284a4eeeec2614d3812579b">File::SUBSECTION__FLEXBODIES__PROPLIKE_LINE</a>)
<a name="l02615"></a>02615     {
<a name="l02616"></a>02616         boost::smatch results;
<a name="l02617"></a>02617         <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::FLEXBODIES_SUBSECTION_PROPLIKE_LINE))
<a name="l02618"></a>02618         {
<a name="l02619"></a>02619             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02620"></a>02620             <span class="keywordflow">return</span>;
<a name="l02621"></a>02621         }
<a name="l02622"></a>02622         <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02623"></a>02623 
<a name="l02624"></a>02624         <a class="code" href="struct_rig_def_1_1_flexbody.html">Flexbody</a> flexbody;
<a name="l02625"></a>02625         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#ae0b44f283cfe94be6d2f45bc5115da50">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l02626"></a>02626         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#ae759a13538d2b80998f71530d0d33eaf">x_axis_node</a>    = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l02627"></a>02627         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#a38d3d5e7e0111d97beaf222c22afef39">y_axis_node</a>    = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l02628"></a>02628 
<a name="l02629"></a>02629         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#a93fa8da6ea6feb8f24739eef5caa4a1e">offset</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l02630"></a>02630         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#a93fa8da6ea6feb8f24739eef5caa4a1e">offset</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l02631"></a>02631         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#a93fa8da6ea6feb8f24739eef5caa4a1e">offset</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l02632"></a>02632 
<a name="l02633"></a>02633         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#a6be646301ac5766be96802e636a660e9">rotation</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l02634"></a>02634         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#a6be646301ac5766be96802e636a660e9">rotation</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[15]);
<a name="l02635"></a>02635         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#a6be646301ac5766be96802e636a660e9">rotation</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[17]);
<a name="l02636"></a>02636 
<a name="l02637"></a>02637         flexbody.<a class="code" href="struct_rig_def_1_1_flexbody.html#a2f81f57d17b0702ad5d80459d462e613">mesh_name</a> = results[19];
<a name="l02638"></a>02638 
<a name="l02639"></a>02639         <a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a> = boost::shared_ptr&lt;Flexbody&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_flexbody.html">Flexbody</a>(flexbody) );
<a name="l02640"></a>02640         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;flexbodies.push_back(<a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a>);
<a name="l02641"></a>02641 
<a name="l02642"></a>02642         <span class="comment">/* Switch subsection */</span>
<a name="l02643"></a>02643         <a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> =  <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea07bffe22f1c8684cbd5818e1002b60b7">File::SUBSECTION__FLEXBODIES__FORSET_LINE</a>;
<a name="l02644"></a>02644     }
<a name="l02645"></a>02645     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> == <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea07bffe22f1c8684cbd5818e1002b60b7">File::SUBSECTION__FLEXBODIES__FORSET_LINE</a>)
<a name="l02646"></a>02646     {
<a name="l02647"></a>02647         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a174c33654077b6e02d463dc70ca45f4d">_ImportLegacyFlexbodyForsetLine</a>(line);
<a name="l02648"></a>02648 
<a name="l02649"></a>02649         <span class="comment">/* Switch subsection */</span>
<a name="l02650"></a>02650         <a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> =  <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea26c6f5e01284a4eeeec2614d3812579b">File::SUBSECTION__FLEXBODIES__PROPLIKE_LINE</a>;
<a name="l02651"></a>02651     }
<a name="l02652"></a>02652     <span class="keywordflow">else</span>
<a name="l02653"></a>02653     {
<a name="l02654"></a>02654         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4a4c922b155c371ce84feb0039d875ce19">Message::TYPE_FATAL_ERROR</a>, <span class="stringliteral">&quot;Internal parser failure, section &#39;flexbodies&#39; not parsed.&quot;</span>);
<a name="l02655"></a>02655     }
<a name="l02656"></a>02656 }
<a name="l02657"></a>02657 
<a name="l02658"></a><a class="code" href="class_rig_def_1_1_parser.html#a9a9133c34a4fe9cb9825875d192cfd77">02658</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a9a9133c34a4fe9cb9825875d192cfd77">Parser::ParseFlare2</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02659"></a>02659 {
<a name="l02660"></a>02660     boost::smatch results;
<a name="l02661"></a>02661     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_FLARES2))
<a name="l02662"></a>02662     {
<a name="l02663"></a>02663         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02664"></a>02664         <span class="keywordflow">return</span>;
<a name="l02665"></a>02665     }
<a name="l02666"></a>02666     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02667"></a>02667 
<a name="l02668"></a>02668     <a class="code" href="struct_rig_def_1_1_flare2.html">Flare2</a> flare2;
<a name="l02669"></a>02669     flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#ab1ecd6650e9e4594c25c64554174744a">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l02670"></a>02670     flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a1b3cd9f30d8364dca13356cfe8916ae2">node_axis_x</a>     = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l02671"></a>02671     flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a8aba4620d5a8a712bb90f78f39463ba9">node_axis_y</a>     = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l02672"></a>02672     flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a1336f448b07125339747191de0e5a0c1">offset</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l02673"></a>02673     flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a1336f448b07125339747191de0e5a0c1">offset</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l02674"></a>02674     flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a1336f448b07125339747191de0e5a0c1">offset</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[6]);
<a name="l02675"></a>02675 
<a name="l02676"></a>02676     <span class="keywordflow">if</span> (results[7].matched)
<a name="l02677"></a>02677     {
<a name="l02678"></a>02678         flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a85f03d77917f51332efdc1f91586838a">type</a> = <a class="code" href="struct_rig_def_1_1_flare2.html#ab2549ae31580f64bbd36c459afb14e59">Flare2::Type</a>(results[8].str().at(0));
<a name="l02679"></a>02679 
<a name="l02680"></a>02680         <span class="keywordflow">if</span> (results[9].matched)
<a name="l02681"></a>02681         {
<a name="l02682"></a>02682             flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a8508c9aa3e177b4b1db257ed4b03e970">control_number</a> = <a class="code" href="struct_rig_def_1_1_flare2.html#ab2549ae31580f64bbd36c459afb14e59">Flare2::Type</a>(<a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[10]));
<a name="l02683"></a>02683 
<a name="l02684"></a>02684             <span class="keywordflow">if</span> (results[11].matched)
<a name="l02685"></a>02685             {
<a name="l02686"></a>02686                 flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a245a2d3145e5da397c67ad3df715ed6d">blink_delay_milis</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[12]);
<a name="l02687"></a>02687 
<a name="l02688"></a>02688                 <span class="keywordflow">if</span> (results[13].matched)
<a name="l02689"></a>02689                 {
<a name="l02690"></a>02690                     flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a432ac1a603a3fea65526d60fa0f04dfc">size</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[14]);
<a name="l02691"></a>02691 
<a name="l02692"></a>02692                     <span class="keywordflow">if</span> (results[15].matched)
<a name="l02693"></a>02693                     {
<a name="l02694"></a>02694                         flare2.<a class="code" href="struct_rig_def_1_1_flare2.html#a5a611fa08db567dc3a26184fdc33b19b">material_name</a> = results[16];
<a name="l02695"></a>02695                     }
<a name="l02696"></a>02696                 }
<a name="l02697"></a>02697             }
<a name="l02698"></a>02698         }
<a name="l02699"></a>02699     }
<a name="l02700"></a>02700     
<a name="l02701"></a>02701     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;flares_2.push_back(flare2);
<a name="l02702"></a>02702 }
<a name="l02703"></a>02703 
<a name="l02704"></a><a class="code" href="class_rig_def_1_1_parser.html#aaccc0e4e316b8d9ca99c9eb61c5ad354">02704</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aaccc0e4e316b8d9ca99c9eb61c5ad354">Parser::ParseFlare</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02705"></a>02705 {
<a name="l02706"></a>02706     boost::smatch results;
<a name="l02707"></a>02707     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_FLARES))
<a name="l02708"></a>02708     {
<a name="l02709"></a>02709         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02710"></a>02710         <span class="keywordflow">return</span>;
<a name="l02711"></a>02711     }
<a name="l02712"></a>02712     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02713"></a>02713 
<a name="l02714"></a>02714     <a class="code" href="struct_rig_def_1_1_flare2.html">Flare2</a> flare;
<a name="l02715"></a>02715     flare.<a class="code" href="struct_rig_def_1_1_flare2.html#ab1ecd6650e9e4594c25c64554174744a">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l02716"></a>02716     flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a1b3cd9f30d8364dca13356cfe8916ae2">node_axis_x</a>    = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l02717"></a>02717     flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a8aba4620d5a8a712bb90f78f39463ba9">node_axis_y</a>    = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[9]);
<a name="l02718"></a>02718 
<a name="l02719"></a>02719     flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a1336f448b07125339747191de0e5a0c1">offset</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l02720"></a>02720     flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a1336f448b07125339747191de0e5a0c1">offset</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[17]);
<a name="l02721"></a>02721 
<a name="l02722"></a>02722     <span class="keywordflow">if</span> (results[22].matched)
<a name="l02723"></a>02723     {
<a name="l02724"></a>02724         <span class="keywordtype">char</span> in = results[22].str().at(0);
<a name="l02725"></a>02725         <span class="keywordflow">if</span> (in != <span class="charliteral">&#39;f&#39;</span> &amp;&amp; in != <span class="charliteral">&#39;b&#39;</span> &amp;&amp; in != <span class="charliteral">&#39;l&#39;</span> &amp;&amp; in != <span class="charliteral">&#39;r&#39;</span> &amp;&amp; in != <span class="charliteral">&#39;R&#39;</span> &amp;&amp; in != <span class="charliteral">&#39;u&#39;</span>)
<a name="l02726"></a>02726         {
<a name="l02727"></a>02727             std::stringstream msg;
<a name="l02728"></a>02728             msg &lt;&lt; <span class="stringliteral">&quot;Invalid flare type &#39;&quot;</span> &lt;&lt; in &lt;&lt; <span class="stringliteral">&quot;&#39;, falling back to type &#39;f&#39; (front light)...&quot;</span>;
<a name="l02729"></a>02729             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l02730"></a>02730 
<a name="l02731"></a>02731             in = <span class="charliteral">&#39;f&#39;</span>;
<a name="l02732"></a>02732         }
<a name="l02733"></a>02733         flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a85f03d77917f51332efdc1f91586838a">type</a> = <a class="code" href="struct_rig_def_1_1_flare2.html#ab2549ae31580f64bbd36c459afb14e59">Flare2::Type</a>(in);
<a name="l02734"></a>02734 
<a name="l02735"></a>02735         <span class="keywordflow">if</span> (results[27].matched)
<a name="l02736"></a>02736         {
<a name="l02737"></a>02737             flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a8508c9aa3e177b4b1db257ed4b03e970">control_number</a> = <a class="code" href="struct_rig_def_1_1_flare2.html#ab2549ae31580f64bbd36c459afb14e59">Flare2::Type</a>(<a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[27]));
<a name="l02738"></a>02738 
<a name="l02739"></a>02739             <span class="keywordflow">if</span> (results[32].matched)
<a name="l02740"></a>02740             {
<a name="l02741"></a>02741                 flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a245a2d3145e5da397c67ad3df715ed6d">blink_delay_milis</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[32]);
<a name="l02742"></a>02742 
<a name="l02743"></a>02743                 <span class="keywordflow">if</span> (results[37].matched)
<a name="l02744"></a>02744                 {
<a name="l02745"></a>02745                     flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a432ac1a603a3fea65526d60fa0f04dfc">size</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[37]);
<a name="l02746"></a>02746 
<a name="l02747"></a>02747                     <span class="keywordflow">if</span> (results[42].matched)
<a name="l02748"></a>02748                     {
<a name="l02749"></a>02749                         flare.<a class="code" href="struct_rig_def_1_1_flare2.html#a5a611fa08db567dc3a26184fdc33b19b">material_name</a> = results[42];
<a name="l02750"></a>02750                     }
<a name="l02751"></a>02751                 }
<a name="l02752"></a>02752             }
<a name="l02753"></a>02753         }
<a name="l02754"></a>02754     }
<a name="l02755"></a>02755     
<a name="l02756"></a>02756     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;flares_2.push_back(flare);
<a name="l02757"></a>02757 }
<a name="l02758"></a>02758 
<a name="l02759"></a><a class="code" href="class_rig_def_1_1_parser.html#a7adc777e513df348711bad786546f29d">02759</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7adc777e513df348711bad786546f29d">Parser::ParseFixes</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02760"></a>02760 {
<a name="l02761"></a>02761     boost::smatch results;
<a name="l02762"></a>02762     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::NODE_LIST))
<a name="l02763"></a>02763     {
<a name="l02764"></a>02764         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02765"></a>02765         <span class="keywordflow">return</span>;
<a name="l02766"></a>02766     }
<a name="l02767"></a>02767     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02768"></a>02768 
<a name="l02769"></a>02769     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;fixes.push_back(<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]));
<a name="l02770"></a>02770 }
<a name="l02771"></a>02771 
<a name="l02772"></a><a class="code" href="class_rig_def_1_1_parser.html#aae2c8f807987242e471f73008a9007d4">02772</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aae2c8f807987242e471f73008a9007d4">Parser::ParseExtCamera</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02773"></a>02773 {
<a name="l02774"></a>02774     boost::smatch results;
<a name="l02775"></a>02775     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_EXTCAMERA))
<a name="l02776"></a>02776     {
<a name="l02777"></a>02777         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Inline-section &#39;ext_camera&#39; has incorrect format, ignoring...&quot;</span>);
<a name="l02778"></a>02778         <span class="keywordflow">return</span>;
<a name="l02779"></a>02779     }
<a name="l02780"></a>02780     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02781"></a>02781 
<a name="l02782"></a>02782     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ext_camera == <span class="keyword">nullptr</span>)
<a name="l02783"></a>02783     {
<a name="l02784"></a>02784         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ext_camera = boost::shared_ptr&lt;RigDef::ExtCamera&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_ext_camera.html">RigDef::ExtCamera</a>() );
<a name="l02785"></a>02785     }
<a name="l02786"></a>02786 
<a name="l02787"></a>02787     <span class="keywordflow">if</span> (results[2].matched)
<a name="l02788"></a>02788     {
<a name="l02789"></a>02789         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ext_camera-&gt;mode = <a class="code" href="struct_rig_def_1_1_ext_camera.html#aee3575121fa1227b5a659c6ef6b6aeb3a168e1ebf0ceafd2c62961ff710c99ef8">ExtCamera::MODE_CLASSIC</a>;
<a name="l02790"></a>02790     }
<a name="l02791"></a>02791     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[3].matched)
<a name="l02792"></a>02792     {
<a name="l02793"></a>02793         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ext_camera-&gt;mode = <a class="code" href="struct_rig_def_1_1_ext_camera.html#aee3575121fa1227b5a659c6ef6b6aeb3aa5811593d24f35e7cea08b9d3306f079">ExtCamera::MODE_CINECAM</a>;
<a name="l02794"></a>02794     }
<a name="l02795"></a>02795     <span class="keywordflow">if</span> (results[4].matched)
<a name="l02796"></a>02796     {
<a name="l02797"></a>02797         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ext_camera-&gt;mode = <a class="code" href="struct_rig_def_1_1_ext_camera.html#aee3575121fa1227b5a659c6ef6b6aeb3a35d6c3c95f9a3b0b84b7e14248696fa1">ExtCamera::MODE_NODE</a>;
<a name="l02798"></a>02798         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ext_camera-&gt;node = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[6]);
<a name="l02799"></a>02799     }
<a name="l02800"></a>02800 }
<a name="l02801"></a>02801 
<a name="l02802"></a><a class="code" href="class_rig_def_1_1_parser.html#ac6f8f36025bd562d984ba92df39e31c3">02802</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ac6f8f36025bd562d984ba92df39e31c3">Parser::ParseExhaust</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02803"></a>02803 {
<a name="l02804"></a>02804     boost::smatch results;
<a name="l02805"></a>02805     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_EXHAUSTS))
<a name="l02806"></a>02806     {
<a name="l02807"></a>02807         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02808"></a>02808         <span class="keywordflow">return</span>;
<a name="l02809"></a>02809     }
<a name="l02810"></a>02810     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02811"></a>02811 
<a name="l02812"></a>02812     <a class="code" href="struct_rig_def_1_1_exhaust.html">Exhaust</a> exhaust;
<a name="l02813"></a>02813     exhaust.<a class="code" href="struct_rig_def_1_1_exhaust.html#a4377c68c1a0660bd0b80b22678d91adb">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l02814"></a>02814     exhaust.<a class="code" href="struct_rig_def_1_1_exhaust.html#a0b979d6372b169ce43a3982da773054c">direction_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l02815"></a>02815     
<a name="l02816"></a>02816     <span class="keywordflow">if</span> (results[3].matched)
<a name="l02817"></a>02817     {
<a name="l02818"></a>02818         <span class="comment">/* #4 Unused param */</span>
<a name="l02819"></a>02819 
<a name="l02820"></a>02820         <span class="keywordflow">if</span> (results[5].matched)
<a name="l02821"></a>02821         {
<a name="l02822"></a>02822             exhaust.<a class="code" href="struct_rig_def_1_1_exhaust.html#a67fc90a534b3463e5dea3a93250ad191">material_name</a> = results[6];
<a name="l02823"></a>02823         }
<a name="l02824"></a>02824     }
<a name="l02825"></a>02825 
<a name="l02826"></a>02826     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;exhausts.push_back(exhaust);
<a name="l02827"></a>02827 }
<a name="l02828"></a>02828 
<a name="l02829"></a><a class="code" href="class_rig_def_1_1_parser.html#a6a42afd4ccfb56359182341e31a9ec7b">02829</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a6a42afd4ccfb56359182341e31a9ec7b">Parser::ParseFileFormatVersion</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02830"></a>02830 {
<a name="l02831"></a>02831     boost::smatch results;
<a name="l02832"></a>02832     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_FILE_FORMAT_VERSION))
<a name="l02833"></a>02833     {
<a name="l02834"></a>02834         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02835"></a>02835         <span class="keywordflow">return</span>;
<a name="l02836"></a>02836     }
<a name="l02837"></a>02837     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02838"></a>02838 
<a name="l02839"></a>02839     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> version = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[1]);
<a name="l02840"></a>02840     <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;file_format_version = version;
<a name="l02841"></a>02841 
<a name="l02842"></a>02842     <span class="keywordflow">if</span> (version &gt;= 450)
<a name="l02843"></a>02843     {
<a name="l02844"></a>02844         <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a6943f152751785a5178658b11c65c84c">Disable</a>();
<a name="l02845"></a>02845     }
<a name="l02846"></a>02846 }
<a name="l02847"></a>02847 
<a name="l02848"></a><a class="code" href="class_rig_def_1_1_parser.html#a382a8fc6efb5c9451ef72d2beb491768">02848</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a382a8fc6efb5c9451ef72d2beb491768">Parser::ParseDirectiveDetacherGroup</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02849"></a>02849 {
<a name="l02850"></a>02850     boost::smatch results;
<a name="l02851"></a>02851     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_DETACHER_GROUP))
<a name="l02852"></a>02852     {
<a name="l02853"></a>02853         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid directive &#39;detacher_group&#39;, ignoring...&quot;</span>);
<a name="l02854"></a>02854         <span class="keywordflow">return</span>;
<a name="l02855"></a>02855     }
<a name="l02856"></a>02856     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02857"></a>02857 
<a name="l02858"></a>02858     <span class="keywordflow">if</span> (results[3].matched)
<a name="l02859"></a>02859     {
<a name="l02860"></a>02860         <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a> = 0;
<a name="l02861"></a>02861     }
<a name="l02862"></a>02862     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[2].matched)
<a name="l02863"></a>02863     {
<a name="l02864"></a>02864         <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[2]);
<a name="l02865"></a>02865     }
<a name="l02866"></a>02866     <span class="keywordflow">else</span>
<a name="l02867"></a>02867     {
<a name="l02868"></a>02868         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid directive &#39;detacher_group&#39;, ignoring...&quot;</span>);
<a name="l02869"></a>02869     }
<a name="l02870"></a>02870 }
<a name="l02871"></a>02871 
<a name="l02872"></a><a class="code" href="class_rig_def_1_1_parser.html#ac6913f32feb3270ee1150d5b24708f92">02872</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ac6913f32feb3270ee1150d5b24708f92">Parser::ParseCruiseControl</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l02873"></a>02873 {
<a name="l02874"></a>02874     boost::smatch results;
<a name="l02875"></a>02875     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_CRUISECONTROL))
<a name="l02876"></a>02876     {
<a name="l02877"></a>02877         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l02878"></a>02878         <span class="keywordflow">return</span>;
<a name="l02879"></a>02879     }
<a name="l02880"></a>02880     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02881"></a>02881 
<a name="l02882"></a>02882     <a class="code" href="struct_rig_def_1_1_cruise_control.html">CruiseControl</a> cruise_control;
<a name="l02883"></a>02883     cruise_control.<a class="code" href="struct_rig_def_1_1_cruise_control.html#ab552ac1e269796538f721e92ee7f9c7a">min_speed</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l02884"></a>02884     cruise_control.<a class="code" href="struct_rig_def_1_1_cruise_control.html#a2ce00864da1fbb3c4506163bb3b57f66">autobrake</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[2]);
<a name="l02885"></a>02885 
<a name="l02886"></a>02886     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;cruise_control != <span class="keyword">nullptr</span>)
<a name="l02887"></a>02887     {
<a name="l02888"></a>02888         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Found multiple inline sections &#39;cruise_control&#39; in one module, using last one.&quot;</span>);
<a name="l02889"></a>02889     }
<a name="l02890"></a>02890     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;cruise_control = boost::shared_ptr&lt;CruiseControl&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_cruise_control.html">CruiseControl</a>(cruise_control) );
<a name="l02891"></a>02891 }
<a name="l02892"></a>02892 
<a name="l02893"></a><a class="code" href="class_rig_def_1_1_parser.html#a1e722bd3b7ed5144eecfa1907df2adba">02893</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a1e722bd3b7ed5144eecfa1907df2adba">Parser::_ParseDirectiveAddAnimationMode</a>(<a class="code" href="struct_rig_def_1_1_animation.html">Animation</a> &amp; animation, Ogre::String mode_string)
<a name="l02894"></a>02894 {
<a name="l02895"></a>02895     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> mode = 0;
<a name="l02896"></a>02896 
<a name="l02897"></a>02897     Ogre::StringVector tokens = Ogre::StringUtil::split(mode_string, <span class="stringliteral">&quot;|&quot;</span>);
<a name="l02898"></a>02898     Ogre::StringVector::iterator iter = tokens.begin();
<a name="l02899"></a>02899     <span class="keywordflow">for</span> ( ; iter != tokens.end(); iter++)
<a name="l02900"></a>02900     {
<a name="l02901"></a>02901         boost::smatch results;
<a name="l02902"></a>02902         <span class="keywordflow">if</span> (! boost::regex_search(*iter, results, Regexes::IDENTIFY_ADD_ANIMATION_MODE))
<a name="l02903"></a>02903         {
<a name="l02904"></a>02904             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(*iter, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid mode for directive &#39;add_animation&#39;, ignoring...&quot;</span>);
<a name="l02905"></a>02905             <span class="keywordflow">return</span>;
<a name="l02906"></a>02906         }
<a name="l02907"></a>02907         <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02908"></a>02908 
<a name="l02909"></a>02909         <span class="keywordflow">if</span> (results[2].matched)
<a name="l02910"></a>02910         {
<a name="l02911"></a>02911             mode |= Animation::MODE_ROTATION_X;
<a name="l02912"></a>02912         }
<a name="l02913"></a>02913         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[3].matched)
<a name="l02914"></a>02914         {
<a name="l02915"></a>02915             mode |= <a class="code" href="struct_rig_def_1_1_animation.html#a014f961a2cb9f010117611b056ecfa66">Animation::MODE_ROTATION_Y</a>;
<a name="l02916"></a>02916         }
<a name="l02917"></a>02917         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[4].matched)
<a name="l02918"></a>02918         {
<a name="l02919"></a>02919             mode |= <a class="code" href="struct_rig_def_1_1_animation.html#a7b2b081b8875e17be7503503fb4bfa76">Animation::MODE_ROTATION_Z</a>;
<a name="l02920"></a>02920         }
<a name="l02921"></a>02921         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[5].matched)
<a name="l02922"></a>02922         {
<a name="l02923"></a>02923             mode |= <a class="code" href="struct_rig_def_1_1_animation.html#ab145143e02f645cb3f4c350ae6645cf4">Animation::MODE_OFFSET_X</a>;
<a name="l02924"></a>02924         }
<a name="l02925"></a>02925         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[6].matched)
<a name="l02926"></a>02926         {
<a name="l02927"></a>02927             mode |= <a class="code" href="struct_rig_def_1_1_animation.html#ad76d68a66dade2f17247515a6ff0eeb5">Animation::MODE_OFFSET_Y</a>;
<a name="l02928"></a>02928         }
<a name="l02929"></a>02929         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[7].matched)
<a name="l02930"></a>02930         {
<a name="l02931"></a>02931             mode |= <a class="code" href="struct_rig_def_1_1_animation.html#a51706cb287087515e3205fd4abeae845">Animation::MODE_OFFSET_Z</a>;
<a name="l02932"></a>02932         }
<a name="l02933"></a>02933     }
<a name="l02934"></a>02934 
<a name="l02935"></a>02935     animation.<a class="code" href="struct_rig_def_1_1_animation.html#a3c1546dfff0810aaccabd6c1f1022094">mode</a> = mode;
<a name="l02936"></a>02936 }
<a name="l02937"></a>02937 
<a name="l02938"></a><a class="code" href="class_rig_def_1_1_parser.html#a41e502c62d82c50421cfd52cd97744fe">02938</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a41e502c62d82c50421cfd52cd97744fe">Parser::_ParseDirectiveAddAnimationSource</a>(<a class="code" href="struct_rig_def_1_1_animation.html">Animation</a> &amp; animation, Ogre::String source_string)
<a name="l02939"></a>02939 {
<a name="l02940"></a>02940     <span class="comment">/* Test event (must be solitary) */</span>
<a name="l02941"></a>02941     Ogre::StringUtil::trim(source_string);
<a name="l02942"></a>02942     <span class="keywordflow">if</span> (source_string == <span class="stringliteral">&quot;event&quot;</span>)
<a name="l02943"></a>02943     {
<a name="l02944"></a>02944         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a>, Animation::SOURCE_EVENT);
<a name="l02945"></a>02945         <span class="keywordflow">return</span>;
<a name="l02946"></a>02946     }
<a name="l02947"></a>02947 
<a name="l02948"></a>02948     <span class="comment">/* Test other flags (can be combined) */</span>
<a name="l02949"></a>02949     Ogre::StringVector tokens = Ogre::StringUtil::split(source_string, <span class="stringliteral">&quot;|&quot;</span>);
<a name="l02950"></a>02950     Ogre::StringVector::iterator iter = tokens.begin();
<a name="l02951"></a>02951     <span class="keywordflow">for</span> ( ; iter != tokens.end(); iter++)
<a name="l02952"></a>02952     {
<a name="l02953"></a>02953         boost::smatch results;
<a name="l02954"></a>02954         <span class="keywordflow">if</span> (! boost::regex_search(*iter, results, Regexes::IDENTIFY_ADD_ANIMATION_SOURCE))
<a name="l02955"></a>02955         {
<a name="l02956"></a>02956             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(*iter, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid source for directive &#39;add_animation&#39;, ignoring...&quot;</span>);
<a name="l02957"></a>02957             <span class="keywordflow">return</span>;
<a name="l02958"></a>02958         }
<a name="l02959"></a>02959         <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l02960"></a>02960 
<a name="l02961"></a>02961         <span class="comment">/* Boolean options */</span>
<a name="l02962"></a>02962         <span class="keywordflow">if</span> (results[2].matched)
<a name="l02963"></a>02963         {
<a name="l02964"></a>02964             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_AIRSPEED;
<a name="l02965"></a>02965         }
<a name="l02966"></a>02966         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[3].matched)
<a name="l02967"></a>02967         {
<a name="l02968"></a>02968             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_VERTICAL_VELOCITY;
<a name="l02969"></a>02969         }
<a name="l02970"></a>02970         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[4].matched)
<a name="l02971"></a>02971         {
<a name="l02972"></a>02972             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_ALTIMETER_100K;
<a name="l02973"></a>02973         }
<a name="l02974"></a>02974         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[5].matched)
<a name="l02975"></a>02975         {
<a name="l02976"></a>02976             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_ALTIMETER_10K;
<a name="l02977"></a>02977         }
<a name="l02978"></a>02978         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[6].matched)
<a name="l02979"></a>02979         {
<a name="l02980"></a>02980             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_ALTIMETER_1K;
<a name="l02981"></a>02981         }
<a name="l02982"></a>02982         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[7].matched)
<a name="l02983"></a>02983         {
<a name="l02984"></a>02984             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_ANGLE_OF_ATTACK;
<a name="l02985"></a>02985         }
<a name="l02986"></a>02986         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[8].matched)
<a name="l02987"></a>02987         {
<a name="l02988"></a>02988             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_FLAP;
<a name="l02989"></a>02989         }
<a name="l02990"></a>02990         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[9].matched)
<a name="l02991"></a>02991         {
<a name="l02992"></a>02992             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_AIR_BRAKE;
<a name="l02993"></a>02993         }
<a name="l02994"></a>02994         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[10].matched)
<a name="l02995"></a>02995         {
<a name="l02996"></a>02996             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_ROLL;
<a name="l02997"></a>02997         }
<a name="l02998"></a>02998         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[11].matched)
<a name="l02999"></a>02999         {
<a name="l03000"></a>03000             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_PITCH;
<a name="l03001"></a>03001         }
<a name="l03002"></a>03002         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[12].matched)
<a name="l03003"></a>03003         {
<a name="l03004"></a>03004             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_BRAKES;
<a name="l03005"></a>03005         }
<a name="l03006"></a>03006         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[13].matched)
<a name="l03007"></a>03007         {
<a name="l03008"></a>03008             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_ACCEL;
<a name="l03009"></a>03009         }
<a name="l03010"></a>03010         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[14].matched)
<a name="l03011"></a>03011         {
<a name="l03012"></a>03012             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_CLUTCH;
<a name="l03013"></a>03013         }
<a name="l03014"></a>03014         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[15].matched)
<a name="l03015"></a>03015         {
<a name="l03016"></a>03016             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_SPEEDO;
<a name="l03017"></a>03017         }
<a name="l03018"></a>03018         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[16].matched)
<a name="l03019"></a>03019         {
<a name="l03020"></a>03020             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_TACHO;
<a name="l03021"></a>03021         }
<a name="l03022"></a>03022         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[17].matched)
<a name="l03023"></a>03023         {
<a name="l03024"></a>03024             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_TURBO;
<a name="l03025"></a>03025         }
<a name="l03026"></a>03026         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[18].matched)
<a name="l03027"></a>03027         {
<a name="l03028"></a>03028             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_PARKING;
<a name="l03029"></a>03029         }
<a name="l03030"></a>03030         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[19].matched)
<a name="l03031"></a>03031         {
<a name="l03032"></a>03032             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_SHIFT_LEFT_RIGHT;
<a name="l03033"></a>03033         }
<a name="l03034"></a>03034         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[20].matched)
<a name="l03035"></a>03035         {
<a name="l03036"></a>03036             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_SHIFT_BACK_FORTH;
<a name="l03037"></a>03037         }
<a name="l03038"></a>03038         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[21].matched)
<a name="l03039"></a>03039         {
<a name="l03040"></a>03040             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_SEQUENTIAL_SHIFT;
<a name="l03041"></a>03041         }
<a name="l03042"></a>03042         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[22].matched)
<a name="l03043"></a>03043         {
<a name="l03044"></a>03044             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_SHIFTERLIN;
<a name="l03045"></a>03045         }
<a name="l03046"></a>03046         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[23].matched)
<a name="l03047"></a>03047         {
<a name="l03048"></a>03048             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_TORQUE;
<a name="l03049"></a>03049         }
<a name="l03050"></a>03050         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[24].matched)
<a name="l03051"></a>03051         {
<a name="l03052"></a>03052             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_HEADING;
<a name="l03053"></a>03053         }
<a name="l03054"></a>03054         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[25].matched)
<a name="l03055"></a>03055         {
<a name="l03056"></a>03056             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_DIFFLOCK;
<a name="l03057"></a>03057         }
<a name="l03058"></a>03058         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[26].matched)
<a name="l03059"></a>03059         {
<a name="l03060"></a>03060             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_BOAT_RUDDER;
<a name="l03061"></a>03061         }
<a name="l03062"></a>03062         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[27].matched)
<a name="l03063"></a>03063         {
<a name="l03064"></a>03064             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_BOAT_THROTTLE;
<a name="l03065"></a>03065         }
<a name="l03066"></a>03066         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[28].matched)
<a name="l03067"></a>03067         {
<a name="l03068"></a>03068             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_STEERING_WHEEL;
<a name="l03069"></a>03069         }
<a name="l03070"></a>03070         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[29].matched)
<a name="l03071"></a>03071         {
<a name="l03072"></a>03072             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_AILERON;
<a name="l03073"></a>03073         }
<a name="l03074"></a>03074         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[30].matched)
<a name="l03075"></a>03075         {
<a name="l03076"></a>03076             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_ELEVATOR;
<a name="l03077"></a>03077         }
<a name="l03078"></a>03078         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[31].matched)
<a name="l03079"></a>03079         {
<a name="l03080"></a>03080             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_AIR_RUDDER;
<a name="l03081"></a>03081         }
<a name="l03082"></a>03082         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[32].matched)
<a name="l03083"></a>03083         {
<a name="l03084"></a>03084             animation.<a class="code" href="struct_rig_def_1_1_animation.html#aef767873ad801896700a89ef2db7b5e3">source</a> |= Animation::SOURCE_PERMANENT;
<a name="l03085"></a>03085         }
<a name="l03086"></a>03086         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[33].matched)
<a name="l03087"></a>03087         {
<a name="l03088"></a>03088             <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html">Animation::MotorSource</a> motor_source;
<a name="l03089"></a>03089             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#aab032bead7309ebdf6a39a397cfe67ab">source</a> = <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#a288c9257b2409dc7caa7e5b8bef27d51">Animation::MotorSource::SOURCE_AERO_THROTTLE</a>;
<a name="l03090"></a>03090             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#acec87a6375795c932ad5bacc7217d0dd">motor</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[34]);
<a name="l03091"></a>03091             animation.<a class="code" href="struct_rig_def_1_1_animation.html#adc37a6c5391685b03b722b1cab3268f6">motor_sources</a>.push_back(motor_source);
<a name="l03092"></a>03092         }
<a name="l03093"></a>03093         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[35].matched)
<a name="l03094"></a>03094         {
<a name="l03095"></a>03095             <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html">Animation::MotorSource</a> motor_source;
<a name="l03096"></a>03096             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#aab032bead7309ebdf6a39a397cfe67ab">source</a> = <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#ac3d41c6b8ac94c0e03e7b17d96b88fc8">Animation::MotorSource::SOURCE_AERO_RPM</a>;
<a name="l03097"></a>03097             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#acec87a6375795c932ad5bacc7217d0dd">motor</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[36]);
<a name="l03098"></a>03098             animation.<a class="code" href="struct_rig_def_1_1_animation.html#adc37a6c5391685b03b722b1cab3268f6">motor_sources</a>.push_back(motor_source);
<a name="l03099"></a>03099         }
<a name="l03100"></a>03100         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[37].matched)
<a name="l03101"></a>03101         {
<a name="l03102"></a>03102             <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html">Animation::MotorSource</a> motor_source;
<a name="l03103"></a>03103             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#aab032bead7309ebdf6a39a397cfe67ab">source</a> = <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#ab346495b1f556950e569075a62a04289">Animation::MotorSource::SOURCE_AERO_TORQUE</a>;
<a name="l03104"></a>03104             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#acec87a6375795c932ad5bacc7217d0dd">motor</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[38]);
<a name="l03105"></a>03105             animation.<a class="code" href="struct_rig_def_1_1_animation.html#adc37a6c5391685b03b722b1cab3268f6">motor_sources</a>.push_back(motor_source);
<a name="l03106"></a>03106         }
<a name="l03107"></a>03107         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[39].matched)
<a name="l03108"></a>03108         {
<a name="l03109"></a>03109             <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html">Animation::MotorSource</a> motor_source;
<a name="l03110"></a>03110             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#aab032bead7309ebdf6a39a397cfe67ab">source</a> = <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#a609836db67ad2a0f138b0ef5f8254b62">Animation::MotorSource::SOURCE_AERO_PITCH</a>;
<a name="l03111"></a>03111             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#acec87a6375795c932ad5bacc7217d0dd">motor</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[40]);
<a name="l03112"></a>03112             animation.<a class="code" href="struct_rig_def_1_1_animation.html#adc37a6c5391685b03b722b1cab3268f6">motor_sources</a>.push_back(motor_source);
<a name="l03113"></a>03113         }
<a name="l03114"></a>03114         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[41].matched)
<a name="l03115"></a>03115         {
<a name="l03116"></a>03116             <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html">Animation::MotorSource</a> motor_source;
<a name="l03117"></a>03117             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#aab032bead7309ebdf6a39a397cfe67ab">source</a> = <a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#a7d49b927a2c2f455905e40414bfbd8aa">Animation::MotorSource::SOURCE_AERO_STATUS</a>;
<a name="l03118"></a>03118             motor_source.<a class="code" href="struct_rig_def_1_1_animation_1_1_motor_source.html#acec87a6375795c932ad5bacc7217d0dd">motor</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[42]);
<a name="l03119"></a>03119             animation.<a class="code" href="struct_rig_def_1_1_animation.html#adc37a6c5391685b03b722b1cab3268f6">motor_sources</a>.push_back(motor_source);
<a name="l03120"></a>03120         }
<a name="l03121"></a>03121     }
<a name="l03122"></a>03122 }
<a name="l03123"></a>03123 
<a name="l03124"></a><a class="code" href="class_rig_def_1_1_parser.html#a89b315c24ea8610869acc1e2faa30abf">03124</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a89b315c24ea8610869acc1e2faa30abf">Parser::ParseDirectiveAddAnimation</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03125"></a>03125 {
<a name="l03126"></a>03126     assert(<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a> != <span class="keyword">nullptr</span>);
<a name="l03127"></a>03127 
<a name="l03128"></a>03128     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;props.size() == 0)
<a name="l03129"></a>03129     {
<a name="l03130"></a>03130         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Directive &#39;add_animation&#39; has no prop to animate, ignoring...&quot;</span>);
<a name="l03131"></a>03131         <span class="keywordflow">return</span>;
<a name="l03132"></a>03132     }
<a name="l03133"></a>03133 
<a name="l03134"></a>03134     boost::smatch results;
<a name="l03135"></a>03135     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_ADD_ANIMATION))
<a name="l03136"></a>03136     {
<a name="l03137"></a>03137         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid directive &#39;add_animation&#39;, ignoring...&quot;</span>);
<a name="l03138"></a>03138         <span class="keywordflow">return</span>;
<a name="l03139"></a>03139     }
<a name="l03140"></a>03140     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03141"></a>03141 
<a name="l03142"></a>03142     <a class="code" href="struct_rig_def_1_1_animation.html">Animation</a> animation;
<a name="l03143"></a>03143     animation.<a class="code" href="struct_rig_def_1_1_animation.html#af858b2de195ab3c0eb5ddd76cde4713c">ratio</a>       = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l03144"></a>03144     animation.<a class="code" href="struct_rig_def_1_1_animation.html#aadeec37b58beedfb5c6c90cb89ca4e17">lower_limit</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[8]);
<a name="l03145"></a>03145     animation.<a class="code" href="struct_rig_def_1_1_animation.html#adcfe0765585922c533edb8ee921a8ee0">upper_limit</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[12]);
<a name="l03146"></a>03146 
<a name="l03147"></a>03147     Ogre::StringVector tokens = Ogre::StringUtil::split(results[16], <span class="stringliteral">&quot;,&quot;</span>);
<a name="l03148"></a>03148 
<a name="l03149"></a>03149     <span class="keywordflow">for</span> (Ogre::StringVector::iterator itor = tokens.begin(); itor != tokens.end(); itor++)
<a name="l03150"></a>03150     {
<a name="l03151"></a>03151         boost::smatch token_results;
<a name="l03152"></a>03152         <span class="keywordflow">if</span> (! boost::regex_search(*itor, token_results, Regexes::IDENTIFY_ADD_ANIMATION_TOKEN))
<a name="l03153"></a>03153         {
<a name="l03154"></a>03154             std::stringstream msg;
<a name="l03155"></a>03155             msg &lt;&lt; <span class="stringliteral">&quot;Directive &#39;add_animation&#39;: Unrecognized/misplaced token &#39;&quot;</span> &lt;&lt; *itor &lt;&lt; <span class="stringliteral">&quot;&#39;, ignoring....&quot;</span>;
<a name="l03156"></a>03156             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, msg.str());
<a name="l03157"></a>03157             <span class="keywordflow">continue</span>;
<a name="l03158"></a>03158         }
<a name="l03159"></a>03159 
<a name="l03160"></a>03160         <span class="comment">/* NOTE: Positions in &#39;token_results&#39; array match E_CAPTURE*() positions (starting with 1) in Regexes::IDENTIFY_ADD_ANIMATION_TOKEN. */</span>
<a name="l03161"></a>03161 
<a name="l03162"></a>03162         <span class="keywordflow">if</span> (token_results[2].matched) <span class="comment">/* autoanimate */</span>
<a name="l03163"></a>03163         {
<a name="l03164"></a>03164             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(animation.<a class="code" href="struct_rig_def_1_1_animation.html#a3c1546dfff0810aaccabd6c1f1022094">mode</a>, <a class="code" href="struct_rig_def_1_1_animation.html#a219cdc0aaf0d8f91d8485b262610bef3">Animation::MODE_AUTO_ANIMATE</a>);
<a name="l03165"></a>03165         }
<a name="l03166"></a>03166         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[3].matched) <span class="comment">/* noflip */</span>
<a name="l03167"></a>03167         {
<a name="l03168"></a>03168             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(animation.<a class="code" href="struct_rig_def_1_1_animation.html#a3c1546dfff0810aaccabd6c1f1022094">mode</a>, <a class="code" href="struct_rig_def_1_1_animation.html#a3cedf2743d4678a7bcb0fa9e099c0b4b">Animation::MODE_NO_FLIP</a>);
<a name="l03169"></a>03169         }
<a name="l03170"></a>03170         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[4].matched) <span class="comment">/* bounce */</span>
<a name="l03171"></a>03171         {
<a name="l03172"></a>03172             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(animation.<a class="code" href="struct_rig_def_1_1_animation.html#a3c1546dfff0810aaccabd6c1f1022094">mode</a>, <a class="code" href="struct_rig_def_1_1_animation.html#a2cff7cde8c83afc0087075a48c612835">Animation::MODE_BOUNCE</a>);
<a name="l03173"></a>03173         }
<a name="l03174"></a>03174         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[5].matched) <span class="comment">/* eventlock */</span>
<a name="l03175"></a>03175         {
<a name="l03176"></a>03176             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(animation.<a class="code" href="struct_rig_def_1_1_animation.html#a3c1546dfff0810aaccabd6c1f1022094">mode</a>, <a class="code" href="struct_rig_def_1_1_animation.html#a59bf0f8be1a8ca70ef9ae9acbc8ffffa">Animation::MODE_EVENT_LOCK</a>);
<a name="l03177"></a>03177         }
<a name="l03178"></a>03178         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[6].matched) <span class="comment">/* Mode */</span>
<a name="l03179"></a>03179         {
<a name="l03180"></a>03180             <span class="keywordflow">if</span> (! token_results[7].matched)
<a name="l03181"></a>03181             {
<a name="l03182"></a>03182                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Directive &#39;add_animation&#39;: Token &#39;mode&#39; has invalid format, skipping....&quot;</span>);
<a name="l03183"></a>03183                 <span class="keywordflow">continue</span>;
<a name="l03184"></a>03184             }
<a name="l03185"></a>03185             <span class="keywordflow">else</span>
<a name="l03186"></a>03186             {
<a name="l03187"></a>03187                 <a class="code" href="class_rig_def_1_1_parser.html#a1e722bd3b7ed5144eecfa1907df2adba">_ParseDirectiveAddAnimationMode</a>(animation, token_results[8]);
<a name="l03188"></a>03188             }
<a name="l03189"></a>03189         }
<a name="l03190"></a>03190         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[9].matched) <span class="comment">/* Source */</span>
<a name="l03191"></a>03191         {
<a name="l03192"></a>03192             <span class="keywordflow">if</span> (! token_results[10].matched)
<a name="l03193"></a>03193             {
<a name="l03194"></a>03194                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Directive &#39;add_animation&#39;: Token &#39;source&#39; has invalid format, skipping....&quot;</span>);
<a name="l03195"></a>03195                 <span class="keywordflow">continue</span>;
<a name="l03196"></a>03196             }
<a name="l03197"></a>03197             <span class="keywordflow">else</span>
<a name="l03198"></a>03198             {
<a name="l03199"></a>03199                 <a class="code" href="class_rig_def_1_1_parser.html#a41e502c62d82c50421cfd52cd97744fe">_ParseDirectiveAddAnimationSource</a>(animation, token_results[11]);
<a name="l03200"></a>03200             }
<a name="l03201"></a>03201         }
<a name="l03202"></a>03202         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[12].matched) <span class="comment">/* Event */</span>
<a name="l03203"></a>03203         {
<a name="l03204"></a>03204             <span class="keywordflow">if</span> (! token_results[13].matched)
<a name="l03205"></a>03205             {
<a name="l03206"></a>03206                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Directive &#39;add_animation&#39;: Token &#39;event&#39; has invalid format, skipping....&quot;</span>);
<a name="l03207"></a>03207                 <span class="keywordflow">continue</span>;
<a name="l03208"></a>03208             }
<a name="l03209"></a>03209             <span class="keywordflow">else</span>
<a name="l03210"></a>03210             {
<a name="l03211"></a>03211                 animation.<a class="code" href="struct_rig_def_1_1_animation.html#a56e1b5ce5623d907cb9f3b7eca19309c">event</a> = token_results[14];
<a name="l03212"></a>03212             }
<a name="l03213"></a>03213         }
<a name="l03214"></a>03214         <span class="keywordflow">else</span> 
<a name="l03215"></a>03215         {
<a name="l03216"></a>03216             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;[Internal error] Directive &#39;add_animation&#39;: Token &#39;&quot;</span> + *itor + <span class="stringliteral">&quot;&#39; passed syntax check, but wasn&#39;t recognized....&quot;</span>);
<a name="l03217"></a>03217         }
<a name="l03218"></a>03218     }
<a name="l03219"></a>03219 
<a name="l03220"></a>03220     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;props.back().animations.push_back(animation);
<a name="l03221"></a>03221 }
<a name="l03222"></a>03222 
<a name="l03223"></a><a class="code" href="class_rig_def_1_1_parser.html#ae96909f926a36b7a2e97608873c501ea">03223</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ae96909f926a36b7a2e97608873c501ea">Parser::ParseAntiLockBrakes</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03224"></a>03224 {
<a name="l03225"></a>03225     boost::smatch results;
<a name="l03226"></a>03226     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_ANTI_LOCK_BRAKES))
<a name="l03227"></a>03227     {
<a name="l03228"></a>03228         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03229"></a>03229         <span class="keywordflow">return</span>;
<a name="l03230"></a>03230     }
<a name="l03231"></a>03231     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03232"></a>03232 
<a name="l03233"></a>03233     <a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html">AntiLockBrakes</a> anti_lock_brakes;
<a name="l03234"></a>03234     anti_lock_brakes.<a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html#a5888f772ac8b846466c93c1f7a3fff71">regulation_force</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l03235"></a>03235     anti_lock_brakes.<a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html#ab8a9437eb41bc8c305d7322dbf7b0dae">min_speed</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]));
<a name="l03236"></a>03236 
<a name="l03237"></a>03237     <span class="keywordflow">if</span> (results[4].matched)
<a name="l03238"></a>03238     {
<a name="l03239"></a>03239         anti_lock_brakes.<a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html#ae009886a223a5467555ed1bbf9cec2a7">pulse_per_sec</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l03240"></a>03240         anti_lock_brakes.<a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html#a3c62d95e9861af81dcc9febbb131d1d9">_pulse_per_sec_set</a> = <span class="keyword">true</span>;
<a name="l03241"></a>03241 
<a name="l03242"></a>03242         <span class="keywordflow">if</span> (results[6].matched)
<a name="l03243"></a>03243         {
<a name="l03244"></a>03244             <span class="comment">/* parse mode */</span>
<a name="l03245"></a>03245             Ogre::StringVector tokens = Ogre::StringUtil::split(results[6], <span class="stringliteral">&quot;&amp;&quot;</span>);
<a name="l03246"></a>03246             Ogre::StringVector::iterator iter = tokens.begin();
<a name="l03247"></a>03247             <span class="keywordflow">for</span> ( ; iter != tokens.end(); iter++)
<a name="l03248"></a>03248             {
<a name="l03249"></a>03249                 boost::smatch results;
<a name="l03250"></a>03250                 <span class="keywordflow">if</span> (! boost::regex_search(*iter, results, Regexes::ANTI_LOCK_BRAKES_MODE))
<a name="l03251"></a>03251                 {
<a name="l03252"></a>03252                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(*iter, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid mode keyword, ignoring whole line...&quot;</span>);
<a name="l03253"></a>03253                     <span class="keywordflow">return</span>;
<a name="l03254"></a>03254                 }
<a name="l03255"></a>03255                 <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03256"></a>03256 
<a name="l03257"></a>03257                 <span class="keywordflow">if</span> (results[2].matched)
<a name="l03258"></a>03258                 {
<a name="l03259"></a>03259                     anti_lock_brakes.<a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html#a2b7a358ac3c0e69ee115338cb1bbd351" title="Bit flags.">mode</a> |= AntiLockBrakes::MODE_ON;
<a name="l03260"></a>03260                 }
<a name="l03261"></a>03261                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[3].matched)
<a name="l03262"></a>03262                 {
<a name="l03263"></a>03263                     anti_lock_brakes.<a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html#a2b7a358ac3c0e69ee115338cb1bbd351" title="Bit flags.">mode</a> |= AntiLockBrakes::MODE_OFF;
<a name="l03264"></a>03264                 }
<a name="l03265"></a>03265                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[4].matched)
<a name="l03266"></a>03266                 {
<a name="l03267"></a>03267                     anti_lock_brakes.<a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html#a2b7a358ac3c0e69ee115338cb1bbd351" title="Bit flags.">mode</a> |= AntiLockBrakes::MODE_NO_DASHBOARD;
<a name="l03268"></a>03268                 }
<a name="l03269"></a>03269                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[5].matched)
<a name="l03270"></a>03270                 {
<a name="l03271"></a>03271                     anti_lock_brakes.<a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html#a2b7a358ac3c0e69ee115338cb1bbd351" title="Bit flags.">mode</a> |= AntiLockBrakes::MODE_NO_TOGGLE;
<a name="l03272"></a>03272                 }
<a name="l03273"></a>03273             }
<a name="l03274"></a>03274         }
<a name="l03275"></a>03275     }
<a name="l03276"></a>03276 
<a name="l03277"></a>03277     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;anti_lock_brakes != <span class="keyword">nullptr</span>)
<a name="l03278"></a>03278     {
<a name="l03279"></a>03279         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Found multiple sections &#39;AntiLockBrakes&#39; in one module, using last one.&quot;</span>);
<a name="l03280"></a>03280     }
<a name="l03281"></a>03281     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;anti_lock_brakes = boost::shared_ptr&lt;AntiLockBrakes&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_anti_lock_brakes.html">AntiLockBrakes</a>(anti_lock_brakes) );
<a name="l03282"></a>03282 }
<a name="l03283"></a>03283 
<a name="l03284"></a><a class="code" href="class_rig_def_1_1_parser.html#ab188a07d936f638b27009fa3197971c3">03284</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ab188a07d936f638b27009fa3197971c3">Parser::ParseEngoption</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03285"></a>03285 {
<a name="l03286"></a>03286     boost::smatch results;
<a name="l03287"></a>03287     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_ENGOPTION))
<a name="l03288"></a>03288     {
<a name="l03289"></a>03289         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03290"></a>03290         <span class="keywordflow">return</span>;
<a name="l03291"></a>03291     }
<a name="l03292"></a>03292     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03293"></a>03293 
<a name="l03294"></a>03294     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1;
<a name="l03295"></a>03295     <a class="code" href="struct_rig_def_1_1_engoption.html">Engoption</a> engoption;
<a name="l03296"></a>03296     engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#a8baef88e0c02569cb4334353d962c6a2">inertia</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]);
<a name="l03297"></a>03297     
<a name="l03298"></a>03298     i += 3;
<a name="l03299"></a>03299     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03300"></a>03300     {
<a name="l03301"></a>03301         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#ae0273ff8624e6fedd05cccc6c3682327">type</a> = <a class="code" href="struct_rig_def_1_1_engoption.html#a3c6b9a1990b41b3198008ecfb1a537a6">Engoption::EngineType</a>(results[i].str().at(0)); 
<a name="l03302"></a>03302     }
<a name="l03303"></a>03303     
<a name="l03304"></a>03304     i += 3;
<a name="l03305"></a>03305     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03306"></a>03306     {
<a name="l03307"></a>03307         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#a2162124e24414779bd108b1e76e5ad0e">clutch_force</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]);    
<a name="l03308"></a>03308         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#ad001f9101c9ec14bc6f6af8279cbb795">_clutch_force_use_default</a> = <span class="keyword">false</span>;
<a name="l03309"></a>03309     }
<a name="l03310"></a>03310     
<a name="l03311"></a>03311     i += 3;
<a name="l03312"></a>03312     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03313"></a>03313     {
<a name="l03314"></a>03314         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#a395414d6ac8f7000e98229920c8db021" title="Seconds.">shift_time</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]);  
<a name="l03315"></a>03315     }
<a name="l03316"></a>03316     
<a name="l03317"></a>03317     i += 3;
<a name="l03318"></a>03318     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03319"></a>03319     {
<a name="l03320"></a>03320         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#aff76d2771390d3440c11d3e3f139f82d" title="Seconds.">clutch_time</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]); 
<a name="l03321"></a>03321     }
<a name="l03322"></a>03322     
<a name="l03323"></a>03323     i += 3;
<a name="l03324"></a>03324     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03325"></a>03325     {
<a name="l03326"></a>03326         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#aa735b2754a20e17cadc1f9c2928ceaee" title="Seconds.">post_shift_time</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]); 
<a name="l03327"></a>03327     }
<a name="l03328"></a>03328     
<a name="l03329"></a>03329     i += 3;
<a name="l03330"></a>03330     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03331"></a>03331     {
<a name="l03332"></a>03332         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#a606cca0e7d4c16954fd85a5eae05dc7e">idle_rpm</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]);
<a name="l03333"></a>03333     }
<a name="l03334"></a>03334     
<a name="l03335"></a>03335     i += 3;
<a name="l03336"></a>03336     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03337"></a>03337     {
<a name="l03338"></a>03338         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#ac9bd01665cb2f51faa4fb558ae205eda">stall_rpm</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]);   
<a name="l03339"></a>03339     }
<a name="l03340"></a>03340     
<a name="l03341"></a>03341     i += 3;
<a name="l03342"></a>03342     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03343"></a>03343     {
<a name="l03344"></a>03344         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#ad9fa400f12ae042a8ff102e0b035e912">max_idle_mixture</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]);    
<a name="l03345"></a>03345     }
<a name="l03346"></a>03346     
<a name="l03347"></a>03347     i += 3;
<a name="l03348"></a>03348     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03349"></a>03349     {
<a name="l03350"></a>03350         engoption.<a class="code" href="struct_rig_def_1_1_engoption.html#aed27065a1050b75500bf5abac214fca2">min_idle_mixture</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]);    
<a name="l03351"></a>03351     }
<a name="l03352"></a>03352 
<a name="l03353"></a>03353     i += 1;
<a name="l03354"></a>03354     <span class="keywordflow">if</span> (results[i].matched)
<a name="l03355"></a>03355     {
<a name="l03356"></a>03356         std::stringstream msg;
<a name="l03357"></a>03357         msg &lt;&lt; <span class="stringliteral">&quot;Illegal text after parameters: \&quot;&quot;</span> &lt;&lt; results[i] &lt;&lt; <span class="stringliteral">&quot;\&quot;, please remove.&quot;</span>;
<a name="l03358"></a>03358         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l03359"></a>03359     }
<a name="l03360"></a>03360     
<a name="l03361"></a>03361     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;engoption = boost::shared_ptr&lt;Engoption&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_engoption.html">Engoption</a>(engoption) );
<a name="l03362"></a>03362 }
<a name="l03363"></a>03363 
<a name="l03364"></a><a class="code" href="class_rig_def_1_1_parser.html#ae7341cc97f799ecf5f3d85b6a1d15a40">03364</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ae7341cc97f799ecf5f3d85b6a1d15a40">Parser::ParseEngturbo</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03365"></a>03365 {
<a name="l03366"></a>03366     boost::smatch results;
<a name="l03367"></a>03367     <span class="keywordflow">if</span> (!boost::regex_search(line, results, Regexes::SECTION_ENGTURBO))
<a name="l03368"></a>03368     {
<a name="l03369"></a>03369         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03370"></a>03370         <span class="keywordflow">return</span>;
<a name="l03371"></a>03371     }
<a name="l03372"></a>03372 
<a name="l03373"></a>03373     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03374"></a>03374     <a class="code" href="struct_rig_def_1_1_engturbo.html">Engturbo</a> engturbo;
<a name="l03375"></a>03375     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a83c7a4dbfb504c187298e079380a06e1">version</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l03376"></a>03376     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#abe852f834a65d4e199d509b29c425d18">tinertiaFactor</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l03377"></a>03377     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a0450b720a3946aff49f01dfe5efb4e13">nturbos</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l03378"></a>03378 
<a name="l03379"></a>03379     <span class="keywordflow">if</span> (<a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]) &gt; 4)
<a name="l03380"></a>03380     {
<a name="l03381"></a>03381         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;You cannot have more than 4 turbos. Fallback: using 4 instead.&quot;</span>);
<a name="l03382"></a>03382         engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a0450b720a3946aff49f01dfe5efb4e13">nturbos</a> = 4;
<a name="l03383"></a>03383     }
<a name="l03384"></a>03384 
<a name="l03385"></a>03385     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#ac387aa6efc623b89c2430ae09b17c809">param1</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l03386"></a>03386     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a1fe9d99539534f5c6cef3876273c4104">param2</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[6]);
<a name="l03387"></a>03387     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a64000458a72cb6e56ec59b8f766f99eb">param3</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[8]);
<a name="l03388"></a>03388     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a6c0ed5a4d604f15cfcfca47a2bf06343">param4</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[10]);
<a name="l03389"></a>03389     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#af87871388ee3462faf1a1ca8cbd7391b">param5</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[12]);
<a name="l03390"></a>03390     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a8d98a363722bf4891fff0446293f07af">param6</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[14]);
<a name="l03391"></a>03391     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a18562e87d3417a4e5ed155dccf7d05c5">param7</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[16]);
<a name="l03392"></a>03392     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a17bca6f36dc7f762d922c36511ddda91">param8</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[18]);
<a name="l03393"></a>03393     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a0cff39154792e0cd01877b3eab3ea4e3">param9</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[20]);
<a name="l03394"></a>03394     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#ae1088749f313b7d1926cb3f6c6fa3154">param10</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[22]);
<a name="l03395"></a>03395     engturbo.<a class="code" href="struct_rig_def_1_1_engturbo.html#a5b0f9d4c0985fa875818ac7b2d17ebc2">param11</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[24]);
<a name="l03396"></a>03396 
<a name="l03397"></a>03397     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;engturbo = boost::shared_ptr&lt;Engturbo&gt;(<span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_engturbo.html">Engturbo</a>(engturbo));
<a name="l03398"></a>03398 }
<a name="l03399"></a>03399 
<a name="l03400"></a><a class="code" href="class_rig_def_1_1_parser.html#aae06f7d75f8edb0b990ada445a90777a">03400</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aae06f7d75f8edb0b990ada445a90777a">Parser::ParseEngine</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03401"></a>03401 {
<a name="l03402"></a>03402     boost::smatch results;
<a name="l03403"></a>03403     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_ENGINE))
<a name="l03404"></a>03404     {
<a name="l03405"></a>03405         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03406"></a>03406         <span class="keywordflow">return</span>;
<a name="l03407"></a>03407     }
<a name="l03408"></a>03408     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03409"></a>03409 
<a name="l03410"></a>03410     <a class="code" href="struct_rig_def_1_1_engine.html">Engine</a> engine;
<a name="l03411"></a>03411     engine.<a class="code" href="struct_rig_def_1_1_engine.html#aae5e74c0b9c47d620f4823fd83119d32">shift_down_rpm</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l03412"></a>03412     engine.<a class="code" href="struct_rig_def_1_1_engine.html#a874a3a66a5bda10008856c8e061800f8">shift_up_rpm</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l03413"></a>03413     engine.<a class="code" href="struct_rig_def_1_1_engine.html#ad0aefd22876c6484c55daa0c509eb700">torque</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l03414"></a>03414     engine.<a class="code" href="struct_rig_def_1_1_engine.html#a3885f5621179c9266aede0c0167c0a87">global_gear_ratio</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l03415"></a>03415     engine.<a class="code" href="struct_rig_def_1_1_engine.html#aa7bc1a81324521a909a6c6ef9b96f847">reverse_gear_ratio</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l03416"></a>03416     engine.<a class="code" href="struct_rig_def_1_1_engine.html#a7ba547e77c4fbdcb42da00ff2155672e">neutral_gear_ratio</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l03417"></a>03417 
<a name="l03418"></a>03418     <span class="comment">/* Forward gears */</span>
<a name="l03419"></a>03419     <span class="keywordtype">bool</span> terminator_found = <span class="keyword">false</span>;
<a name="l03420"></a>03420     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> gear_index = 0; gear_index &lt; 21; ++gear_index)
<a name="l03421"></a>03421     {
<a name="l03422"></a>03422         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> result_index = 13 + (gear_index * 3);
<a name="l03423"></a>03423 
<a name="l03424"></a>03424         <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l03425"></a>03425         {
<a name="l03426"></a>03426             <span class="keywordtype">float</span> value = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[result_index]);
<a name="l03427"></a>03427             <span class="keywordflow">if</span> (value &lt;= 0.f)
<a name="l03428"></a>03428             {
<a name="l03429"></a>03429                 terminator_found = <span class="keyword">true</span>;
<a name="l03430"></a>03430                 <span class="keywordflow">break</span>;
<a name="l03431"></a>03431             }
<a name="l03432"></a>03432             engine.<a class="code" href="struct_rig_def_1_1_engine.html#a00f8a5f55b5c0d171dbcd4eeab24a331">gear_ratios</a>.push_back(value);
<a name="l03433"></a>03433         }
<a name="l03434"></a>03434         <span class="keywordflow">else</span>
<a name="l03435"></a>03435         {
<a name="l03436"></a>03436             <span class="keywordflow">break</span>;
<a name="l03437"></a>03437         }
<a name="l03438"></a>03438     }
<a name="l03439"></a>03439 
<a name="l03440"></a>03440     <span class="keywordflow">if</span> (engine.<a class="code" href="struct_rig_def_1_1_engine.html#a00f8a5f55b5c0d171dbcd4eeab24a331">gear_ratios</a>.size() == 0)
<a name="l03441"></a>03441     {
<a name="l03442"></a>03442         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Engine has no forward gear, ignoring...&quot;</span>);
<a name="l03443"></a>03443         <span class="keywordflow">return</span>;
<a name="l03444"></a>03444     }
<a name="l03445"></a>03445 
<a name="l03446"></a>03446     <span class="keywordflow">if</span> (! terminator_found &amp;&amp; ! results[42].matched) <span class="comment">/* Terminator, required, absence tolerated for compatibility */</span>
<a name="l03447"></a>03447     {
<a name="l03448"></a>03448         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Forward gears list is not terminated using &#39;-1.0&#39;. Please fix.&quot;</span>);
<a name="l03449"></a>03449     }
<a name="l03450"></a>03450 
<a name="l03451"></a>03451     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;engine = boost::shared_ptr&lt;Engine&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_engine.html">Engine</a>(engine) );
<a name="l03452"></a>03452 }
<a name="l03453"></a>03453 
<a name="l03454"></a><a class="code" href="class_rig_def_1_1_parser.html#a16d307023239cfa3a1e5b5fd12b7b7d8">03454</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a16d307023239cfa3a1e5b5fd12b7b7d8">Parser::ParseContacter</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03455"></a>03455 {
<a name="l03456"></a>03456     boost::smatch results;
<a name="l03457"></a>03457     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::NODE_LIST))
<a name="l03458"></a>03458     {
<a name="l03459"></a>03459         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03460"></a>03460         <span class="keywordflow">return</span>;
<a name="l03461"></a>03461     }
<a name="l03462"></a>03462     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03463"></a>03463 
<a name="l03464"></a>03464     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;contacters.push_back( <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]) );
<a name="l03465"></a>03465 }
<a name="l03466"></a>03466 
<a name="l03467"></a><a class="code" href="class_rig_def_1_1_parser.html#ad01d2a3409dc148e467b3e332fc6c748">03467</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ad01d2a3409dc148e467b3e332fc6c748">Parser::ParseCommand</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03468"></a>03468 {
<a name="l03469"></a>03469     <a class="code" href="class_rig_def_1_1_parser.html#a6fee48edaaae64a474c09b9c3a5c3fa4">_ParseSectionsCommandsCommands2</a>(line, Regexes::SECTION_COMMANDS, 1);
<a name="l03470"></a>03470 }
<a name="l03471"></a>03471 
<a name="l03472"></a><a class="code" href="class_rig_def_1_1_parser.html#ad41b431ec6ba556cd97793cd9b0fe838">03472</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ad41b431ec6ba556cd97793cd9b0fe838">Parser::ParseCommand2</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03473"></a>03473 {
<a name="l03474"></a>03474     <a class="code" href="class_rig_def_1_1_parser.html#a6fee48edaaae64a474c09b9c3a5c3fa4">_ParseSectionsCommandsCommands2</a>(line, Regexes::SECTION_COMMANDS_2, 2);
<a name="l03475"></a>03475 }
<a name="l03476"></a>03476 
<a name="l03477"></a><a class="code" href="class_rig_def_1_1_parser.html#a6fee48edaaae64a474c09b9c3a5c3fa4">03477</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a6fee48edaaae64a474c09b9c3a5c3fa4">Parser::_ParseSectionsCommandsCommands2</a>(Ogre::String <span class="keyword">const</span> &amp; line, boost::regex <span class="keyword">const</span> &amp; regex, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> format_version)
<a name="l03478"></a>03478 {
<a name="l03479"></a>03479     boost::smatch results;
<a name="l03480"></a>03480     <span class="keywordflow">if</span> (! boost::regex_search(line, results, regex))
<a name="l03481"></a>03481     {
<a name="l03482"></a>03482         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03483"></a>03483         <span class="keywordflow">return</span>;
<a name="l03484"></a>03484     }
<a name="l03485"></a>03485     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03486"></a>03486 
<a name="l03487"></a>03487     <a class="code" href="struct_rig_def_1_1_command2.html">Command2</a> command2;
<a name="l03488"></a>03488     command2.<a class="code" href="struct_rig_def_1_1_command2.html#ab96a356cabcb43857f884aa4ffe69fdc">beam_defaults</a>     = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l03489"></a>03489     command2.<a class="code" href="struct_rig_def_1_1_command2.html#ade46e3280f029e6bad4abd24aa38e87f">detacher_group</a>    = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l03490"></a>03490     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a49a7b030523e015e2d68a68329da7134">_format_version</a>   = format_version;
<a name="l03491"></a>03491     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a16ffe82b35c1c4a4016b7baf351e6489">inertia_defaults</a>  = <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>;
<a name="l03492"></a>03492     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a48d07240a51f7c2ce574a56a7abda4dd">nodes</a>[0]          = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l03493"></a>03493     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a48d07240a51f7c2ce574a56a7abda4dd">nodes</a>[1]          = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l03494"></a>03494 
<a name="l03495"></a>03495     <span class="comment">/* Shorten/lenghten rate */</span>
<a name="l03496"></a>03496     command2.<a class="code" href="struct_rig_def_1_1_command2.html#ae602dd5800860ca670568ce20d230bee">shorten_rate</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l03497"></a>03497     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> result_index;
<a name="l03498"></a>03498     <span class="keywordflow">if</span> (format_version == 2)
<a name="l03499"></a>03499     {
<a name="l03500"></a>03500         command2.<a class="code" href="struct_rig_def_1_1_command2.html#a3eabcdde35d9fe2099870aa26aa990c3">lengthen_rate</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l03501"></a>03501         result_index = 9;
<a name="l03502"></a>03502     }
<a name="l03503"></a>03503     <span class="keywordflow">else</span>
<a name="l03504"></a>03504     {
<a name="l03505"></a>03505         command2.<a class="code" href="struct_rig_def_1_1_command2.html#a3eabcdde35d9fe2099870aa26aa990c3">lengthen_rate</a> = command2.<a class="code" href="struct_rig_def_1_1_command2.html#ae602dd5800860ca670568ce20d230bee">shorten_rate</a>;
<a name="l03506"></a>03506         result_index = 7;
<a name="l03507"></a>03507     }
<a name="l03508"></a>03508     
<a name="l03509"></a>03509     command2.<a class="code" href="struct_rig_def_1_1_command2.html#aec4b03b9c64df22ef2deeb2ef2309b72">max_contraction</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[result_index]);
<a name="l03510"></a>03510     result_index +=2;
<a name="l03511"></a>03511     command2.<a class="code" href="struct_rig_def_1_1_command2.html#ab379426d340b476ca105b0107cff2440">max_extension</a>   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[result_index]);
<a name="l03512"></a>03512     result_index +=2;
<a name="l03513"></a>03513     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a4a9b8a43b785607f65880dafa9f46c21">contract_key</a>    = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[result_index]);
<a name="l03514"></a>03514     result_index +=2;
<a name="l03515"></a>03515     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a38bffb59565f0bbfdcbaea2057a0e92b">extend_key</a>      = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[result_index]);
<a name="l03516"></a>03516 
<a name="l03517"></a>03517     <span class="comment">/* Options */</span>
<a name="l03518"></a>03518     result_index += 3;
<a name="l03519"></a>03519     <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l03520"></a>03520     {
<a name="l03521"></a>03521         std::string options_str = results[result_index].str();
<a name="l03522"></a>03522         <span class="keywordtype">bool</span> centering = <span class="keyword">false</span>;
<a name="l03523"></a>03523         <span class="keywordtype">bool</span> one_press_mode = <span class="keyword">false</span>;
<a name="l03524"></a>03524         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; options_str.length(); i++)
<a name="l03525"></a>03525         {
<a name="l03526"></a>03526             <span class="keyword">const</span> <span class="keywordtype">char</span> c = options_str.at(i);
<a name="l03527"></a>03527             <span class="keywordflow">switch</span>(c)
<a name="l03528"></a>03528             {
<a name="l03529"></a>03529                 <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>: <span class="comment">/* Filler */</span>
<a name="l03530"></a>03530                     <span class="keywordflow">break</span>;
<a name="l03531"></a>03531 
<a name="l03532"></a>03532                 <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:
<a name="l03533"></a>03533                     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a5de77f913030c108b92326df1ea192b8">options</a> |= Command2::OPTION_i_INVISIBLE;
<a name="l03534"></a>03534                     <span class="keywordflow">break</span>;
<a name="l03535"></a>03535 
<a name="l03536"></a>03536                 <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:
<a name="l03537"></a>03537                     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a5de77f913030c108b92326df1ea192b8">options</a> |= Command2::OPTION_r_ROPE;
<a name="l03538"></a>03538                     <span class="keywordflow">break</span>;
<a name="l03539"></a>03539 
<a name="l03540"></a>03540                 <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:
<a name="l03541"></a>03541                     <span class="keywordflow">if</span> (! one_press_mode)
<a name="l03542"></a>03542                     {
<a name="l03543"></a>03543                         command2.<a class="code" href="struct_rig_def_1_1_command2.html#a5de77f913030c108b92326df1ea192b8">options</a> |= Command2::OPTION_c_AUTO_CENTER;
<a name="l03544"></a>03544                         centering = <span class="keyword">true</span>;
<a name="l03545"></a>03545                     }
<a name="l03546"></a>03546                     <span class="keywordflow">else</span>
<a name="l03547"></a>03547                     {
<a name="l03548"></a>03548                         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Command cannot be one-pressed and self centering at the same time, ignoring flag &#39;c&#39;&quot;</span>);
<a name="l03549"></a>03549                     }
<a name="l03550"></a>03550                     <span class="keywordflow">break</span>;
<a name="l03551"></a>03551 
<a name="l03552"></a>03552                 <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:
<a name="l03553"></a>03553                     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a5de77f913030c108b92326df1ea192b8">options</a> |= Command2::OPTION_f_NOT_FASTER;
<a name="l03554"></a>03554                     <span class="keywordflow">break</span>;
<a name="l03555"></a>03555 
<a name="l03556"></a>03556                 <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>:
<a name="l03557"></a>03557                     <span class="keywordflow">if</span> (centering)
<a name="l03558"></a>03558                     {
<a name="l03559"></a>03559                         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Command cannot be one-pressed and self centering at the same time, ignoring flag &#39;p&#39;&quot;</span>);
<a name="l03560"></a>03560                     }
<a name="l03561"></a>03561                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (one_press_mode)
<a name="l03562"></a>03562                     {
<a name="l03563"></a>03563                         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Command already has a one-pressed c.mode, ignoring flag &#39;p&#39;&quot;</span>);
<a name="l03564"></a>03564                     }
<a name="l03565"></a>03565                     <span class="keywordflow">else</span>
<a name="l03566"></a>03566                     {
<a name="l03567"></a>03567                         command2.<a class="code" href="struct_rig_def_1_1_command2.html#a5de77f913030c108b92326df1ea192b8">options</a> |= Command2::OPTION_p_PRESS_ONCE;
<a name="l03568"></a>03568                         one_press_mode = <span class="keyword">true</span>;
<a name="l03569"></a>03569                     }
<a name="l03570"></a>03570                     <span class="keywordflow">break</span>;
<a name="l03571"></a>03571 
<a name="l03572"></a>03572                 <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>:
<a name="l03573"></a>03573                     <span class="keywordflow">if</span> (centering)
<a name="l03574"></a>03574                     {
<a name="l03575"></a>03575                         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Command cannot be one-pressed and self centering at the same time, ignoring flag &#39;o&#39;&quot;</span>);
<a name="l03576"></a>03576                     }
<a name="l03577"></a>03577                     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (one_press_mode)
<a name="l03578"></a>03578                     {
<a name="l03579"></a>03579                         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Command already has a one-pressed c.mode, ignoring flag &#39;o&#39;&quot;</span>);
<a name="l03580"></a>03580                     }
<a name="l03581"></a>03581                     <span class="keywordflow">else</span>
<a name="l03582"></a>03582                     {
<a name="l03583"></a>03583                         command2.<a class="code" href="struct_rig_def_1_1_command2.html#a5de77f913030c108b92326df1ea192b8">options</a> |= Command2::OPTION_o_PRESS_ONCE_CENTER;
<a name="l03584"></a>03584                         one_press_mode = <span class="keyword">true</span>;
<a name="l03585"></a>03585                     }
<a name="l03586"></a>03586                     <span class="keywordflow">break</span>;
<a name="l03587"></a>03587                 
<a name="l03588"></a>03588                 <span class="keywordflow">default</span>:
<a name="l03589"></a>03589                     this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(options_str, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Ignoring invalid option: &quot;</span>) + c);
<a name="l03590"></a>03590                     <span class="keywordflow">break</span>;
<a name="l03591"></a>03591             }
<a name="l03592"></a>03592         }
<a name="l03593"></a>03593 
<a name="l03594"></a>03594         result_index += 3;
<a name="l03595"></a>03595         <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l03596"></a>03596         {
<a name="l03597"></a>03597             command2.<a class="code" href="struct_rig_def_1_1_command2.html#a0f852bcff0dd10ba340b9217bf8ba93d">description</a> = results[result_index];
<a name="l03598"></a>03598 
<a name="l03599"></a>03599             <span class="keywordflow">if</span> (format_version == 1)
<a name="l03600"></a>03600             {
<a name="l03601"></a>03601                 result_index += 5;
<a name="l03602"></a>03602                 <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ab90028c4339e1bb062263322a3c7324e">_ParseOptionalInertia</a>(command2.<a class="code" href="struct_rig_def_1_1_command2.html#a5b26ca4473c6b08c33011eae14223fde">inertia</a>, results, result_index))
<a name="l03603"></a>03603                 {
<a name="l03604"></a>03604                     result_index += 12;
<a name="l03605"></a>03605             
<a name="l03606"></a>03606                     <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l03607"></a>03607                     {
<a name="l03608"></a>03608                         command2.<a class="code" href="struct_rig_def_1_1_command2.html#a619853236db8b6b58261ae77870f49a1">affect_engine</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[result_index]);
<a name="l03609"></a>03609 
<a name="l03610"></a>03610                         result_index += 3;
<a name="l03611"></a>03611                         <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l03612"></a>03612                         {
<a name="l03613"></a>03613                             command2.<a class="code" href="struct_rig_def_1_1_command2.html#a03cde25e23806d350d5712012a41ccc2">needs_engine</a> = <a class="code" href="_rig_def___parser_8cpp.html#aa36143e7b00dfd8d2962e14f89047251">STR_PARSE_BOOL</a>(results[result_index]);
<a name="l03614"></a>03614                         }
<a name="l03615"></a>03615                     }
<a name="l03616"></a>03616                 }
<a name="l03617"></a>03617             }
<a name="l03618"></a>03618             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (format_version == 2)
<a name="l03619"></a>03619             {
<a name="l03620"></a>03620                 result_index += 3;
<a name="l03621"></a>03621                 <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l03622"></a>03622                 {
<a name="l03623"></a>03623                     std::string rest_of_line = results[result_index];
<a name="l03624"></a>03624                     boost::smatch rest_of_results;
<a name="l03625"></a>03625                     result_index = 0;
<a name="l03626"></a>03626                     <span class="keywordflow">if</span> (boost::regex_search(rest_of_line, rest_of_results, Regexes::SECTION_COMMANDS2_INERTIA_ENGINE_PART))
<a name="l03627"></a>03627                     {
<a name="l03628"></a>03628                         <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ab90028c4339e1bb062263322a3c7324e">_ParseOptionalInertia</a>(command2.<a class="code" href="struct_rig_def_1_1_command2.html#a5b26ca4473c6b08c33011eae14223fde">inertia</a>, rest_of_results, 2))
<a name="l03629"></a>03629                         {
<a name="l03630"></a>03630                             result_index += 12;
<a name="l03631"></a>03631             
<a name="l03632"></a>03632                             <span class="keywordflow">if</span> (rest_of_results[result_index].matched)
<a name="l03633"></a>03633                             {
<a name="l03634"></a>03634                                 command2.<a class="code" href="struct_rig_def_1_1_command2.html#a619853236db8b6b58261ae77870f49a1">affect_engine</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(rest_of_results[result_index]);
<a name="l03635"></a>03635 
<a name="l03636"></a>03636                                 result_index += 3;
<a name="l03637"></a>03637                                 <span class="keywordflow">if</span> (rest_of_results[result_index].matched)
<a name="l03638"></a>03638                                 {
<a name="l03639"></a>03639                                     command2.<a class="code" href="struct_rig_def_1_1_command2.html#a03cde25e23806d350d5712012a41ccc2">needs_engine</a> = <a class="code" href="_rig_def___parser_8cpp.html#aa36143e7b00dfd8d2962e14f89047251">STR_PARSE_BOOL</a>(rest_of_results[result_index]);
<a name="l03640"></a>03640                                 }
<a name="l03641"></a>03641                             }
<a name="l03642"></a>03642                         }
<a name="l03643"></a>03643                     }
<a name="l03644"></a>03644                     <span class="keywordflow">else</span>
<a name="l03645"></a>03645                     {
<a name="l03646"></a>03646                         Ogre::StringUtil::trim(rest_of_line);
<a name="l03647"></a>03647                         <span class="keywordflow">if</span> (! rest_of_line.empty()) <span class="comment">// Could happen with invalid trailing delimiter and I don&#39;t want to look like an idiot</span>
<a name="l03648"></a>03648                         {
<a name="l03649"></a>03649                             std::stringstream msg;
<a name="l03650"></a>03650                             msg &lt;&lt; <span class="stringliteral">&quot;Please remove: Invalid string after parameter \&quot;description\&quot;: \&quot;&quot;</span> &lt;&lt; rest_of_line &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>; 
<a name="l03651"></a>03651                             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l03652"></a>03652                         }
<a name="l03653"></a>03653                     }
<a name="l03654"></a>03654                 }
<a name="l03655"></a>03655             }
<a name="l03656"></a>03656         }
<a name="l03657"></a>03657     }
<a name="l03658"></a>03658 
<a name="l03659"></a>03659     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;commands_2.push_back(command2);
<a name="l03660"></a>03660 }
<a name="l03661"></a>03661 
<a name="l03662"></a><a class="code" href="class_rig_def_1_1_parser.html#a65b5cad02a89ab851252f29b9220516b">03662</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a65b5cad02a89ab851252f29b9220516b">Parser::ParseCollisionBox</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03663"></a>03663 {
<a name="l03664"></a>03664     boost::smatch results;
<a name="l03665"></a>03665     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_COLLISIONBOXES))
<a name="l03666"></a>03666     {
<a name="l03667"></a>03667         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03668"></a>03668         <span class="keywordflow">return</span>;
<a name="l03669"></a>03669     }
<a name="l03670"></a>03670     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03671"></a>03671 
<a name="l03672"></a>03672     <a class="code" href="struct_rig_def_1_1_collision_box.html">CollisionBox</a> collisionbox;
<a name="l03673"></a>03673 
<a name="l03674"></a>03674     Ogre::StringVector tokens = Ogre::StringUtil::split(line, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l03675"></a>03675     Ogre::StringVector::iterator iter = tokens.begin();
<a name="l03676"></a>03676     <span class="keywordflow">for</span> ( ; iter != tokens.end(); iter++)
<a name="l03677"></a>03677     {
<a name="l03678"></a>03678         collisionbox.<a class="code" href="struct_rig_def_1_1_collision_box.html#ad9cdb18abd6ad4db1e0102851299aaf2">nodes</a>.push_back( <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(*iter) );
<a name="l03679"></a>03679     }
<a name="l03680"></a>03680 
<a name="l03681"></a>03681     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;collision_boxes.push_back(collisionbox);
<a name="l03682"></a>03682 }
<a name="l03683"></a>03683 
<a name="l03684"></a><a class="code" href="class_rig_def_1_1_parser.html#a19b37e847fe07c225efbe5a71a560205">03684</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a19b37e847fe07c225efbe5a71a560205">Parser::ParseCinecam</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03685"></a>03685 {
<a name="l03686"></a>03686     boost::smatch results;
<a name="l03687"></a>03687     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_CINECAM))
<a name="l03688"></a>03688     {
<a name="l03689"></a>03689         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03690"></a>03690         <span class="keywordflow">return</span>;
<a name="l03691"></a>03691     }
<a name="l03692"></a>03692     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03693"></a>03693 
<a name="l03694"></a>03694     <a class="code" href="struct_rig_def_1_1_cinecam.html">Cinecam</a> cinecam;
<a name="l03695"></a>03695     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#aa144fbad5eb09b4deda9b79f78090bb0">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l03696"></a>03696     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a92a6cca05a40b19e1c939c940d426abf">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l03697"></a>03697 
<a name="l03698"></a>03698     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a0e0affdfabad16ad8b5a0734bc5c7c05">position</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l03699"></a>03699     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a0e0affdfabad16ad8b5a0734bc5c7c05">position</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l03700"></a>03700     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a0e0affdfabad16ad8b5a0734bc5c7c05">position</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l03701"></a>03701     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l03702"></a>03702     {
<a name="l03703"></a>03703         <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a5f5e30fbc3b2f58adb15a8f64bbecd15">AddGeneratedNode</a>(<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a4fa605501562333355696b5b5be097a5">File::KEYWORD_CINECAM</a>);
<a name="l03704"></a>03704     }
<a name="l03705"></a>03705     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6ba9c57f01f4c8dfad95fc816edd4d36">nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[4]);
<a name="l03706"></a>03706     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6ba9c57f01f4c8dfad95fc816edd4d36">nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l03707"></a>03707     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6ba9c57f01f4c8dfad95fc816edd4d36">nodes</a>[2] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[6]);
<a name="l03708"></a>03708     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6ba9c57f01f4c8dfad95fc816edd4d36">nodes</a>[3] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[7]);
<a name="l03709"></a>03709     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6ba9c57f01f4c8dfad95fc816edd4d36">nodes</a>[4] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[8]);
<a name="l03710"></a>03710     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6ba9c57f01f4c8dfad95fc816edd4d36">nodes</a>[5] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[9]);
<a name="l03711"></a>03711     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6ba9c57f01f4c8dfad95fc816edd4d36">nodes</a>[6] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[10]);
<a name="l03712"></a>03712     cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6ba9c57f01f4c8dfad95fc816edd4d36">nodes</a>[7] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[11]);
<a name="l03713"></a>03713 
<a name="l03714"></a>03714     <span class="keywordflow">if</span> (results[13].matched)
<a name="l03715"></a>03715     {
<a name="l03716"></a>03716         cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a6b129be07ce76f7d1754707a265d6405">spring</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l03717"></a>03717         
<a name="l03718"></a>03718         <span class="keywordflow">if</span> (results[15].matched)
<a name="l03719"></a>03719         {
<a name="l03720"></a>03720             cinecam.<a class="code" href="struct_rig_def_1_1_cinecam.html#a0b0641bbe255244ac047aa73d09609ac">damping</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[15]);
<a name="l03721"></a>03721         }
<a name="l03722"></a>03722     }
<a name="l03723"></a>03723 
<a name="l03724"></a>03724     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;cinecam.push_back(cinecam);
<a name="l03725"></a>03725 }
<a name="l03726"></a>03726 
<a name="l03727"></a><a class="code" href="class_rig_def_1_1_parser.html#a6cf111f38eac29685809319e862a033a">03727</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a6cf111f38eac29685809319e862a033a">Parser::ParseCameraRails</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03728"></a>03728 {
<a name="l03729"></a>03729     boost::smatch results;
<a name="l03730"></a>03730     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_CAMERARAILS))
<a name="l03731"></a>03731     {
<a name="l03732"></a>03732         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03733"></a>03733         <span class="keywordflow">return</span>;
<a name="l03734"></a>03734     }
<a name="l03735"></a>03735     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03736"></a>03736 
<a name="l03737"></a>03737     <a class="code" href="class_rig_def_1_1_parser.html#ac262cf9239e4786121c0ee2a3b55611e" title="Parser state.">m_current_camera_rail</a>-&gt;nodes.push_back( <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]) );
<a name="l03738"></a>03738 }
<a name="l03739"></a>03739 
<a name="l03740"></a><a class="code" href="class_rig_def_1_1_parser.html#a2419db0af008818ecf81b6c159c7b6ca">03740</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a2419db0af008818ecf81b6c159c7b6ca">Parser::ParseBrakes</a>(Ogre::String line)
<a name="l03741"></a>03741 {
<a name="l03742"></a>03742     boost::smatch results;
<a name="l03743"></a>03743     <span class="keywordtype">bool</span> result = boost::regex_search(line, results, Regexes::SECTION_BRAKES);
<a name="l03744"></a>03744     <span class="keywordflow">if</span> (! result)
<a name="l03745"></a>03745     {
<a name="l03746"></a>03746         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03747"></a>03747         <span class="keywordflow">return</span>;
<a name="l03748"></a>03748     }
<a name="l03749"></a>03749 
<a name="l03750"></a>03750     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03751"></a>03751 
<a name="l03752"></a>03752     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;brakes == <span class="keyword">nullptr</span>)
<a name="l03753"></a>03753     {
<a name="l03754"></a>03754         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;brakes = boost::shared_ptr&lt;Brakes&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_brakes.html">Brakes</a>() );
<a name="l03755"></a>03755     }
<a name="l03756"></a>03756 
<a name="l03757"></a>03757     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;brakes-&gt;default_braking_force = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l03758"></a>03758 
<a name="l03759"></a>03759     <span class="keywordflow">if</span> (results[3].matched)
<a name="l03760"></a>03760     {
<a name="l03761"></a>03761         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;brakes-&gt;parking_brake_force = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]); 
<a name="l03762"></a>03762         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;brakes-&gt;_parking_brake_force_set = <span class="keyword">true</span>;
<a name="l03763"></a>03763     }
<a name="l03764"></a>03764     
<a name="l03765"></a>03765     
<a name="l03766"></a>03766 }
<a name="l03767"></a>03767 
<a name="l03768"></a><a class="code" href="class_rig_def_1_1_parser.html#a0a2f5ed5d6bcbb452c389ee838e08af9">03768</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a0a2f5ed5d6bcbb452c389ee838e08af9">Parser::ParseAxles</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03769"></a>03769 {
<a name="l03770"></a>03770     <a class="code" href="struct_rig_def_1_1_axle.html">Axle</a> axle;
<a name="l03771"></a>03771 
<a name="l03772"></a>03772     Ogre::StringVector tokens = Ogre::StringUtil::split(line, <span class="stringliteral">&quot;,&quot;</span>);
<a name="l03773"></a>03773     Ogre::StringVector::iterator iter = tokens.begin();
<a name="l03774"></a>03774     <span class="keywordflow">for</span> ( ; iter != tokens.end(); iter++)
<a name="l03775"></a>03775     {
<a name="l03776"></a>03776         boost::smatch results;
<a name="l03777"></a>03777         <span class="keywordflow">if</span> (! boost::regex_search(*iter, results, Regexes::SECTION_AXLES_PROPERTY))
<a name="l03778"></a>03778         {
<a name="l03779"></a>03779             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid property, ignoring whole line...&quot;</span>);
<a name="l03780"></a>03780             <span class="keywordflow">return</span>;
<a name="l03781"></a>03781         }
<a name="l03782"></a>03782         <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03783"></a>03783 
<a name="l03784"></a>03784         <span class="keywordflow">if</span> (results[1].matched)
<a name="l03785"></a>03785         {
<a name="l03786"></a>03786             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> wheel_index = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[2]) - 1;
<a name="l03787"></a>03787             axle.<a class="code" href="struct_rig_def_1_1_axle.html#ac4957b6163bcd501003490d20e3abf34">wheels</a>[wheel_index][0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l03788"></a>03788             axle.<a class="code" href="struct_rig_def_1_1_axle.html#ac4957b6163bcd501003490d20e3abf34">wheels</a>[wheel_index][1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[4]);
<a name="l03789"></a>03789         }
<a name="l03790"></a>03790         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[5].matched)
<a name="l03791"></a>03791         {
<a name="l03792"></a>03792             std::string options_str = results[6].str();
<a name="l03793"></a>03793             <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; options_str.length(); i++)
<a name="l03794"></a>03794             {
<a name="l03795"></a>03795                 <span class="keywordflow">switch</span>(options_str.at(i))
<a name="l03796"></a>03796                 {
<a name="l03797"></a>03797                     <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>:
<a name="l03798"></a>03798                         axle.<a class="code" href="struct_rig_def_1_1_axle.html#ab9853ed20b3b34ea3a2baa140cc7a2ef" title="Order matters!">options</a>.push_back(<a class="code" href="struct_rig_def_1_1_axle.html#a5844831f0428a2455f12f1b9278a0690">Axle::OPTION_o_OPEN</a>);
<a name="l03799"></a>03799                         <span class="keywordflow">break</span>;
<a name="l03800"></a>03800                     <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:
<a name="l03801"></a>03801                         axle.<a class="code" href="struct_rig_def_1_1_axle.html#ab9853ed20b3b34ea3a2baa140cc7a2ef" title="Order matters!">options</a>.push_back(<a class="code" href="struct_rig_def_1_1_axle.html#ad6ec4ee3dd676f1050c74d9404b1ec99">Axle::OPTION_l_LOCKED</a>);
<a name="l03802"></a>03802                         <span class="keywordflow">break</span>;
<a name="l03803"></a>03803                     <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:
<a name="l03804"></a>03804                         axle.<a class="code" href="struct_rig_def_1_1_axle.html#ab9853ed20b3b34ea3a2baa140cc7a2ef" title="Order matters!">options</a>.push_back(<a class="code" href="struct_rig_def_1_1_axle.html#a801e43b2d99a230b53533e47973a323a">Axle::OPTION_s_SPLIT</a>);
<a name="l03805"></a>03805                         <span class="keywordflow">break</span>;
<a name="l03806"></a>03806 
<a name="l03807"></a>03807                     <span class="keywordflow">default</span>: <span class="comment">/* No check needed, regex takes care of that */</span>
<a name="l03808"></a>03808                         <span class="keywordflow">break</span>;
<a name="l03809"></a>03809                 }
<a name="l03810"></a>03810             }
<a name="l03811"></a>03811         }
<a name="l03812"></a>03812     }
<a name="l03813"></a>03813 
<a name="l03814"></a>03814     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;axles.push_back(axle);    
<a name="l03815"></a>03815 }
<a name="l03816"></a>03816 
<a name="l03817"></a><a class="code" href="class_rig_def_1_1_parser.html#a41ed1c66aa3754e36123e0bdb320ab69">03817</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a41ed1c66aa3754e36123e0bdb320ab69">Parser::ParseAirbrakes</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03818"></a>03818 {
<a name="l03819"></a>03819     boost::smatch results;
<a name="l03820"></a>03820     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_AIRBRAKES))
<a name="l03821"></a>03821     {
<a name="l03822"></a>03822         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03823"></a>03823         <span class="keywordflow">return</span>;
<a name="l03824"></a>03824     }
<a name="l03825"></a>03825     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03826"></a>03826 
<a name="l03827"></a>03827     <a class="code" href="struct_rig_def_1_1_airbrake.html">Airbrake</a> airbrake;
<a name="l03828"></a>03828     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a2fbb3b8138c067f25c60fcb5668f619d">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l03829"></a>03829     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a9aa515799ce8033acaf8b52bd9e58318">x_axis_node</a>    = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l03830"></a>03830     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a140ec1a21186fc2d7790782a456df728">y_axis_node</a>    = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l03831"></a>03831     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a046a3009067abd7935423790edc217db">aditional_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[4]);
<a name="l03832"></a>03832 
<a name="l03833"></a>03833     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#abe978da4efd1cfb73d462f90add4b3fa">offset</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l03834"></a>03834     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#abe978da4efd1cfb73d462f90add4b3fa">offset</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[6]);
<a name="l03835"></a>03835     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#abe978da4efd1cfb73d462f90add4b3fa">offset</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l03836"></a>03836 
<a name="l03837"></a>03837     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a0fcaf18096d9fc6c091762ce956c9aea">width</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[8]);
<a name="l03838"></a>03838     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a9ae147d3e358d1893126c0c9c09913b5">height</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l03839"></a>03839     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a68bbe32d012b67b674a932fe62431740">max_inclination_angle</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[10]);
<a name="l03840"></a>03840     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#ae3e1d803970f21adf1c9f1cfce33b5e3">texcoord_x1</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l03841"></a>03841     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a75401ba6c8765cdc0012aac9ad8ac43c">texcoord_y1</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[12]);
<a name="l03842"></a>03842     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#a84ff9520595ba4e6108bfcddcd6c81bc">texcoord_x2</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l03843"></a>03843     airbrake.<a class="code" href="struct_rig_def_1_1_airbrake.html#aa6a21fc1a7268e54fa8880ef5dc78d1d">texcoord_y2</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[14]);
<a name="l03844"></a>03844 
<a name="l03845"></a>03845     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;airbrakes.push_back(airbrake);
<a name="l03846"></a>03846 }
<a name="l03847"></a>03847 
<a name="l03848"></a><a class="code" href="class_rig_def_1_1_parser.html#a7419e2958fec0006d5368792ecbb385d">03848</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7419e2958fec0006d5368792ecbb385d">Parser::ParseVideoCamera</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03849"></a>03849 {
<a name="l03850"></a>03850     boost::smatch results;
<a name="l03851"></a>03851     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_VIDEOCAMERA))
<a name="l03852"></a>03852     {
<a name="l03853"></a>03853         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03854"></a>03854         <span class="keywordflow">return</span>;
<a name="l03855"></a>03855     }
<a name="l03856"></a>03856     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03857"></a>03857 
<a name="l03858"></a>03858     <a class="code" href="struct_rig_def_1_1_video_camera.html">VideoCamera</a> videocamera;
<a name="l03859"></a>03859 
<a name="l03860"></a>03860     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a07e00663db1582e5d8ec9d4a51001f9e">reference_node</a>       = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l03861"></a>03861     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a03f2cf893d6de6b4e66fe0c7d2962c3f">left_node</a>            = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l03862"></a>03862     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a8e2f3578c334989bd6d88573063a26a5">bottom_node</a>          = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l03863"></a>03863 
<a name="l03864"></a>03864     std::string param_4 = results[4];
<a name="l03865"></a>03865     <span class="keywordflow">if</span> (! boost::regex_match(param_4, Regexes::MINUS_ONE_REAL))
<a name="l03866"></a>03866     {
<a name="l03867"></a>03867         videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a55f0bd6e71a77f5fee73f008201cc05e">alt_reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(param_4);
<a name="l03868"></a>03868     }
<a name="l03869"></a>03869 
<a name="l03870"></a>03870     std::string param_5 = results[5];
<a name="l03871"></a>03871     <span class="keywordflow">if</span> (! boost::regex_match(param_5, Regexes::MINUS_ONE_REAL))
<a name="l03872"></a>03872     {
<a name="l03873"></a>03873         videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a4b02941e7e56a75d55ea64f9fb57bf26">alt_orientation_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(param_5);
<a name="l03874"></a>03874     }
<a name="l03875"></a>03875 
<a name="l03876"></a>03876     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#ac938a76bc8fec9e45a56c23b2edef1fb">offset</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[6]);
<a name="l03877"></a>03877     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#ac938a76bc8fec9e45a56c23b2edef1fb">offset</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l03878"></a>03878     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#ac938a76bc8fec9e45a56c23b2edef1fb">offset</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[8]);
<a name="l03879"></a>03879 
<a name="l03880"></a>03880     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#aafa25b5fe13cefd9f966c96c6d97e9ee">rotation</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l03881"></a>03881     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#aafa25b5fe13cefd9f966c96c6d97e9ee">rotation</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[10]);
<a name="l03882"></a>03882     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#aafa25b5fe13cefd9f966c96c6d97e9ee">rotation</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l03883"></a>03883     
<a name="l03884"></a>03884     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a0e72895c73390dbceca607c2cccffc8f">field_of_view</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[12]);
<a name="l03885"></a>03885 
<a name="l03886"></a>03886     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a11d952722a8e4bbd4feac4be5d083286">texture_width</a>  = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[13]);
<a name="l03887"></a>03887     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a68a0be54bed64241bdd1e37add68abb7">texture_height</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[14]);
<a name="l03888"></a>03888 
<a name="l03889"></a>03889     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a5708e50185706e30f368aaaec54db234">min_clip_distance</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[15]);
<a name="l03890"></a>03890     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#aba867289b39e5d5c2e927462daa4edc4">max_clip_distance</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[16]);
<a name="l03891"></a>03891 
<a name="l03892"></a>03892     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a99217c0aca4cec38b54a43fd98bb9633">camera_role</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[17]);
<a name="l03893"></a>03893     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#ac1224ce568a03e4e9efb74fa888b3484">camera_mode</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[18]);
<a name="l03894"></a>03894     videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a0a5dbcb60307eb701c1226a210c45684">material_name</a> = results[19];
<a name="l03895"></a>03895     <span class="keywordflow">if</span> (results[21].matched)
<a name="l03896"></a>03896     {
<a name="l03897"></a>03897         videocamera.<a class="code" href="struct_rig_def_1_1_video_camera.html#a31727e1cd72d5d4ce311c243561a67cb">camera_name</a> = results[21];
<a name="l03898"></a>03898     }
<a name="l03899"></a>03899 
<a name="l03900"></a>03900     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;videocameras.push_back(videocamera);
<a name="l03901"></a>03901 }
<a name="l03902"></a>03902 
<a name="l03903"></a><a class="code" href="class_rig_def_1_1_parser.html#a63ff1f370acaa3aee859d313afbbda74">03903</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a63ff1f370acaa3aee859d313afbbda74">Parser::ParseCamerasUnsafe</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03904"></a>03904 {
<a name="l03905"></a>03905     <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 3,
<a name="l03906"></a>03906     {
<a name="l03907"></a>03907         <a class="code" href="struct_rig_def_1_1_camera.html">Camera</a> camera;
<a name="l03908"></a>03908         camera.<a class="code" href="struct_rig_def_1_1_camera.html#a75c4993a38f33c507603c106f9f12fe1">center_node</a> = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[0]);
<a name="l03909"></a>03909         camera.<a class="code" href="struct_rig_def_1_1_camera.html#a9e068236ec855da7166bf0058311ea67">back_node</a>   = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[1]);
<a name="l03910"></a>03910         camera.<a class="code" href="struct_rig_def_1_1_camera.html#a584be6975c7b7faa267bc6c0feb21424">left_node</a>   = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[2]);
<a name="l03911"></a>03911 
<a name="l03912"></a>03912         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;cameras.push_back(camera);
<a name="l03913"></a>03913     });
<a name="l03914"></a>03914 }
<a name="l03915"></a>03915 
<a name="l03916"></a><a class="code" href="class_rig_def_1_1_parser.html#aac94e5e037064337d070297fcccb10e5">03916</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aac94e5e037064337d070297fcccb10e5">Parser::ParseCameras</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03917"></a>03917 {
<a name="l03918"></a>03918     boost::smatch results;
<a name="l03919"></a>03919     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_CAMERAS))
<a name="l03920"></a>03920     {
<a name="l03921"></a>03921         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a63ff1f370acaa3aee859d313afbbda74">ParseCamerasUnsafe</a>(line);
<a name="l03922"></a>03922         <span class="keywordflow">return</span>;
<a name="l03923"></a>03923     }
<a name="l03924"></a>03924     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03925"></a>03925 
<a name="l03926"></a>03926     <a class="code" href="struct_rig_def_1_1_camera.html">Camera</a> camera;
<a name="l03927"></a>03927     camera.<a class="code" href="struct_rig_def_1_1_camera.html#a75c4993a38f33c507603c106f9f12fe1">center_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l03928"></a>03928     camera.<a class="code" href="struct_rig_def_1_1_camera.html#a9e068236ec855da7166bf0058311ea67">back_node</a>   = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l03929"></a>03929     camera.<a class="code" href="struct_rig_def_1_1_camera.html#a584be6975c7b7faa267bc6c0feb21424">left_node</a>   = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l03930"></a>03930 
<a name="l03931"></a>03931     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;cameras.push_back(camera);
<a name="l03932"></a>03932 }
<a name="l03933"></a>03933 
<a name="l03934"></a><a class="code" href="class_rig_def_1_1_parser.html#a7963b4b7db2fe9d258083ee98daffc6b">03934</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7963b4b7db2fe9d258083ee98daffc6b">Parser::ParseTurboprops</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03935"></a>03935 {
<a name="l03936"></a>03936     boost::smatch results;
<a name="l03937"></a>03937     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_TURBOPROPS))
<a name="l03938"></a>03938     {
<a name="l03939"></a>03939         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03940"></a>03940         <span class="keywordflow">return</span>;
<a name="l03941"></a>03941     }
<a name="l03942"></a>03942     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03943"></a>03943 
<a name="l03944"></a>03944     <a class="code" href="struct_rig_def_1_1_turboprop2.html">Turboprop2</a> turboprop;
<a name="l03945"></a>03945     turboprop.<a class="code" href="struct_rig_def_1_1_turboprop2.html#a9976396cc84a01b6b424b286875b59a8">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l03946"></a>03946     turboprop.<a class="code" href="struct_rig_def_1_1_turboprop2.html#a73d28a64bae9eb54e559f2ef7500c822">axis_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l03947"></a>03947     turboprop.<a class="code" href="struct_rig_def_1_1_turboprop2.html#a5015bb8f4886eb8178e45a91504f1146">blade_tip_nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l03948"></a>03948     turboprop.<a class="code" href="struct_rig_def_1_1_turboprop2.html#a5015bb8f4886eb8178e45a91504f1146">blade_tip_nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[4]);
<a name="l03949"></a>03949     turboprop.<a class="code" href="struct_rig_def_1_1_turboprop2.html#a5015bb8f4886eb8178e45a91504f1146">blade_tip_nodes</a>[2] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l03950"></a>03950     turboprop.<a class="code" href="struct_rig_def_1_1_turboprop2.html#a5015bb8f4886eb8178e45a91504f1146">blade_tip_nodes</a>[3] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[6]);
<a name="l03951"></a>03951     turboprop.<a class="code" href="struct_rig_def_1_1_turboprop2.html#a6b4240cbd6419b6c229556e12f046c4d">turbine_power_kW</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l03952"></a>03952     turboprop.<a class="code" href="struct_rig_def_1_1_turboprop2.html#acef97c6fe1afc1cc6722070e616e1f63">airfoil</a> = results[8];
<a name="l03953"></a>03953 
<a name="l03954"></a>03954     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;turboprops_2.push_back(turboprop);
<a name="l03955"></a>03955 }
<a name="l03956"></a>03956 
<a name="l03957"></a><a class="code" href="class_rig_def_1_1_parser.html#a7cd0140e27cde69a550c799d1d3058ef">03957</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7cd0140e27cde69a550c799d1d3058ef">Parser::ParseTurbojets</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03958"></a>03958 {
<a name="l03959"></a>03959     boost::smatch results;
<a name="l03960"></a>03960     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_TURBOJETS))
<a name="l03961"></a>03961     {
<a name="l03962"></a>03962         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03963"></a>03963         <span class="keywordflow">return</span>;
<a name="l03964"></a>03964     }
<a name="l03965"></a>03965     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03966"></a>03966 
<a name="l03967"></a>03967     <a class="code" href="struct_rig_def_1_1_turbojet.html">Turbojet</a> turbojet;
<a name="l03968"></a>03968     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#a25dd2357851ba5db406b47bc4f71fb00">front_node</a>     = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l03969"></a>03969     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#a35b2cf4c86857bfef1eca33322b5de6f">back_node</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l03970"></a>03970     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#aca50c1f2e3e4be0ed61fe44bf4e7ea0a">side_node</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l03971"></a>03971     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#aff28db5a0011b8637a5b05515ff8df53">is_reversable</a>  = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[4]);
<a name="l03972"></a>03972     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#a07570f67a2da3d92bac9a48f47b97f62">dry_thrust</a>     = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l03973"></a>03973     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#aac05877c1e00622e605e6f9f5098ba15">wet_thrust</a>     = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[6]);
<a name="l03974"></a>03974     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#ae701fe33e60b606b9d8f5fc3b4a3a346">front_diameter</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l03975"></a>03975     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#a3cb86aefce20d815d7acd0f549344e15">back_diameter</a>  = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[8]);
<a name="l03976"></a>03976     turbojet.<a class="code" href="struct_rig_def_1_1_turbojet.html#a7730aef3cc72b2075b255e9b84741f09">nozzle_length</a>  = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l03977"></a>03977 
<a name="l03978"></a>03978     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;turbojets.push_back(turbojet);
<a name="l03979"></a>03979 }
<a name="l03980"></a>03980 
<a name="l03981"></a><a class="code" href="class_rig_def_1_1_parser.html#a250e1c8e47a6bdf7547fcfef37a68f10">03981</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a250e1c8e47a6bdf7547fcfef37a68f10">Parser::ParseTriggers</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l03982"></a>03982 {
<a name="l03983"></a>03983     boost::smatch results;
<a name="l03984"></a>03984     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_TRIGGERS))
<a name="l03985"></a>03985     {
<a name="l03986"></a>03986         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l03987"></a>03987         <span class="keywordflow">return</span>;
<a name="l03988"></a>03988     }
<a name="l03989"></a>03989     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l03990"></a>03990 
<a name="l03991"></a>03991     <a class="code" href="struct_rig_def_1_1_trigger.html">Trigger</a> trigger;
<a name="l03992"></a>03992     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#a0d687343e9148e57e15b47603222cb9a">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l03993"></a>03993     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aae9e84cd4486b3dab1de194a7039359c">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l03994"></a>03994     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#ac9e97e57ca35830dfc5f0638b93f5c29">nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l03995"></a>03995     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#ac9e97e57ca35830dfc5f0638b93f5c29">nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l03996"></a>03996     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#a91c37e7be551f412ee1a86b64279c6a6">contraction_trigger_limit</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l03997"></a>03997     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#ab05ed575c633037c2d93b662e1b85076">expansion_trigger_limit</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l03998"></a>03998     <span class="keywordtype">int</span> shortbound_trigger_action = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[5]);
<a name="l03999"></a>03999     <span class="keywordtype">int</span> longbound_trigger_action = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[6]);
<a name="l04000"></a>04000 
<a name="l04001"></a>04001     <span class="keywordflow">if</span> (results[8].matched)
<a name="l04002"></a>04002     {
<a name="l04003"></a>04003         std::string options_str = results[8].str();
<a name="l04004"></a>04004         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; options_str.length(); i++)
<a name="l04005"></a>04005         {
<a name="l04006"></a>04006             <span class="keywordflow">switch</span>(options_str.at(i))
<a name="l04007"></a>04007             {
<a name="l04008"></a>04008                 <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:
<a name="l04009"></a>04009                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_i_INVISIBLE;
<a name="l04010"></a>04010                     <span class="keywordflow">break</span>;
<a name="l04011"></a>04011                 <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>:
<a name="l04012"></a>04012                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_c_COMMAND_STYLE;
<a name="l04013"></a>04013                     <span class="keywordflow">break</span>;
<a name="l04014"></a>04014                 <span class="keywordflow">case</span> <span class="charliteral">&#39;x&#39;</span>:
<a name="l04015"></a>04015                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_x_START_OFF;
<a name="l04016"></a>04016                     <span class="keywordflow">break</span>;
<a name="l04017"></a>04017                 <span class="keywordflow">case</span> <span class="charliteral">&#39;b&#39;</span>:
<a name="l04018"></a>04018                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_b_BLOCK_KEYS;
<a name="l04019"></a>04019                     <span class="keywordflow">break</span>;
<a name="l04020"></a>04020                 <span class="keywordflow">case</span> <span class="charliteral">&#39;B&#39;</span>:
<a name="l04021"></a>04021                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_B_BLOCK_TRIGGERS;
<a name="l04022"></a>04022                     <span class="keywordflow">break</span>;
<a name="l04023"></a>04023                 <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>:
<a name="l04024"></a>04024                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_A_INV_BLOCK_TRIGGERS;
<a name="l04025"></a>04025                     <span class="keywordflow">break</span>;
<a name="l04026"></a>04026                 <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:
<a name="l04027"></a>04027                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_s_SWITCH_CMD_NUM;
<a name="l04028"></a>04028                     <span class="keywordflow">break</span>;
<a name="l04029"></a>04029                 <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:
<a name="l04030"></a>04030                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_h_UNLOCK_HOOKGROUPS_KEY;
<a name="l04031"></a>04031                     <span class="keywordflow">break</span>;
<a name="l04032"></a>04032                 <span class="keywordflow">case</span> <span class="charliteral">&#39;H&#39;</span>:
<a name="l04033"></a>04033                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_H_LOCK_HOOKGROUPS_KEY;
<a name="l04034"></a>04034                     <span class="keywordflow">break</span>;
<a name="l04035"></a>04035                 <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:
<a name="l04036"></a>04036                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_t_CONTINUOUS;
<a name="l04037"></a>04037                     <span class="keywordflow">break</span>;
<a name="l04038"></a>04038                 <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>:
<a name="l04039"></a>04039                     trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aaee3e74eddd93e0f8e57cfbd559ce403">options</a> |= Trigger::OPTION_E_ENGINE_TRIGGER;
<a name="l04040"></a>04040                     <span class="keywordflow">break</span>;
<a name="l04041"></a>04041 
<a name="l04042"></a>04042                 <span class="keywordflow">default</span>:
<a name="l04043"></a>04043                     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, Ogre::String(<span class="stringliteral">&quot;Invalid trigger option: &quot;</span> + options_str.at(i)));
<a name="l04044"></a>04044                     <span class="keywordflow">break</span>;
<a name="l04045"></a>04045             }
<a name="l04046"></a>04046         }
<a name="l04047"></a>04047     }
<a name="l04048"></a>04048     <span class="keywordflow">if</span> (results[10].matched)
<a name="l04049"></a>04049     {
<a name="l04050"></a>04050         trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#aa161cd914d0920b4a6b80af298a99d62">boundary_timer</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[10]);
<a name="l04051"></a>04051     }
<a name="l04052"></a>04052 
<a name="l04053"></a>04053     <span class="comment">// Handle actions</span>
<a name="l04054"></a>04054     <span class="keywordflow">if</span> (!trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#a9289882a3ad6be2221eb10a9a5f7e638">IsTriggerBlockerAnyType</a>() &amp;&amp; !trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#a781493c1eee518042e4503faa8f8697b">IsHookToggleTrigger</a>() &amp;&amp; !trigger.HasFlag_E_EngineTrigger())
<a name="l04055"></a>04055     {
<a name="l04056"></a>04056         <a class="code" href="struct_rig_def_1_1_trigger_1_1_command_key_trigger.html">Trigger::CommandKeyTrigger</a> command_keys;
<a name="l04057"></a>04057         command_keys.<a class="code" href="struct_rig_def_1_1_trigger_1_1_command_key_trigger.html#aa5ecd4855e67a3788d99f0200ecbcd5e">contraction_trigger_key</a> = shortbound_trigger_action;
<a name="l04058"></a>04058         command_keys.<a class="code" href="struct_rig_def_1_1_trigger_1_1_command_key_trigger.html#a753ff93f218db4b25debdccdc18c5b54">extension_trigger_key</a>   = longbound_trigger_action;
<a name="l04059"></a>04059         trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#a2a6404798b52dabae2c07079fd9e5e6c">SetCommandKeyTrigger</a>(command_keys);
<a name="l04060"></a>04060     }
<a name="l04061"></a>04061     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#a781493c1eee518042e4503faa8f8697b">IsHookToggleTrigger</a>() &amp;&amp; !trigger.HasFlag_E_EngineTrigger())
<a name="l04062"></a>04062     {
<a name="l04063"></a>04063         <a class="code" href="struct_rig_def_1_1_trigger_1_1_hook_toggle_trigger.html">Trigger::HookToggleTrigger</a> hook_toggle;
<a name="l04064"></a>04064         hook_toggle.<a class="code" href="struct_rig_def_1_1_trigger_1_1_hook_toggle_trigger.html#a09a2cf683802ed460b750f6710a3af7c">contraction_trigger_hookgroup_id</a> = shortbound_trigger_action;
<a name="l04065"></a>04065         hook_toggle.<a class="code" href="struct_rig_def_1_1_trigger_1_1_hook_toggle_trigger.html#acf04a77a5c20982b5fe689b7943d3c81">extension_trigger_hookgroup_id</a> = longbound_trigger_action;
<a name="l04066"></a>04066         trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#a7f888aa93af0849b9001984f0e92853e">SetHookToggleTrigger</a>(hook_toggle);
<a name="l04067"></a>04067     }
<a name="l04068"></a>04068     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (trigger.HasFlag_E_EngineTrigger())
<a name="l04069"></a>04069     {
<a name="l04070"></a>04070         <a class="code" href="struct_rig_def_1_1_trigger_1_1_engine_trigger.html">Trigger::EngineTrigger</a> engine_trigger;
<a name="l04071"></a>04071         engine_trigger.<a class="code" href="struct_rig_def_1_1_trigger_1_1_engine_trigger.html#a153f88e89427ce032030ee2bb367a538">function</a> = <a class="code" href="struct_rig_def_1_1_trigger_1_1_engine_trigger.html#a41959130749fd3b9c6ddbdf189b32646">Trigger::EngineTrigger::Function</a>(shortbound_trigger_action);
<a name="l04072"></a>04072         engine_trigger.<a class="code" href="struct_rig_def_1_1_trigger_1_1_engine_trigger.html#afbf2bff46940150d2c7be015951e67d6">motor_index</a> = longbound_trigger_action;
<a name="l04073"></a>04073         trigger.<a class="code" href="struct_rig_def_1_1_trigger.html#abfab32a2d0b6f2147f7baf4af0819e7a">SetEngineTrigger</a>(engine_trigger);
<a name="l04074"></a>04074     }
<a name="l04075"></a>04075 
<a name="l04076"></a>04076 
<a name="l04077"></a>04077     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;triggers.push_back(trigger);
<a name="l04078"></a>04078 }
<a name="l04079"></a>04079 
<a name="l04080"></a><a class="code" href="class_rig_def_1_1_parser.html#a5f5f61a3d9524ab37f94621e3a947eec">04080</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a5f5f61a3d9524ab37f94621e3a947eec">Parser::ParseTorqueCurve</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04081"></a>04081 {
<a name="l04082"></a>04082     boost::smatch results;
<a name="l04083"></a>04083     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_TORQUECURVE))
<a name="l04084"></a>04084     {
<a name="l04085"></a>04085         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04086"></a>04086         <span class="keywordflow">return</span>;
<a name="l04087"></a>04087     }
<a name="l04088"></a>04088     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04089"></a>04089 
<a name="l04090"></a>04090     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;torque_curve == <span class="keyword">nullptr</span>)
<a name="l04091"></a>04091     {
<a name="l04092"></a>04092         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;torque_curve = boost::shared_ptr&lt;RigDef::TorqueCurve&gt;(<span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_torque_curve.html">RigDef::TorqueCurve</a>());
<a name="l04093"></a>04093     }
<a name="l04094"></a>04094 
<a name="l04095"></a>04095     <span class="keywordflow">if</span> (results[1].matched)
<a name="l04096"></a>04096     {
<a name="l04097"></a>04097         <a class="code" href="struct_rig_def_1_1_torque_curve_1_1_sample.html">TorqueCurve::Sample</a> sample;
<a name="l04098"></a>04098         sample.<a class="code" href="struct_rig_def_1_1_torque_curve_1_1_sample.html#ab74845a3192b3e2a78a71ccd10328f54">power</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l04099"></a>04099         sample.<a class="code" href="struct_rig_def_1_1_torque_curve_1_1_sample.html#a4f73a35391a4c397ed87db76f7e00172">torque_percent</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l04100"></a>04100         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;torque_curve-&gt;samples.push_back(sample);
<a name="l04101"></a>04101     }
<a name="l04102"></a>04102     <span class="keywordflow">else</span>
<a name="l04103"></a>04103     {
<a name="l04104"></a>04104         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;torque_curve-&gt;predefined_func_name = results[4];
<a name="l04105"></a>04105     }
<a name="l04106"></a>04106 }
<a name="l04107"></a>04107 
<a name="l04108"></a><a class="code" href="class_rig_def_1_1_parser.html#a19c0eb7e4c5193edf96a5509bebe2569">04108</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a19c0eb7e4c5193edf96a5509bebe2569">Parser::ParseTies</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04109"></a>04109 {
<a name="l04110"></a>04110     boost::smatch results;
<a name="l04111"></a>04111     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_TIES))
<a name="l04112"></a>04112     {
<a name="l04113"></a>04113         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04114"></a>04114         <span class="keywordflow">return</span>;
<a name="l04115"></a>04115     }
<a name="l04116"></a>04116     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04117"></a>04117 
<a name="l04118"></a>04118     <a class="code" href="struct_rig_def_1_1_tie.html">Tie</a> tie;
<a name="l04119"></a>04119     tie.<a class="code" href="struct_rig_def_1_1_tie.html#a71d99e3fe734fb79671b6d1404e353ba">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l04120"></a>04120     tie.<a class="code" href="struct_rig_def_1_1_tie.html#a10e540a088583865d56a93b170e64945">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l04121"></a>04121 
<a name="l04122"></a>04122     tie.<a class="code" href="struct_rig_def_1_1_tie.html#a0117bb7f086f5ae7ddaee03ea527a227">root_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04123"></a>04123     tie.<a class="code" href="struct_rig_def_1_1_tie.html#ade8c827f6cc690147b04d676139d332b">max_reach_length</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l04124"></a>04124     tie.<a class="code" href="struct_rig_def_1_1_tie.html#a5925b6d13ff4b9fb0e3adecb2c4340fe">auto_shorten_rate</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l04125"></a>04125     tie.<a class="code" href="struct_rig_def_1_1_tie.html#a0b40a56021499da732a7c4ddbc4223a0">min_length</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l04126"></a>04126     tie.<a class="code" href="struct_rig_def_1_1_tie.html#acd3d9a03f642abb6fb56b71e74592d8e">max_length</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l04127"></a>04127     <span class="keywordflow">if</span> (results[6].matched)
<a name="l04128"></a>04128     {
<a name="l04129"></a>04129         std::string tie_options = results[7];
<a name="l04130"></a>04130         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i = 0; i &lt; tie_options.size(); ++i)
<a name="l04131"></a>04131         {
<a name="l04132"></a>04132             <span class="keyword">const</span> <span class="keywordtype">char</span> tie_char = tie_options.at(i);
<a name="l04133"></a>04133             <span class="keywordflow">switch</span> (tie_char)
<a name="l04134"></a>04134             {
<a name="l04135"></a>04135             <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:
<a name="l04136"></a>04136                 tie.<a class="code" href="struct_rig_def_1_1_tie.html#a36e8a071e7a9ab91bb8cbd5b3885fc84">options</a> = <a class="code" href="struct_rig_def_1_1_tie.html#a71af09d152fa909aca046d40a6c479fda7c14978fd9956ecca99531fb03c450e5">Tie::OPTIONS_INVISIBLE</a>;
<a name="l04137"></a>04137                 <span class="keywordflow">break</span>;
<a name="l04138"></a>04138             <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:
<a name="l04139"></a>04139                 tie.<a class="code" href="struct_rig_def_1_1_tie.html#a36e8a071e7a9ab91bb8cbd5b3885fc84">options</a> = <a class="code" href="struct_rig_def_1_1_tie.html#a71af09d152fa909aca046d40a6c479fda7c14978fd9956ecca99531fb03c450e5">Tie::OPTIONS_INVISIBLE</a>;
<a name="l04140"></a>04140                 <span class="keywordflow">break</span>;
<a name="l04141"></a>04141             <span class="keywordflow">default</span>:
<a name="l04142"></a>04142                 this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Ignoring invalid option: &quot;</span>) + tie_char);
<a name="l04143"></a>04143                 <span class="keywordflow">break</span>;
<a name="l04144"></a>04144             }
<a name="l04145"></a>04145         }
<a name="l04146"></a>04146         
<a name="l04147"></a>04147         <span class="keywordflow">if</span> (results[8].matched)
<a name="l04148"></a>04148         {
<a name="l04149"></a>04149             tie.<a class="code" href="struct_rig_def_1_1_tie.html#a0da377554573a477e06532d4d03999dd">max_stress</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l04150"></a>04150 
<a name="l04151"></a>04151             <span class="keywordflow">if</span> (results[10].matched)
<a name="l04152"></a>04152             {
<a name="l04153"></a>04153                 tie.<a class="code" href="struct_rig_def_1_1_tie.html#ae0eb5e62ce1822f1338cc60c14a9f61e">group</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[11]);
<a name="l04154"></a>04154             }
<a name="l04155"></a>04155         }
<a name="l04156"></a>04156     }
<a name="l04157"></a>04157 
<a name="l04158"></a>04158     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ties.push_back(tie);
<a name="l04159"></a>04159 }
<a name="l04160"></a>04160 
<a name="l04161"></a><a class="code" href="class_rig_def_1_1_parser.html#a7a4064b3e3133d0423c13db1317b71f1">04161</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7a4064b3e3133d0423c13db1317b71f1">Parser::ParseSoundsources</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04162"></a>04162 {
<a name="l04163"></a>04163     boost::smatch results;
<a name="l04164"></a>04164     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_SOUNDSOURCES))
<a name="l04165"></a>04165     {
<a name="l04166"></a>04166         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04167"></a>04167         <span class="keywordflow">return</span>;
<a name="l04168"></a>04168     }
<a name="l04169"></a>04169     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04170"></a>04170 
<a name="l04171"></a>04171     <a class="code" href="struct_rig_def_1_1_sound_source.html">SoundSource</a> soundsource;
<a name="l04172"></a>04172     soundsource.<a class="code" href="struct_rig_def_1_1_sound_source.html#a2bd1ee6a10e18432a2ea28886e8b0c53">node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04173"></a>04173     soundsource.<a class="code" href="struct_rig_def_1_1_sound_source.html#adc2a5959e0bdd022076270167b4f4224">sound_script_name</a> = results[2];
<a name="l04174"></a>04174 
<a name="l04175"></a>04175     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;soundsources.push_back(soundsource);
<a name="l04176"></a>04176 }
<a name="l04177"></a>04177 
<a name="l04178"></a><a class="code" href="class_rig_def_1_1_parser.html#acdcc6e7d9b3ecb18b185e1c2a1d6d159">04178</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#acdcc6e7d9b3ecb18b185e1c2a1d6d159">Parser::ParseSoundsources2</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04179"></a>04179 {
<a name="l04180"></a>04180 
<a name="l04181"></a>04181     boost::smatch results;
<a name="l04182"></a>04182     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_SOUNDSOURCES2))
<a name="l04183"></a>04183     {
<a name="l04184"></a>04184         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04185"></a>04185         <span class="keywordflow">return</span>;
<a name="l04186"></a>04186     }
<a name="l04187"></a>04187     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04188"></a>04188 
<a name="l04189"></a>04189     <a class="code" href="struct_rig_def_1_1_sound_source2.html">SoundSource2</a> soundsource2;
<a name="l04190"></a>04190     soundsource2.<a class="code" href="struct_rig_def_1_1_sound_source.html#a2bd1ee6a10e18432a2ea28886e8b0c53">node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04191"></a>04191     soundsource2.<a class="code" href="struct_rig_def_1_1_sound_source.html#adc2a5959e0bdd022076270167b4f4224">sound_script_name</a> = results[5];
<a name="l04192"></a>04192 
<a name="l04193"></a>04193     <span class="comment">/* Mode */</span>
<a name="l04194"></a>04194     <span class="keywordtype">int</span> mode = 0;
<a name="l04195"></a>04195     Ogre::String mode_str = results[3];
<a name="l04196"></a>04196     <span class="keywordflow">if</span> (! boost::regex_match(mode_str, Regexes::DECIMAL_NUMBER) )
<a name="l04197"></a>04197     {
<a name="l04198"></a>04198         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Invalid value of parameter ~2 &#39;mode&#39;: &#39;&quot;</span> + mode_str + <span class="stringliteral">&quot;&#39;, parsing as &#39;0&#39; for backwards compatibility. Please fix.&quot;</span>);
<a name="l04199"></a>04199     }
<a name="l04200"></a>04200     <span class="keywordflow">else</span>
<a name="l04201"></a>04201     {
<a name="l04202"></a>04202         mode = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(mode_str);
<a name="l04203"></a>04203     }
<a name="l04204"></a>04204     <span class="keywordflow">if</span> (mode &lt; 0)
<a name="l04205"></a>04205     {
<a name="l04206"></a>04206         <span class="keywordflow">if</span> (mode &lt; -2)
<a name="l04207"></a>04207         {
<a name="l04208"></a>04208             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid soundsources2.mode setting, ignoring whole line...&quot;</span>);
<a name="l04209"></a>04209             <span class="keywordflow">return</span>;
<a name="l04210"></a>04210         }
<a name="l04211"></a>04211         soundsource2.<a class="code" href="struct_rig_def_1_1_sound_source2.html#a64eb25ae2d258b2a97e6f59441411c39">mode</a> = <a class="code" href="struct_rig_def_1_1_sound_source2.html#aa408cd90ab02d8b10087891936570c80">SoundSource2::Mode</a>(mode);
<a name="l04212"></a>04212     }
<a name="l04213"></a>04213     <span class="keywordflow">else</span>
<a name="l04214"></a>04214     {
<a name="l04215"></a>04215         soundsource2.<a class="code" href="struct_rig_def_1_1_sound_source2.html#a64eb25ae2d258b2a97e6f59441411c39">mode</a> = <a class="code" href="struct_rig_def_1_1_sound_source2.html#aa408cd90ab02d8b10087891936570c80abb6f1c0073fb7ab60f30c26f0320af1a">SoundSource2::MODE_CINECAM</a>;
<a name="l04216"></a>04216         soundsource2.<a class="code" href="struct_rig_def_1_1_sound_source2.html#a0f708397ab919b35ce7a88a32d3a8ce2">cinecam_index</a> = mode;
<a name="l04217"></a>04217     }
<a name="l04218"></a>04218 
<a name="l04219"></a>04219     <a class="code" href="class_rig_def_1_1_parser.html#ad0e49a337465aa5991a2266361a06838">_CheckInvalidTrailingText</a>(line, results, 6);
<a name="l04220"></a>04220 
<a name="l04221"></a>04221     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;soundsources2.push_back(soundsource2);
<a name="l04222"></a>04222 }
<a name="l04223"></a>04223 
<a name="l04224"></a><a class="code" href="class_rig_def_1_1_parser.html#a597ee7a42599a7fafa2f792a700fa424">04224</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a597ee7a42599a7fafa2f792a700fa424">Parser::ParseSlidenodes</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04225"></a>04225 {
<a name="l04226"></a>04226     boost::smatch results;
<a name="l04227"></a>04227     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_SLIDENODES))
<a name="l04228"></a>04228     {
<a name="l04229"></a>04229         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04230"></a>04230         <span class="keywordflow">return</span>;
<a name="l04231"></a>04231     }
<a name="l04232"></a>04232     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04233"></a>04233 
<a name="l04234"></a>04234     <a class="code" href="struct_rig_def_1_1_slide_node.html">SlideNode</a> slidenode;
<a name="l04235"></a>04235     slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a57d4430eeb3a1bed4f1482b3813f9cd3">slide_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04236"></a>04236 
<a name="l04237"></a>04237     <span class="keywordtype">bool</span> in_rail_node_list = <span class="keyword">true</span>;
<a name="l04238"></a>04238     Ogre::StringVector tokens = Ogre::StringUtil::split(results[2], <span class="stringliteral">&quot;,&quot;</span>);
<a name="l04239"></a>04239     <span class="keywordflow">for</span> (Ogre::StringVector::iterator itor = tokens.begin(); itor != tokens.end(); ++itor)
<a name="l04240"></a>04240     {
<a name="l04241"></a>04241         boost::smatch token_results;
<a name="l04242"></a>04242         <span class="keywordflow">if</span> (boost::regex_search(*itor, token_results, Regexes::SLIDENODES_IDENTIFY_OPTION))
<a name="l04243"></a>04243         {
<a name="l04244"></a>04244             in_rail_node_list = <span class="keyword">false</span>;
<a name="l04245"></a>04245 
<a name="l04246"></a>04246             <span class="keywordflow">if</span> (token_results[1].matched)
<a name="l04247"></a>04247             {
<a name="l04248"></a>04248                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a23a8705deff5cbbfa2915f56b88d3b35">spring_rate</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(token_results[2]);
<a name="l04249"></a>04249             }
<a name="l04250"></a>04250             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[3].matched)
<a name="l04251"></a>04251             {
<a name="l04252"></a>04252                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a62aabeacd5968d1896ca3fbffee8c985">break_force</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(token_results[4]);
<a name="l04253"></a>04253                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a5f3aa42a8723a89cb4302c48faf435ea">_break_force_set</a> = <span class="keyword">true</span>;
<a name="l04254"></a>04254             }
<a name="l04255"></a>04255             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[5].matched)
<a name="l04256"></a>04256             {
<a name="l04257"></a>04257                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#afce23142d6e72bb68145d464ed57f52e">tolerance</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(token_results[6]);
<a name="l04258"></a>04258             }
<a name="l04259"></a>04259             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[7].matched)
<a name="l04260"></a>04260             {
<a name="l04261"></a>04261                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a625ac87244f0f02b82cbabbcae06ff35">attachment_rate</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(token_results[8]);
<a name="l04262"></a>04262             }
<a name="l04263"></a>04263             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[9].matched)
<a name="l04264"></a>04264             {
<a name="l04265"></a>04265                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#ad0286cca02f9e759734177f5a6ff79ef">railgroup_id</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(token_results[10]);
<a name="l04266"></a>04266                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a2429f664acf0ed69c546262274e2b134">_railgroup_id_set</a> = <span class="keyword">true</span>;
<a name="l04267"></a>04267             }
<a name="l04268"></a>04268             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[11].matched)
<a name="l04269"></a>04269             {
<a name="l04270"></a>04270                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a43a6fe5e7bbed69a4eb578b62e68e4bc">max_attachment_distance</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(token_results[12]);
<a name="l04271"></a>04271             }
<a name="l04272"></a>04272             <span class="comment">/* #13, #14 Quantity is ignored */</span>
<a name="l04273"></a>04273             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token_results[15].matched)
<a name="l04274"></a>04274             {
<a name="l04275"></a>04275                 <span class="keywordtype">char</span> option = token_results[16].str().at(0);
<a name="l04276"></a>04276                 <span class="keywordflow">switch</span> (option)
<a name="l04277"></a>04277                 {
<a name="l04278"></a>04278                     <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span>:
<a name="l04279"></a>04279                         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a555deae76d227f639fa29827dc0c01d9">constraint_flags</a>, SlideNode::CONSTRAINT_ATTACH_ALL);
<a name="l04280"></a>04280                         <span class="keywordflow">break</span>;
<a name="l04281"></a>04281                     <span class="keywordflow">case</span> <span class="charliteral">&#39;f&#39;</span>:
<a name="l04282"></a>04282                         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a555deae76d227f639fa29827dc0c01d9">constraint_flags</a>, SlideNode::CONSTRAINT_ATTACH_FOREIGN);
<a name="l04283"></a>04283                         <span class="keywordflow">break</span>;
<a name="l04284"></a>04284                     <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:
<a name="l04285"></a>04285                         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a555deae76d227f639fa29827dc0c01d9">constraint_flags</a>, SlideNode::CONSTRAINT_ATTACH_SELF);
<a name="l04286"></a>04286                         <span class="keywordflow">break</span>;
<a name="l04287"></a>04287                     <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:
<a name="l04288"></a>04288                         <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#a555deae76d227f639fa29827dc0c01d9">constraint_flags</a>, SlideNode::CONSTRAINT_ATTACH_NONE);
<a name="l04289"></a>04289                         <span class="keywordflow">break</span>;
<a name="l04290"></a>04290                     <span class="keywordflow">default</span>:
<a name="l04291"></a>04291                         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Ignoring invalid option: &quot;</span>) + option);
<a name="l04292"></a>04292                         <span class="keywordflow">break</span>;
<a name="l04293"></a>04293                 }
<a name="l04294"></a>04294             }
<a name="l04295"></a>04295         }
<a name="l04296"></a>04296         <span class="keywordflow">else</span>
<a name="l04297"></a>04297         {
<a name="l04298"></a>04298             <span class="keywordflow">if</span> (in_rail_node_list)
<a name="l04299"></a>04299             {
<a name="l04300"></a>04300                 slidenode.<a class="code" href="struct_rig_def_1_1_slide_node.html#ae0e327c404999401b78796111441ee6d">rail_node_ranges</a>.push_back( <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(*itor));
<a name="l04301"></a>04301             }
<a name="l04302"></a>04302             <span class="keywordflow">else</span>
<a name="l04303"></a>04303             {
<a name="l04304"></a>04304                 std::stringstream msg;
<a name="l04305"></a>04305                 msg &lt;&lt; <span class="stringliteral">&quot;Invalid token: &#39;&quot;</span> &lt;&lt; *itor &lt;&lt; <span class="stringliteral">&quot;&#39;, ignoring...&quot;</span>;
<a name="l04306"></a>04306                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l04307"></a>04307             }
<a name="l04308"></a>04308         }
<a name="l04309"></a>04309     }
<a name="l04310"></a>04310     
<a name="l04311"></a>04311     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;slidenodes.push_back(slidenode);
<a name="l04312"></a>04312 }
<a name="l04313"></a>04313 
<a name="l04314"></a><a class="code" href="class_rig_def_1_1_parser.html#aa58eef572576bcaf2806676ba35925bc">04314</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aa58eef572576bcaf2806676ba35925bc">Parser::ParseShock2</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04315"></a>04315 {
<a name="l04316"></a>04316     boost::smatch results;
<a name="l04317"></a>04317     <span class="keywordflow">if</span> (!boost::regex_search(line, results, Regexes::SECTION_SHOCKS2))
<a name="l04318"></a>04318     {
<a name="l04319"></a>04319         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#afad14974e9052f1828b3c2eb187eecab">ParseShock2Unsafe</a>(line);
<a name="l04320"></a>04320         <span class="keywordflow">return</span>;
<a name="l04321"></a>04321     }
<a name="l04322"></a>04322     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04323"></a>04323 
<a name="l04324"></a>04324     <a class="code" href="struct_rig_def_1_1_shock2.html">Shock2</a> shock_2;
<a name="l04325"></a>04325     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a9252b1a7bb08b545bb8d26b9a693e0c5">beam_defaults</a>  = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l04326"></a>04326     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a35a36657ab20f7edbb84d2e58679f3f6">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l04327"></a>04327 
<a name="l04328"></a>04328     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a19248178ff7ff2dd39a6c1ca8a0744b0">nodes</a>[0]                   = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[ 1]);
<a name="l04329"></a>04329     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a19248178ff7ff2dd39a6c1ca8a0744b0">nodes</a>[1]                   = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[ 3]);
<a name="l04330"></a>04330     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a89dc983239b0355025a200862194ccfe" title="Spring value applied when the shock is compressing.">spring_in</a>                  = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 5]);
<a name="l04331"></a>04331     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#aebf1286d4b0ba5f7d9b1ae9aaecd4176" title="Damping value applied when the shock is compressing.">damp_in</a>                    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 7]);
<a name="l04332"></a>04332     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#afb46b6fc8614072ef7a0fe2863049cde" title="Progression factor for springin. A value of 0 disables this option. 1...x as multipliers, example:maximum springrate == springrate + (factor*springrate)">progress_factor_spring_in</a>  = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 9]);
<a name="l04333"></a>04333     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a6ae82f640b5cb8ba5800a14c3a99f74d" title="Progression factor for dampin. 0 = disabled, 1...x as multipliers, example:maximum dampingrate == spr...">progress_factor_damp_in</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l04334"></a>04334     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#aca9d508a5a145eb49491d705336738c6" title="spring value applied when shock extending">spring_out</a>                 = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l04335"></a>04335     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a3c9da42224d7cf2609ba6bd578889edd" title="damping value applied when shock extending">damp_out</a>                   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[15]);
<a name="l04336"></a>04336     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#aadc9b0b323c74f1df132feda13eb7732" title="Progression factor springout, 0 = disabled, 1...x as multipliers, example:maximum springrate == sprin...">progress_factor_spring_out</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[17]);
<a name="l04337"></a>04337     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a2d02dda4d5b2984fe645476804670a65" title="Progression factor dampout, 0 = disabled, 1...x as multipliers, example:maximum dampingrate == spring...">progress_factor_damp_out</a>   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[19]);
<a name="l04338"></a>04338     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a29a95e5b35a656f7b7337a22284dbb32" title="Maximum contraction limit, in percentage ( 1.00 = 100% )">short_bound</a>                = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[21]);
<a name="l04339"></a>04339     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#adeaec6bd27bd74d778eafdcdd65ec3e5" title="Maximum extension limit, in percentage ( 1.00 = 100% )">long_bound</a>                 = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[23]);
<a name="l04340"></a>04340     shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#aab99986424ef1e79baf57b39d13d4334" title="Changes compression or extension of the suspension when the truck spawns. This can be used to &quot;level&quot;...">precompression</a>             = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[25]);
<a name="l04341"></a>04341 
<a name="l04342"></a>04342     <span class="keywordflow">if</span> (results[29].matched) <span class="comment">/* Has options? */</span>
<a name="l04343"></a>04343     {
<a name="l04344"></a>04344         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a9cdf6403d5447eacc0bdeedb0aebefaf" title="Bit flags.">options</a> = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#ab61fae2aade6f17efaaa525e72f8f8b2">ParseShock2Options</a>(line, results[29].str());
<a name="l04345"></a>04345     }
<a name="l04346"></a>04346 
<a name="l04347"></a>04347     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;shocks_2.push_back(shock_2);
<a name="l04348"></a>04348 }
<a name="l04349"></a>04349 
<a name="l04350"></a><a class="code" href="class_rig_def_1_1_parser.html#afad14974e9052f1828b3c2eb187eecab">04350</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#afad14974e9052f1828b3c2eb187eecab">Parser::ParseShock2Unsafe</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04351"></a>04351 {
<a name="l04352"></a>04352     <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 13,
<a name="l04353"></a>04353     {
<a name="l04354"></a>04354         <a class="code" href="struct_rig_def_1_1_shock2.html">Shock2</a> shock_2;
<a name="l04355"></a>04355         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a9252b1a7bb08b545bb8d26b9a693e0c5">beam_defaults</a>  = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l04356"></a>04356         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a35a36657ab20f7edbb84d2e58679f3f6">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l04357"></a>04357 
<a name="l04358"></a>04358         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a19248178ff7ff2dd39a6c1ca8a0744b0">nodes</a>[0]                   = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[0]);
<a name="l04359"></a>04359         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a19248178ff7ff2dd39a6c1ca8a0744b0">nodes</a>[1]                   = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[1]);
<a name="l04360"></a>04360         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a89dc983239b0355025a200862194ccfe" title="Spring value applied when the shock is compressing.">spring_in</a>                  = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[2]);
<a name="l04361"></a>04361         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#aebf1286d4b0ba5f7d9b1ae9aaecd4176" title="Damping value applied when the shock is compressing.">damp_in</a>                    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[3]);
<a name="l04362"></a>04362         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#afb46b6fc8614072ef7a0fe2863049cde" title="Progression factor for springin. A value of 0 disables this option. 1...x as multipliers, example:maximum springrate == springrate + (factor*springrate)">progress_factor_spring_in</a>  = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[4]);
<a name="l04363"></a>04363         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a6ae82f640b5cb8ba5800a14c3a99f74d" title="Progression factor for dampin. 0 = disabled, 1...x as multipliers, example:maximum dampingrate == spr...">progress_factor_damp_in</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[5]);
<a name="l04364"></a>04364         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#aca9d508a5a145eb49491d705336738c6" title="spring value applied when shock extending">spring_out</a>                 = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[6]);
<a name="l04365"></a>04365         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a3c9da42224d7cf2609ba6bd578889edd" title="damping value applied when shock extending">damp_out</a>                   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[7]);
<a name="l04366"></a>04366         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#aadc9b0b323c74f1df132feda13eb7732" title="Progression factor springout, 0 = disabled, 1...x as multipliers, example:maximum springrate == sprin...">progress_factor_spring_out</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[8]);
<a name="l04367"></a>04367         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a2d02dda4d5b2984fe645476804670a65" title="Progression factor dampout, 0 = disabled, 1...x as multipliers, example:maximum dampingrate == spring...">progress_factor_damp_out</a>   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[9]);
<a name="l04368"></a>04368         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a29a95e5b35a656f7b7337a22284dbb32" title="Maximum contraction limit, in percentage ( 1.00 = 100% )">short_bound</a>                = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[10]);
<a name="l04369"></a>04369         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#adeaec6bd27bd74d778eafdcdd65ec3e5" title="Maximum extension limit, in percentage ( 1.00 = 100% )">long_bound</a>                 = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[11]);
<a name="l04370"></a>04370         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#aab99986424ef1e79baf57b39d13d4334" title="Changes compression or extension of the suspension when the truck spawns. This can be used to &quot;level&quot;...">precompression</a>             = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[12]);
<a name="l04371"></a>04371         shock_2.<a class="code" href="struct_rig_def_1_1_shock2.html#a9cdf6403d5447eacc0bdeedb0aebefaf" title="Bit flags.">options</a>                    = (values.size() &gt; 11) ? this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#ab61fae2aade6f17efaaa525e72f8f8b2">ParseShock2Options</a>(line, values[13]) : 0u;
<a name="l04372"></a>04372 
<a name="l04373"></a>04373         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#ac9c7823882f976ce2ddcd24bc347bd88">LogParsedShock2DataForChecking</a>(line, shock_2);
<a name="l04374"></a>04374         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;shocks_2.push_back(shock_2);
<a name="l04375"></a>04375     });
<a name="l04376"></a>04376 }
<a name="l04377"></a>04377 
<a name="l04378"></a><a class="code" href="class_rig_def_1_1_parser.html#ab61fae2aade6f17efaaa525e72f8f8b2">04378</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_rig_def_1_1_parser.html#ab61fae2aade6f17efaaa525e72f8f8b2">Parser::ParseShock2Options</a>(Ogre::String <span class="keyword">const</span> &amp; line, std::string <span class="keyword">const</span> &amp; options_str)
<a name="l04379"></a>04379 {
<a name="l04380"></a>04380     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options = 0u;
<a name="l04381"></a>04381     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; options_str.length(); i++)
<a name="l04382"></a>04382     {
<a name="l04383"></a>04383         <span class="keywordflow">switch</span> (options_str.at(i))
<a name="l04384"></a>04384         {
<a name="l04385"></a>04385         <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:
<a name="l04386"></a>04386             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Shock2::OPTION_i_INVISIBLE);
<a name="l04387"></a>04387             <span class="keywordflow">break</span>;
<a name="l04388"></a>04388 
<a name="l04389"></a>04389         <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:
<a name="l04390"></a>04390             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Shock2::OPTION_m_METRIC);
<a name="l04391"></a>04391             <span class="keywordflow">break</span>;
<a name="l04392"></a>04392 
<a name="l04393"></a>04393         <span class="keywordflow">case</span> <span class="charliteral">&#39;M&#39;</span>:
<a name="l04394"></a>04394             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Shock2::OPTION_M_ABSOLUTE_METRIC);
<a name="l04395"></a>04395             <span class="keywordflow">break</span>;
<a name="l04396"></a>04396 
<a name="l04397"></a>04397         <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:
<a name="l04398"></a>04398             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Shock2::OPTION_s_SOFT_BUMP_BOUNDS);
<a name="l04399"></a>04399             <span class="keywordflow">break</span>;
<a name="l04400"></a>04400 
<a name="l04401"></a>04401         <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:
<a name="l04402"></a>04402             <span class="keywordflow">break</span>; <span class="comment">// Placeholder, does nothing.</span>
<a name="l04403"></a>04403 
<a name="l04404"></a>04404         <span class="keywordflow">default</span>:
<a name="l04405"></a>04405             std::stringstream msg;
<a name="l04406"></a>04406             msg &lt;&lt; <span class="stringliteral">&quot;Invalid option: &#39;&quot;</span> &lt;&lt; options_str.at(i) &lt;&lt; <span class="stringliteral">&quot;&#39;, ignoring...&quot;</span>;
<a name="l04407"></a>04407             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l04408"></a>04408             <span class="keywordflow">break</span>;
<a name="l04409"></a>04409         }
<a name="l04410"></a>04410     }
<a name="l04411"></a>04411     <span class="keywordflow">return</span> options;
<a name="l04412"></a>04412 }
<a name="l04413"></a>04413 
<a name="l04414"></a><a class="code" href="class_rig_def_1_1_parser.html#ac9c7823882f976ce2ddcd24bc347bd88">04414</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ac9c7823882f976ce2ddcd24bc347bd88">Parser::LogParsedShock2DataForChecking</a>(Ogre::String <span class="keyword">const</span> &amp; line, <a class="code" href="struct_rig_def_1_1_shock2.html">Shock2</a>&amp; shock)
<a name="l04415"></a>04415 {
<a name="l04416"></a>04416     <span class="keywordtype">char</span> msg[1024];
<a name="l04417"></a>04417     sprintf(msg, <span class="stringliteral">&quot;Parsed data for checking:&quot;</span>
<a name="l04418"></a>04418         <span class="stringliteral">&quot;\n\t              Nodes: %s %s&quot;</span>
<a name="l04419"></a>04419         <span class="stringliteral">&quot;\n\t          Spring-In: %f&quot;</span>
<a name="l04420"></a>04420         <span class="stringliteral">&quot;\n\t         Damping-In: %f&quot;</span>
<a name="l04421"></a>04421         <span class="stringliteral">&quot;\n\t Spring-In-Progress: %f&quot;</span>
<a name="l04422"></a>04422         <span class="stringliteral">&quot;\n\t   Damp-In-Progress: %f&quot;</span>
<a name="l04423"></a>04423         <span class="stringliteral">&quot;\n\t         Spring-Out: %f&quot;</span>
<a name="l04424"></a>04424         <span class="stringliteral">&quot;\n\t        Damping-Out: %f&quot;</span>
<a name="l04425"></a>04425         <span class="stringliteral">&quot;\n\tSpring-Out-Progress: %f&quot;</span>
<a name="l04426"></a>04426         <span class="stringliteral">&quot;\n\t  Damp-Out-Progress: %f&quot;</span>
<a name="l04427"></a>04427         <span class="stringliteral">&quot;\n\t         ShortBound: %f&quot;</span>
<a name="l04428"></a>04428         <span class="stringliteral">&quot;\n\t          LongBound: %f&quot;</span>
<a name="l04429"></a>04429         <span class="stringliteral">&quot;\n\t     Precompression: %f&quot;</span>
<a name="l04430"></a>04430         <span class="stringliteral">&quot;\n\t            Options: &quot;</span>,
<a name="l04431"></a>04431         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a19248178ff7ff2dd39a6c1ca8a0744b0">nodes</a>[0].<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a141e4a4770a737736436a3746a31f3ea">ToString</a>().c_str(), shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a19248178ff7ff2dd39a6c1ca8a0744b0">nodes</a>[1].<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a141e4a4770a737736436a3746a31f3ea">ToString</a>().c_str(),
<a name="l04432"></a>04432         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a89dc983239b0355025a200862194ccfe" title="Spring value applied when the shock is compressing.">spring_in</a>,
<a name="l04433"></a>04433         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#aebf1286d4b0ba5f7d9b1ae9aaecd4176" title="Damping value applied when the shock is compressing.">damp_in</a>,
<a name="l04434"></a>04434         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#afb46b6fc8614072ef7a0fe2863049cde" title="Progression factor for springin. A value of 0 disables this option. 1...x as multipliers, example:maximum springrate == springrate + (factor*springrate)">progress_factor_spring_in</a>,
<a name="l04435"></a>04435         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a6ae82f640b5cb8ba5800a14c3a99f74d" title="Progression factor for dampin. 0 = disabled, 1...x as multipliers, example:maximum dampingrate == spr...">progress_factor_damp_in</a>,
<a name="l04436"></a>04436         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#aca9d508a5a145eb49491d705336738c6" title="spring value applied when shock extending">spring_out</a>,
<a name="l04437"></a>04437         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a3c9da42224d7cf2609ba6bd578889edd" title="damping value applied when shock extending">damp_out</a>,
<a name="l04438"></a>04438         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#aadc9b0b323c74f1df132feda13eb7732" title="Progression factor springout, 0 = disabled, 1...x as multipliers, example:maximum springrate == sprin...">progress_factor_spring_out</a>,
<a name="l04439"></a>04439         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a2d02dda4d5b2984fe645476804670a65" title="Progression factor dampout, 0 = disabled, 1...x as multipliers, example:maximum dampingrate == spring...">progress_factor_damp_out</a>,
<a name="l04440"></a>04440         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a29a95e5b35a656f7b7337a22284dbb32" title="Maximum contraction limit, in percentage ( 1.00 = 100% )">short_bound</a>,
<a name="l04441"></a>04441         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#adeaec6bd27bd74d778eafdcdd65ec3e5" title="Maximum extension limit, in percentage ( 1.00 = 100% )">long_bound</a>,
<a name="l04442"></a>04442         shock.<a class="code" href="struct_rig_def_1_1_shock2.html#aab99986424ef1e79baf57b39d13d4334" title="Changes compression or extension of the suspension when the truck spawns. This can be used to &quot;level&quot;...">precompression</a>);
<a name="l04443"></a>04443 
<a name="l04444"></a>04444     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a9cdf6403d5447eacc0bdeedb0aebefaf" title="Bit flags.">options</a>, Shock2::OPTION_i_INVISIBLE))
<a name="l04445"></a>04445     {
<a name="l04446"></a>04446         strcat(msg, <span class="stringliteral">&quot; i_INVISIBLE&quot;</span>);
<a name="l04447"></a>04447     }
<a name="l04448"></a>04448     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a9cdf6403d5447eacc0bdeedb0aebefaf" title="Bit flags.">options</a>, Shock2::OPTION_s_SOFT_BUMP_BOUNDS))
<a name="l04449"></a>04449     {
<a name="l04450"></a>04450         strcat(msg, <span class="stringliteral">&quot; s_SOFT_BUMP_BOUNDS&quot;</span>);
<a name="l04451"></a>04451     }
<a name="l04452"></a>04452     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a9cdf6403d5447eacc0bdeedb0aebefaf" title="Bit flags.">options</a>, Shock2::OPTION_M_ABSOLUTE_METRIC))
<a name="l04453"></a>04453     {
<a name="l04454"></a>04454         strcat(msg, <span class="stringliteral">&quot; M_ABSOLUTE_METRIC&quot;</span>);
<a name="l04455"></a>04455     }
<a name="l04456"></a>04456     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(shock.<a class="code" href="struct_rig_def_1_1_shock2.html#a9cdf6403d5447eacc0bdeedb0aebefaf" title="Bit flags.">options</a>, Shock2::OPTION_m_METRIC))
<a name="l04457"></a>04457     {
<a name="l04458"></a>04458         strcat(msg, <span class="stringliteral">&quot; m_METRIC&quot;</span>);
<a name="l04459"></a>04459     }
<a name="l04460"></a>04460     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg);
<a name="l04461"></a>04461 }
<a name="l04462"></a>04462 
<a name="l04463"></a><a class="code" href="class_rig_def_1_1_parser.html#a14daba4d01498e6919d312d29223ad95">04463</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="class_rig_def_1_1_parser.html#a14daba4d01498e6919d312d29223ad95">Parser::ParseShockOptions</a>(Ogre::String <span class="keyword">const</span> &amp; line, std::string <span class="keyword">const</span> &amp; options_str)
<a name="l04464"></a>04464 {
<a name="l04465"></a>04465     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> options = 0u;
<a name="l04466"></a>04466     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; options_str.length(); i++)
<a name="l04467"></a>04467     {
<a name="l04468"></a>04468         <span class="keywordflow">switch</span> (options_str.at(i))
<a name="l04469"></a>04469         {
<a name="l04470"></a>04470         <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>:
<a name="l04471"></a>04471             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Shock::OPTION_i_INVISIBLE);
<a name="l04472"></a>04472             <span class="keywordflow">break</span>;
<a name="l04473"></a>04473 
<a name="l04474"></a>04474         <span class="keywordflow">case</span> <span class="charliteral">&#39;r&#39;</span>:
<a name="l04475"></a>04475         <span class="keywordflow">case</span> <span class="charliteral">&#39;R&#39;</span>:
<a name="l04476"></a>04476             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Shock::OPTION_R_ACTIVE_RIGHT);
<a name="l04477"></a>04477             <span class="keywordflow">break</span>;
<a name="l04478"></a>04478 
<a name="l04479"></a>04479         <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:
<a name="l04480"></a>04480         <span class="keywordflow">case</span> <span class="charliteral">&#39;L&#39;</span>:
<a name="l04481"></a>04481             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Shock::OPTION_L_ACTIVE_LEFT);
<a name="l04482"></a>04482             <span class="keywordflow">break</span>;
<a name="l04483"></a>04483 
<a name="l04484"></a>04484         <span class="keywordflow">case</span> <span class="charliteral">&#39;m&#39;</span>:
<a name="l04485"></a>04485             <a class="code" href="_bit_flags_8h.html#a8035c206e8a0c99371d29413fe0d0b57">BITMASK_SET_1</a>(options, Shock::OPTION_m_METRIC);
<a name="l04486"></a>04486             <span class="keywordflow">break</span>;
<a name="l04487"></a>04487 
<a name="l04488"></a>04488         <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:
<a name="l04489"></a>04489             <span class="keywordflow">break</span>; <span class="comment">// Placeholder, does nothing.</span>
<a name="l04490"></a>04490 
<a name="l04491"></a>04491         <span class="keywordflow">default</span>:
<a name="l04492"></a>04492             std::stringstream msg;
<a name="l04493"></a>04493             msg &lt;&lt; <span class="stringliteral">&quot;Invalid option: &#39;&quot;</span> &lt;&lt; options_str.at(i) &lt;&lt; <span class="stringliteral">&quot;&#39;, ignoring...&quot;</span>;
<a name="l04494"></a>04494             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l04495"></a>04495             <span class="keywordflow">break</span>;
<a name="l04496"></a>04496         }
<a name="l04497"></a>04497     }
<a name="l04498"></a>04498     <span class="keywordflow">return</span> options;
<a name="l04499"></a>04499 }
<a name="l04500"></a>04500 
<a name="l04501"></a><a class="code" href="class_rig_def_1_1_parser.html#aba8fac0375be0fee3f5e5cc43e3e3d4f">04501</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aba8fac0375be0fee3f5e5cc43e3e3d4f">Parser::ParseShock</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04502"></a>04502 {
<a name="l04503"></a>04503     boost::smatch results;
<a name="l04504"></a>04504     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_SHOCKS))
<a name="l04505"></a>04505     {
<a name="l04506"></a>04506         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04507"></a>04507         <span class="keywordflow">return</span>;
<a name="l04508"></a>04508     }
<a name="l04509"></a>04509     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04510"></a>04510 
<a name="l04511"></a>04511     <a class="code" href="struct_rig_def_1_1_shock.html">Shock</a> shock;
<a name="l04512"></a>04512     shock.<a class="code" href="struct_rig_def_1_1_shock.html#aa04b58972b9518a4390e764fa4cac2fc">beam_defaults</a>  = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l04513"></a>04513     shock.<a class="code" href="struct_rig_def_1_1_shock.html#a649ab70629e303c9b0670cd2f4c28b18">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l04514"></a>04514 
<a name="l04515"></a>04515     shock.<a class="code" href="struct_rig_def_1_1_shock.html#a6358d9af8f4e16ec0e394938c161bbed">nodes</a>[0]       =  <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04516"></a>04516     shock.<a class="code" href="struct_rig_def_1_1_shock.html#a6358d9af8f4e16ec0e394938c161bbed">nodes</a>[1]       =  <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l04517"></a>04517     shock.<a class="code" href="struct_rig_def_1_1_shock.html#a2f978bbd5d29cadd1cbcf4761651992e" title="The &#39;stiffness&#39; of the shock. The higher the value, the less the shock will move for a given bump...">spring_rate</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l04518"></a>04518     shock.<a class="code" href="struct_rig_def_1_1_shock.html#a22ada094b49ea26de1724808f79d80ca" title="The &#39;resistance to motion&#39; of the shock. The best value is given by this equation: 2 * sqrt(suspended...">damping</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l04519"></a>04519     shock.<a class="code" href="struct_rig_def_1_1_shock.html#a7e7f7ec2919da837e51d334a61549ae2" title="Maximum contraction. The shortest length the shock can be, as a proportion of its original length...">short_bound</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l04520"></a>04520     shock.<a class="code" href="struct_rig_def_1_1_shock.html#a9f56bb2c3bffcf4e19c4728c40f967fb" title="Maximum extension. The longest length a shock can be, as a proportion of its original length...">long_bound</a>     = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l04521"></a>04521     shock.<a class="code" href="struct_rig_def_1_1_shock.html#a626b09f4def0c0d03aaaab7bf341c7df" title="Changes compression or extension of the suspension when the truck spawns. This can be used to &quot;level&quot;...">precompression</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l04522"></a>04522     <span class="keywordflow">if</span> (results[17].matched) <span class="comment">// Has options?</span>
<a name="l04523"></a>04523     {
<a name="l04524"></a>04524         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a3010fbe5fe7d4834e4a53308692ab5ca" title="Bit flags.">options</a> = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a14daba4d01498e6919d312d29223ad95">ParseShockOptions</a>(line, results[17].str());
<a name="l04525"></a>04525     }
<a name="l04526"></a>04526     <span class="keywordflow">else</span>
<a name="l04527"></a>04527     {
<a name="l04528"></a>04528         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a3010fbe5fe7d4834e4a53308692ab5ca" title="Bit flags.">options</a> = 0u;
<a name="l04529"></a>04529     }
<a name="l04530"></a>04530 
<a name="l04531"></a>04531     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;shocks.push_back(shock);
<a name="l04532"></a>04532 }
<a name="l04533"></a>04533 
<a name="l04534"></a><a class="code" href="class_rig_def_1_1_parser.html#a72e7f6c03ff681c776eb5d507ccdf917">04534</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a72e7f6c03ff681c776eb5d507ccdf917">Parser::LogParsedShockDataForChecking</a>(Ogre::String <span class="keyword">const</span> &amp; line, <a class="code" href="struct_rig_def_1_1_shock.html">Shock</a>&amp; shock)
<a name="l04535"></a>04535 {
<a name="l04536"></a>04536     <span class="keywordtype">char</span> msg[1024];
<a name="l04537"></a>04537     sprintf(msg, <span class="stringliteral">&quot;Parsed data for checking:&quot;</span>
<a name="l04538"></a>04538         <span class="stringliteral">&quot;\n\t         Nodes: %s %s&quot;</span>
<a name="l04539"></a>04539         <span class="stringliteral">&quot;\n\t        Spring: %f&quot;</span>
<a name="l04540"></a>04540         <span class="stringliteral">&quot;\n\t       Damping: %f&quot;</span>
<a name="l04541"></a>04541         <span class="stringliteral">&quot;\n\t    ShortBound: %f&quot;</span>
<a name="l04542"></a>04542         <span class="stringliteral">&quot;\n\t     LongBound: %f&quot;</span>,
<a name="l04543"></a>04543         <span class="stringliteral">&quot;\n\tPrecompression: %f&quot;</span>
<a name="l04544"></a>04544         <span class="stringliteral">&quot;\n\t       Options: &quot;</span>, 
<a name="l04545"></a>04545         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a6358d9af8f4e16ec0e394938c161bbed">nodes</a>[0].<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a141e4a4770a737736436a3746a31f3ea">ToString</a>().c_str(), shock.<a class="code" href="struct_rig_def_1_1_shock.html#a6358d9af8f4e16ec0e394938c161bbed">nodes</a>[1].<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a141e4a4770a737736436a3746a31f3ea">ToString</a>().c_str(), 
<a name="l04546"></a>04546         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a2f978bbd5d29cadd1cbcf4761651992e" title="The &#39;stiffness&#39; of the shock. The higher the value, the less the shock will move for a given bump...">spring_rate</a>, 
<a name="l04547"></a>04547         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a22ada094b49ea26de1724808f79d80ca" title="The &#39;resistance to motion&#39; of the shock. The best value is given by this equation: 2 * sqrt(suspended...">damping</a>, 
<a name="l04548"></a>04548         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a7e7f7ec2919da837e51d334a61549ae2" title="Maximum contraction. The shortest length the shock can be, as a proportion of its original length...">short_bound</a>, 
<a name="l04549"></a>04549         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a9f56bb2c3bffcf4e19c4728c40f967fb" title="Maximum extension. The longest length a shock can be, as a proportion of its original length...">long_bound</a>, 
<a name="l04550"></a>04550         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a626b09f4def0c0d03aaaab7bf341c7df" title="Changes compression or extension of the suspension when the truck spawns. This can be used to &quot;level&quot;...">precompression</a>);
<a name="l04551"></a>04551 
<a name="l04552"></a>04552     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(shock.<a class="code" href="struct_rig_def_1_1_shock.html#a3010fbe5fe7d4834e4a53308692ab5ca" title="Bit flags.">options</a>, Shock::OPTION_i_INVISIBLE))
<a name="l04553"></a>04553     {
<a name="l04554"></a>04554         strcat(msg, <span class="stringliteral">&quot; i_INVISIBLE&quot;</span>);
<a name="l04555"></a>04555     }
<a name="l04556"></a>04556     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(shock.<a class="code" href="struct_rig_def_1_1_shock.html#a3010fbe5fe7d4834e4a53308692ab5ca" title="Bit flags.">options</a>, Shock::OPTION_R_ACTIVE_RIGHT))
<a name="l04557"></a>04557     {
<a name="l04558"></a>04558         strcat(msg, <span class="stringliteral">&quot; R_ACTIVE_RIGHT&quot;</span>);
<a name="l04559"></a>04559     }
<a name="l04560"></a>04560     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(shock.<a class="code" href="struct_rig_def_1_1_shock.html#a3010fbe5fe7d4834e4a53308692ab5ca" title="Bit flags.">options</a>, Shock::OPTION_L_ACTIVE_LEFT))
<a name="l04561"></a>04561     {
<a name="l04562"></a>04562         strcat(msg, <span class="stringliteral">&quot; L_ACTIVE_LEFT&quot;</span>);
<a name="l04563"></a>04563     }
<a name="l04564"></a>04564     <span class="keywordflow">if</span> (<a class="code" href="_bit_flags_8h.html#a2e2441abbc5b22ba112107a88360a0e7">BITMASK_IS_1</a>(shock.<a class="code" href="struct_rig_def_1_1_shock.html#a3010fbe5fe7d4834e4a53308692ab5ca" title="Bit flags.">options</a>, Shock::OPTION_m_METRIC))
<a name="l04565"></a>04565     {
<a name="l04566"></a>04566         strcat(msg, <span class="stringliteral">&quot; m_METRIC&quot;</span>);
<a name="l04567"></a>04567     }
<a name="l04568"></a>04568     <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg);
<a name="l04569"></a>04569 }
<a name="l04570"></a>04570 
<a name="l04571"></a><a class="code" href="class_rig_def_1_1_parser.html#ad5608553ebc4d8bdda561eedd5f56ca2">04571</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ad5608553ebc4d8bdda561eedd5f56ca2">Parser::ParseShockUnsafe</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04572"></a>04572 {
<a name="l04573"></a>04573     <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 7,
<a name="l04574"></a>04574     {
<a name="l04575"></a>04575         <a class="code" href="struct_rig_def_1_1_shock.html">Shock</a> shock;
<a name="l04576"></a>04576         shock.<a class="code" href="struct_rig_def_1_1_shock.html#aa04b58972b9518a4390e764fa4cac2fc">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l04577"></a>04577         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a649ab70629e303c9b0670cd2f4c28b18">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l04578"></a>04578 
<a name="l04579"></a>04579         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a6358d9af8f4e16ec0e394938c161bbed">nodes</a>[0]       =  <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[0]);
<a name="l04580"></a>04580         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a6358d9af8f4e16ec0e394938c161bbed">nodes</a>[1]       =  <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(values[1]);
<a name="l04581"></a>04581         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a2f978bbd5d29cadd1cbcf4761651992e" title="The &#39;stiffness&#39; of the shock. The higher the value, the less the shock will move for a given bump...">spring_rate</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[2]);
<a name="l04582"></a>04582         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a22ada094b49ea26de1724808f79d80ca" title="The &#39;resistance to motion&#39; of the shock. The best value is given by this equation: 2 * sqrt(suspended...">damping</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[3]);
<a name="l04583"></a>04583         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a7e7f7ec2919da837e51d334a61549ae2" title="Maximum contraction. The shortest length the shock can be, as a proportion of its original length...">short_bound</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[4]);
<a name="l04584"></a>04584         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a9f56bb2c3bffcf4e19c4728c40f967fb" title="Maximum extension. The longest length a shock can be, as a proportion of its original length...">long_bound</a>     = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[5]);
<a name="l04585"></a>04585         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a626b09f4def0c0d03aaaab7bf341c7df" title="Changes compression or extension of the suspension when the truck spawns. This can be used to &quot;level&quot;...">precompression</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[6]);
<a name="l04586"></a>04586         shock.<a class="code" href="struct_rig_def_1_1_shock.html#a3010fbe5fe7d4834e4a53308692ab5ca" title="Bit flags.">options</a>        = (values.size() &gt; 7) ? this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a14daba4d01498e6919d312d29223ad95">ParseShockOptions</a>(line, values[7]) : 0u;
<a name="l04587"></a>04587 
<a name="l04588"></a>04588         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a72e7f6c03ff681c776eb5d507ccdf917">LogParsedShockDataForChecking</a>(line, shock);
<a name="l04589"></a>04589         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;shocks.push_back(shock);
<a name="l04590"></a>04590     });
<a name="l04591"></a>04591 }
<a name="l04592"></a>04592 
<a name="l04593"></a><a class="code" href="class_rig_def_1_1_parser.html#ad0e49a337465aa5991a2266361a06838">04593</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ad0e49a337465aa5991a2266361a06838">Parser::_CheckInvalidTrailingText</a>(Ogre::String <span class="keyword">const</span> &amp; line, boost::smatch <span class="keyword">const</span> &amp; results, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> index)
<a name="l04594"></a>04594 {
<a name="l04595"></a>04595     <span class="keywordflow">if</span> (results[index].matched) <span class="comment">/* Invalid trailing text */</span>
<a name="l04596"></a>04596     {
<a name="l04597"></a>04597         std::stringstream msg;
<a name="l04598"></a>04598         msg &lt;&lt; <span class="stringliteral">&quot;Invalid text after parameters: &#39;&quot;</span> &lt;&lt; results[index] &lt;&lt; <span class="stringliteral">&quot;&#39;. Please remove. Ignoring...&quot;</span>;
<a name="l04599"></a>04599         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l04600"></a>04600     }
<a name="l04601"></a>04601 }
<a name="l04602"></a>04602 
<a name="l04603"></a><a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">04603</a> <a class="code" href="class_rig_def_1_1_node_1_1_ref.html">Node::Ref</a> <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">Parser::_ParseNodeRef</a>(std::string <span class="keyword">const</span> &amp; node_id_str)
<a name="l04604"></a>04604 {
<a name="l04605"></a>04605     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l04606"></a>04606     {
<a name="l04607"></a>04607         <span class="comment">// Import of legacy fileformatversion</span>
<a name="l04608"></a>04608         <span class="keywordtype">int</span> node_id_num = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(node_id_str);
<a name="l04609"></a>04609         <span class="keywordflow">if</span> (node_id_num &lt; 0)
<a name="l04610"></a>04610         {
<a name="l04611"></a>04611             std::stringstream msg;
<a name="l04612"></a>04612             msg &lt;&lt; <span class="stringliteral">&quot;Encountered node with illegal negative number: &#39;&quot;</span> &lt;&lt; node_id_num 
<a name="l04613"></a>04613                 &lt;&lt; <span class="stringliteral">&quot;&#39;, parsing as positive &#39;&quot;</span> &lt;&lt; node_id_num * -1 &lt;&lt; <span class="stringliteral">&quot;&#39; for backwards compatibility. Please fix as soon as possible.&quot;</span>;
<a name="l04614"></a>04614             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(node_id_str, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l04615"></a>04615             node_id_num *= -1;
<a name="l04616"></a>04616         }
<a name="l04617"></a>04617         <span class="comment">// Since fileformatversion is not known from the beginning of parsing, 2 states must be kept </span>
<a name="l04618"></a>04618         <span class="comment">// at the same time: IMPORT_STATE and REGULAR_STATE. The outer logic must make the right pick.</span>
<a name="l04619"></a>04619         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> flags = Node::Ref::IMPORT_STATE_IS_VALID |                                     <span class="comment">// Import state</span>
<a name="l04620"></a>04620                              Node::Ref::REGULAR_STATE_IS_VALID | Node::Ref::REGULAR_STATE_IS_NAMED; <span class="comment">// Regular state (fileformatversion &gt;= 450)</span>
<a name="l04621"></a>04621         <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a60ed70e13af44481c8ec3ab555a0c30d" title="Parser state.">m_any_named_node_defined</a>)
<a name="l04622"></a>04622         {
<a name="l04623"></a>04623             flags |= Node::Ref::IMPORT_STATE_MUST_CHECK_NAMED_FIRST;
<a name="l04624"></a>04624         }
<a name="l04625"></a>04625         <span class="keywordflow">return</span> <a class="code" href="class_rig_def_1_1_node_1_1_ref.html">Node::Ref</a>(node_id_str, node_id_num, flags, <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>);
<a name="l04626"></a>04626     }
<a name="l04627"></a>04627     <span class="keywordflow">else</span>
<a name="l04628"></a>04628     {
<a name="l04629"></a>04629         <span class="comment">// fileformatversion &gt;= 450, use named-only nodes</span>
<a name="l04630"></a>04630         <span class="keywordflow">return</span> <a class="code" href="class_rig_def_1_1_node_1_1_ref.html">Node::Ref</a>(node_id_str, 0, Node::Ref::REGULAR_STATE_IS_VALID | Node::Ref::REGULAR_STATE_IS_NAMED, <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>);
<a name="l04631"></a>04631     }
<a name="l04632"></a>04632 }
<a name="l04633"></a>04633 
<a name="l04634"></a><a class="code" href="class_rig_def_1_1_parser.html#aa97b576c0424313c62f430dac370edf1">04634</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aa97b576c0424313c62f430dac370edf1">Parser::ParseDirectiveSetInertiaDefaults</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04635"></a>04635 {
<a name="l04636"></a>04636     boost::smatch results;
<a name="l04637"></a>04637     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_SET_INERTIA_DEFAULTS))
<a name="l04638"></a>04638     {
<a name="l04639"></a>04639         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04640"></a>04640         <span class="keywordflow">return</span>;
<a name="l04641"></a>04641     }
<a name="l04642"></a>04642     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04643"></a>04643 
<a name="l04644"></a>04644     <span class="keywordtype">float</span> start_delay = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l04645"></a>04645     <span class="keywordtype">float</span> stop_delay = 0;
<a name="l04646"></a>04646     <span class="keywordflow">if</span> (results[4].matched)
<a name="l04647"></a>04647     {
<a name="l04648"></a>04648         stop_delay = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l04649"></a>04649     }
<a name="l04650"></a>04650     <span class="keywordflow">if</span> (start_delay &lt; 0 || stop_delay &lt; 0)
<a name="l04651"></a>04651     {
<a name="l04652"></a>04652         <span class="comment">// Reset</span>
<a name="l04653"></a>04653         <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a> = <a class="code" href="class_rig_def_1_1_parser.html#a562ae58c77e4a78a230c009d6436770f">m_ror_default_inertia</a>;
<a name="l04654"></a>04654     }
<a name="l04655"></a>04655     <span class="keywordflow">else</span>
<a name="l04656"></a>04656     {
<a name="l04657"></a>04657         <span class="comment">// Create</span>
<a name="l04658"></a>04658         <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a> = boost::shared_ptr&lt;DefaultInertia&gt;(<span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_default_inertia.html">DefaultInertia</a>(*<a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>.get()));
<a name="l04659"></a>04659 
<a name="l04660"></a>04660         <span class="comment">// Update</span>
<a name="l04661"></a>04661         <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>-&gt;start_delay_factor = start_delay;
<a name="l04662"></a>04662         <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>-&gt;stop_delay_factor = stop_delay;
<a name="l04663"></a>04663 
<a name="l04664"></a>04664         <span class="keywordflow">if</span> (results[7].matched)
<a name="l04665"></a>04665         {
<a name="l04666"></a>04666             <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>-&gt;start_function = results[7];
<a name="l04667"></a>04667 
<a name="l04668"></a>04668             <span class="keywordflow">if</span> (results[10].matched)
<a name="l04669"></a>04669             {
<a name="l04670"></a>04670                 <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>-&gt;stop_function = results[10];
<a name="l04671"></a>04671             }
<a name="l04672"></a>04672         }
<a name="l04673"></a>04673     }
<a name="l04674"></a>04674 
<a name="l04675"></a>04675     <span class="keywordflow">if</span> (results[11].matched)
<a name="l04676"></a>04676     {
<a name="l04677"></a>04677         std::stringstream msg;
<a name="l04678"></a>04678         msg &lt;&lt; <span class="stringliteral">&quot;Illegal text after parameters: \&quot;&quot;</span> &lt;&lt; results[11] &lt;&lt; <span class="stringliteral">&quot;\&quot;, ignoring...&quot;</span>;
<a name="l04679"></a>04679         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l04680"></a>04680     }
<a name="l04681"></a>04681 }
<a name="l04682"></a>04682 
<a name="l04683"></a><a class="code" href="class_rig_def_1_1_parser.html#a48d5bdd67ce5429a471895b26479d63a">04683</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a48d5bdd67ce5429a471895b26479d63a">Parser::ParseScrewprops</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04684"></a>04684 {
<a name="l04685"></a>04685     boost::smatch results;
<a name="l04686"></a>04686     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_SCREWPROPS))
<a name="l04687"></a>04687     {
<a name="l04688"></a>04688         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04689"></a>04689         <span class="keywordflow">return</span>;
<a name="l04690"></a>04690     }
<a name="l04691"></a>04691     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04692"></a>04692 
<a name="l04693"></a>04693     <a class="code" href="struct_rig_def_1_1_screwprop.html">Screwprop</a> screwprop;
<a name="l04694"></a>04694 
<a name="l04695"></a>04695     screwprop.<a class="code" href="struct_rig_def_1_1_screwprop.html#a619725c292f7aa018eebe6bbcbf2bd21">prop_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04696"></a>04696     screwprop.<a class="code" href="struct_rig_def_1_1_screwprop.html#afd9b093759696217ad259b8e9787702f">back_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l04697"></a>04697     screwprop.<a class="code" href="struct_rig_def_1_1_screwprop.html#ae2456dd4ebe41609db3adfe3fb55e883">top_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l04698"></a>04698     screwprop.<a class="code" href="struct_rig_def_1_1_screwprop.html#a7cb2109d28eabed05953c5cd982ad0c3">power</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[4]);
<a name="l04699"></a>04699 
<a name="l04700"></a>04700     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;screwprops.push_back(screwprop);
<a name="l04701"></a>04701 }
<a name="l04702"></a>04702 
<a name="l04703"></a><a class="code" href="class_rig_def_1_1_parser.html#a5c723fed8a5644a5949679d3053d60fd">04703</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a5c723fed8a5644a5949679d3053d60fd">Parser::_ParseRotatorsCommon</a>(<a class="code" href="struct_rig_def_1_1_rotator.html">Rotator</a> &amp; rotator, boost::smatch &amp; results, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> inertia_start_index)
<a name="l04704"></a>04704 {
<a name="l04705"></a>04705     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a52f0e36103480f64d723bd76f7c56077">axis_nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04706"></a>04706     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a52f0e36103480f64d723bd76f7c56077">axis_nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l04707"></a>04707 
<a name="l04708"></a>04708     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a1d31f8aa4803b50313cba04d332904a1">base_plate_nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l04709"></a>04709     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a1d31f8aa4803b50313cba04d332904a1">base_plate_nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[4]);
<a name="l04710"></a>04710     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a1d31f8aa4803b50313cba04d332904a1">base_plate_nodes</a>[2] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l04711"></a>04711     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a1d31f8aa4803b50313cba04d332904a1">base_plate_nodes</a>[3] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[6]);
<a name="l04712"></a>04712 
<a name="l04713"></a>04713     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a85c6f87df65ac0c9412d9cc4acf9e929">rotating_plate_nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[7]);
<a name="l04714"></a>04714     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a85c6f87df65ac0c9412d9cc4acf9e929">rotating_plate_nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[8]);
<a name="l04715"></a>04715     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a85c6f87df65ac0c9412d9cc4acf9e929">rotating_plate_nodes</a>[2] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[9]);
<a name="l04716"></a>04716     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a85c6f87df65ac0c9412d9cc4acf9e929">rotating_plate_nodes</a>[3] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[10]);
<a name="l04717"></a>04717 
<a name="l04718"></a>04718     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a5afb8c7d3d6b1699d83c9e173e471b39">rate</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l04719"></a>04719 
<a name="l04720"></a>04720     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#a0daafc8c467011e98d76c92e5b15a910">spin_left_key</a>  = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[12]);
<a name="l04721"></a>04721     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#aac4085eef518bc103315f9c7a9a6f76f">spin_right_key</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[13]);
<a name="l04722"></a>04722 
<a name="l04723"></a>04723     <span class="comment">/* Inertia part */</span>
<a name="l04724"></a>04724 
<a name="l04725"></a>04725     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#ab90028c4339e1bb062263322a3c7324e">_ParseOptionalInertia</a>(rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#afdc433fe06fcf1fba9080d224144736b">inertia</a>, results, inertia_start_index))
<a name="l04726"></a>04726     {
<a name="l04727"></a>04727         <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = inertia_start_index + 8;
<a name="l04728"></a>04728 
<a name="l04729"></a>04729         <span class="keywordflow">if</span> (results[i].matched)
<a name="l04730"></a>04730         {
<a name="l04731"></a>04731             rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#aacf94cde941fba9879ac65d0e9375d5e">engine_coupling</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[i]);
<a name="l04732"></a>04732             i += 2;
<a name="l04733"></a>04733 
<a name="l04734"></a>04734             <span class="keywordflow">if</span> (results[i].matched)
<a name="l04735"></a>04735             {
<a name="l04736"></a>04736                 rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#ae38424df0bdad806156eda5aa0015b5a">needs_engine</a> = <a class="code" href="_rig_def___parser_8cpp.html#aa36143e7b00dfd8d2962e14f89047251">STR_PARSE_BOOL</a>(results[i]);
<a name="l04737"></a>04737             }
<a name="l04738"></a>04738         }
<a name="l04739"></a>04739     }
<a name="l04740"></a>04740 }
<a name="l04741"></a>04741 
<a name="l04742"></a><a class="code" href="class_rig_def_1_1_parser.html#a0d01a57dae830cd0e3375269e6237327">04742</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a0d01a57dae830cd0e3375269e6237327">Parser::ParseRotators</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04743"></a>04743 {
<a name="l04744"></a>04744     boost::smatch results;
<a name="l04745"></a>04745     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_ROTATORS))
<a name="l04746"></a>04746     {
<a name="l04747"></a>04747         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04748"></a>04748         <span class="keywordflow">return</span>;
<a name="l04749"></a>04749     }
<a name="l04750"></a>04750     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04751"></a>04751 
<a name="l04752"></a>04752     <a class="code" href="struct_rig_def_1_1_rotator.html">Rotator</a> rotator;
<a name="l04753"></a>04753     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#af59a750b5211e759afde10c3cbc57bc8">inertia_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>;
<a name="l04754"></a>04754     <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> inertia_start_index = 15;
<a name="l04755"></a>04755 
<a name="l04756"></a>04756     <a class="code" href="class_rig_def_1_1_parser.html#a5c723fed8a5644a5949679d3053d60fd">_ParseRotatorsCommon</a>(rotator, results, inertia_start_index);
<a name="l04757"></a>04757 
<a name="l04758"></a>04758     <span class="comment">/* Backwards compatibility check */</span>
<a name="l04759"></a>04759     <span class="comment">/* Parameter &quot;inertia_start_delay&quot; must accept garbage */</span>
<a name="l04760"></a>04760     <span class="keywordflow">if</span> (results[inertia_start_index].matched)
<a name="l04761"></a>04761     {
<a name="l04762"></a>04762         std::string start_delay_str = results[inertia_start_index];
<a name="l04763"></a>04763         <span class="keywordflow">if</span> (! boost::regex_match(start_delay_str, Regexes::REAL_NUMBER))
<a name="l04764"></a>04764         {
<a name="l04765"></a>04765             
<a name="l04766"></a>04766             <span class="keywordtype">float</span> result = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(start_delay_str);
<a name="l04767"></a>04767             std::stringstream msg;
<a name="l04768"></a>04768             msg &lt;&lt; <span class="stringliteral">&quot;Invalid value of parameter ~14 &#39;inertia_start_delay&#39;: &#39;&quot;</span> &lt;&lt; start_delay_str 
<a name="l04769"></a>04769                 &lt;&lt; <span class="stringliteral">&quot;&#39;, parsing as &#39;&quot;</span> &lt;&lt; result &lt;&lt; <span class="stringliteral">&quot;&#39; for backwards compatibility. Please fix.&quot;</span>;
<a name="l04770"></a>04770             <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, msg.str());
<a name="l04771"></a>04771         }
<a name="l04772"></a>04772     }
<a name="l04773"></a>04773 
<a name="l04774"></a>04774     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;rotators.push_back(rotator);
<a name="l04775"></a>04775 }
<a name="l04776"></a>04776 
<a name="l04777"></a><a class="code" href="class_rig_def_1_1_parser.html#aa21d76ad02c7e983788fa855a39b3279">04777</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aa21d76ad02c7e983788fa855a39b3279">Parser::ParseRotators2</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04778"></a>04778 {
<a name="l04779"></a>04779     boost::smatch results;
<a name="l04780"></a>04780     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_ROTATORS2))
<a name="l04781"></a>04781     {
<a name="l04782"></a>04782         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04783"></a>04783         <span class="keywordflow">return</span>;
<a name="l04784"></a>04784     }
<a name="l04785"></a>04785     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04786"></a>04786 
<a name="l04787"></a>04787     <a class="code" href="struct_rig_def_1_1_rotator2.html">Rotator2</a> rotator;
<a name="l04788"></a>04788     rotator.<a class="code" href="struct_rig_def_1_1_rotator.html#af59a750b5211e759afde10c3cbc57bc8">inertia_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>;
<a name="l04789"></a>04789 
<a name="l04790"></a>04790     <a class="code" href="class_rig_def_1_1_parser.html#a5c723fed8a5644a5949679d3053d60fd">_ParseRotatorsCommon</a>(rotator, results, 21);
<a name="l04791"></a>04791 
<a name="l04792"></a>04792     <span class="keywordflow">if</span> (results[15].matched)
<a name="l04793"></a>04793     {
<a name="l04794"></a>04794         rotator.<a class="code" href="struct_rig_def_1_1_rotator2.html#ae62524db69939d86ed54857ccfff30bb">rotating_force</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[15]);
<a name="l04795"></a>04795 
<a name="l04796"></a>04796         <span class="keywordflow">if</span> (results[17].matched)
<a name="l04797"></a>04797         {
<a name="l04798"></a>04798             rotator.<a class="code" href="struct_rig_def_1_1_rotator2.html#ae8d5400f5aecf0d6e62ea17666027d7b">tolerance</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[17]);
<a name="l04799"></a>04799 
<a name="l04800"></a>04800             <span class="keywordflow">if</span> (results[19].matched)
<a name="l04801"></a>04801             {
<a name="l04802"></a>04802                 rotator.<a class="code" href="struct_rig_def_1_1_rotator2.html#ab7696eb43681bf0b32c54f3b17c58328">description</a> = results[19];
<a name="l04803"></a>04803             }
<a name="l04804"></a>04804         }
<a name="l04805"></a>04805     }
<a name="l04806"></a>04806 
<a name="l04807"></a>04807     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;rotators_2.push_back(rotator);
<a name="l04808"></a>04808 }
<a name="l04809"></a>04809 
<a name="l04810"></a><a class="code" href="class_rig_def_1_1_parser.html#a6c834bd0f46111131121c1c405a61709">04810</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a6c834bd0f46111131121c1c405a61709">Parser::ParseFileinfo</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04811"></a>04811 {
<a name="l04812"></a>04812     boost::smatch results;
<a name="l04813"></a>04813     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_FILEINFO))
<a name="l04814"></a>04814     {
<a name="l04815"></a>04815         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Inline-section &#39;fileinfo&#39; has invalid format, ignoring...&quot;</span>);
<a name="l04816"></a>04816         <span class="keywordflow">return</span>;
<a name="l04817"></a>04817     }
<a name="l04818"></a>04818     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04819"></a>04819 
<a name="l04820"></a>04820     <a class="code" href="struct_rig_def_1_1_fileinfo.html">Fileinfo</a> fileinfo;
<a name="l04821"></a>04821     <span class="keywordtype">bool</span> go_next = <span class="keyword">false</span>;
<a name="l04822"></a>04822 
<a name="l04823"></a>04823     <span class="comment">/* UID */</span>
<a name="l04824"></a>04824     <span class="keywordflow">if</span> (results[3].matched)
<a name="l04825"></a>04825     {
<a name="l04826"></a>04826         fileinfo.<a class="code" href="struct_rig_def_1_1_fileinfo.html#ade6653d8e861c2ac81834fe847d035b2">unique_id</a> = results[3];
<a name="l04827"></a>04827         fileinfo.<a class="code" href="struct_rig_def_1_1_fileinfo.html#ae6d4e88745fd84491caafc46ecd06051">_has_unique_id</a> = <span class="keyword">true</span>;
<a name="l04828"></a>04828         go_next = <span class="keyword">true</span>;
<a name="l04829"></a>04829     }
<a name="l04830"></a>04830     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[2].matched)
<a name="l04831"></a>04831     {
<a name="l04832"></a>04832         go_next = <span class="keyword">true</span>;
<a name="l04833"></a>04833     }
<a name="l04834"></a>04834 
<a name="l04835"></a>04835     <span class="keywordflow">if</span> (!go_next)
<a name="l04836"></a>04836     {
<a name="l04837"></a>04837         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Inline-section &#39;fileinfo&#39; has invalid UID, ignoring line...&quot;</span>);
<a name="l04838"></a>04838     }
<a name="l04839"></a>04839     go_next = <span class="keyword">false</span>;
<a name="l04840"></a>04840 
<a name="l04841"></a>04841     <span class="comment">/* category id */</span>
<a name="l04842"></a>04842     <span class="keywordflow">if</span> (results[6].matched)
<a name="l04843"></a>04843     {
<a name="l04844"></a>04844         fileinfo.<a class="code" href="struct_rig_def_1_1_fileinfo.html#a8a51af3d41aade8a9cc2dac439b670ea">category_id</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[6]);
<a name="l04845"></a>04845         fileinfo.<a class="code" href="struct_rig_def_1_1_fileinfo.html#a738b297ee007c324fc652a6de3b13047">_has_category_id</a> = <span class="keyword">true</span>;
<a name="l04846"></a>04846         go_next = <span class="keyword">true</span>;
<a name="l04847"></a>04847     }
<a name="l04848"></a>04848     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[7].matched)
<a name="l04849"></a>04849     {
<a name="l04850"></a>04850         go_next = <span class="keyword">true</span>;
<a name="l04851"></a>04851     }
<a name="l04852"></a>04852 
<a name="l04853"></a>04853     <span class="keywordflow">if</span> (!go_next)
<a name="l04854"></a>04854     {
<a name="l04855"></a>04855         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Inline-section &#39;fileinfo&#39; has invalid category id, ignoring line...&quot;</span>);
<a name="l04856"></a>04856     }
<a name="l04857"></a>04857     go_next = <span class="keyword">false</span>;
<a name="l04858"></a>04858 
<a name="l04859"></a>04859     <span class="comment">/* file version */</span>
<a name="l04860"></a>04860     <span class="keywordtype">int</span> version = -1;
<a name="l04861"></a>04861     <span class="keywordflow">if</span> (results[10].matched)
<a name="l04862"></a>04862     {
<a name="l04863"></a>04863         <span class="comment">// Integer input</span>
<a name="l04864"></a>04864         version = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[10]);
<a name="l04865"></a>04865     }
<a name="l04866"></a>04866     <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[11].matched)
<a name="l04867"></a>04867     {
<a name="l04868"></a>04868         <span class="comment">// Float input, silently parse as int.</span>
<a name="l04869"></a>04869         version = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[11]);
<a name="l04870"></a>04870     }
<a name="l04871"></a>04871 
<a name="l04872"></a>04872     <span class="keywordflow">if</span> (version &gt;= 0)
<a name="l04873"></a>04873     {
<a name="l04874"></a>04874         fileinfo.<a class="code" href="struct_rig_def_1_1_fileinfo.html#afff0e275d5bced72a4ac919db88e45fc">file_version</a> = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(version);
<a name="l04875"></a>04875         fileinfo.<a class="code" href="struct_rig_def_1_1_fileinfo.html#a1634422ae30e602e9b20bafd4c59bb1e">_has_file_version_set</a> = <span class="keyword">true</span>;
<a name="l04876"></a>04876     }
<a name="l04877"></a>04877 
<a name="l04878"></a>04878     <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;file_info = boost::shared_ptr&lt;Fileinfo&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_fileinfo.html">Fileinfo</a>(fileinfo) );
<a name="l04879"></a>04879 }
<a name="l04880"></a>04880 
<a name="l04881"></a><a class="code" href="class_rig_def_1_1_parser.html#aa5e786b8c0b0bba8b15203ac0209bf84">04881</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aa5e786b8c0b0bba8b15203ac0209bf84">Parser::ParseRopes</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04882"></a>04882 {
<a name="l04883"></a>04883     boost::smatch results;
<a name="l04884"></a>04884     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_ROPES))
<a name="l04885"></a>04885     {
<a name="l04886"></a>04886         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04887"></a>04887         <span class="keywordflow">return</span>;
<a name="l04888"></a>04888     }
<a name="l04889"></a>04889     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04890"></a>04890 
<a name="l04891"></a>04891     <a class="code" href="struct_rig_def_1_1_rope.html">Rope</a> rope;
<a name="l04892"></a>04892     rope.<a class="code" href="struct_rig_def_1_1_rope.html#a683bb747ac66dc46f32b9202582c33da">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l04893"></a>04893     rope.<a class="code" href="struct_rig_def_1_1_rope.html#a8bc57fcbde4261780ba36860dba82e54">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l04894"></a>04894     rope.<a class="code" href="struct_rig_def_1_1_rope.html#aca715ade3aa0c0029f0f613e3713830c">root_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04895"></a>04895     rope.<a class="code" href="struct_rig_def_1_1_rope.html#ac0918cf76f8fd8694c09aedee559abc5">end_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l04896"></a>04896 
<a name="l04897"></a>04897     <span class="keywordflow">if</span> (results[4].matched)
<a name="l04898"></a>04898     {
<a name="l04899"></a>04899         std::string options_str = results[4].str();
<a name="l04900"></a>04900         <span class="keyword">const</span> <span class="keywordtype">char</span> options_char = options_str.at(0);
<a name="l04901"></a>04901         <span class="keywordflow">if</span> (options_char == <span class="charliteral">&#39;i&#39;</span>)
<a name="l04902"></a>04902         {
<a name="l04903"></a>04903             rope.<a class="code" href="struct_rig_def_1_1_rope.html#a723d1873f1b3ae5175a1746b1b3cde73">invisible</a> = <span class="keyword">true</span>;
<a name="l04904"></a>04904             rope.<a class="code" href="struct_rig_def_1_1_rope.html#a488731f84696c5353405f90b9661a888">_has_invisible_set</a> = <span class="keyword">true</span>;
<a name="l04905"></a>04905         }
<a name="l04906"></a>04906         <span class="keywordflow">else</span>
<a name="l04907"></a>04907         {
<a name="l04908"></a>04908             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Ignoring invalid flag: &quot;</span>) + options_char);
<a name="l04909"></a>04909         }
<a name="l04910"></a>04910     }
<a name="l04911"></a>04911 
<a name="l04912"></a>04912     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ropes.push_back(rope);
<a name="l04913"></a>04913 }
<a name="l04914"></a>04914 
<a name="l04915"></a><a class="code" href="class_rig_def_1_1_parser.html#a6a543c6eee67415eea81c87478dbd81b">04915</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a6a543c6eee67415eea81c87478dbd81b">Parser::ParseRopables</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04916"></a>04916 {
<a name="l04917"></a>04917     boost::smatch results;
<a name="l04918"></a>04918     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_ROPABLES))
<a name="l04919"></a>04919     {
<a name="l04920"></a>04920         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04921"></a>04921         <span class="keywordflow">return</span>;
<a name="l04922"></a>04922     }
<a name="l04923"></a>04923     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04924"></a>04924 
<a name="l04925"></a>04925     <a class="code" href="struct_rig_def_1_1_ropable.html">Ropable</a> ropable;
<a name="l04926"></a>04926     ropable.<a class="code" href="struct_rig_def_1_1_ropable.html#ad7c7f6defb128879b79c33b8e883cad4">node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04927"></a>04927 
<a name="l04928"></a>04928     <span class="keywordflow">if</span> (results[3].matched)
<a name="l04929"></a>04929     {
<a name="l04930"></a>04930         ropable.<a class="code" href="struct_rig_def_1_1_ropable.html#aee8681f82ec839e672e483711a045452">group</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[3]);
<a name="l04931"></a>04931         ropable.<a class="code" href="struct_rig_def_1_1_ropable.html#a04dd808dcf2a5f8c082c8ccf6e143da1">_has_group_set</a> = <span class="keyword">true</span>;
<a name="l04932"></a>04932 
<a name="l04933"></a>04933         <span class="keywordflow">if</span> (results[5].matched)
<a name="l04934"></a>04934         {
<a name="l04935"></a>04935             <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> multilock = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[5]);
<a name="l04936"></a>04936             ropable.<a class="code" href="struct_rig_def_1_1_ropable.html#aef6accf08290580c74f19adfb631abe7">multilock</a> = multilock &gt; 0;
<a name="l04937"></a>04937             ropable.<a class="code" href="struct_rig_def_1_1_ropable.html#a2722cfe80f20df63da499a04f4156beb">_has_multilock_set</a> = <span class="keyword">true</span>;
<a name="l04938"></a>04938         }
<a name="l04939"></a>04939     }
<a name="l04940"></a>04940 
<a name="l04941"></a>04941     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;ropables.push_back(ropable);
<a name="l04942"></a>04942 }
<a name="l04943"></a>04943 
<a name="l04944"></a><a class="code" href="class_rig_def_1_1_parser.html#a05de583f8e4730e5c27e0354eb163c25">04944</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a05de583f8e4730e5c27e0354eb163c25">Parser::ParseRailGroups</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04945"></a>04945 {
<a name="l04946"></a>04946     boost::smatch results;
<a name="l04947"></a>04947     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_RAILGROUPS))
<a name="l04948"></a>04948     {
<a name="l04949"></a>04949         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04950"></a>04950         <span class="keywordflow">return</span>;
<a name="l04951"></a>04951     }
<a name="l04952"></a>04952     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04953"></a>04953 
<a name="l04954"></a>04954     <a class="code" href="struct_rig_def_1_1_rail_group.html">RailGroup</a> railgroup;
<a name="l04955"></a>04955     railgroup.<a class="code" href="struct_rig_def_1_1_rail_group.html#a81c2cc3edae5a3a9bf50eff2119fa996">id</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[1]);
<a name="l04956"></a>04956 
<a name="l04957"></a>04957     <span class="comment">/* Node list */</span>
<a name="l04958"></a>04958     <span class="comment">/* Just use the split/trim/compare method */</span>
<a name="l04959"></a>04959     Ogre::StringVector tokens = Ogre::StringUtil::split(results[2].str(), <span class="stringliteral">&quot;,&quot;</span>);
<a name="l04960"></a>04960     <span class="keywordflow">for</span> (<span class="keyword">auto</span> itor = tokens.begin(); itor != tokens.end(); itor++)
<a name="l04961"></a>04961     {
<a name="l04962"></a>04962         railgroup.<a class="code" href="struct_rig_def_1_1_rail_group.html#a3681d82bc0eeea15944595c83ab6551b">node_list</a>.push_back( <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(*itor));
<a name="l04963"></a>04963     }
<a name="l04964"></a>04964 
<a name="l04965"></a>04965     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;railgroups.push_back(railgroup);
<a name="l04966"></a>04966 }
<a name="l04967"></a>04967 
<a name="l04968"></a><a class="code" href="class_rig_def_1_1_parser.html#a92308cd2682122faee6fc7217f44915c">04968</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a92308cd2682122faee6fc7217f44915c">Parser::ParseProps</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l04969"></a>04969 {
<a name="l04970"></a>04970     boost::smatch results;
<a name="l04971"></a>04971     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_PROPS))
<a name="l04972"></a>04972     {
<a name="l04973"></a>04973         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l04974"></a>04974         <span class="keywordflow">return</span>;
<a name="l04975"></a>04975     }
<a name="l04976"></a>04976     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l04977"></a>04977 
<a name="l04978"></a>04978     <a class="code" href="struct_rig_def_1_1_prop.html">Prop</a> prop;
<a name="l04979"></a>04979     prop.<a class="code" href="struct_rig_def_1_1_prop.html#a061b2a0c2196509a6232bcb112573ffa">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l04980"></a>04980     prop.<a class="code" href="struct_rig_def_1_1_prop.html#a1027c5b9c7a54bd98a776f2c0a310540">x_axis_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l04981"></a>04981     prop.<a class="code" href="struct_rig_def_1_1_prop.html#aa8d678a71a4e0c2e05c2c30bbc1d2cfb">y_axis_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l04982"></a>04982 
<a name="l04983"></a>04983     prop.<a class="code" href="struct_rig_def_1_1_prop.html#a36e797f7df54b7a2657a978eb7da45a9">offset</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l04984"></a>04984     prop.<a class="code" href="struct_rig_def_1_1_prop.html#a36e797f7df54b7a2657a978eb7da45a9">offset</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[9]);
<a name="l04985"></a>04985     prop.<a class="code" href="struct_rig_def_1_1_prop.html#a36e797f7df54b7a2657a978eb7da45a9">offset</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l04986"></a>04986 
<a name="l04987"></a>04987     prop.<a class="code" href="struct_rig_def_1_1_prop.html#af2a8c18b7068f61691e926c6496ec546">rotation</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[13]);
<a name="l04988"></a>04988     prop.<a class="code" href="struct_rig_def_1_1_prop.html#af2a8c18b7068f61691e926c6496ec546">rotation</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[15]);
<a name="l04989"></a>04989     prop.<a class="code" href="struct_rig_def_1_1_prop.html#af2a8c18b7068f61691e926c6496ec546">rotation</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[17]);
<a name="l04990"></a>04990 
<a name="l04991"></a>04991     prop.<a class="code" href="struct_rig_def_1_1_prop.html#a5705650fcc106405afbb2d5b25839fa0">mesh_name</a> = results[19];
<a name="l04992"></a>04992 
<a name="l04993"></a>04993     <span class="comment">/* Special props */</span>
<a name="l04994"></a>04994     boost::smatch special_results;
<a name="l04995"></a>04995     <span class="keywordflow">if</span> (boost::regex_search(prop.<a class="code" href="struct_rig_def_1_1_prop.html#a5705650fcc106405afbb2d5b25839fa0">mesh_name</a>, special_results, Regexes::SPECIAL_PROPS))
<a name="l04996"></a>04996     {
<a name="l04997"></a>04997         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt;= 11; i++)
<a name="l04998"></a>04998         {
<a name="l04999"></a>04999             <span class="keywordflow">if</span> (special_results[i].matched)
<a name="l05000"></a>05000             {
<a name="l05001"></a>05001                 <span class="keywordflow">if</span> (i == 3 || i == 4) <span class="comment">/* Custom steering wheel */</span>
<a name="l05002"></a>05002                 {
<a name="l05003"></a>05003                     prop.<a class="code" href="struct_rig_def_1_1_prop.html#aec230d8aa9e9dbdd22c6b667ea6f88cd">special</a> = <a class="code" href="struct_rig_def_1_1_prop.html#a527c190718a4a96b07b7935fea5eff53">Prop::Special</a>(i);
<a name="l05004"></a>05004 
<a name="l05005"></a>05005                     std::string special_params = results[21];
<a name="l05006"></a>05006                     boost::smatch dashboard_results;
<a name="l05007"></a>05007                     <span class="keywordflow">if</span> (boost::regex_search(special_params, dashboard_results, Regexes::SPECIAL_PROP_DASHBOARD))
<a name="l05008"></a>05008                     {
<a name="l05009"></a>05009                         <span class="keywordflow">if</span> ( dashboard_results[4].matched )
<a name="l05010"></a>05010                         {
<a name="l05011"></a>05011                             prop.<a class="code" href="struct_rig_def_1_1_prop.html#ab78677043d84eb34e7bb69ca60126fcd">special_prop_steering_wheel</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_steering_wheel_special.html#a08d4ff12869ba075e81417b2cd5ac97e">offset</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(dashboard_results[4]);
<a name="l05012"></a>05012 
<a name="l05013"></a>05013                             <span class="keywordflow">if</span> ( dashboard_results[7].matched )
<a name="l05014"></a>05014                             {
<a name="l05015"></a>05015                                 prop.<a class="code" href="struct_rig_def_1_1_prop.html#ab78677043d84eb34e7bb69ca60126fcd">special_prop_steering_wheel</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_steering_wheel_special.html#a08d4ff12869ba075e81417b2cd5ac97e">offset</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(dashboard_results[7]);
<a name="l05016"></a>05016 
<a name="l05017"></a>05017                                 <span class="keywordflow">if</span> ( dashboard_results[10].matched )
<a name="l05018"></a>05018                                 {
<a name="l05019"></a>05019                                     prop.<a class="code" href="struct_rig_def_1_1_prop.html#ab78677043d84eb34e7bb69ca60126fcd">special_prop_steering_wheel</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_steering_wheel_special.html#a08d4ff12869ba075e81417b2cd5ac97e">offset</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(dashboard_results[10]);
<a name="l05020"></a>05020                                     prop.<a class="code" href="struct_rig_def_1_1_prop.html#ab78677043d84eb34e7bb69ca60126fcd">special_prop_steering_wheel</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_steering_wheel_special.html#af3a382cad32f86f5fa146faa47f81b73">_offset_is_set</a> = <span class="keyword">true</span>;
<a name="l05021"></a>05021                                     prop.<a class="code" href="struct_rig_def_1_1_prop.html#ab78677043d84eb34e7bb69ca60126fcd">special_prop_steering_wheel</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_steering_wheel_special.html#a54fa9dadca48121b36ad3959fe4f2183">mesh_name</a> = dashboard_results[1];
<a name="l05022"></a>05022 
<a name="l05023"></a>05023                                     <span class="keywordflow">if</span> ( dashboard_results[13].matched )
<a name="l05024"></a>05024                                     {
<a name="l05025"></a>05025                                         prop.<a class="code" href="struct_rig_def_1_1_prop.html#ab78677043d84eb34e7bb69ca60126fcd">special_prop_steering_wheel</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_steering_wheel_special.html#a10c3362a328083c73eb118b936dd5cb4">rotation_angle</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(dashboard_results[13]);
<a name="l05026"></a>05026                                     }
<a name="l05027"></a>05027                                 }
<a name="l05028"></a>05028                             }
<a name="l05029"></a>05029                         }
<a name="l05030"></a>05030                     }
<a name="l05031"></a>05031                 }
<a name="l05032"></a>05032                 <span class="keywordflow">else</span> <span class="keywordflow">if</span> (i == 9) <span class="comment">/* Beacon */</span>
<a name="l05033"></a>05033                 {
<a name="l05034"></a>05034                     prop.<a class="code" href="struct_rig_def_1_1_prop.html#aec230d8aa9e9dbdd22c6b667ea6f88cd">special</a> = <a class="code" href="struct_rig_def_1_1_prop.html#a527c190718a4a96b07b7935fea5eff53">Prop::Special</a>(i);
<a name="l05035"></a>05035                     std::string special_params = results[15];
<a name="l05036"></a>05036                     boost::smatch beacon_results;
<a name="l05037"></a>05037                     <span class="keywordflow">if</span> (boost::regex_search(special_params, beacon_results, Regexes::SPECIAL_PROP_BEACON))
<a name="l05038"></a>05038                     {
<a name="l05039"></a>05039                         <span class="comment">/* Flare material name */</span>
<a name="l05040"></a>05040                         prop.<a class="code" href="struct_rig_def_1_1_prop.html#a97356eecd5c27e41f5b92e524a84adc4">special_prop_beacon</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_beacon_special.html#a990d4c1ac0a5100bac56c814b59dfaa7">flare_material_name</a> = beacon_results[1];
<a name="l05041"></a>05041                         Ogre::StringUtil::trim(prop.<a class="code" href="struct_rig_def_1_1_prop.html#a97356eecd5c27e41f5b92e524a84adc4">special_prop_beacon</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_beacon_special.html#a990d4c1ac0a5100bac56c814b59dfaa7">flare_material_name</a>);
<a name="l05042"></a>05042                         <span class="comment">/* Color */</span>
<a name="l05043"></a>05043                         prop.<a class="code" href="struct_rig_def_1_1_prop.html#a97356eecd5c27e41f5b92e524a84adc4">special_prop_beacon</a>.<a class="code" href="struct_rig_def_1_1_prop_1_1_beacon_special.html#aa31bca04e9640d69b1eb0c0afe9fc9d2">color</a> = Ogre::ColourValue(
<a name="l05044"></a>05044                             <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(beacon_results[3]),
<a name="l05045"></a>05045                             <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(beacon_results[5]),
<a name="l05046"></a>05046                             <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(beacon_results[7])
<a name="l05047"></a>05047                         );
<a name="l05048"></a>05048                     }
<a name="l05049"></a>05049                 }
<a name="l05050"></a>05050                 <span class="keywordflow">else</span>
<a name="l05051"></a>05051                 {
<a name="l05052"></a>05052                     prop.<a class="code" href="struct_rig_def_1_1_prop.html#aec230d8aa9e9dbdd22c6b667ea6f88cd">special</a> = <a class="code" href="struct_rig_def_1_1_prop.html#a527c190718a4a96b07b7935fea5eff53">Prop::Special</a>(i);
<a name="l05053"></a>05053                 }
<a name="l05054"></a>05054                 <span class="keywordflow">break</span>;
<a name="l05055"></a>05055             }
<a name="l05056"></a>05056         }
<a name="l05057"></a>05057     }
<a name="l05058"></a>05058 
<a name="l05059"></a>05059     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;props.push_back(prop);
<a name="l05060"></a>05060 }
<a name="l05061"></a>05061 
<a name="l05062"></a><a class="code" href="class_rig_def_1_1_parser.html#a3353082f0c16f09e49f656171eb3b9cf">05062</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a3353082f0c16f09e49f656171eb3b9cf">Parser::ParsePistonprops</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05063"></a>05063 {
<a name="l05064"></a>05064     boost::smatch results;
<a name="l05065"></a>05065     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_PISTONPROPS))
<a name="l05066"></a>05066     {
<a name="l05067"></a>05067         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05068"></a>05068         <span class="keywordflow">return</span>;
<a name="l05069"></a>05069     }
<a name="l05070"></a>05070     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05071"></a>05071 
<a name="l05072"></a>05072     <a class="code" href="struct_rig_def_1_1_pistonprop.html">Pistonprop</a> pistonprop;
<a name="l05073"></a>05073     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#a1c08289b70db9067bc0e2c84606671fe">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l05074"></a>05074     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#a1369fcb3df80349a65bb880c2d93e5e3">axis_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l05075"></a>05075     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#adfd32e849240dbff62d7d08d8941ae2c">blade_tip_nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l05076"></a>05076     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#adfd32e849240dbff62d7d08d8941ae2c">blade_tip_nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[4]);
<a name="l05077"></a>05077     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#adfd32e849240dbff62d7d08d8941ae2c">blade_tip_nodes</a>[2] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[5]);
<a name="l05078"></a>05078     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#adfd32e849240dbff62d7d08d8941ae2c">blade_tip_nodes</a>[3] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[6]);
<a name="l05079"></a>05079 
<a name="l05080"></a>05080     <span class="comment">/* Couplenode */</span>
<a name="l05081"></a>05081     <span class="keywordflow">if</span> (results[9].matched)
<a name="l05082"></a>05082     {
<a name="l05083"></a>05083         pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#ad38783a613008c910358d61b75a53514">couple_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[9]);
<a name="l05084"></a>05084         pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#a58110aea79e235bd5403c779e0f3af56">_couple_node_set</a> = <span class="keyword">true</span>;
<a name="l05085"></a>05085     }
<a name="l05086"></a>05086 
<a name="l05087"></a>05087     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#a58cc04108e8cc80fc9649984ba797c9c">turbine_power_kW</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[10]);
<a name="l05088"></a>05088     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#a7e2688d04a4a069e7db2811c7c01b391">pitch</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[11]);
<a name="l05089"></a>05089     pistonprop.<a class="code" href="struct_rig_def_1_1_pistonprop.html#a4a20e2b4dc9536e37ec2c8d864d513a6">airfoil</a> = results[12];
<a name="l05090"></a>05090 
<a name="l05091"></a>05091     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;pistonprops.push_back(pistonprop);
<a name="l05092"></a>05092 
<a name="l05093"></a>05093 }
<a name="l05094"></a>05094 
<a name="l05095"></a><a class="code" href="class_rig_def_1_1_parser.html#af14675f517ec0c342adc19ef3d4dc263">05095</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#af14675f517ec0c342adc19ef3d4dc263">Parser::ParseParticles</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05096"></a>05096 {
<a name="l05097"></a>05097     boost::smatch results;
<a name="l05098"></a>05098     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_PARTICLES))
<a name="l05099"></a>05099     {
<a name="l05100"></a>05100         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05101"></a>05101         <span class="keywordflow">return</span>;
<a name="l05102"></a>05102     }
<a name="l05103"></a>05103     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05104"></a>05104 
<a name="l05105"></a>05105     <a class="code" href="struct_rig_def_1_1_particle.html">Particle</a> particle;
<a name="l05106"></a>05106     particle.<a class="code" href="struct_rig_def_1_1_particle.html#a124a9d68981f024ec468e1bafc31bdc0">emitter_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l05107"></a>05107     particle.<a class="code" href="struct_rig_def_1_1_particle.html#a6dd0aa51141e1c4368837b37ae8135a3">reference_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l05108"></a>05108     particle.<a class="code" href="struct_rig_def_1_1_particle.html#add2234f956e03de6e48774758e51cad5">particle_system_name</a> = results[3];
<a name="l05109"></a>05109 
<a name="l05110"></a>05110     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;particles.push_back(particle);
<a name="l05111"></a>05111 }
<a name="l05112"></a>05112 
<a name="l05113"></a><a class="code" href="class_rig_def_1_1_parser.html#aeef236d9824cfd26d4637fd01d0d8721">05113</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aeef236d9824cfd26d4637fd01d0d8721">Parser::ParseNode</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05114"></a>05114 {
<a name="l05115"></a>05115     <span class="keyword">const</span> <span class="keywordtype">bool</span> version_2 = <span class="keyword">false</span>;
<a name="l05116"></a>05116     <a class="code" href="class_rig_def_1_1_parser.html#ab6e296b5791583caf31e42493a116cf2">_ParseSectionsNodesNodes2</a>(line, version_2);
<a name="l05117"></a>05117 }
<a name="l05118"></a>05118 
<a name="l05119"></a><a class="code" href="class_rig_def_1_1_parser.html#a70c0c03437114386dcbf0ea1daa4412d">05119</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a70c0c03437114386dcbf0ea1daa4412d">Parser::ParseNode2</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05120"></a>05120 {
<a name="l05121"></a>05121     <span class="keyword">const</span> <span class="keywordtype">bool</span> version_2 = <span class="keyword">true</span>;
<a name="l05122"></a>05122     <a class="code" href="class_rig_def_1_1_parser.html#ab6e296b5791583caf31e42493a116cf2">_ParseSectionsNodesNodes2</a>(line, version_2);
<a name="l05123"></a>05123 }
<a name="l05124"></a>05124 
<a name="l05125"></a>05125 <span class="comment">// Static</span>
<a name="l05126"></a><a class="code" href="class_rig_def_1_1_parser.html#ac1a3ed20e65d2ad2819fe562dd3178c8">05126</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ac1a3ed20e65d2ad2819fe562dd3178c8">Parser::_TrimTrailingComments</a>(std::string <span class="keyword">const</span> &amp; line_in, std::string &amp; line_out)
<a name="l05127"></a>05127 {
<a name="l05128"></a>05128     <span class="comment">// Trim trailing comment</span>
<a name="l05129"></a>05129     <span class="comment">// We need to handle a case of lines as [keyword 1, 2, 3 ;;///// Comment!]</span>
<a name="l05130"></a>05130     <span class="keywordtype">int</span> comment_start = line_in.find_first_of(<span class="stringliteral">&quot;;&quot;</span>);
<a name="l05131"></a>05131     <span class="keywordflow">if</span> (comment_start != Ogre::String::npos)
<a name="l05132"></a>05132     {
<a name="l05133"></a>05133         line_out = line_in.substr(0, comment_start);
<a name="l05134"></a>05134         <span class="keywordflow">return</span>;
<a name="l05135"></a>05135     }
<a name="l05136"></a>05136     <span class="comment">// The [//Comment] is harder - the &#39;/&#39; character may also be present in DESCRIPTION arguments!</span>
<a name="l05137"></a>05137     comment_start = line_in.find_last_of(<span class="stringliteral">&quot;/&quot;</span>);
<a name="l05138"></a>05138     <span class="keywordflow">if</span> (comment_start != Ogre::String::npos)
<a name="l05139"></a>05139     {
<a name="l05140"></a>05140         <span class="keywordflow">while</span> (comment_start &gt;= 0)
<a name="l05141"></a>05141         {
<a name="l05142"></a>05142             <span class="keywordtype">char</span> c = line_in[comment_start - 1];
<a name="l05143"></a>05143             <span class="keywordflow">if</span> (c != <span class="charliteral">&#39;/&#39;</span> &amp;&amp; c != <span class="charliteral">&#39; &#39;</span> &amp;&amp; c != <span class="charliteral">&#39;\t&#39;</span>)
<a name="l05144"></a>05144             {
<a name="l05145"></a>05145                 <span class="keywordflow">break</span>; <span class="comment">// Start of comment found</span>
<a name="l05146"></a>05146             }
<a name="l05147"></a>05147             --comment_start;
<a name="l05148"></a>05148         }
<a name="l05149"></a>05149         line_out = line_in.substr(0, comment_start);
<a name="l05150"></a>05150         <span class="keywordflow">return</span>;
<a name="l05151"></a>05151     }
<a name="l05152"></a>05152     <span class="comment">// No comment found</span>
<a name="l05153"></a>05153     line_out = line_in;
<a name="l05154"></a>05154 }
<a name="l05155"></a>05155 
<a name="l05156"></a><a class="code" href="class_rig_def_1_1_parser.html#a38b8cabf035e978b04373b9c6f872803">05156</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a38b8cabf035e978b04373b9c6f872803">Parser::_ParseNodesLegacyMethod</a>(Ogre::String line, <span class="keywordtype">bool</span> is_version_2)
<a name="l05157"></a>05157 {
<a name="l05158"></a>05158     Ogre::StringUtil::trim(line);
<a name="l05159"></a>05159     Ogre::StringVector args;
<a name="l05160"></a>05160     <span class="keywordtype">int</span> num_args = this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#ac9e266992c2efbeddfbf09f430a61b93">_ParseArgs</a>(line, args, 4u);
<a name="l05161"></a>05161     <span class="keywordflow">if</span> (num_args == -1)
<a name="l05162"></a>05162     {
<a name="l05163"></a>05163         <span class="keywordflow">return</span>; <span class="comment">// Error already logged</span>
<a name="l05164"></a>05164     }
<a name="l05165"></a>05165 
<a name="l05166"></a>05166     <a class="code" href="struct_rig_def_1_1_node.html">Node</a> node;
<a name="l05167"></a>05167     node.<a class="code" href="struct_rig_def_1_1_node.html#aed9625dea7293e9f05cb511e35596eef">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l05168"></a>05168     node.<a class="code" href="struct_rig_def_1_1_node.html#a5c1eee086ae4f98c4156ca8cf8985d21">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l05169"></a>05169     node.<a class="code" href="struct_rig_def_1_1_node.html#ad06861ab140cf8a6d015f99edd24e15a">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l05170"></a>05170 
<a name="l05171"></a>05171     <span class="keywordflow">if</span> (is_version_2)
<a name="l05172"></a>05172     {
<a name="l05173"></a>05173         node.<a class="code" href="struct_rig_def_1_1_node.html#a6becadb0fb729208ba9327f621561403">id</a>.<a class="code" href="class_rig_def_1_1_node_1_1_id.html#a30fc558c055857280fb2adba21a08eea">SetStr</a>(args[0]);
<a name="l05174"></a>05174         <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l05175"></a>05175         {
<a name="l05176"></a>05176             <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a0d1350e2b0c44cff66a9c73c17baf9dd">AddNamedNode</a>(args[0]);
<a name="l05177"></a>05177         }
<a name="l05178"></a>05178         <a class="code" href="class_rig_def_1_1_parser.html#a60ed70e13af44481c8ec3ab555a0c30d" title="Parser state.">m_any_named_node_defined</a> = <span class="keyword">true</span>; <span class="comment">// For import logic</span>
<a name="l05179"></a>05179     }
<a name="l05180"></a>05180     <span class="keywordflow">else</span>
<a name="l05181"></a>05181     {
<a name="l05182"></a>05182         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> node_num = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(args[0]));
<a name="l05183"></a>05183         node.<a class="code" href="struct_rig_def_1_1_node.html#a6becadb0fb729208ba9327f621561403">id</a>.<a class="code" href="class_rig_def_1_1_node_1_1_id.html#a0c74f13391cb2b7dd03b0810766a0c7d">SetNum</a>(node_num);
<a name="l05184"></a>05184         <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l05185"></a>05185         {
<a name="l05186"></a>05186             <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#ad9fb7d3deecbb9f94ac85ff061459795">AddNumberedNode</a>(node_num);
<a name="l05187"></a>05187         }
<a name="l05188"></a>05188     }
<a name="l05189"></a>05189     node.<a class="code" href="struct_rig_def_1_1_node.html#ac760c8ef35c83b3eed3f284c161314e0">position</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(args[1]);
<a name="l05190"></a>05190     node.<a class="code" href="struct_rig_def_1_1_node.html#ac760c8ef35c83b3eed3f284c161314e0">position</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(args[2]);
<a name="l05191"></a>05191     node.<a class="code" href="struct_rig_def_1_1_node.html#ac760c8ef35c83b3eed3f284c161314e0">position</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(args[3]);
<a name="l05192"></a>05192 
<a name="l05193"></a>05193     <span class="keywordflow">if</span> (num_args &gt; 4) <span class="comment">/* Has options? */</span>
<a name="l05194"></a>05194     {
<a name="l05195"></a>05195         <a class="code" href="class_rig_def_1_1_parser.html#aa0448d0c351e3163aa33245881947a40">_ParseNodeOptions</a>(node.<a class="code" href="struct_rig_def_1_1_node.html#a5f1dd7c05dbec4aaf10ddc4442b4bb16" title="Bit flags.">options</a>, args[4]);
<a name="l05196"></a>05196 
<a name="l05197"></a>05197         <span class="keywordflow">if</span> (num_args &gt; 5) <span class="comment">/* Has load weight override? */</span>
<a name="l05198"></a>05198         {
<a name="l05199"></a>05199             <span class="keywordflow">if</span> (node.<a class="code" href="struct_rig_def_1_1_node.html#a5f1dd7c05dbec4aaf10ddc4442b4bb16" title="Bit flags.">options</a> &amp; Node::OPTION_l_LOAD_WEIGHT)
<a name="l05200"></a>05200             {
<a name="l05201"></a>05201                 node.<a class="code" href="struct_rig_def_1_1_node.html#ab2883d7455cdcc7eae1dc959c5c61a0c">load_weight_override</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(args[5]);
<a name="l05202"></a>05202                 node.<a class="code" href="struct_rig_def_1_1_node.html#a58edb162b6bce2e19d0f65acb2393602">_has_load_weight_override</a> = <span class="keyword">true</span>;
<a name="l05203"></a>05203             }
<a name="l05204"></a>05204             <span class="keywordflow">else</span>
<a name="l05205"></a>05205             {
<a name="l05206"></a>05206                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Node has load-weight-override value specified, but option &#39;l&#39; is not present. Ignoring value...&quot;</span>);
<a name="l05207"></a>05207             }
<a name="l05208"></a>05208         }
<a name="l05209"></a>05209     }
<a name="l05210"></a>05210 
<a name="l05211"></a>05211     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;nodes.push_back(node);
<a name="l05212"></a>05212 }
<a name="l05213"></a>05213 
<a name="l05214"></a><a class="code" href="class_rig_def_1_1_parser.html#ab6e296b5791583caf31e42493a116cf2">05214</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ab6e296b5791583caf31e42493a116cf2">Parser::_ParseSectionsNodesNodes2</a>(Ogre::String <span class="keyword">const</span> &amp; line_in, <span class="keywordtype">bool</span> is_version_2)
<a name="l05215"></a>05215 {
<a name="l05216"></a>05216     <span class="comment">// Strip trailing comments</span>
<a name="l05217"></a>05217     std::string line;
<a name="l05218"></a>05218     <a class="code" href="class_rig_def_1_1_parser.html#ac1a3ed20e65d2ad2819fe562dd3178c8">Parser::_TrimTrailingComments</a>(line_in, line);
<a name="l05219"></a>05219 
<a name="l05220"></a>05220     <span class="comment">// Parse line</span>
<a name="l05221"></a>05221     boost::smatch results;
<a name="l05222"></a>05222     <span class="keyword">const</span> boost::regex* regex_ptr = &amp;Regexes::SECTION_NODES;
<a name="l05223"></a>05223     <span class="keywordflow">if</span> (is_version_2)
<a name="l05224"></a>05224     {
<a name="l05225"></a>05225         regex_ptr = &amp;Regexes::SECTION_NODES_2;
<a name="l05226"></a>05226     }
<a name="l05227"></a>05227     <span class="keywordflow">if</span> (! boost::regex_search(line, results, *regex_ptr))
<a name="l05228"></a>05228     {
<a name="l05229"></a>05229         <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>()) <span class="comment">// Are we imporing legacy fileformat?</span>
<a name="l05230"></a>05230         {
<a name="l05231"></a>05231             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Failed to parse using safe method, falling back to classic method.&quot;</span>);
<a name="l05232"></a>05232             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a38b8cabf035e978b04373b9c6f872803">_ParseNodesLegacyMethod</a>(line, is_version_2);
<a name="l05233"></a>05233         }
<a name="l05234"></a>05234         <span class="keywordflow">else</span>
<a name="l05235"></a>05235         {
<a name="l05236"></a>05236             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05237"></a>05237         }
<a name="l05238"></a>05238         <span class="keywordflow">return</span>;
<a name="l05239"></a>05239     }
<a name="l05240"></a>05240     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05241"></a>05241 
<a name="l05242"></a>05242     <span class="keyword">const</span> <span class="keywordtype">int</span> result_pos_options = 11;
<a name="l05243"></a>05243     <span class="keyword">const</span> <span class="keywordtype">int</span> result_pos_loadweightoverride = 15;
<a name="l05244"></a>05244 
<a name="l05245"></a>05245     <a class="code" href="struct_rig_def_1_1_node.html">Node</a> node;
<a name="l05246"></a>05246     node.<a class="code" href="struct_rig_def_1_1_node.html#aed9625dea7293e9f05cb511e35596eef">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l05247"></a>05247     node.<a class="code" href="struct_rig_def_1_1_node.html#a5c1eee086ae4f98c4156ca8cf8985d21">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l05248"></a>05248     node.<a class="code" href="struct_rig_def_1_1_node.html#ad06861ab140cf8a6d015f99edd24e15a">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l05249"></a>05249 
<a name="l05250"></a>05250     <span class="keywordflow">if</span> (is_version_2)
<a name="l05251"></a>05251     {
<a name="l05252"></a>05252         node.<a class="code" href="struct_rig_def_1_1_node.html#a6becadb0fb729208ba9327f621561403">id</a>.<a class="code" href="class_rig_def_1_1_node_1_1_id.html#a30fc558c055857280fb2adba21a08eea">SetStr</a>(results[1]);
<a name="l05253"></a>05253         <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l05254"></a>05254         {
<a name="l05255"></a>05255             <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a0d1350e2b0c44cff66a9c73c17baf9dd">AddNamedNode</a>(results[1]);
<a name="l05256"></a>05256         }
<a name="l05257"></a>05257         <a class="code" href="class_rig_def_1_1_parser.html#a60ed70e13af44481c8ec3ab555a0c30d" title="Parser state.">m_any_named_node_defined</a> = <span class="keyword">true</span>; <span class="comment">// For import logic</span>
<a name="l05258"></a>05258     }
<a name="l05259"></a>05259     <span class="keywordflow">else</span>
<a name="l05260"></a>05260     {
<a name="l05261"></a>05261         <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> node_num = <span class="keyword">static_cast&lt;</span><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span><span class="keyword">&gt;</span>(<a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[1]));
<a name="l05262"></a>05262         node.<a class="code" href="struct_rig_def_1_1_node.html#a6becadb0fb729208ba9327f621561403">id</a>.<a class="code" href="class_rig_def_1_1_node_1_1_id.html#a0c74f13391cb2b7dd03b0810766a0c7d">SetNum</a>(node_num);
<a name="l05263"></a>05263         <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l05264"></a>05264         {
<a name="l05265"></a>05265             <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#ad9fb7d3deecbb9f94ac85ff061459795">AddNumberedNode</a>(node_num);
<a name="l05266"></a>05266         }
<a name="l05267"></a>05267     }
<a name="l05268"></a>05268     node.<a class="code" href="struct_rig_def_1_1_node.html#ac760c8ef35c83b3eed3f284c161314e0">position</a>.x = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l05269"></a>05269     node.<a class="code" href="struct_rig_def_1_1_node.html#ac760c8ef35c83b3eed3f284c161314e0">position</a>.y = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l05270"></a>05270     node.<a class="code" href="struct_rig_def_1_1_node.html#ac760c8ef35c83b3eed3f284c161314e0">position</a>.z = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[7]);
<a name="l05271"></a>05271 
<a name="l05272"></a>05272     <span class="keywordflow">if</span> (results[result_pos_options].matched) <span class="comment">/* Has options? */</span>
<a name="l05273"></a>05273     {
<a name="l05274"></a>05274         <a class="code" href="class_rig_def_1_1_parser.html#aa0448d0c351e3163aa33245881947a40">_ParseNodeOptions</a>(node.<a class="code" href="struct_rig_def_1_1_node.html#a5f1dd7c05dbec4aaf10ddc4442b4bb16" title="Bit flags.">options</a>, results[result_pos_options]);
<a name="l05275"></a>05275 
<a name="l05276"></a>05276         <span class="keywordflow">if</span> (results[result_pos_loadweightoverride].matched) <span class="comment">/* Has load weight override? */</span>
<a name="l05277"></a>05277         {
<a name="l05278"></a>05278             <span class="keywordflow">if</span> (node.<a class="code" href="struct_rig_def_1_1_node.html#a5f1dd7c05dbec4aaf10ddc4442b4bb16" title="Bit flags.">options</a> &amp; Node::OPTION_l_LOAD_WEIGHT)
<a name="l05279"></a>05279             {
<a name="l05280"></a>05280                 node.<a class="code" href="struct_rig_def_1_1_node.html#ab2883d7455cdcc7eae1dc959c5c61a0c">load_weight_override</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[result_pos_loadweightoverride]);
<a name="l05281"></a>05281                 node.<a class="code" href="struct_rig_def_1_1_node.html#a58edb162b6bce2e19d0f65acb2393602">_has_load_weight_override</a> = <span class="keyword">true</span>;
<a name="l05282"></a>05282             }
<a name="l05283"></a>05283             <span class="keywordflow">else</span>
<a name="l05284"></a>05284             {
<a name="l05285"></a>05285                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Node has load-weight-override value specified, but option &#39;l&#39; is not present. Ignoring value...&quot;</span>);
<a name="l05286"></a>05286             }
<a name="l05287"></a>05287         }
<a name="l05288"></a>05288     }
<a name="l05289"></a>05289 
<a name="l05290"></a>05290     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;nodes.push_back(node);
<a name="l05291"></a>05291 }
<a name="l05292"></a>05292 
<a name="l05293"></a><a class="code" href="class_rig_def_1_1_parser.html#a3f901124d8c3c2b4bd35cd341a9207c9">05293</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a3f901124d8c3c2b4bd35cd341a9207c9">Parser::ParseNodeCollision</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05294"></a>05294 {
<a name="l05295"></a>05295     boost::smatch results;
<a name="l05296"></a>05296     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_NODECOLLISION))
<a name="l05297"></a>05297     {
<a name="l05298"></a>05298         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05299"></a>05299         <span class="keywordflow">return</span>;
<a name="l05300"></a>05300     }
<a name="l05301"></a>05301     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05302"></a>05302 
<a name="l05303"></a>05303     <a class="code" href="struct_rig_def_1_1_node_collision.html">NodeCollision</a> node_collision;
<a name="l05304"></a>05304     node_collision.<a class="code" href="struct_rig_def_1_1_node_collision.html#a46d490927c22094289cd8ffa1ce6c521">node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l05305"></a>05305     node_collision.<a class="code" href="struct_rig_def_1_1_node_collision.html#a5e164f44839f86616c8c2c5dc60ee358">radius</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l05306"></a>05306     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;node_collisions.push_back(node_collision);
<a name="l05307"></a>05307 }
<a name="l05308"></a>05308 
<a name="l05309"></a><a class="code" href="class_rig_def_1_1_parser.html#a65bc45221430550391f457118db1ca83">05309</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a65bc45221430550391f457118db1ca83">Parser::ParseMinimass</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05310"></a>05310 {
<a name="l05311"></a>05311     boost::smatch results;
<a name="l05312"></a>05312     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_MINIMASS))
<a name="l05313"></a>05313     {
<a name="l05314"></a>05314         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05315"></a>05315         <span class="keywordflow">return</span>;
<a name="l05316"></a>05316     }
<a name="l05317"></a>05317     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05318"></a>05318 
<a name="l05319"></a>05319     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;_minimum_mass_set)
<a name="l05320"></a>05320     {
<a name="l05321"></a>05321         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Duplicate section &#39;minimass&#39;, ignoring...&quot;</span>);
<a name="l05322"></a>05322         <span class="keywordflow">return</span>;
<a name="l05323"></a>05323     }
<a name="l05324"></a>05324 
<a name="l05325"></a>05325     <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;minimum_mass = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[1]);
<a name="l05326"></a>05326     <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;_minimum_mass_set = <span class="keyword">true</span>;
<a name="l05327"></a>05327 }
<a name="l05328"></a>05328 
<a name="l05329"></a><a class="code" href="class_rig_def_1_1_parser.html#a73d91d4b6836f6367de2a4b7e272fffe">05329</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a73d91d4b6836f6367de2a4b7e272fffe">Parser::ParseFlexBodyWheel</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05330"></a>05330 {
<a name="l05331"></a>05331     boost::smatch results;
<a name="l05332"></a>05332     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_FLEXBODYWHEELS))
<a name="l05333"></a>05333     {
<a name="l05334"></a>05334         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a106625edfd1b75a9851898bc4c0357fa">ParseFlexBodyWheelUnsafe</a>(line);
<a name="l05335"></a>05335         <span class="keywordflow">return</span>;
<a name="l05336"></a>05336     }
<a name="l05337"></a>05337     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05338"></a>05338     <a class="code" href="struct_rig_def_1_1_flex_body_wheel.html">FlexBodyWheel</a> flex_body_wheel;
<a name="l05339"></a>05339     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a0c714a88324f6175af48909dea5b82ab">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l05340"></a>05340     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afda1fbd28f08d9e58295e37f9f9eca77">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l05341"></a>05341 
<a name="l05342"></a>05342     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#aba28567b0b52e5ec6fd64dfc0a5108bd">tyre_radius</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 1]);
<a name="l05343"></a>05343     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a8947716de1b3ef17a2da4706123647a5">rim_radius</a>         = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 3]);
<a name="l05344"></a>05344     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a7a96dd584f67f6db7367e3b9f883ef70">width</a>              = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[ 5]);
<a name="l05345"></a>05345     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>           = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[ 7]);
<a name="l05346"></a>05346     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[0]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[ 9]);
<a name="l05347"></a>05347     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[1]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[11]);
<a name="l05348"></a>05348     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[13]);
<a name="l05349"></a>05349     <span class="keywordtype">int</span> braking                        = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[15]);
<a name="l05350"></a>05350     <span class="keywordtype">int</span> propulsion                     = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (results[17]);
<a name="l05351"></a>05351     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afa59c7e5491ae69b016b3c1cf62c4eb4">reference_arm_node</a> = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (results[19]);
<a name="l05352"></a>05352     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a049388b5d59e7a9c8495826da07cabbe">mass</a>               = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[21]);
<a name="l05353"></a>05353     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#ad3d997d002b790fba62a9cf73690e94d">tyre_springiness</a>   = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[23]);
<a name="l05354"></a>05354     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a610463f462d96962e86e0121dbf94c62">tyre_damping</a>       = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[25]);
<a name="l05355"></a>05355     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#a7589328ba94874767a17f9d5431ca375">rim_springiness</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[27]);
<a name="l05356"></a>05356     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#ab83cd72d8fe87b9ccc698ca4aefb27da">rim_damping</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[29]);
<a name="l05357"></a>05357     <span class="keywordtype">char</span> side                          =                results[31].str().at(0);
<a name="l05358"></a>05358     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#a64678fa2a6ef6b255142d987e2e6c75e">rim_mesh_name</a>      =                results[33];
<a name="l05359"></a>05359     flex_body_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#a11b657fed9e49b2f395483964bc18d77">tyre_mesh_name</a>     =                results[35];
<a name="l05360"></a>05360 
<a name="l05361"></a>05361     this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a440c8af315cebc7319744f31d88c6b0f">VerifyAndProcessFlexBodyWheel</a>(line, flex_body_wheel, braking, propulsion, side);
<a name="l05362"></a>05362 }
<a name="l05363"></a>05363 
<a name="l05364"></a><a class="code" href="class_rig_def_1_1_parser.html#a106625edfd1b75a9851898bc4c0357fa">05364</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a106625edfd1b75a9851898bc4c0357fa">Parser::ParseFlexBodyWheelUnsafe</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05365"></a>05365 {
<a name="l05366"></a>05366     <a class="code" href="_rig_def___parser_8cpp.html#ae5b97963481353fca5413c56865a51cc" title="Parses line into &quot;values[]&quot; array and checks number of arguments.">PARSE_UNSAFE</a>(line, 16,
<a name="l05367"></a>05367     {
<a name="l05368"></a>05368         <a class="code" href="struct_rig_def_1_1_flex_body_wheel.html">FlexBodyWheel</a> flexbody_wheel;
<a name="l05369"></a>05369         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afda1fbd28f08d9e58295e37f9f9eca77">node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a>;
<a name="l05370"></a>05370         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a0c714a88324f6175af48909dea5b82ab">beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l05371"></a>05371 
<a name="l05372"></a>05372         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#aba28567b0b52e5ec6fd64dfc0a5108bd">tyre_radius</a>         = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 0]);
<a name="l05373"></a>05373         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a8947716de1b3ef17a2da4706123647a5">rim_radius</a>          = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 1]);
<a name="l05374"></a>05374         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a7a96dd584f67f6db7367e3b9f883ef70">width</a>               = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[ 2]);
<a name="l05375"></a>05375         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>            = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 3]);
<a name="l05376"></a>05376         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[0]            = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 4]);
<a name="l05377"></a>05377         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a9bdaffc0e3c81587a89c021abfce91c3">nodes</a>[1]            = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 5]);
<a name="l05378"></a>05378         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>       = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 6]);
<a name="l05379"></a>05379         <span class="keywordtype">int</span> braking                        = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 7]);
<a name="l05380"></a>05380         <span class="keywordtype">int</span> propulsion                     = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a> (values[ 8]);
<a name="l05381"></a>05381         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#afa59c7e5491ae69b016b3c1cf62c4eb4">reference_arm_node</a>  = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a> (values[ 9]);
<a name="l05382"></a>05382         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a049388b5d59e7a9c8495826da07cabbe">mass</a>                = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[10]);
<a name="l05383"></a>05383         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#ad3d997d002b790fba62a9cf73690e94d">tyre_springiness</a>    = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[11]);
<a name="l05384"></a>05384         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel2.html#a610463f462d96962e86e0121dbf94c62">tyre_damping</a>        = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[12]);
<a name="l05385"></a>05385         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#a7589328ba94874767a17f9d5431ca375">rim_springiness</a>     = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[13]);
<a name="l05386"></a>05386         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#ab83cd72d8fe87b9ccc698ca4aefb27da">rim_damping</a>         = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(values[14]);
<a name="l05387"></a>05387         <span class="keywordtype">char</span> side_char                     =                values[15].at(0);
<a name="l05388"></a>05388         <span class="keywordflow">if</span> (values.size() &gt;= 17) 
<a name="l05389"></a>05389         { 
<a name="l05390"></a>05390             flexbody_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#a64678fa2a6ef6b255142d987e2e6c75e">rim_mesh_name</a>   =                values[16];
<a name="l05391"></a>05391         }
<a name="l05392"></a>05392         <span class="keywordflow">if</span> (values.size() &gt;= 18)
<a name="l05393"></a>05393         {
<a name="l05394"></a>05394             flexbody_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#a11b657fed9e49b2f395483964bc18d77">tyre_mesh_name</a> =                 values[17];
<a name="l05395"></a>05395         }
<a name="l05396"></a>05396 
<a name="l05397"></a>05397         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a440c8af315cebc7319744f31d88c6b0f">VerifyAndProcessFlexBodyWheel</a>(line, flexbody_wheel, braking, propulsion, side_char);
<a name="l05398"></a>05398     });
<a name="l05399"></a>05399 }
<a name="l05400"></a>05400 
<a name="l05401"></a><a class="code" href="class_rig_def_1_1_parser.html#a440c8af315cebc7319744f31d88c6b0f">05401</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a440c8af315cebc7319744f31d88c6b0f">Parser::VerifyAndProcessFlexBodyWheel</a>(Ogre::String <span class="keyword">const</span> &amp; line, <a class="code" href="struct_rig_def_1_1_flex_body_wheel.html">FlexBodyWheel</a>&amp; flexbody_wheel, <span class="keywordtype">int</span> braking, <span class="keywordtype">int</span> propulsion, <span class="keywordtype">char</span> side_char)
<a name="l05402"></a>05402 {
<a name="l05403"></a>05403     <span class="comment">// Axle rigidity node (9999 = null)</span>
<a name="l05404"></a>05404     <span class="keywordflow">if</span> (flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a5912183c0dfa018a32190a5bc89b53c8">IsValidAnyState</a>() &amp;&amp; flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a654831f9421f9d314d849f966f70a04d">Num</a>() == 9999)
<a name="l05405"></a>05405     {
<a name="l05406"></a>05406         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a4a6abb34a80d8f0037de0c5120c87bad">Invalidate</a>();
<a name="l05407"></a>05407     }
<a name="l05408"></a>05408 
<a name="l05409"></a>05409     <span class="keywordflow">if</span> (braking &lt; 0 || braking &gt; 4)
<a name="l05410"></a>05410     {
<a name="l05411"></a>05411         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid value of parameter ~7 (braking), using 0 (no braking)&quot;</span>);
<a name="l05412"></a>05412         braking = 0;
<a name="l05413"></a>05413     }
<a name="l05414"></a>05414     flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a46964892b687b17c70c62eac98c3f46f">braking</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#aadb771065ed24e681acf7ab7e2520bc5">Wheels::Braking</a>(braking);
<a name="l05415"></a>05415 
<a name="l05416"></a>05416     <span class="keywordflow">if</span> (propulsion &lt; 0 || propulsion &gt; 2)
<a name="l05417"></a>05417     {
<a name="l05418"></a>05418         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid value of parameter ~8 (propulsion), using 0 (no propulsion)&quot;</span>);
<a name="l05419"></a>05419         braking = 0;
<a name="l05420"></a>05420     }
<a name="l05421"></a>05421     flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2e99bb276d0543791e33f412f727171a">propulsion</a> = <a class="code" href="struct_rig_def_1_1_wheels.html#a07d9912ae1c5e7f667cb8c75661dbbfd">Wheels::Propulsion</a>(propulsion);
<a name="l05422"></a>05422 
<a name="l05423"></a>05423     flexbody_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#a58948637a6c30d8f732a77a5a366c9d2">side</a> = <a class="code" href="struct_rig_def_1_1_mesh_wheel.html#af699d01e3d1bda900be710256d58f9f7abcee8ea57fa8ca53df33f548c504460f">MeshWheel::SIDE_RIGHT</a>;
<a name="l05424"></a>05424     <span class="keywordflow">if</span> (side_char != <span class="charliteral">&#39;r&#39;</span>)
<a name="l05425"></a>05425     {
<a name="l05426"></a>05426         <span class="keywordflow">if</span> (side_char != <span class="charliteral">&#39;l&#39;</span>)
<a name="l05427"></a>05427         {
<a name="l05428"></a>05428             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Invalid SIDE flag (acceptable are [r/l]), parsing as LEFT for backwards compatibility: &quot;</span>) + side_char);
<a name="l05429"></a>05429         }
<a name="l05430"></a>05430         flexbody_wheel.<a class="code" href="struct_rig_def_1_1_flex_body_wheel.html#a58948637a6c30d8f732a77a5a366c9d2">side</a> = <a class="code" href="struct_rig_def_1_1_mesh_wheel.html#af699d01e3d1bda900be710256d58f9f7ab1b494ef80c74dffd8ff89f9f6f8cc46">MeshWheel::SIDE_LEFT</a>;
<a name="l05431"></a>05431     }
<a name="l05432"></a>05432 
<a name="l05433"></a>05433     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l05434"></a>05434     {
<a name="l05435"></a>05435         <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a639c4f71bc37fc08f02a5b603ee14033">GenerateNodesForWheel</a>(<a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a898749499636d20b0443ba82a0d9034f">File::KEYWORD_FLEXBODYWHEELS</a>, flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a2c30ff095fe5e839268629d9362f0d9d">num_rays</a>, flexbody_wheel.<a class="code" href="struct_rig_def_1_1_base_wheel.html#a82cf55a516f7fa8c8d3cb8da832457e4">rigidity_node</a>.<a class="code" href="class_rig_def_1_1_node_1_1_ref.html#a5912183c0dfa018a32190a5bc89b53c8">IsValidAnyState</a>());
<a name="l05436"></a>05436     }
<a name="l05437"></a>05437 
<a name="l05438"></a>05438     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;flex_body_wheels.push_back(flexbody_wheel);
<a name="l05439"></a>05439 }
<a name="l05440"></a>05440 
<a name="l05441"></a><a class="code" href="class_rig_def_1_1_parser.html#aa5a840b9a94e3b31a2d896271ad06aa7">05441</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#aa5a840b9a94e3b31a2d896271ad06aa7">Parser::ParseMaterialFlareBindings</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05442"></a>05442 {
<a name="l05443"></a>05443     boost::smatch results;
<a name="l05444"></a>05444     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_MATERIALFLAREBINDINGS))
<a name="l05445"></a>05445     {
<a name="l05446"></a>05446         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05447"></a>05447         <span class="keywordflow">return</span>;
<a name="l05448"></a>05448     }
<a name="l05449"></a>05449     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05450"></a>05450 
<a name="l05451"></a>05451     <a class="code" href="struct_rig_def_1_1_material_flare_binding.html">MaterialFlareBinding</a> binding;
<a name="l05452"></a>05452     binding.<a class="code" href="struct_rig_def_1_1_material_flare_binding.html#a700151fced508c570132cde62ae3fc91">flare_number</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[1]);
<a name="l05453"></a>05453     <span class="keywordflow">if</span> (results[2].matched)
<a name="l05454"></a>05454     {
<a name="l05455"></a>05455         std::stringstream msg;
<a name="l05456"></a>05456         msg &lt;&lt; <span class="stringliteral">&quot;Invalid character(s) &#39;&quot;</span> &lt;&lt; results[2] &lt;&lt; <span class="stringliteral">&quot;&#39; after parameter ~1 &#39;Flare index&#39;, ingoring...&quot;</span>;
<a name="l05457"></a>05457         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, msg.str());
<a name="l05458"></a>05458     }
<a name="l05459"></a>05459     binding.<a class="code" href="struct_rig_def_1_1_material_flare_binding.html#a57fb5c2e114b4c56583b57caf4cfc6e4">material_name</a> = results[4];
<a name="l05460"></a>05460     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;material_flare_bindings.push_back(binding);
<a name="l05461"></a>05461 }
<a name="l05462"></a>05462 
<a name="l05463"></a><a class="code" href="class_rig_def_1_1_parser.html#abcbdd3618941c337a8c4b57fd2055c60">05463</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#abcbdd3618941c337a8c4b57fd2055c60">Parser::ParseManagedMaterials</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05464"></a>05464 {
<a name="l05465"></a>05465     boost::smatch results;
<a name="l05466"></a>05466     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_MANAGEDMATERIALS))
<a name="l05467"></a>05467     {
<a name="l05468"></a>05468         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05469"></a>05469         <span class="keywordflow">return</span>;
<a name="l05470"></a>05470     }
<a name="l05471"></a>05471     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05472"></a>05472 
<a name="l05473"></a>05473     <a class="code" href="struct_rig_def_1_1_managed_material.html">ManagedMaterial</a> managed_material;
<a name="l05474"></a>05474     managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#a879a1abaa523c1659b5029b8bfc2dcf0">options</a> = <a class="code" href="class_rig_def_1_1_parser.html#a78576d147f653bb182bf30a3d5e90c93">m_current_managed_material_options</a>;
<a name="l05475"></a>05475     managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#a5dc09cd722ca4525361dbdaed3f40bc5">name</a> = results[1].str();
<a name="l05476"></a>05476 
<a name="l05477"></a>05477     managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a> = (results[4].matched) ? <a class="code" href="struct_rig_def_1_1_managed_material.html#a69a407568a5bc70553488f2ff2a3a329aa5556c7362b5bbf5d7dc7cb24600d9fb">ManagedMaterial::TYPE_MESH_STANDARD</a>        : managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a>;
<a name="l05478"></a>05478     managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a> = (results[5].matched) ? <a class="code" href="struct_rig_def_1_1_managed_material.html#a69a407568a5bc70553488f2ff2a3a329a327d3a960b3f7f3c56f15aa8570cb5eb">ManagedMaterial::TYPE_MESH_TRANSPARENT</a>     : managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a>;
<a name="l05479"></a>05479     managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a> = (results[6].matched) ? <a class="code" href="struct_rig_def_1_1_managed_material.html#a69a407568a5bc70553488f2ff2a3a329a3d9e2e7f1931a98343ab7ad741c5f263">ManagedMaterial::TYPE_FLEXMESH_STANDARD</a>    : managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a>;
<a name="l05480"></a>05480     managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a> = (results[7].matched) ? <a class="code" href="struct_rig_def_1_1_managed_material.html#a69a407568a5bc70553488f2ff2a3a329a364fbb22df927b6d9f14fb504914fdac">ManagedMaterial::TYPE_FLEXMESH_TRANSPARENT</a> : managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a>;
<a name="l05481"></a>05481 
<a name="l05482"></a>05482     managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#abc379420c9b5b3d69d9e78e8b78b36cc">diffuse_map</a> = results[9];
<a name="l05483"></a>05483 
<a name="l05484"></a>05484     <span class="keywordflow">if</span>  (   managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a> == <a class="code" href="struct_rig_def_1_1_managed_material.html#a69a407568a5bc70553488f2ff2a3a329aa5556c7362b5bbf5d7dc7cb24600d9fb">ManagedMaterial::TYPE_MESH_STANDARD</a>
<a name="l05485"></a>05485         ||  managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#adb33b1c26a945929d447f64be31e972a">type</a> == <a class="code" href="struct_rig_def_1_1_managed_material.html#a69a407568a5bc70553488f2ff2a3a329a327d3a960b3f7f3c56f15aa8570cb5eb">ManagedMaterial::TYPE_MESH_TRANSPARENT</a>)
<a name="l05486"></a>05486     {
<a name="l05487"></a>05487         <span class="keywordflow">if</span> (results[12].matched)
<a name="l05488"></a>05488         {
<a name="l05489"></a>05489             Ogre::String input = results[12];
<a name="l05490"></a>05490             Ogre::StringUtil::trim(input);
<a name="l05491"></a>05491 
<a name="l05492"></a>05492             <span class="comment">/*</span>
<a name="l05493"></a>05493 <span class="comment">                According to documentation, &#39;-&#39; is a placeholder for no texture.</span>
<a name="l05494"></a>05494 <span class="comment">                However, for compatibility with old parser, we need to only check the first letter and ignore the rest.</span>
<a name="l05495"></a>05495 <span class="comment">            */</span>
<a name="l05496"></a>05496             <span class="keywordflow">if</span> (input.at(0) != <span class="charliteral">&#39;-&#39;</span>)
<a name="l05497"></a>05497             {
<a name="l05498"></a>05498                 managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#a913aa588a71ff3ce3fd26bb4a5638dcd">specular_map</a> = input;
<a name="l05499"></a>05499             }
<a name="l05500"></a>05500         }
<a name="l05501"></a>05501     }
<a name="l05502"></a>05502     <span class="keywordflow">else</span>
<a name="l05503"></a>05503     {
<a name="l05504"></a>05504         <span class="keywordflow">if</span> (results[12].matched)
<a name="l05505"></a>05505         {
<a name="l05506"></a>05506             Ogre::String input = results[12];
<a name="l05507"></a>05507 
<a name="l05508"></a>05508             <span class="comment">/*</span>
<a name="l05509"></a>05509 <span class="comment">                According to documentation, &#39;-&#39; is a placeholder for no texture.</span>
<a name="l05510"></a>05510 <span class="comment">                However, for compatibility with old parser, we need to only check the first letter and ignore the rest.</span>
<a name="l05511"></a>05511 <span class="comment">            */</span>
<a name="l05512"></a>05512             <span class="keywordflow">if</span> (input.at(0) != <span class="charliteral">&#39;-&#39;</span>)
<a name="l05513"></a>05513             {
<a name="l05514"></a>05514                 managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#ad72439b398c66b63fbc46028ccbfc160">damaged_diffuse_map</a> = input;
<a name="l05515"></a>05515             }
<a name="l05516"></a>05516         }
<a name="l05517"></a>05517         <span class="keywordflow">if</span> (results[15].matched)
<a name="l05518"></a>05518         {
<a name="l05519"></a>05519             Ogre::String input = results[15];
<a name="l05520"></a>05520 
<a name="l05521"></a>05521             <span class="comment">/*</span>
<a name="l05522"></a>05522 <span class="comment">                According to documentation, &#39;-&#39; is a placeholder for no texture.</span>
<a name="l05523"></a>05523 <span class="comment">                However, for compatibility with old parser, we need to only check the first letter and ignore the rest.</span>
<a name="l05524"></a>05524 <span class="comment">            */</span>
<a name="l05525"></a>05525             <span class="keywordflow">if</span> (input.at(0) != <span class="charliteral">&#39;-&#39;</span>)
<a name="l05526"></a>05526             {
<a name="l05527"></a>05527                 managed_material.<a class="code" href="struct_rig_def_1_1_managed_material.html#a913aa588a71ff3ce3fd26bb4a5638dcd">specular_map</a> = input;
<a name="l05528"></a>05528             }
<a name="l05529"></a>05529         }
<a name="l05530"></a>05530     }
<a name="l05531"></a>05531 
<a name="l05532"></a>05532     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;managed_materials.push_back(managed_material);
<a name="l05533"></a>05533 }
<a name="l05534"></a>05534 
<a name="l05535"></a><a class="code" href="class_rig_def_1_1_parser.html#a86f98f10a1a77a4db31e77fe250050ed">05535</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a86f98f10a1a77a4db31e77fe250050ed">Parser::ParseLockgroups</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05536"></a>05536 {
<a name="l05537"></a>05537     boost::smatch results;
<a name="l05538"></a>05538     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_LOCKGROUPS))
<a name="l05539"></a>05539     {
<a name="l05540"></a>05540         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05541"></a>05541         <span class="keywordflow">return</span>;
<a name="l05542"></a>05542     }
<a name="l05543"></a>05543     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05544"></a>05544 
<a name="l05545"></a>05545     <a class="code" href="struct_rig_def_1_1_lockgroup.html">Lockgroup</a> lockgroup;
<a name="l05546"></a>05546     lockgroup.<a class="code" href="struct_rig_def_1_1_lockgroup.html#a444542fc9687a13e294f5465738bc71d">number</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[1]);
<a name="l05547"></a>05547 
<a name="l05548"></a>05548     <span class="comment">/* Node list */</span>
<a name="l05549"></a>05549     Ogre::StringVector tokens = Ogre::StringUtil::split(results[2].str(), <span class="stringliteral">&quot;,&quot;</span>);
<a name="l05550"></a>05550     Ogre::StringVector::iterator iter = tokens.begin();
<a name="l05551"></a>05551     <span class="keywordflow">for</span> ( ; iter != tokens.end(); iter++)
<a name="l05552"></a>05552     {
<a name="l05553"></a>05553         Ogre::String token = *iter;
<a name="l05554"></a>05554         lockgroup.<a class="code" href="struct_rig_def_1_1_lockgroup.html#aade1cceb5aab1c7f5ddda0e414ef7e68">nodes</a>.push_back(<a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(token));
<a name="l05555"></a>05555     }
<a name="l05556"></a>05556 
<a name="l05557"></a>05557     <a class="code" href="class_rig_def_1_1_parser.html#ad0e49a337465aa5991a2266361a06838">_CheckInvalidTrailingText</a>(line, results, 5);
<a name="l05558"></a>05558     
<a name="l05559"></a>05559     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;lockgroups.push_back(lockgroup);
<a name="l05560"></a>05560 }
<a name="l05561"></a>05561 
<a name="l05562"></a><a class="code" href="class_rig_def_1_1_parser.html#a3cd3657d5464b37f5bd3bdb89cca1c13">05562</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a3cd3657d5464b37f5bd3bdb89cca1c13">Parser::ParseHydros</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05563"></a>05563 {
<a name="l05564"></a>05564     boost::smatch results;
<a name="l05565"></a>05565     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_HYDROS))
<a name="l05566"></a>05566     {
<a name="l05567"></a>05567         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05568"></a>05568         <span class="keywordflow">return</span>;
<a name="l05569"></a>05569     }
<a name="l05570"></a>05570     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05571"></a>05571 
<a name="l05572"></a>05572     <a class="code" href="struct_rig_def_1_1_hydro.html">Hydro</a> hydro;
<a name="l05573"></a>05573     hydro.<a class="code" href="struct_rig_def_1_1_hydro.html#a4dab1bcae1289a5633db586ba136d378">inertia_defaults</a>   = <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>;
<a name="l05574"></a>05574     hydro.<a class="code" href="struct_rig_def_1_1_hydro.html#ab2aef47f0840c49d6530cc00f50f9d9a">detacher_group</a>     = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l05575"></a>05575     hydro.<a class="code" href="struct_rig_def_1_1_hydro.html#aed6a017a89ba69b61b23b8333657cc82">beam_defaults</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l05576"></a>05576     hydro.<a class="code" href="struct_rig_def_1_1_hydro.html#a9435dd81577249609b1bd027baa884ff">nodes</a>[0]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l05577"></a>05577     hydro.<a class="code" href="struct_rig_def_1_1_hydro.html#a9435dd81577249609b1bd027baa884ff">nodes</a>[1]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l05578"></a>05578     hydro.<a class="code" href="struct_rig_def_1_1_hydro.html#a225a6483b30728e181d758b671d7beb5">lenghtening_factor</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[5]);
<a name="l05579"></a>05579 
<a name="l05580"></a>05580     <span class="comment">/* Flags */</span>
<a name="l05581"></a>05581     <span class="keywordflow">if</span> (results[8].matched)
<a name="l05582"></a>05582     {
<a name="l05583"></a>05583         hydro.<a class="code" href="struct_rig_def_1_1_hydro.html#a3375fbe3bb0f3026b96d1a7186bf4e60">options</a> = results[8];
<a name="l05584"></a>05584     }
<a name="l05585"></a>05585 
<a name="l05586"></a>05586     <span class="comment">/* Inertia part */</span>
<a name="l05587"></a>05587     <a class="code" href="class_rig_def_1_1_parser.html#ab90028c4339e1bb062263322a3c7324e">_ParseOptionalInertia</a>(hydro.<a class="code" href="struct_rig_def_1_1_hydro.html#a8fd76b6cd714fb64d9691693b5b1dd18">inertia</a>, results, 11);
<a name="l05588"></a>05588 
<a name="l05589"></a>05589     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;hydros.push_back(hydro);
<a name="l05590"></a>05590 }
<a name="l05591"></a>05591 
<a name="l05592"></a><a class="code" href="class_rig_def_1_1_parser.html#ab90028c4339e1bb062263322a3c7324e">05592</a> <span class="keywordtype">bool</span> <a class="code" href="class_rig_def_1_1_parser.html#ab90028c4339e1bb062263322a3c7324e">Parser::_ParseOptionalInertia</a>(<a class="code" href="struct_rig_def_1_1_optional_inertia.html">OptionalInertia</a> &amp; inertia, boost::smatch &amp; results, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> start_index)
<a name="l05593"></a>05593 {
<a name="l05594"></a>05594     <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> result_index = start_index;
<a name="l05595"></a>05595 
<a name="l05596"></a>05596     <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l05597"></a>05597     {
<a name="l05598"></a>05598         Ogre::String start_delay_str = results[result_index];
<a name="l05599"></a>05599         inertia.<a class="code" href="struct_rig_def_1_1_inertia.html#a974e50429cd8a4fca7e9f326caf46ab1">start_delay_factor</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(start_delay_str);
<a name="l05600"></a>05600         inertia.<a class="code" href="struct_rig_def_1_1_optional_inertia.html#a0de247f14ef22453dd249a58a74d1a29">_start_delay_factor_set</a> = <span class="keyword">true</span>;
<a name="l05601"></a>05601 
<a name="l05602"></a>05602         result_index += 3;
<a name="l05603"></a>05603         <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l05604"></a>05604         {
<a name="l05605"></a>05605             Ogre::String stop_delay_str = results[result_index];
<a name="l05606"></a>05606             inertia.<a class="code" href="struct_rig_def_1_1_inertia.html#aa4299c949c4459d1f6a0fb281d9d64e2">stop_delay_factor</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(stop_delay_str);
<a name="l05607"></a>05607             inertia.<a class="code" href="struct_rig_def_1_1_optional_inertia.html#a33017bbfc4914e4fc59563542e628809">_stop_delay_factor_set</a> = <span class="keyword">true</span>;
<a name="l05608"></a>05608 
<a name="l05609"></a>05609             result_index +=3;
<a name="l05610"></a>05610             <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l05611"></a>05611             {
<a name="l05612"></a>05612                 inertia.<a class="code" href="struct_rig_def_1_1_inertia.html#a940044fc40a8b1d6614fe83d4cbf0c19">start_function</a> = results[result_index];
<a name="l05613"></a>05613 
<a name="l05614"></a>05614                 result_index += 3;
<a name="l05615"></a>05615                 <span class="keywordflow">if</span> (results[result_index].matched)
<a name="l05616"></a>05616                 {
<a name="l05617"></a>05617                     inertia.<a class="code" href="struct_rig_def_1_1_inertia.html#aa4899a8aac32426e9dd74f73fe7d7892">stop_function</a> = results[result_index];
<a name="l05618"></a>05618                     <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l05619"></a>05619                 }
<a name="l05620"></a>05620             }
<a name="l05621"></a>05621         }
<a name="l05622"></a>05622     }
<a name="l05623"></a>05623     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l05624"></a>05624 }
<a name="l05625"></a>05625 
<a name="l05626"></a><a class="code" href="class_rig_def_1_1_parser.html#a74ae363db4d69c0355653f29aa749a98">05626</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a74ae363db4d69c0355653f29aa749a98">Parser::ParseBeams</a>(Ogre::String <span class="keyword">const</span> &amp; _line)
<a name="l05627"></a>05627 {
<a name="l05628"></a>05628     <span class="keyword">const</span> <span class="keywordtype">int</span> FLAGS_INDEX     = 7;
<a name="l05629"></a>05629     <span class="keyword">const</span> <span class="keywordtype">int</span> EXT_LIMIT_INDEX = 11;
<a name="l05630"></a>05630 
<a name="l05631"></a>05631     std::string line;
<a name="l05632"></a>05632     <a class="code" href="class_rig_def_1_1_parser.html#ac1a3ed20e65d2ad2819fe562dd3178c8">Parser::_TrimTrailingComments</a>(_line, line);
<a name="l05633"></a>05633 
<a name="l05634"></a>05634     <span class="comment">// Parse arguments</span>
<a name="l05635"></a>05635     boost::smatch results;
<a name="l05636"></a>05636     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_BEAMS))
<a name="l05637"></a>05637     {
<a name="l05638"></a>05638         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05639"></a>05639         <span class="keywordflow">return</span>;
<a name="l05640"></a>05640     }
<a name="l05641"></a>05641     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05642"></a>05642 
<a name="l05643"></a>05643     <a class="code" href="struct_rig_def_1_1_beam.html">Beam</a> beam;
<a name="l05644"></a>05644     beam.<a class="code" href="struct_rig_def_1_1_beam.html#a5ed290082130ae889df814baa1f156c7">defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l05645"></a>05645     beam.<a class="code" href="struct_rig_def_1_1_beam.html#aa2dfd84c4d909dbc59301628f50ecdc3">detacher_group</a> = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l05646"></a>05646     beam.<a class="code" href="struct_rig_def_1_1_beam.html#abc084a33e6f6547aa0a54bbf265c0eeb">nodes</a>[0] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l05647"></a>05647     beam.<a class="code" href="struct_rig_def_1_1_beam.html#abc084a33e6f6547aa0a54bbf265c0eeb">nodes</a>[1] = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[3]);
<a name="l05648"></a>05648 
<a name="l05649"></a>05649     <span class="comment">/* Flags */</span>
<a name="l05650"></a>05650     <span class="keywordflow">if</span> (results[FLAGS_INDEX].matched)
<a name="l05651"></a>05651     {
<a name="l05652"></a>05652         std::string <span class="keyword">const</span> &amp; flags_str = results[FLAGS_INDEX];
<a name="l05653"></a>05653         <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 0; i &lt; flags_str.length(); i++)
<a name="l05654"></a>05654         {
<a name="l05655"></a>05655             <span class="keywordflow">if</span> (flags_str[i] == <span class="charliteral">&#39;v&#39;</span>) 
<a name="l05656"></a>05656             {
<a name="l05657"></a>05657                 <span class="keywordflow">continue</span>; <span class="comment">// Dummy flag</span>
<a name="l05658"></a>05658             }
<a name="l05659"></a>05659             <span class="keywordflow">if</span> (flags_str[i] == <span class="charliteral">&#39;i&#39;</span>) 
<a name="l05660"></a>05660             {
<a name="l05661"></a>05661                 beam.<a class="code" href="struct_rig_def_1_1_beam.html#ac38de421870e3bdd021fb951d7111be4" title="Bit flags.">options</a> |= Beam::OPTION_i_INVISIBLE;
<a name="l05662"></a>05662             }
<a name="l05663"></a>05663             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags_str[i] == <span class="charliteral">&#39;r&#39;</span>)
<a name="l05664"></a>05664             {
<a name="l05665"></a>05665                 beam.<a class="code" href="struct_rig_def_1_1_beam.html#ac38de421870e3bdd021fb951d7111be4" title="Bit flags.">options</a> |= Beam::OPTION_r_ROPE;
<a name="l05666"></a>05666             }
<a name="l05667"></a>05667             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (flags_str[i] == <span class="charliteral">&#39;s&#39;</span>)
<a name="l05668"></a>05668             {
<a name="l05669"></a>05669                 beam.<a class="code" href="struct_rig_def_1_1_beam.html#ac38de421870e3bdd021fb951d7111be4" title="Bit flags.">options</a> |= Beam::OPTION_s_SUPPORT;
<a name="l05670"></a>05670                 <span class="keywordflow">if</span> (results[EXT_LIMIT_INDEX].matched)
<a name="l05671"></a>05671                 {
<a name="l05672"></a>05672                     beam.<a class="code" href="struct_rig_def_1_1_beam.html#a5ec98bfe8f3132aa6eba6ec79e92a406">_has_extension_break_limit</a> = <span class="keyword">true</span>;
<a name="l05673"></a>05673                     beam.<a class="code" href="struct_rig_def_1_1_beam.html#a8c2371e194a9e70a0576e3911be7dab0">extension_break_limit</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[EXT_LIMIT_INDEX]);
<a name="l05674"></a>05674                 }
<a name="l05675"></a>05675             }
<a name="l05676"></a>05676             <span class="keywordflow">else</span>
<a name="l05677"></a>05677             {
<a name="l05678"></a>05678                 <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, std::string(<span class="stringliteral">&quot;Invalid flag: &quot;</span>) + flags_str[i]);
<a name="l05679"></a>05679             }
<a name="l05680"></a>05680         }
<a name="l05681"></a>05681     }
<a name="l05682"></a>05682 
<a name="l05683"></a>05683     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;beams.push_back(beam);
<a name="l05684"></a>05684 }
<a name="l05685"></a>05685 
<a name="l05686"></a><a class="code" href="class_rig_def_1_1_parser.html#ab8fd3f263bf51736b6c18420f27d8338">05686</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#ab8fd3f263bf51736b6c18420f27d8338">Parser::ParseAnimator</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05687"></a>05687 {
<a name="l05688"></a>05688     boost::smatch results;
<a name="l05689"></a>05689     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::SECTION_ANIMATORS))
<a name="l05690"></a>05690     {
<a name="l05691"></a>05691         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05692"></a>05692         <span class="keywordflow">return</span>;
<a name="l05693"></a>05693     }
<a name="l05694"></a>05694     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05695"></a>05695 
<a name="l05696"></a>05696     <a class="code" href="struct_rig_def_1_1_animator.html">Animator</a> animator;
<a name="l05697"></a>05697     animator.<a class="code" href="struct_rig_def_1_1_animator.html#afeb252bd40350fc9bd10654bc5f496b1">inertia_defaults</a>   = <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a>;
<a name="l05698"></a>05698     animator.<a class="code" href="struct_rig_def_1_1_animator.html#a48c65c22edd0bd37fdbb98d298b29166">beam_defaults</a>      = <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a>;
<a name="l05699"></a>05699     animator.<a class="code" href="struct_rig_def_1_1_animator.html#adfd01deccaf84750608c922ca304f7ca">detacher_group</a>     = <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a>;
<a name="l05700"></a>05700     animator.<a class="code" href="struct_rig_def_1_1_animator.html#ae9c18e082ca5bed478bb5b74733ffbf0">nodes</a>[0]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[1]);
<a name="l05701"></a>05701     animator.<a class="code" href="struct_rig_def_1_1_animator.html#ae9c18e082ca5bed478bb5b74733ffbf0">nodes</a>[1]           = <a class="code" href="class_rig_def_1_1_parser.html#a38e4135df406da0cc2f0fc4afb34ddb3">_ParseNodeRef</a>(results[2]);
<a name="l05702"></a>05702     animator.<a class="code" href="struct_rig_def_1_1_animator.html#a315413328d71362303f43504442bafca">lenghtening_factor</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[3]);
<a name="l05703"></a>05703 
<a name="l05704"></a>05704     <span class="comment">/* Parse options */</span>
<a name="l05705"></a>05705     <span class="comment">/* Just use the split/trim/compare method */</span>
<a name="l05706"></a>05706     Ogre::StringVector tokens = Ogre::StringUtil::split(results[4].str(), <span class="stringliteral">&quot;|&quot;</span>);
<a name="l05707"></a>05707     Ogre::StringVector::iterator iter = tokens.begin();
<a name="l05708"></a>05708     <span class="keywordflow">while</span> (iter != tokens.end())
<a name="l05709"></a>05709     {
<a name="l05710"></a>05710         Ogre::String token = *iter;
<a name="l05711"></a>05711         Ogre::StringUtil::trim(token);
<a name="l05712"></a>05712 
<a name="l05713"></a>05713         <span class="comment">/* Numbered keywords */</span>
<a name="l05714"></a>05714         <span class="keywordflow">if</span> (boost::regex_search(token, results, Regexes::PARSE_ANIMATORS_NUMBERED_KEYWORD))
<a name="l05715"></a>05715         {
<a name="l05716"></a>05716             <a class="code" href="struct_rig_def_1_1_aero_animator.html">AeroAnimator</a> aero_animator;
<a name="l05717"></a>05717             
<a name="l05718"></a>05718                  <span class="keywordflow">if</span> (results[1] == <span class="stringliteral">&quot;throttle&quot;</span>)   animator.<a class="code" href="struct_rig_def_1_1_animator.html#a7fcb54be773d2d8c2d42f2a5d0e1638d">aero_animator</a>.<a class="code" href="struct_rig_def_1_1_aero_animator.html#a14b14912bdfc73fc477f18678e29c588">flags</a> |= <a class="code" href="struct_rig_def_1_1_aero_animator.html#a7cb00bcd62fc389ab593e6ceebfd8f2b">AeroAnimator::OPTION_THROTTLE</a>;
<a name="l05719"></a>05719             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[1] == <span class="stringliteral">&quot;rpm&quot;</span>)        animator.<a class="code" href="struct_rig_def_1_1_animator.html#a7fcb54be773d2d8c2d42f2a5d0e1638d">aero_animator</a>.<a class="code" href="struct_rig_def_1_1_aero_animator.html#a14b14912bdfc73fc477f18678e29c588">flags</a> |= <a class="code" href="struct_rig_def_1_1_aero_animator.html#a8dec90e8479b9450c20ceb0addecfd9b">AeroAnimator::OPTION_RPM</a>;
<a name="l05720"></a>05720             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[1] == <span class="stringliteral">&quot;aerotorq&quot;</span>)   animator.<a class="code" href="struct_rig_def_1_1_animator.html#a7fcb54be773d2d8c2d42f2a5d0e1638d">aero_animator</a>.<a class="code" href="struct_rig_def_1_1_aero_animator.html#a14b14912bdfc73fc477f18678e29c588">flags</a> |= <a class="code" href="struct_rig_def_1_1_aero_animator.html#aad9cd66a359ad2054b1d9c2fa59e4601">AeroAnimator::OPTION_TORQUE</a>;
<a name="l05721"></a>05721             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[1] == <span class="stringliteral">&quot;aeropit&quot;</span>)    animator.<a class="code" href="struct_rig_def_1_1_animator.html#a7fcb54be773d2d8c2d42f2a5d0e1638d">aero_animator</a>.<a class="code" href="struct_rig_def_1_1_aero_animator.html#a14b14912bdfc73fc477f18678e29c588">flags</a> |= <a class="code" href="struct_rig_def_1_1_aero_animator.html#a116af949d5370923ce6eb03fc24e3b75">AeroAnimator::OPTION_PITCH</a>;
<a name="l05722"></a>05722             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (results[1] == <span class="stringliteral">&quot;aerostatus&quot;</span>) animator.<a class="code" href="struct_rig_def_1_1_animator.html#a7fcb54be773d2d8c2d42f2a5d0e1638d">aero_animator</a>.<a class="code" href="struct_rig_def_1_1_aero_animator.html#a14b14912bdfc73fc477f18678e29c588">flags</a> |= <a class="code" href="struct_rig_def_1_1_aero_animator.html#a291bbe86914c4401bc42d5c3007d8e0e">AeroAnimator::OPTION_STATUS</a>;
<a name="l05723"></a>05723 
<a name="l05724"></a>05724             animator.<a class="code" href="struct_rig_def_1_1_animator.html#a7fcb54be773d2d8c2d42f2a5d0e1638d">aero_animator</a>.<a class="code" href="struct_rig_def_1_1_aero_animator.html#af132ea8b91f592db306b3e7527880907">motor</a> = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[2]);
<a name="l05725"></a>05725         }
<a name="l05726"></a>05726         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (boost::regex_search(token, results, Regexes::PARSE_ANIMATORS_KEY_COLON_VALUE))
<a name="l05727"></a>05727         {
<a name="l05728"></a>05728             <span class="keywordflow">if</span> (results[1] == <span class="stringliteral">&quot;shortlimit&quot;</span>)
<a name="l05729"></a>05729             {
<a name="l05730"></a>05730                 animator.<a class="code" href="struct_rig_def_1_1_animator.html#a6f704529ebb3b02b3a8fb11f8344bcd1">short_limit</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l05731"></a>05731                 animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#ac25cb1301ce9528e15569222ad89090d">Animator::OPTION_SHORT_LIMIT</a>;
<a name="l05732"></a>05732             }
<a name="l05733"></a>05733             <span class="keywordflow">else</span> <span class="keywordflow">if</span>(results[1] == <span class="stringliteral">&quot;longlimit&quot;</span>)
<a name="l05734"></a>05734             {
<a name="l05735"></a>05735                 animator.<a class="code" href="struct_rig_def_1_1_animator.html#a94e0049079d4d2e8fb1df7f8a7886cf6">long_limit</a> = <a class="code" href="_rig_def___parser_8cpp.html#a80bd92e1ab9706580b99154df92fbb6e">STR_PARSE_REAL</a>(results[2]);
<a name="l05736"></a>05736                 animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a919b9f0b5c9fd695d5a82405980eac7c">Animator::OPTION_LONG_LIMIT</a>;
<a name="l05737"></a>05737             }
<a name="l05738"></a>05738         }
<a name="l05739"></a>05739         <span class="keywordflow">else</span>
<a name="l05740"></a>05740         {
<a name="l05741"></a>05741             <span class="comment">/* Standalone keywords */</span>
<a name="l05742"></a>05742                  <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;vis&quot;</span>)           animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a782695f24bfa4a723eeb9d944d3bad58">Animator::OPTION_VISIBLE</a>;
<a name="l05743"></a>05743             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;inv&quot;</span>)           animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a8ab9709b913c08abd6beb1d5a2553147">Animator::OPTION_INVISIBLE</a>;
<a name="l05744"></a>05744             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;airspeed&quot;</span>)      animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#aca0fa83ca1b9dedee91c0d1c5a351dc7">Animator::OPTION_AIRSPEED</a>;
<a name="l05745"></a>05745             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;vvi&quot;</span>)           animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a30bd033db1ff70d9df2e70deaaf10df4">Animator::OPTION_VERTICAL_VELOCITY</a>;
<a name="l05746"></a>05746             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;altimeter100k&quot;</span>) animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a6ad2518ce5d0cb2afd22725329a0692b">Animator::OPTION_ALTIMETER_100K</a>;
<a name="l05747"></a>05747             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;altimeter10k&quot;</span>)  animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a2e619f8e518cc9138eea973a30a484ca">Animator::OPTION_ALTIMETER_10K</a>;
<a name="l05748"></a>05748             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;altimeter1k&quot;</span>)   animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a87993ff216cee780907a08f6e4a2cf6d">Animator::OPTION_ALTIMETER_1K</a>;
<a name="l05749"></a>05749             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;aoa&quot;</span>)           animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#ae8bef9a0c90ca952af34aaafe502d5b7">Animator::OPTION_ANGLE_OF_ATTACK</a>;
<a name="l05750"></a>05750             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;flap&quot;</span>)          animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#aafed5619bc811c08868f67c061e870b2">Animator::OPTION_FLAP</a>;
<a name="l05751"></a>05751             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;airbrake&quot;</span>)      animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a84cef18391907d68308fedc851c62f53">Animator::OPTION_AIR_BRAKE</a>;
<a name="l05752"></a>05752             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;roll&quot;</span>)          animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#ae65de1e075011d507e9190cbd02f9a76">Animator::OPTION_ROLL</a>;
<a name="l05753"></a>05753             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;pitch&quot;</span>)         animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#ab97b3f851d9d3ca27b570e326b1b6459">Animator::OPTION_PITCH</a>;
<a name="l05754"></a>05754             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;brakes&quot;</span>)        animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#ac972c1c39a71929361b5482c53367874">Animator::OPTION_BRAKES</a>;
<a name="l05755"></a>05755             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;accel&quot;</span>)         animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#ab7a633a1ea2b4e9f21ae53a420685d92">Animator::OPTION_ACCEL</a>;
<a name="l05756"></a>05756             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;clutch&quot;</span>)        animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#acdc98b29efc4398361fe482dae66fe58">Animator::OPTION_CLUTCH</a>;
<a name="l05757"></a>05757             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;speedo&quot;</span>)        animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a184c8379b35c464393e7a455452558e9">Animator::OPTION_SPEEDO</a>;
<a name="l05758"></a>05758             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;tacho&quot;</span>)         animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#aec6decb2d446393adaffe30668642d82">Animator::OPTION_TACHO</a>;
<a name="l05759"></a>05759             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;turbo&quot;</span>)         animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#aa9fc2574bb1689bc209f03a2011158de">Animator::OPTION_TURBO</a>;
<a name="l05760"></a>05760             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;parking&quot;</span>)       animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a4512cd70c68d78fe696d3d61a707020e">Animator::OPTION_PARKING</a>;
<a name="l05761"></a>05761             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;shifterman1&quot;</span>)   animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#ae619f14d88c9eb8b82e3fd61bd487cef">Animator::OPTION_SHIFT_LEFT_RIGHT</a>;
<a name="l05762"></a>05762             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;shifterman2&quot;</span>)   animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a81b3afc41428896dbe62abff9bd0cfd8">Animator::OPTION_SHIFT_BACK_FORTH</a>;
<a name="l05763"></a>05763             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;sequential&quot;</span>)    animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#af4698ddd0fa2a0763b3e429929ee7ac6">Animator::OPTION_SEQUENTIAL_SHIFT</a>;
<a name="l05764"></a>05764             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;shifterlin&quot;</span>)    animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#acb60a5e8045805eec499ba963b053d93">Animator::OPTION_GEAR_SELECT</a>;
<a name="l05765"></a>05765             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;torque&quot;</span>)        animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a6cc5d57b259316a78a7aeb44105c7b94">Animator::OPTION_TORQUE</a>;
<a name="l05766"></a>05766             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;difflock&quot;</span>)      animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a305b814aa632302f4be520dc38b3f067">Animator::OPTION_DIFFLOCK</a>;
<a name="l05767"></a>05767             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;rudderboat&quot;</span>)    animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a104e81972968fe003a253898ab3241ed">Animator::OPTION_BOAT_RUDDER</a>;
<a name="l05768"></a>05768             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (token == <span class="stringliteral">&quot;throttleboat&quot;</span>)  animator.<a class="code" href="struct_rig_def_1_1_animator.html#aa85e9883da76a9e855eec1dd6bed8aa1">flags</a> |= <a class="code" href="struct_rig_def_1_1_animator.html#a6aaca52a03bec4d602f8625e93d6f628">Animator::OPTION_BOAT_THROTTLE</a>;
<a name="l05769"></a>05769         }
<a name="l05770"></a>05770 
<a name="l05771"></a>05771         iter++;
<a name="l05772"></a>05772     }
<a name="l05773"></a>05773 
<a name="l05774"></a>05774     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;animators.push_back(animator);
<a name="l05775"></a>05775 }
<a name="l05776"></a>05776 
<a name="l05777"></a><a class="code" href="class_rig_def_1_1_parser.html#a7ac80da7787fb1be3141f47c2acd70ea">05777</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7ac80da7787fb1be3141f47c2acd70ea">Parser::ParseAuthor</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05778"></a>05778 {
<a name="l05779"></a>05779     <span class="keywordflow">if</span> (! <a class="code" href="class_rig_def_1_1_parser.html#ace2b8a045f68cbf801e88b467be0f05a">_IsCurrentModuleRoot</a>())
<a name="l05780"></a>05780     {
<a name="l05781"></a>05781         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Inline-section &#39;author&#39; has global effect and should not appear in a module&quot;</span>);
<a name="l05782"></a>05782     }
<a name="l05783"></a>05783 
<a name="l05784"></a>05784     boost::smatch results;
<a name="l05785"></a>05785     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::INLINE_SECTION_AUTHOR))
<a name="l05786"></a>05786     {
<a name="l05787"></a>05787         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05788"></a>05788         <span class="keywordflow">return</span>;
<a name="l05789"></a>05789     }
<a name="l05790"></a>05790 
<a name="l05791"></a>05791     <a class="code" href="struct_rig_def_1_1_author.html">Author</a> author;
<a name="l05792"></a>05792 
<a name="l05793"></a>05793     <span class="keywordflow">if</span> (results[1].matched)
<a name="l05794"></a>05794     {
<a name="l05795"></a>05795         author.<a class="code" href="struct_rig_def_1_1_author.html#ab32adb990e833407ee2b1a35e658d646">type</a> = results[2].str();
<a name="l05796"></a>05796     }
<a name="l05797"></a>05797     <span class="keywordflow">else</span>
<a name="l05798"></a>05798     {
<a name="l05799"></a>05799         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, <span class="stringliteral">&quot;Inline-section &#39;author&#39; has no parameters specified, ignoring...&quot;</span>);
<a name="l05800"></a>05800         <span class="keywordflow">return</span>;
<a name="l05801"></a>05801     }
<a name="l05802"></a>05802 
<a name="l05803"></a>05803     <span class="comment">/* Forum account id */</span>
<a name="l05804"></a>05804     <span class="keywordflow">if</span> (results[3].matched)
<a name="l05805"></a>05805     {
<a name="l05806"></a>05806         <span class="keywordtype">int</span> user_id = <a class="code" href="_rig_def___parser_8cpp.html#ab346a5b8ba9ec72cd09abbfb05d94718">STR_PARSE_INT</a>(results[4]);
<a name="l05807"></a>05807         <span class="keywordflow">if</span> (user_id != -1)
<a name="l05808"></a>05808         {
<a name="l05809"></a>05809             author.<a class="code" href="struct_rig_def_1_1_author.html#a4b99433a94e8626af2d094057f3e35ee">_has_forum_account</a> = <span class="keyword">true</span>;
<a name="l05810"></a>05810             author.<a class="code" href="struct_rig_def_1_1_author.html#a3741c21462f3f14ed8b1aa2f65e0ec10">forum_account_id</a> = user_id;
<a name="l05811"></a>05811         }
<a name="l05812"></a>05812 
<a name="l05813"></a>05813         <span class="comment">/* Name */</span>
<a name="l05814"></a>05814         <span class="keywordflow">if</span> (results[5].matched)
<a name="l05815"></a>05815         {
<a name="l05816"></a>05816             author.<a class="code" href="struct_rig_def_1_1_author.html#a27eede2a8bbfb54c5df771bf3f8df0c1">name</a> = results[6].str();
<a name="l05817"></a>05817 
<a name="l05818"></a>05818             <span class="comment">/* Email */</span>
<a name="l05819"></a>05819             <span class="keywordflow">if</span> (results[7].matched)
<a name="l05820"></a>05820             {
<a name="l05821"></a>05821                 author.<a class="code" href="struct_rig_def_1_1_author.html#ac113f42ef3e9c4ab626af3983cee6a8d">email</a> = results[8].str();
<a name="l05822"></a>05822             }
<a name="l05823"></a>05823         }   
<a name="l05824"></a>05824     }
<a name="l05825"></a>05825 
<a name="l05826"></a>05826     <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;authors.push_back(author);
<a name="l05827"></a>05827 }
<a name="l05828"></a>05828 
<a name="l05829"></a>05829 <span class="comment">/* -------------------------------------------------------------------------- */</span>
<a name="l05830"></a>05830 <span class="comment">/*  Utilities                                                                 */</span>
<a name="l05831"></a>05831 <span class="comment">/* -------------------------------------------------------------------------- */</span>
<a name="l05832"></a>05832 
<a name="l05833"></a><a class="code" href="class_rig_def_1_1_parser.html#a1302932396c4ddec89f56bf02f9278ce">05833</a> std::pair&lt;bool, Ogre::String&gt; <a class="code" href="class_rig_def_1_1_parser.html#a1302932396c4ddec89f56bf02f9278ce">Parser::GetModuleName</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05834"></a>05834 {
<a name="l05835"></a>05835     boost::smatch results;
<a name="l05836"></a>05836     <span class="keywordflow">if</span> (! boost::regex_search(line, results, Regexes::DIRECTIVE_SECTION))
<a name="l05837"></a>05837     {
<a name="l05838"></a>05838         <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Invalid line, ignoring...&quot;</span>);
<a name="l05839"></a>05839         <span class="keywordflow">return</span> std::make_pair(<span class="keyword">false</span>, <span class="stringliteral">&quot;&quot;</span>);
<a name="l05840"></a>05840     }
<a name="l05841"></a>05841     <span class="comment">/* NOTE: Positions in &#39;results&#39; array match E_CAPTURE*() positions (starting with 1) in the respective regex. */</span>
<a name="l05842"></a>05842 
<a name="l05843"></a>05843     <span class="keywordflow">return</span> std::make_pair(<span class="keyword">true</span>, results[2]);
<a name="l05844"></a>05844 }
<a name="l05845"></a>05845 
<a name="l05846"></a><a class="code" href="class_rig_def_1_1_parser.html#a858de6caf1406d0264cf211e1af6c64a">05846</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a858de6caf1406d0264cf211e1af6c64a">Parser::SetCurrentModule</a>(Ogre::String <span class="keyword">const</span> &amp; name)
<a name="l05847"></a>05847 {
<a name="l05848"></a>05848 
<a name="l05849"></a>05849     std::map&lt; Ogre::String, boost::shared_ptr&lt;File::Module&gt; &gt;::iterator itor
<a name="l05850"></a>05850         = <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;modules.find(name);
<a name="l05851"></a>05851 
<a name="l05852"></a>05852     <span class="keywordflow">if</span> (itor != <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;modules.end())
<a name="l05853"></a>05853     {
<a name="l05854"></a>05854         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a> = itor-&gt;second;
<a name="l05855"></a>05855     }
<a name="l05856"></a>05856     <span class="keywordflow">else</span>
<a name="l05857"></a>05857     {
<a name="l05858"></a>05858         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a> = boost::shared_ptr&lt;File::Module&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_file_1_1_module.html">File::Module</a>(name) );
<a name="l05859"></a>05859         <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;modules.insert( 
<a name="l05860"></a>05860                 std::pair&lt; Ogre::String, boost::shared_ptr&lt;File::Module&gt; &gt;(name, <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>) 
<a name="l05861"></a>05861             );
<a name="l05862"></a>05862     }
<a name="l05863"></a>05863 }
<a name="l05864"></a>05864 
<a name="l05865"></a><a class="code" href="class_rig_def_1_1_parser.html#a7d47c54e0875d806b9e5557ae1816909">05865</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7d47c54e0875d806b9e5557ae1816909">Parser::RestoreRootModule</a>()
<a name="l05866"></a>05866 {
<a name="l05867"></a>05867     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a> = <a class="code" href="class_rig_def_1_1_parser.html#a8508e8fdc2f0488cce6690a23e07cda6">m_root_module</a>;
<a name="l05868"></a>05868 }
<a name="l05869"></a>05869 
<a name="l05870"></a><a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">05870</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">Parser::AddMessage</a>(std::string <span class="keyword">const</span> &amp; line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4">Message::Type</a> type, std::string <span class="keyword">const</span> &amp; message)
<a name="l05871"></a>05871 {
<a name="l05872"></a>05872     <span class="comment">/* Push and then access to avoid copy-constructing strings */</span>
<a name="l05873"></a>05873     <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.push_back(<a class="code" href="struct_rig_def_1_1_parser_1_1_message.html">Message</a>());
<a name="l05874"></a>05874 
<a name="l05875"></a>05875     <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.back().line = line;
<a name="l05876"></a>05876     <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.back().line_number = <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a>;
<a name="l05877"></a>05877     <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.back().message = message;
<a name="l05878"></a>05878     <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.back().type = type;
<a name="l05879"></a>05879     <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.back().section = <a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a>;
<a name="l05880"></a>05880     <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.back().subsection = <a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a>;
<a name="l05881"></a>05881     <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.back().module = <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;name;
<a name="l05882"></a>05882 
<a name="l05883"></a>05883     <span class="keywordflow">switch</span> (type)
<a name="l05884"></a>05884     {
<a name="l05885"></a>05885     <span class="keywordflow">case</span> <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>: 
<a name="l05886"></a>05886     <span class="keywordflow">case</span> <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4a4c922b155c371ce84feb0039d875ce19">Message::TYPE_FATAL_ERROR</a>: 
<a name="l05887"></a>05887         ++<a class="code" href="class_rig_def_1_1_parser.html#a819636f0aa48090c68fa7c7255eefcaa">m_messages_num_errors</a>; 
<a name="l05888"></a>05888         <span class="keywordflow">break</span>;
<a name="l05889"></a>05889     <span class="keywordflow">case</span> <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>: 
<a name="l05890"></a>05890         ++<a class="code" href="class_rig_def_1_1_parser.html#adaba747d4b3ee745bf7e881524e626f5">m_messages_num_warnings</a>; 
<a name="l05891"></a>05891         <span class="keywordflow">break</span>;
<a name="l05892"></a>05892     <span class="keywordflow">default</span>:
<a name="l05893"></a>05893         ++<a class="code" href="class_rig_def_1_1_parser.html#a7f79024ae6fb562aaf571756acde65b8">m_messages_num_other</a>;
<a name="l05894"></a>05894         <span class="keywordflow">break</span>;
<a name="l05895"></a>05895     }
<a name="l05896"></a>05896 }
<a name="l05897"></a>05897 
<a name="l05898"></a><a class="code" href="class_rig_def_1_1_parser.html#a33ad8735b03d1d4d43bbd964b71f99be">05898</a> <a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3">File::Keyword</a> <a class="code" href="class_rig_def_1_1_parser.html#a33ad8735b03d1d4d43bbd964b71f99be">Parser::IdentifyKeyword</a>(Ogre::String <span class="keyword">const</span> &amp; line)
<a name="l05899"></a>05899 {
<a name="l05900"></a>05900     <span class="comment">// Search with correct lettercase</span>
<a name="l05901"></a>05901     boost::smatch results;
<a name="l05902"></a>05902     boost::regex_search(line, results, Regexes::IDENTIFY_KEYWORD_RESPECT_CASE); <span class="comment">// Always returns true.</span>
<a name="l05903"></a>05903     <a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3">File::Keyword</a> keyword = <a class="code" href="class_rig_def_1_1_parser.html#a6179468112b17d8f490afc3d7e465fcc">FindKeywordMatch</a>(results);
<a name="l05904"></a>05904     <span class="keywordflow">if</span> (keyword != <a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a1c5772b1ec3afd9b63e87fb3d53293bc">File::KEYWORD_INVALID</a>)
<a name="l05905"></a>05905     {
<a name="l05906"></a>05906         <span class="keywordflow">return</span> keyword;
<a name="l05907"></a>05907     }
<a name="l05908"></a>05908 
<a name="l05909"></a>05909     <span class="comment">// Search and ignore lettercase</span>
<a name="l05910"></a>05910     boost::regex_search(line, results, Regexes::IDENTIFY_KEYWORD_IGNORE_CASE); <span class="comment">// Always returns true.</span>
<a name="l05911"></a>05911     keyword = <a class="code" href="class_rig_def_1_1_parser.html#a6179468112b17d8f490afc3d7e465fcc">FindKeywordMatch</a>(results);
<a name="l05912"></a>05912     <span class="keywordflow">if</span> (keyword != <a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a1c5772b1ec3afd9b63e87fb3d53293bc">File::KEYWORD_INVALID</a>)
<a name="l05913"></a>05913     {
<a name="l05914"></a>05914         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">Message::TYPE_WARNING</a>, 
<a name="l05915"></a>05915             <span class="stringliteral">&quot;Keyword has invalid lettercase. Correct form is: &quot;</span> + std::string(<a class="code" href="struct_rig_def_1_1_file.html#aecfdfd70221c860aebb6edf3f40d78d2">File::KeywordToString</a>(keyword)));
<a name="l05916"></a>05916     }
<a name="l05917"></a>05917     <span class="keywordflow">return</span> keyword;
<a name="l05918"></a>05918 }
<a name="l05919"></a>05919 
<a name="l05920"></a><a class="code" href="class_rig_def_1_1_parser.html#a6179468112b17d8f490afc3d7e465fcc">05920</a> <a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3">File::Keyword</a> <a class="code" href="class_rig_def_1_1_parser.html#a6179468112b17d8f490afc3d7e465fcc">Parser::FindKeywordMatch</a>(boost::smatch&amp; search_results)
<a name="l05921"></a>05921 {
<a name="l05922"></a>05922     <span class="comment">/* The &#39;results&#39; array contains a complete match at positon [0] and sub-matches starting with [1], </span>
<a name="l05923"></a>05923 <span class="comment">        so we get exact positions in Regexes::IDENTIFY_KEYWORD, which again match File::Keyword enum members</span>
<a name="l05924"></a>05924 <span class="comment">        */</span>
<a name="l05925"></a>05925     <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i = 1; i &lt; search_results.size(); i++)
<a name="l05926"></a>05926     {
<a name="l05927"></a>05927         boost::ssub_match sub  = search_results[i];
<a name="l05928"></a>05928         <span class="keywordflow">if</span> (sub.matched)
<a name="l05929"></a>05929         {
<a name="l05930"></a>05930             <span class="comment">/* Build enum value directly from result offset */</span>
<a name="l05931"></a>05931             <span class="keywordflow">return</span> <a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3">File::Keyword</a>(i);
<a name="l05932"></a>05932         }
<a name="l05933"></a>05933     }
<a name="l05934"></a>05934     <span class="keywordflow">return</span> <a class="code" href="struct_rig_def_1_1_file.html#add5bea6329504fe29cc675aa7f8a75c3a1c5772b1ec3afd9b63e87fb3d53293bc">File::KEYWORD_INVALID</a>;
<a name="l05935"></a>05935 }
<a name="l05936"></a>05936 
<a name="l05937"></a><a class="code" href="class_rig_def_1_1_parser.html#a305ad5ffe72cfa30ee4bf98907f58cda">05937</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a305ad5ffe72cfa30ee4bf98907f58cda">Parser::Prepare</a>()
<a name="l05938"></a>05938 {
<a name="l05939"></a>05939     <a class="code" href="class_rig_def_1_1_parser.html#ad68c6ec5d877c9a0c839d7695fc89899" title="Parser state.">m_current_section</a> = <a class="code" href="struct_rig_def_1_1_file.html#a1e55e7cbc2e087e226401b420fac20e3a98a961751b1beb9b62a0a96ba4d90c5c" title="The very start of file.">File::SECTION_TRUCK_NAME</a>;
<a name="l05940"></a>05940     <a class="code" href="class_rig_def_1_1_parser.html#a1bdf3b753ef73e50f83e75662dc9afce" title="Parser state.">m_current_subsection</a> = <a class="code" href="struct_rig_def_1_1_file.html#af4cafc46bfc628f707bab063aedaabaea2fc6aec3ca8ec236d683b6824cac783d">File::SUBSECTION_NONE</a>;
<a name="l05941"></a>05941     <a class="code" href="class_rig_def_1_1_parser.html#a71401e117cdee7b841905eef0ef4579b" title="Only for reports. Initialised to 1.">m_current_line_number</a> = 1;
<a name="l05942"></a>05942     <a class="code" href="class_rig_def_1_1_parser.html#ac022a88920a25de333ed324a8bd4e044" title="Parser state; Num. blank lines right above the current one.">m_num_contiguous_blank_lines</a> = 0;
<a name="l05943"></a>05943     <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a> = boost::shared_ptr&lt;File&gt;(<span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_file.html">File</a>());
<a name="l05944"></a>05944     <a class="code" href="class_rig_def_1_1_parser.html#a037398030caa70de742d6478b58605e6" title="Parser state.">m_in_block_comment</a> = <span class="keyword">false</span>;
<a name="l05945"></a>05945     <a class="code" href="class_rig_def_1_1_parser.html#a93a82ead72771afe12321d9f85dc8547" title="Parser state.">m_in_description_section</a> = <span class="keyword">false</span>;
<a name="l05946"></a>05946     <a class="code" href="class_rig_def_1_1_parser.html#a60ed70e13af44481c8ec3ab555a0c30d" title="Parser state.">m_any_named_node_defined</a> = <span class="keyword">false</span>;
<a name="l05947"></a>05947     <a class="code" href="class_rig_def_1_1_parser.html#a6d5c53efe8aa4e3836463be0cf0096a9">m_last_flexbody</a>.reset(); <span class="comment">// Set to nullptr</span>
<a name="l05948"></a>05948     <a class="code" href="class_rig_def_1_1_parser.html#a1868cbcca9c310610411852ce5c4d1d3">m_current_detacher_group</a> = 0; <span class="comment">/* Global detacher group */</span>
<a name="l05949"></a>05949 
<a name="l05950"></a>05950     <a class="code" href="class_rig_def_1_1_parser.html#ae104bf088a7ca800ae22459592d7d60d">m_user_default_inertia</a> = <a class="code" href="class_rig_def_1_1_parser.html#a562ae58c77e4a78a230c009d6436770f">m_ror_default_inertia</a>;
<a name="l05951"></a>05951     <a class="code" href="class_rig_def_1_1_parser.html#a45762e2947c9b00bc850299a7af5460b">m_user_beam_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#acf561e9e58fd57bb0f398274bc233963">m_ror_beam_defaults</a>;
<a name="l05952"></a>05952     <a class="code" href="class_rig_def_1_1_parser.html#af1221465d1da18d67ae729344cc9d0de">m_user_node_defaults</a> = <a class="code" href="class_rig_def_1_1_parser.html#aa517e0bee8672c92d69f666f8b3a956b">m_ror_node_defaults</a>;
<a name="l05953"></a>05953     <a class="code" href="class_rig_def_1_1_parser.html#a78576d147f653bb182bf30a3d5e90c93">m_current_managed_material_options</a> = <a class="code" href="struct_rig_def_1_1_managed_materials_options.html">ManagedMaterialsOptions</a>();
<a name="l05954"></a>05954 
<a name="l05955"></a>05955     <a class="code" href="class_rig_def_1_1_parser.html#a8508e8fdc2f0488cce6690a23e07cda6">m_root_module</a> = boost::shared_ptr&lt;File::Module&gt;( <span class="keyword">new</span> <a class="code" href="struct_rig_def_1_1_file_1_1_module.html">File::Module</a>(<span class="stringliteral">&quot;_Root_&quot;</span>) );
<a name="l05956"></a>05956     <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a>-&gt;root_module = <a class="code" href="class_rig_def_1_1_parser.html#a8508e8fdc2f0488cce6690a23e07cda6">m_root_module</a>;
<a name="l05957"></a>05957     <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a> = <a class="code" href="class_rig_def_1_1_parser.html#a8508e8fdc2f0488cce6690a23e07cda6">m_root_module</a>;
<a name="l05958"></a>05958 
<a name="l05959"></a>05959     <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a35b86ad0907fd7f412038ce1c3fe7a91">Init</a>(<span class="keyword">true</span>); <span class="comment">// Enabled=true</span>
<a name="l05960"></a>05960 
<a name="l05961"></a>05961     <a class="code" href="class_rig_def_1_1_parser.html#a819636f0aa48090c68fa7c7255eefcaa">m_messages_num_errors</a> = 0;
<a name="l05962"></a>05962     <a class="code" href="class_rig_def_1_1_parser.html#adaba747d4b3ee745bf7e881524e626f5">m_messages_num_warnings</a> = 0;
<a name="l05963"></a>05963     <a class="code" href="class_rig_def_1_1_parser.html#a7f79024ae6fb562aaf571756acde65b8">m_messages_num_other</a> = 0;
<a name="l05964"></a>05964 }
<a name="l05965"></a>05965 
<a name="l05966"></a><a class="code" href="class_rig_def_1_1_parser.html#a9a7080ad3fe8eba6d5879028b22c5c2c">05966</a> <span class="keywordtype">void</span> <a class="code" href="class_rig_def_1_1_parser.html#a9a7080ad3fe8eba6d5879028b22c5c2c">Parser::Finalize</a>()
<a name="l05967"></a>05967 {
<a name="l05968"></a>05968     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a> != <span class="keyword">nullptr</span>)
<a name="l05969"></a>05969     {
<a name="l05970"></a>05970         <a class="code" href="class_rig_def_1_1_parser.html#a13e3dc9988d54c6bba346e527c52c922">m_current_module</a>-&gt;submeshes.push_back(*<a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>);
<a name="l05971"></a>05971         <a class="code" href="class_rig_def_1_1_parser.html#a20c00930e3b06b01ff97c1643723bacb" title="Parser state.">m_current_submesh</a>.reset(); <span class="comment">// Set to nullptr</span>
<a name="l05972"></a>05972     }
<a name="l05973"></a>05973 
<a name="l05974"></a>05974     <span class="keywordflow">if</span> (<a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a04d293d8b1f94b9a722e83715911e547">IsEnabled</a>())
<a name="l05975"></a>05975     {
<a name="l05976"></a>05976         <a class="code" href="class_rig_def_1_1_parser.html#aab11d692a92ebd13389fb9c9b5a02687">m_sequential_importer</a>.<a class="code" href="class_rig_def_1_1_sequential_importer.html#a183fb08b25f7dc2b126ce6f8d3ed1c87" title="Traverse whole rig definition and resolve all node references.">Process</a>( <a class="code" href="class_rig_def_1_1_parser.html#a587cd5fcd33b9bcadbe058e8c17b97bb">m_definition</a> );
<a name="l05977"></a>05977     }
<a name="l05978"></a>05978 }
<a name="l05979"></a>05979 
<a name="l05980"></a><a class="code" href="class_rig_def_1_1_parser.html#a94a43c89e6b1ce0f2af3b8433026863b">05980</a> std::string <a class="code" href="class_rig_def_1_1_parser.html#a94a43c89e6b1ce0f2af3b8433026863b">Parser::ProcessMessagesToString</a>()
<a name="l05981"></a>05981 {
<a name="l05982"></a>05982     <span class="keywordflow">if</span> (this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a562b4cb4baf62a5c201c6755bc41558f">GetMessages</a>().size() == 0)
<a name="l05983"></a>05983     {
<a name="l05984"></a>05984         std::string msg(<span class="stringliteral">&quot; == Parsing done OK, nothing to report&quot;</span>);
<a name="l05985"></a>05985         <span class="keywordflow">return</span> msg;
<a name="l05986"></a>05986     }
<a name="l05987"></a>05987 
<a name="l05988"></a>05988     std::stringstream report;
<a name="l05989"></a>05989     report &lt;&lt; <span class="stringliteral">&quot; == Parsing done, report:&quot;</span> &lt;&lt; std::endl &lt;&lt;std::endl;
<a name="l05990"></a>05990 
<a name="l05991"></a>05991     <span class="keyword">auto</span> itor = <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.begin();
<a name="l05992"></a>05992     <span class="keyword">auto</span> end  = <a class="code" href="class_rig_def_1_1_parser.html#a3f2e2bb5886800ff4d973a1728007547">m_messages</a>.end();
<a name="l05993"></a>05993     <span class="keywordflow">for</span> (; itor != end; ++itor)
<a name="l05994"></a>05994     {
<a name="l05995"></a>05995         <span class="keywordflow">switch</span> (itor-&gt;type)
<a name="l05996"></a>05996         {
<a name="l05997"></a>05997             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4a4c922b155c371ce84feb0039d875ce19">RigDef::Parser::Message::TYPE_FATAL_ERROR</a>): 
<a name="l05998"></a>05998                 report &lt;&lt; <span class="stringliteral">&quot;#FF3300 FATAL_ERROR #FFFFFF&quot;</span>; 
<a name="l05999"></a>05999                 <span class="keywordflow">break</span>;
<a name="l06000"></a>06000 
<a name="l06001"></a>06001             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">RigDef::Parser::Message::TYPE_ERROR</a>): 
<a name="l06002"></a>06002                 report &lt;&lt; <span class="stringliteral">&quot;#FF3300 ERROR #FFFFFF&quot;</span>; 
<a name="l06003"></a>06003                 <span class="keywordflow">break</span>;
<a name="l06004"></a>06004 
<a name="l06005"></a>06005             <span class="keywordflow">case</span> (<a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4af141ae5bfdab8d49af203eefb1ce5927">RigDef::Parser::Message::TYPE_WARNING</a>): 
<a name="l06006"></a>06006                 report &lt;&lt; <span class="stringliteral">&quot;#FFFF00 WARNING #FFFFFF&quot;</span>; 
<a name="l06007"></a>06007                 <span class="keywordflow">break</span>;
<a name="l06008"></a>06008 
<a name="l06009"></a>06009             <span class="keywordflow">default</span>:
<a name="l06010"></a>06010                 report &lt;&lt; <span class="stringliteral">&quot;INFO&quot;</span>; 
<a name="l06011"></a>06011                 <span class="keywordflow">break</span>;
<a name="l06012"></a>06012         }
<a name="l06013"></a>06013         report &lt;&lt; <span class="stringliteral">&quot; (Section &quot;</span> &lt;&lt; <a class="code" href="struct_rig_def_1_1_file.html#a9df66ca1a72485fbce67ef8d2b0395da">RigDef::File::SectionToString</a>(itor-&gt;section) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; std::endl;
<a name="l06014"></a>06014         report &lt;&lt; <span class="stringliteral">&quot;\tLine (&quot;</span> &lt;&lt; itor-&gt;line_number &lt;&lt; <span class="stringliteral">&quot;): &quot;</span> &lt;&lt; itor-&gt;line &lt;&lt; std::endl;
<a name="l06015"></a>06015         report &lt;&lt; <span class="stringliteral">&quot;\tMessage: &quot;</span> &lt;&lt; itor-&gt;message &lt;&lt; std::endl;
<a name="l06016"></a>06016     }
<a name="l06017"></a>06017 
<a name="l06018"></a>06018     <span class="keywordflow">return</span> report.str();
<a name="l06019"></a>06019 }
<a name="l06020"></a>06020 
<a name="l06021"></a><a class="code" href="class_rig_def_1_1_parser.html#ac9e266992c2efbeddfbf09f430a61b93">06021</a> <span class="keywordtype">int</span> <a class="code" href="class_rig_def_1_1_parser.html#ac9e266992c2efbeddfbf09f430a61b93">Parser::_ParseArgs</a>(std::string <span class="keyword">const</span> &amp; line, Ogre::StringVector &amp;args, <span class="keywordtype">unsigned</span> min_num_args)
<a name="l06022"></a>06022 {
<a name="l06023"></a>06023     <span class="comment">// Note: This splitting silently ignores multiple consecutive separators.</span>
<a name="l06024"></a>06024     <span class="comment">//       For example &quot;A,|,B&quot; will produce results[0] = &quot;A&quot;, results[1] = &quot;B&quot;</span>
<a name="l06025"></a>06025     <span class="keywordflow">try</span>
<a name="l06026"></a>06026     {
<a name="l06027"></a>06027         args = Ogre::StringUtil::split(line, <span class="stringliteral">&quot;:|, \t&quot;</span>);
<a name="l06028"></a>06028         <span class="keywordflow">if</span> (args.size() &lt; min_num_args)
<a name="l06029"></a>06029         {
<a name="l06030"></a>06030             std::stringstream msg;
<a name="l06031"></a>06031             msg &lt;&lt; <span class="stringliteral">&quot;Too few arguments, minimum is: &quot;</span> &lt;&lt; min_num_args;
<a name="l06032"></a>06032             this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, msg.str());
<a name="l06033"></a>06033             args.clear();
<a name="l06034"></a>06034             <span class="keywordflow">return</span> -1;
<a name="l06035"></a>06035         }
<a name="l06036"></a>06036         <span class="keywordflow">return</span> args.size();
<a name="l06037"></a>06037     } 
<a name="l06038"></a>06038     <span class="keywordflow">catch</span>(Ogre::Exception &amp;e)
<a name="l06039"></a>06039     {
<a name="l06040"></a>06040         this-&gt;<a class="code" href="class_rig_def_1_1_parser.html#a7da949423835fe3241f2ac4c5ac8ebb1">AddMessage</a>(line, <a class="code" href="struct_rig_def_1_1_parser_1_1_message.html#a3c1de745c4fe47bb608fdd890c6852b4aa1163c91029a2aa93afc5caff9a43122">Message::TYPE_ERROR</a>, <span class="stringliteral">&quot;Unexpected error while parsing line: &quot;</span>+e.getFullDescription());
<a name="l06041"></a>06041         args.clear();
<a name="l06042"></a>06042         <span class="keywordflow">return</span> -1;
<a name="l06043"></a>06043     }
<a name="l06044"></a>06044 }
<a name="l06045"></a>06045 
<a name="l06046"></a>06046 } <span class="comment">// namespace RigDef</span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 12 2015 11:55:32 for Rigs of Rods by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
