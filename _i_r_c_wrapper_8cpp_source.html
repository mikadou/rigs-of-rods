<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>Rigs of Rods: source/main/network/IRCWrapper.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="rorlogo.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Rigs of Rods
   </div>
   <div id="projectbrief">Soft-body Physics Simulation</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.7 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_b2f33c71d4aa5e7af42a1ca61ff5af1b.html">source</a></li><li class="navelem"><a class="el" href="dir_3c915b6e49908d72cc0f58ba3fde1e4d.html">main</a></li><li class="navelem"><a class="el" href="dir_6551f16c0aa9ef8ce0e4b9b36b17aa38.html">network</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">IRCWrapper.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_i_r_c_wrapper_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">This source file is part of Rigs of Rods</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">Copyright 2005-2012 Pierre-Michel Ricordel</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">Copyright 2007-2012 Thomas Fischer</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">For more information, see http://www.rigsofrods.com/</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">Rigs of Rods is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">it under the terms of the GNU General Public License version 3, as</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">published by the Free Software Foundation.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">Rigs of Rods is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">GNU General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">along with Rigs of Rods.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">// created by Thomas Fischer thomas{AT}thomasfischer{DOT}biz, 7th of August 2009</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#ifdef USE_SOCKETW</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_i_r_c_wrapper_8h.html">IRCWrapper.h</a>&quot;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_error_utils_8h.html">ErrorUtils.h</a>&quot;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_improved_config_file_8h.html">ImprovedConfigFile.h</a>&quot;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="rornet_8h.html">rornet.h</a>&quot;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_ro_r_version_8h.html">RoRVersion.h</a>&quot;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_settings_8h.html">Settings.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="_utils_8h.html">Utils.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#ifdef USE_CURL</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#define CURL_STATICLIB</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;curl/curl.h&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;curl/easy.h&gt;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#endif //USE_CURL</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// some function forward declarations</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="keywordtype">void</span> *s_ircthreadstart(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">using namespace </span>Ogre;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="comment">// some utils</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="comment">// helps to fill our struct</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;message_t constructMessage(<span class="keywordtype">int</span> type, <span class="keyword">const</span> <span class="keywordtype">char</span> *channel, <span class="keyword">const</span> <span class="keywordtype">char</span> *nick, <span class="keyword">const</span> <span class="keywordtype">char</span> *message, <span class="keyword">const</span> <span class="keywordtype">char</span> *arg = 0)</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;{</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    message_t t;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    t.type    = type;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    t.channel = String();</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    t.nick    = String();</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    t.message = String();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    t.arg     = String();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (channel) t.channel = String(channel);</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="keywordflow">if</span> (nick)    t.nick    = String(nick);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (message) t.message = String(message);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span> (arg)     t.arg     = String(arg);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">return</span> t;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;}</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// and the class implementation</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;IRCWrapper::IRCWrapper() : irc_session(0)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// set default values</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    serverName     = <span class="stringliteral">&quot;irc.rigsofrods.org&quot;</span>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    serverPassword = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    nick           = <span class="stringliteral">&quot;foouser&quot;</span>;</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    userName       = nick;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    realName       = nick;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    channel        = <span class="stringliteral">&quot;#RigsOfRods&quot;</span>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    channelKey     = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    serverPort     = 6667; <span class="comment">// 6667 = default IRC port</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    reJoin         = <span class="keyword">true</span>; <span class="comment">// rejoin if we got kicked</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    reConnect      = <span class="keyword">true</span>; <span class="comment">// reconnect if we got disconnected</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    retryCounter   = 0;    <span class="comment">// Counter that counts up connection retries</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    wasConnected   = <span class="keyword">false</span>; <span class="comment">// already connected once</span></div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;IRCWrapper::~IRCWrapper()</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="keywordflow">if</span> (irc_session &amp;&amp; <a class="code" href="libircclient_8h.html#a90f826583118cb2e34135cb0e9b26cf8">irc_is_connected</a>(irc_session))</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    {</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        <a class="code" href="libircclient_8h.html#aa5f6dd73d3f0bdecb53f53362e253aab">irc_disconnect</a>(irc_session);</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    }</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;}</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="keywordtype">void</span> IRCWrapper::initIRC()</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="comment">// authenticate before doing anything else</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    pthread_create(&amp;ircthread, NULL, s_ircthreadstart, (<span class="keywordtype">void</span> *)<span class="keyword">this</span>);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keywordtype">void</span> IRCWrapper::process()</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;{</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">if</span> (reConnect &amp;&amp; wasConnected)</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;    {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="comment">// check if we are still connected</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <span class="keywordflow">if</span> (irc_session &amp;&amp; !<a class="code" href="libircclient_8h.html#a90f826583118cb2e34135cb0e9b26cf8">irc_is_connected</a>(irc_session))</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            push(constructMessage(MT_StatusUpdate, 0, 0, <span class="stringliteral">&quot;Disconnected, reconnecting ...&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;            <span class="comment">// disconnected, reconnect now</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;            <a class="code" href="libircclient_8h.html#aa5f6dd73d3f0bdecb53f53362e253aab">irc_disconnect</a>(irc_session); <span class="comment">// be sure to let the old thread end ...</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            initIRC();</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        }</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    }</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    std::vector&lt;message_t&gt; messages;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">int</span> num = pull(messages);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">if</span> (num == 0)</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// there is something, lets investigate</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    std::vector&lt;message_t&gt;::iterator it;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="keywordflow">for</span> (it = messages.begin(); it != messages.end(); it++)</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    {</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        processIRCEvent(*it);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    }</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="keywordtype">int</span> IRCWrapper::sendMessage(String msg, String channelOrNick)</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (!irc_session) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="keywordflow">if</span> (channelOrNick.empty())</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        channelOrNick = channel;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libircclient_8h.html#a8c2ec03f1a9ce7c739e11b64fd088ae5">irc_cmd_msg</a>(irc_session, channelOrNick.c_str(), msg.c_str());</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;}</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;<span class="keywordtype">int</span> IRCWrapper::sendMeMessage(String msg, String channelOrNick)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;{</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="keywordflow">if</span> (!irc_session) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">if</span> (channelOrNick.empty())</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;        channelOrNick = channel;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libircclient_8h.html#a09c7e471bf4062b57df10d31ee275fc5">irc_cmd_me</a>(irc_session, channelOrNick.c_str(), msg.c_str());</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;}</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;<span class="keywordtype">int</span> IRCWrapper::changeNick(String newNick)</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;{</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span> (!irc_session) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libircclient_8h.html#a19ae1ad61caf031e5c2dc950e24b7370">irc_cmd_nick</a>(irc_session, newNick.c_str());</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;}</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;<span class="keywordtype">int</span> IRCWrapper::joinChannel(String channel, String channelKeyStr)</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;{</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span> (!irc_session) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *channelKey = channelKeyStr.c_str();</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="keywordflow">if</span> (channelKeyStr.empty()) channelKey = 0;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libircclient_8h.html#a4960c546c2a077e8fb01fc7aa5ae7add">irc_cmd_join</a> (irc_session, channel.c_str(), channelKey);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;}</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;<span class="keywordtype">int</span> IRCWrapper::leaveChannel(String channel)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;{</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="keywordflow">if</span> (!irc_session) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libircclient_8h.html#adb50b9a3a78693266fb0a257b997831b">irc_cmd_part</a> (irc_session, channel.c_str());</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="keywordtype">int</span> IRCWrapper::quit(String reason)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordflow">if</span> (!irc_session) <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="libircclient_8h.html#aa89bd6efb6dacf53f25ca5518a5aa4ee">irc_cmd_quit</a> (irc_session, reason.c_str());</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;String IRCWrapper::getLastErrorMessage()</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;{</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span> (!irc_session) <span class="keywordflow">return</span> <span class="stringliteral">&quot;not connected&quot;</span>;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">return</span> String(<a class="code" href="errors_8c_09_09.html#afdc70ca04626818d2fd9a55da0b90e5f">irc_strerror</a>(<a class="code" href="errors_8c_09_09.html#a3a18336093ee74751244d996bc32247d">irc_errno</a>(irc_session)));</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;}</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;<span class="preprocessor">#ifdef USE_CURL</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keyword">struct </span><a class="code" href="structcurl_memory_struct.html">curlMemoryStruct</a> {</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="keywordtype">char</span> *<a class="code" href="structcurl_memory_struct.html#a087fa3e538f0241ab14b505bf6589fdb">memory</a>;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="structcurl_memory_struct.html#aa008dca9064cc1ee751228002a6622b9">size</a>;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;};</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;<span class="comment">//hacky hack to fill memory with data for curl</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;<span class="comment">// from: http://curl.haxx.se/libcurl/c/getinmemory.html</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword">static</span> <span class="keywordtype">size_t</span> curlWriteMemoryCallback2(<span class="keywordtype">void</span> *ptr, <span class="keywordtype">size_t</span> size, <span class="keywordtype">size_t</span> nmemb, <span class="keywordtype">void</span> *data)</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;{</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordtype">size_t</span> realsize = size * nmemb;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurl_memory_struct.html">curlMemoryStruct</a> *mem = (<span class="keyword">struct </span><a class="code" href="structcurl_memory_struct.html">curlMemoryStruct</a> *)data;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <span class="keywordtype">char</span>* new_mem;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    new_mem = (<span class="keywordtype">char</span> *)realloc(mem-&gt;<a class="code" href="structcurl_memory_struct.html#a087fa3e538f0241ab14b505bf6589fdb">memory</a>, mem-&gt;<a class="code" href="structcurl_memory_struct.html#aa008dca9064cc1ee751228002a6622b9">size</a> + realsize + 1);</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="keywordflow">if</span> (new_mem == NULL) {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        free(mem-&gt;<a class="code" href="structcurl_memory_struct.html#a087fa3e538f0241ab14b505bf6589fdb">memory</a>);</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;        printf(<span class="stringliteral">&quot;Error (re)allocating memory\n&quot;</span>);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;        <a class="code" href="namespace_profiler.html#af79bb59414ef3ba134213bb6f2f2d292">exit</a>(EXIT_FAILURE);</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    mem-&gt;<a class="code" href="structcurl_memory_struct.html#a087fa3e538f0241ab14b505bf6589fdb">memory</a> = new_mem;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    memcpy(&amp;(mem-&gt;<a class="code" href="structcurl_memory_struct.html#a087fa3e538f0241ab14b505bf6589fdb">memory</a>[mem-&gt;<a class="code" href="structcurl_memory_struct.html#aa008dca9064cc1ee751228002a6622b9">size</a>]), ptr, realsize);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    mem-&gt;<a class="code" href="structcurl_memory_struct.html#aa008dca9064cc1ee751228002a6622b9">size</a> += realsize;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    mem-&gt;<a class="code" href="structcurl_memory_struct.html#a087fa3e538f0241ab14b505bf6589fdb">memory</a>[mem-&gt;<a class="code" href="structcurl_memory_struct.html#aa008dca9064cc1ee751228002a6622b9">size</a>] = 0;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">return</span> realsize;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;}</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="preprocessor">#endif //USE_CURL</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;<span class="keywordtype">int</span> IRCWrapper::authenticate()</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;{</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;<span class="preprocessor">#ifdef USE_CURL</span></div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">struct </span><a class="code" href="structcurl_memory_struct.html">curlMemoryStruct</a> chunk;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    chunk.<a class="code" href="structcurl_memory_struct.html#a087fa3e538f0241ab14b505bf6589fdb">memory</a> = (<span class="keywordtype">char</span> *)malloc(1);  <span class="comment">/* will be grown as needed by the realloc above */</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    chunk.size = 0;    <span class="comment">/* no data at this point */</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="comment">// construct post fields</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">struct </span>curl_httppost *formpost=NULL;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    <span class="keyword">struct </span>curl_httppost *lastptr=NULL;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    curl_global_init(CURL_GLOBAL_ALL);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    <span class="comment">// add some hard coded values</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    curl_formadd(&amp;formpost, &amp;lastptr, CURLFORM_COPYNAME, <span class="stringliteral">&quot;User_NickName&quot;</span>, CURLFORM_COPYCONTENTS, <a class="code" href="_settings_8h.html#a59d79e9512ab19f4eb8a322f1e32dc11">SSETTING</a>(<span class="stringliteral">&quot;Nickname&quot;</span>, <span class="stringliteral">&quot;Anonymous&quot;</span>).c_str(), CURLFORM_END);</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    curl_formadd(&amp;formpost, &amp;lastptr, CURLFORM_COPYNAME, <span class="stringliteral">&quot;User_Language&quot;</span>, CURLFORM_COPYCONTENTS, <a class="code" href="_settings_8h.html#a59d79e9512ab19f4eb8a322f1e32dc11">SSETTING</a>(<span class="stringliteral">&quot;Language&quot;</span>, <span class="stringliteral">&quot;English&quot;</span>).c_str(), CURLFORM_END);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    curl_formadd(&amp;formpost, &amp;lastptr, CURLFORM_COPYNAME, <span class="stringliteral">&quot;User_Token&quot;</span>, CURLFORM_COPYCONTENTS, <a class="code" href="_settings_8h.html#a59d79e9512ab19f4eb8a322f1e32dc11">SSETTING</a>(<span class="stringliteral">&quot;User Token Hash&quot;</span>, <span class="stringliteral">&quot;-&quot;</span>).c_str(), CURLFORM_END);</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    curl_formadd(&amp;formpost, &amp;lastptr, CURLFORM_COPYNAME, <span class="stringliteral">&quot;RoR_VersionString&quot;</span>, CURLFORM_COPYCONTENTS, <a class="code" href="_ro_r_version_8h.html#a69a4d74161655a3024e47ad8c70ac848">ROR_VERSION_STRING</a>, CURLFORM_END);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    curl_formadd(&amp;formpost, &amp;lastptr, CURLFORM_COPYNAME, <span class="stringliteral">&quot;RoR_ProtocolVersion&quot;</span>, CURLFORM_COPYCONTENTS, <a class="code" href="rornet_8h.html#abee9681e15dfd9c0e955dcc2a24c93dc">RORNET_VERSION</a>, CURLFORM_END);</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    curl_formadd(&amp;formpost, &amp;lastptr, CURLFORM_COPYNAME, <span class="stringliteral">&quot;RoR_BinaryHash&quot;</span>, CURLFORM_COPYCONTENTS, <a class="code" href="_settings_8h.html#a59d79e9512ab19f4eb8a322f1e32dc11">SSETTING</a>(<span class="stringliteral">&quot;BinaryHash&quot;</span>, <span class="stringliteral">&quot;-&quot;</span>).c_str(), CURLFORM_END);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    curl_formadd(&amp;formpost, &amp;lastptr, CURLFORM_COPYNAME, <span class="stringliteral">&quot;RoR_GUID&quot;</span>, CURLFORM_COPYCONTENTS, <a class="code" href="_settings_8h.html#a59d79e9512ab19f4eb8a322f1e32dc11">SSETTING</a>(<span class="stringliteral">&quot;GUID&quot;</span>, <span class="stringliteral">&quot;-&quot;</span>).c_str(), CURLFORM_END);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    CURLcode res;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    CURL *curl = curl_easy_init();</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="keywordflow">if</span> (!curl)</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        push(constructMessage(MT_ErrorAuth, 0, 0, <span class="stringliteral">&quot;Error: failed to init CURL&quot;</span>));</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    }</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    <span class="keywordtype">char</span> *curl_err_str[CURL_ERROR_SIZE];</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    memset(curl_err_str, 0, CURL_ERROR_SIZE);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    String url = <span class="stringliteral">&quot;http://&quot;</span> + String(<a class="code" href="rornet_8h.html#a25f6f42fe5abd553c6aa818bbe952633">REPO_SERVER</a>) + <span class="stringliteral">&quot;/auth_lobby/&quot;</span>;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    curl_easy_setopt(curl, CURLOPT_URL,              url.c_str());</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="comment">/* send all data to this function  */</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, curlWriteMemoryCallback2);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="comment">/* we pass our &#39;chunk&#39; struct to the callback function */</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    curl_easy_setopt(curl, CURLOPT_WRITEDATA, (<span class="keywordtype">void</span> *)&amp;chunk);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">// set post options</span></div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    curl_easy_setopt(curl, CURLOPT_HTTPPOST, formpost);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    <span class="comment">// logging stuff</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="comment">//curl_easy_setopt(curl, CURLOPT_STDERR,           LogManager::getsin InstallerLog::getSingleton()-&gt;getLogFilePtr());</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    curl_easy_setopt(curl, CURLOPT_ERRORBUFFER,      curl_err_str[0]);</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// http related settings</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION,   1); <span class="comment">// follow redirects</span></div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    curl_easy_setopt(curl, CURLOPT_AUTOREFERER,      1); <span class="comment">// set the Referrer: field in requests where it follows a Location: redirect.</span></div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    curl_easy_setopt(curl, CURLOPT_MAXREDIRS,        20);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    curl_easy_setopt(curl, CURLOPT_USERAGENT,        <span class="stringliteral">&quot;RoR&quot;</span>);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    curl_easy_setopt(curl, CURLOPT_FILETIME,         1);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    <span class="comment">// TO BE DONE: ADD SSL</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="comment">// see: http://curl.haxx.se/libcurl/c/simplessl.html</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <span class="comment">// curl_easy_setopt(curl,CURLOPT_SSL_VERIFYPEER,1L);</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    res = curl_easy_perform(curl);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    curl_easy_cleanup(curl);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="comment">//printf(&quot;%lu bytes retrieved\n&quot;, (long)chunk.size);</span></div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    String result;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    curl_formfree(formpost);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="keywordflow">if</span> (chunk.memory)</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;        <span class="comment">// convert memory into String now</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        result = String(chunk.memory);</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <span class="comment">// then free</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        free(chunk.memory);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    }</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;    <span class="comment">/* we&#39;re done with libcurl, so clean it up */</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    curl_global_cleanup();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="keywordflow">if</span> (res != CURLE_OK)</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *errstr = curl_easy_strerror(res);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        push(constructMessage(MT_ErrorAuth, 0, 0, errstr));</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="keywordflow">return</span> processAuthenticationResults(result);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    push(constructMessage(MT_ErrorAuth, 0, 0, <span class="stringliteral">&quot;you have not compiled RoR with CURL support, thus authentication and the lobby are not available to you.&quot;</span>));</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="preprocessor">#endif //USE_CURL</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="keywordtype">int</span> IRCWrapper::processAuthenticationResults(String &amp;results)</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <a class="code" href="class_ogre_1_1_improved_config_file.html">ImprovedConfigFile</a> cfg;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    cfg.<a class="code" href="class_ogre_1_1_improved_config_file.html#a57e74b2661b9a10057c66830dd9652ad">loadFromString</a>(results, <span class="stringliteral">&quot;=&quot;</span>, <span class="keyword">true</span>);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">// TODO: improve the checks if the config is valid or not ...</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">// fatal error?</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span> (cfg.<a class="code" href="class_ogre_1_1_improved_config_file.html#ae1f7f7fbf18b6f3f69442c2dfb510e8a">hasSetting</a>(<span class="stringliteral">&quot;fatalError&quot;</span>))</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    {</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        <a class="code" href="struct_error_utils.html#a5877046712b57723ec40772afd980378">ErrorUtils::ShowOgreWebError</a>(cfg.getSetting(<span class="stringliteral">&quot;fatalErrorTitle&quot;</span>), cfg.getSetting(<span class="stringliteral">&quot;fatalError&quot;</span>), cfg.getSetting(<span class="stringliteral">&quot;fatalErrorURL&quot;</span>));</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">// non-fatal error?</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (cfg.<a class="code" href="class_ogre_1_1_improved_config_file.html#ae1f7f7fbf18b6f3f69442c2dfb510e8a">hasSetting</a>(<span class="stringliteral">&quot;error&quot;</span>))</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    {</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        push(constructMessage(MT_ErrorAuth, 0, 0, cfg.getSetting(<span class="stringliteral">&quot;error&quot;</span>).c_str()));</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    }</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">if</span> (!cfg.<a class="code" href="class_ogre_1_1_improved_config_file.html#ae1f7f7fbf18b6f3f69442c2dfb510e8a">hasSetting</a>(<span class="stringliteral">&quot;serverName&quot;</span>) || !cfg.<a class="code" href="class_ogre_1_1_improved_config_file.html#ae1f7f7fbf18b6f3f69442c2dfb510e8a">hasSetting</a>(<span class="stringliteral">&quot;serverPort&quot;</span>))</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        <span class="keywordflow">return</span> 1;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    serverName     = cfg.getSetting(<span class="stringliteral">&quot;serverName&quot;</span>);</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    serverPort     = cfg.<a class="code" href="class_ogre_1_1_improved_config_file.html#a7f110ad9b4ccb57322ceed5c8dc1d956">getSettingInt</a>(<span class="stringliteral">&quot;serverPort&quot;</span>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    serverPassword = cfg.getSetting(<span class="stringliteral">&quot;serverPassword&quot;</span>);</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    nick           = cfg.getSetting(<span class="stringliteral">&quot;nick&quot;</span>);</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    userName       = cfg.getSetting(<span class="stringliteral">&quot;userName&quot;</span>);</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    realName       = cfg.getSetting(<span class="stringliteral">&quot;realName&quot;</span>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    channel        = cfg.getSetting(<span class="stringliteral">&quot;channel&quot;</span>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    reJoin         = cfg.<a class="code" href="class_ogre_1_1_improved_config_file.html#a363a3f31b43d883a6096ded72c7a3656">getSettingBool</a>(<span class="stringliteral">&quot;reJoin&quot;</span>);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    reConnect      = cfg.<a class="code" href="class_ogre_1_1_improved_config_file.html#a363a3f31b43d883a6096ded72c7a3656">getSettingBool</a>(<span class="stringliteral">&quot;reConnect&quot;</span>);</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    </div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    <span class="comment">// TODO:</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;    <span class="comment">//userAuth = cfg.getSetting(&quot;userAuth&quot;);</span></div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="comment">//userGroups = cfg.getSetting(&quot;userGroups&quot;);</span></div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">// C from libIRCClient BELOW</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">// detects if we are meant</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="keywordtype">bool</span> isSelf(IRCWrapper * ctx, <span class="keyword">const</span> <span class="keywordtype">char</span> *origin)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;{</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <span class="keywordflow">if</span> (!origin) <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// we store the nickname without the host information, so cut off the host to find out if its us</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    String org = String(origin);</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    <span class="keywordtype">size_t</span> s = org.find(<span class="stringliteral">&quot;!&quot;</span>);</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">if</span> (s != org.npos)</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    {</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        org = org.substr(0, s);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    }</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">return</span> (org == ctx-&gt;nick);</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;}</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="keywordtype">void</span> addlog (<span class="keyword">const</span> <span class="keywordtype">char</span> * fmt, ...)</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;{</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keywordtype">char</span> buf[1024];</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;    va_list va_alist;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    va_start (va_alist, fmt);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">#if defined (_WIN32)</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    _vsnprintf (buf, <span class="keyword">sizeof</span>(buf), fmt, va_alist);</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    vsnprintf (buf, <span class="keyword">sizeof</span>(buf), fmt, va_alist);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;<span class="preprocessor">#endif // _WIN32</span></div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    va_end (va_alist);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;    <a class="code" href="_ro_r_prerequisites_8h.html#af855c94dc540e943632089ce7496faac">LOG</a>(<span class="stringliteral">&quot;IRC| &quot;</span> + String(buf));</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;}</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;<span class="keywordtype">void</span> dump_event (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;{</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    <span class="keywordtype">char</span> buf[512] = {};</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> cnt;</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    buf[0] = <span class="charliteral">&#39;\0&#39;</span>;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">for</span> ( cnt = 0; cnt &lt; count; cnt++ )</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    {</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;        <span class="keywordflow">if</span> ( cnt )</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;            strcat (buf, <span class="stringliteral">&quot;|&quot;</span>);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        strcat (buf, params[cnt]);</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    addlog (<span class="stringliteral">&quot;Event \&quot;%s\&quot;, origin: \&quot;%s\&quot;, params: %d [%s]&quot;</span>, event, origin ? origin : <span class="stringliteral">&quot;NULL&quot;</span>, cnt, buf);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;}</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="keywordtype">void</span> event_connect (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;{</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;    <span class="comment">// no params</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;    </div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    ctx-&gt;push(constructMessage(MT_StatusUpdate, 0, 0, <span class="stringliteral">&quot;Joining Channels ...&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;    </div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;    <span class="comment">// join our preset channel</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *channelKey = ctx-&gt;channelKey.c_str();</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;channelKey.empty()) channelKey = 0;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    <a class="code" href="libircclient_8h.html#a4960c546c2a077e8fb01fc7aa5ae7add">irc_cmd_join</a> (session, ctx-&gt;channel.c_str(), channelKey);</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="comment">// tell the main that we are connected now</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;    ctx-&gt;wasConnected = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;}</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="keywordtype">void</span> event_nick (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;{</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="comment">        origin  the person, who changes the nick. Note that it can be you!</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="comment">        params[0]   mandatory, contains the new nick.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;    <span class="keywordflow">if</span> ( count != 1 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;    </div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;    <span class="keywordtype">bool</span> myself = isSelf(ctx, origin);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;    ctx-&gt;push(constructMessage(myself ? MT_NickChangeSelf : MT_NickChangeOther, 0, origin, params[0]));</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;}</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="keywordtype">void</span> event_quit (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;{</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="comment">        origin  the person, who is disconnected</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="comment">        params[0]   optional, contains the reason message (user-specified).</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;    <span class="keywordflow">if</span> ( count != 1 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;    ctx-&gt;push(constructMessage(MT_QuitOther, 0, origin, params[0]));</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;}</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="keywordtype">void</span> event_join (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;{</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="comment">        origin  the person, who joins the channel. By comparing it with your own nickname, you can check whether your JOIN command succeed.</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="comment">        params[0]   mandatory, contains the channel name.</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    </div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <span class="comment">// set some user modes</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;    </div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    <span class="comment">// i - if set, marks a user as &#39;invisible&#39; - that is, not seen by lookups if the user is not in a channel.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;    <span class="comment">// s - if set, marks a user for receipt of server notices.</span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <a class="code" href="libircclient_8h.html#a71b0c8a534600d2b354be35e28735513">irc_cmd_user_mode</a> (session, <span class="stringliteral">&quot;+is&quot;</span>);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    <span class="keywordtype">bool</span> myself = isSelf(ctx, origin);</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    ctx-&gt;push(constructMessage(myself ? MT_JoinChannelSelf : MT_JoinChannelOther, params[0], origin, 0));</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    <span class="keywordflow">if</span> (myself)</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    {</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;        <span class="comment">// clear status</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        ctx-&gt;push(constructMessage(MT_StatusUpdate, 0, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    }</div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;}</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="keywordtype">void</span> event_part (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;{</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="comment">        origin  the person, who leaves the channel. By comparing it with your own nickname, you can check whether your PART command succeed.</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="comment">        params[0]   mandatory, contains the channel name.</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="comment">        params[1]   optional, contains the reason message (user-defined).</span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    <span class="keywordflow">if</span> ( count != 2 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;    <span class="keywordtype">bool</span> myself = isSelf(ctx, origin);</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;    ctx-&gt;push(constructMessage(myself ? MT_PartChannelSelf : MT_PartChannelOther, params[0], origin, params[1]));</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;}</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="keywordtype">void</span> event_mode (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;{</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="comment">        origin  the person, who changed the channel mode.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="comment">        params[0]   mandatory, contains the channel name.</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">        params[1]   mandatory, contains the changed channel mode, like &#39;+t&#39;, &#39;-i&#39; and so on.</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="comment">        params[2]   optional, contains the mode argument (for example, a key for +k mode, or user who got the channel operator status for +o mode)</span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;    <span class="keywordflow">if</span> ( count != 3 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    ctx-&gt;push(constructMessage(MT_ChangedChannelMode, params[0], params[1], 0, params[2]));</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;}</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;<span class="keywordtype">void</span> event_umode (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;{</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;<span class="comment">        origin  the person, who changed the user mode.</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;<span class="comment">        params[0]   mandatory, contains the user changed mode, like &#39;+t&#39;, &#39;-i&#39; and so on.</span></div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    <span class="keywordflow">if</span> ( count != 1 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;    ctx-&gt;push(constructMessage(MT_ChangedUserModeSelf, 0, 0, params[0]));</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;}</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;<span class="keywordtype">void</span> event_topic (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;{</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;<span class="comment">        origin  the person, who changes the channel topic.</span></div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">        params[0]   mandatory, contains the channel name.</span></div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="comment">        params[1]   optional, contains the new topic.</span></div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;    <span class="keywordflow">if</span> (count != 2) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;    ctx-&gt;push(constructMessage(MT_ChangedChannelTopic, params[0], origin, params[1]));</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;}</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="keywordtype">void</span> event_kick (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;{</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;<span class="comment">        origin  the person, who kicked the poor.</span></div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;<span class="comment">        params[0]   mandatory, contains the channel name.</span></div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">        params[1]   optional, contains the nick of kicked person.</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;<span class="comment">        params[2]   optional, contains the kick text</span></div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;    <span class="keywordflow">if</span> (count != 3) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;    <span class="keywordtype">bool</span> myself = isSelf(ctx, params[1]);</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    ctx-&gt;push(constructMessage(myself ? MT_WeGotKicked : MT_SomeoneGotKicked, params[0], origin, params[2], params[1]));</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <span class="keywordflow">if</span> (myself &amp;&amp; ctx-&gt;reJoin)</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;    {</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;        <span class="comment">// try to rejoin the channel</span></div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> *channelKey = ctx-&gt;channelKey.c_str();</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        <span class="keywordflow">if</span> (ctx-&gt;channelKey.empty()) channelKey = 0;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        <a class="code" href="libircclient_8h.html#a4960c546c2a077e8fb01fc7aa5ae7add">irc_cmd_join</a> (session, ctx-&gt;channel.c_str(), channelKey);   </div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;<span class="keywordtype">void</span> event_channel (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;{</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;<span class="comment">        origin  the person, who generates the message.</span></div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;<span class="comment">        params[0]   mandatory, contains the channel name.</span></div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">        params[1]   optional, contains the message text</span></div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;    <span class="keywordflow">if</span> ( count != 2 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    ctx-&gt;push(constructMessage(MT_Channel, params[0], origin, params[1]));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;}</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;<span class="keywordtype">void</span> event_privmsg (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;{</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;<span class="comment">        origin  the person, who generates the message.</span></div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;<span class="comment">        params[0]   mandatory, contains your nick.</span></div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;<span class="comment">        params[1]   optional, contains the message text</span></div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;    <span class="keywordflow">if</span> ( count != 2 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;    ctx-&gt;push(constructMessage(MT_GotPrivateMessage, 0, origin, params[1], params[0]));</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;}</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;<span class="keywordtype">void</span> event_notice (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;{</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;<span class="comment">        origin  the person, who generates the message.</span></div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;<span class="comment">        params[0]   mandatory, contains the target nick name.</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">        params[1]   optional, contains the message text</span></div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    <span class="keywordflow">if</span> ( count != 2 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;    ctx-&gt;push(constructMessage(MT_GotNotice, 0, origin, params[1], params[0]));</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;}</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="keywordtype">void</span> event_invite (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keyword">const</span> <span class="keywordtype">char</span> * event, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;{</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;<span class="comment">        origin  the person, who INVITEs you.</span></div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;<span class="comment">        params[0]   mandatory, contains your nick.</span></div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;<span class="comment">        params[1]   mandatory, contains the channel name you&#39;re invited into.</span></div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;<span class="comment">    */</span></div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="keywordflow">if</span> ( count != 2 ) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    ctx-&gt;push(constructMessage(MT_GotInvitation, params[1], origin, 0, params[0]));</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;}</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="keywordtype">void</span> event_numeric (<a class="code" href="structirc__session__s.html">irc_session_t</a> * session, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> eventNum, <span class="keyword">const</span> <span class="keywordtype">char</span> * origin, <span class="keyword">const</span> <span class="keywordtype">char</span> ** params, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> count)</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;{</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;    IRCWrapper * ctx = (IRCWrapper *) <a class="code" href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a> (session);</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordtype">char</span> buf[24];</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    sprintf (buf, <span class="stringliteral">&quot;%d&quot;</span>, eventNum);</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;    <span class="keywordflow">if</span> (eventNum == 433)</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;    {</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;        <span class="comment">// 433 = uername already used, try to take another one</span></div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <a class="code" href="_utils_8h.html#adf01f31d14c27678973fd6603dae2feb">sleepMilliSeconds</a>(500);</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;</div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="comment">//irc_ctx_t * ctx = (irc_ctx_t *) irc_get_ctx (session);</span></div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        <span class="comment">//ctx-&gt;retryCounter++;</span></div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        ctx-&gt;nick += <span class="stringliteral">&quot;_&quot;</span>;</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;        <span class="comment">// now change the nick</span></div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <a class="code" href="libircclient_8h.html#a19ae1ad61caf031e5c2dc950e24b7370">irc_cmd_nick</a>(session, ctx-&gt;<a class="code" href="structirc__session__s.html#a4f14fbbac50a5d9616f3c4a9677ac2b6">nick</a>.c_str());</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        <a class="code" href="_utils_8h.html#adf01f31d14c27678973fd6603dae2feb">sleepMilliSeconds</a>(500);</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        <span class="comment">// and rejoin the channels</span></div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        <a class="code" href="libircclient_8h.html#a4960c546c2a077e8fb01fc7aa5ae7add">irc_cmd_join</a> (session, ctx-&gt;channel.c_str(), 0);</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (eventNum == 251)</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    {</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;        <span class="comment">// 251 = There are &lt;integer&gt; users and &lt;integer&gt; services on &lt;integer&gt; servers</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        <span class="keywordflow">if</span> (count != 2) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        ctx-&gt;push(constructMessage(MT_VerboseMessage, 0, origin, params[1], params[0]));</div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (eventNum == 372)</div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;    {</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="comment">// 372 = RPL_MOTD</span></div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;        <span class="keywordflow">if</span> (count != 2) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;        ctx-&gt;push(constructMessage(MT_VerboseMessage, 0, origin, params[1], params[0]));</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (eventNum == 332)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;    {</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;        <span class="comment">// 332 = RPL_TOPIC / When sending a TOPIC message to determine the channel topic, one of two replies is sent. If the topic is set, RPL_TOPIC is sent back else RPL_NOTOPIC.</span></div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">if</span> (count != 3) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        ctx-&gt;push(constructMessage(MT_TopicInfo, params[1], origin, params[2], params[0]));</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (eventNum == 353)</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    {</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="comment">// 353 = RPL_NAMREPLY</span></div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">if</span> (count != 4) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        ctx-&gt;push(constructMessage(MT_NameList, params[2], origin, params[3], params[1  ]));</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;    } <span class="keywordflow">else</span></div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;    {</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        dump_event (session, buf, origin, params, count);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;    }</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div>
<div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;<span class="keywordtype">void</span> *s_ircthreadstart(<span class="keywordtype">void</span>* arg)</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;{</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;    IRCWrapper *ctx = (IRCWrapper *)arg;</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;    ctx-&gt;push(constructMessage(MT_StatusUpdate, 0, 0, <span class="stringliteral">&quot;Authenticating ...&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    </div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;    <span class="comment">// authenticate before doing anything else</span></div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;    <span class="comment">// we are doing it in this thread so the userinteface will not lag</span></div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;authenticate())</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;    {</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;        </div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        ctx-&gt;push(constructMessage(MT_ErrorAuth, 0, 0, <span class="stringliteral">&quot;Could not authenticate, please try again later&quot;</span>));</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;        <span class="comment">// clear status</span></div>
<div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;        ctx-&gt;push(constructMessage(MT_StatusUpdate, 0, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;        <span class="comment">// end thread</span></div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;    }</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;</div>
<div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;<span class="preprocessor">#ifdef _WIN32</span></div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;    <span class="comment">// winsock startup, required</span></div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;    WORD wVersionRequested = MAKEWORD (1, 1);</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;    WSADATA wsaData;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;    <span class="keywordflow">if</span> ( WSAStartup (wVersionRequested, &amp;wsaData) != 0 )</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    {</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;        <a class="code" href="_ro_r_prerequisites_8h.html#af855c94dc540e943632089ce7496faac">LOG</a>(<span class="stringliteral">&quot;IRC| failed to init IRC socket&quot;</span>);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    }</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="preprocessor">#endif // _WIN32</span></div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;    <span class="comment">// setup the callbacks</span></div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;    <a class="code" href="structirc__callbacks__t.html">irc_callbacks_t</a> callbacks;</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    memset (&amp;callbacks, 0, <span class="keyword">sizeof</span>(callbacks));</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    <span class="comment">// The &quot;on_connect&quot; event is triggered when the client successfully connects to the server, and could send commands to the server. No extra params supplied; params is 0.</span></div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a7294e75ca74ba6dc2b5c18ef8e7795a2">event_connect</a> = event_connect;</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    <span class="comment">// The &quot;nick&quot; event is triggered when the client receives a NICK message, meaning that someone (including you) on a channel with the client has changed their nickname.</span></div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a6151296f8a888132bd25d7db67ff70a5">event_nick</a> = event_nick;</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    <span class="comment">// The &quot;quit&quot; event is triggered upon receipt of a QUIT message, which means that someone on a channel with the client has disconnected.</span></div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#aa4a728c3926384c3781aa65a18ebeb7a">event_quit</a> = event_quit;</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">// The &quot;join&quot; event is triggered upon receipt of a JOIN message, which means that someone has entered a channel that the client is on.</span></div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a8f24c0e2b05425c2308a0106dbaaffec">event_join</a> = event_join;</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;    <span class="comment">// The &quot;part&quot; event is triggered upon receipt of a PART message, which means that someone has left a channel that the client is on.</span></div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a0076faaabcf638dba3f08c2048956621">event_part</a> = event_part;</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <span class="comment">// The &quot;mode&quot; event is triggered upon receipt of a channel MODE message, which means that someone on a channel with the client has changed the channel&#39;s parameters.</span></div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a3d7add398f78ad0a3c5d96133411d60a">event_mode</a> = event_mode;</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;    <span class="comment">// The &quot;umode&quot; event is triggered upon receipt of a user MODE message, which means that your user mode has been changed.</span></div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#aa92693d9acb2013f6f4b54301ee54d61">event_umode</a> = event_umode;</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;    <span class="comment">// The &quot;topic&quot; event is triggered upon receipt of a TOPIC message, which means that someone on a channel with the client has changed the channel&#39;s topic.</span></div>
<div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a8a5ab3ffc89e19d5748c58bb675436b5">event_topic</a> = event_topic;</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;    <span class="comment">// The &quot;kick&quot; event is triggered upon receipt of a KICK message, which means that someone on a channel with the client (or possibly the client itself!) has been forcibly ejected.</span></div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a1a8194bfdbf2622e9384fbd1ac1a67d7">event_kick</a> = event_kick;</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <span class="comment">// The &quot;channel&quot; event is triggered upon receipt of a PRIVMSG message to an entire channel, which means that someone on a channel with the client has said something aloud. Your own messages don&#39;t trigger PRIVMSG event.</span></div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a87d4401073ce8dba9a43fcbcaa20d341">event_channel</a> = event_channel;</div>
<div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;    <span class="comment">// The &quot;privmsg&quot; event is triggered upon receipt of a PRIVMSG message which is addressed to one or more clients, which means that someone is sending the client a private message.</span></div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#af0fe4e42f9d675f0d844fc3c58b2dc5d">event_privmsg</a> = event_privmsg;</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;    <span class="comment">// The &quot;notice&quot; event is triggered upon receipt of a NOTICE message which means that someone has sent the client a public or private notice. According to RFC 1459, the only difference between NOTICE and PRIVMSG is that you should NEVER automatically reply to NOTICE messages. Unfortunately, this rule is frequently violated by IRC servers itself - for example, NICKSERV messages require reply, and are NOTICEs.</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a92a5b22ba900f06fa04ea9e79462ffc6">event_notice</a> = event_notice;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;    <span class="comment">// The &quot;channel_notice&quot; event is triggered upon receipt of a NOTICE message which means that someone has sent the client a public notice. According to RFC 1459, the only difference between NOTICE and PRIVMSG is that you should NEVER automatically reply to NOTICE messages. Unfortunately, this rule is frequently violated by IRC servers itself - for example, NICKSERV messages require reply, and are NOTICEs.</span></div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;    <span class="comment">//callbacks.event_channel_notice = dump_event;</span></div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="comment">// The &quot;invite&quot; event is triggered upon receipt of an INVITE message, which means that someone is permitting the client&#39;s entry into a +i channel.</span></div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#ae5f3325ab13c3a36ed84435e3bcf7b61">event_invite</a> = event_invite;</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;    <span class="comment">// The &quot;ctcp&quot; event is triggered when the client receives the CTCP request. By default, the built-in CTCP request handler is used. The build-in handler automatically replies on most CTCP messages, so you will rarely need to override it.</span></div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <span class="comment">//callbacks.event_ctcp_req = dump_event;</span></div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;    <span class="comment">// The &quot;ctcp&quot; event is triggered when the client receives the CTCP reply.</span></div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="comment">//callbacks.event_ctcp_rep = dump_event;</span></div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;    <span class="comment">// The &quot;action&quot; event is triggered when the client receives the CTCP ACTION message.</span></div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;    <span class="comment">//callbacks.event_ctcp_action = dump_event;</span></div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="comment">// The &quot;unknown&quot; event is triggered upon receipt of any number of unclassifiable miscellaneous messages, which aren&#39;t handled by the library.</span></div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a765b4f0a622cedf2c26c1a615414a3a4">event_unknown</a> = dump_event;</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="comment">// The &quot;numeric&quot; event is triggered upon receipt of any numeric response from the server. There is a lot of such responses, see the full list here: Numeric reply codes from RFC1459.</span></div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    callbacks.<a class="code" href="structirc__callbacks__t.html#a85951d45acff22aea37a822bb9c7aef7">event_numeric</a> = event_numeric;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    <span class="comment">// The &quot;dcc chat&quot; event is triggered when someone requests a DCC CHAT from you.</span></div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    <span class="comment">//callbacks.event_dcc_chat_req = dump_event;</span></div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="comment">// The &quot;dcc chat&quot; event is triggered when someone wants to send a file to you via DCC SEND request.</span></div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;    <span class="comment">//callbacks.event_dcc_send_req = dump_event;</span></div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;    ctx-&gt;push(constructMessage(MT_StatusUpdate, 0, 0, <span class="stringliteral">&quot;Connecting ...&quot;</span>, <span class="stringliteral">&quot;1&quot;</span>));</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    ctx-&gt;irc_session = <a class="code" href="libircclient_8h.html#ac5dada35ee77795d8bb77b6701853b98">irc_create_session</a> (&amp;callbacks);</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;    <span class="keywordflow">if</span> (!ctx-&gt;irc_session)</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    {</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;        <a class="code" href="_ro_r_prerequisites_8h.html#af855c94dc540e943632089ce7496faac">LOG</a> (<span class="stringliteral">&quot;Could not create session&quot;</span>);</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;        <span class="comment">// clear status</span></div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        ctx-&gt;push(constructMessage(MT_StatusUpdate, 0, 0, <span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;    }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    ctx-&gt;retryCounter++;</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;retryCounter &gt; 1)</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;    {</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;        <span class="comment">// sleep longer the more often we try to connect - security measure</span></div>
<div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;        <span class="comment">// gives the old connection the chance to time-out</span></div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;        <a class="code" href="_utils_8h.html#adf01f31d14c27678973fd6603dae2feb">sleepMilliSeconds</a>(2000*ctx-&gt;retryCounter);</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;    }</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    <a class="code" href="libircclient_8h.html#ae0cf439a36aafce4abab8f4cce5ac5ff">irc_set_ctx</a> (ctx-&gt;irc_session, ctx);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    <span class="comment">// allows to strip origins automatically</span></div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    <a class="code" href="libircclient_8h.html#af56687ccad2045204ae23f70d2f54860">irc_option_reset</a>(ctx-&gt;irc_session, <a class="code" href="libirc__options_8h.html#a0dd67b0a5373a108d86d911fa5741e72">LIBIRC_OPTION_STRIPNICKS</a>);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    <span class="comment">// some c++ -&gt; c mapping</span></div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *serverName     = ctx-&gt;serverName.c_str();</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *serverPassword = ctx-&gt;serverPassword.c_str();</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;serverPassword.empty()) serverPassword = 0;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *nick           = ctx-&gt;nick.c_str();</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;nick.empty()) nick = 0;</div>
<div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *userName       = ctx-&gt;userName.c_str();</div>
<div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;userName.empty()) userName = 0;</div>
<div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *realName       = ctx-&gt;realName.c_str();</div>
<div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;    <span class="keywordflow">if</span> (ctx-&gt;realName.empty()) realName = 0;</div>
<div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div>
<div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="libircclient_8h.html#a121b23c9e131da651175ae779e1b6851">irc_connect</a> (ctx-&gt;irc_session, serverName, ctx-&gt;serverPort, serverPassword, nick, userName, realName))</div>
<div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;    {</div>
<div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;        <a class="code" href="_ro_r_prerequisites_8h.html#af855c94dc540e943632089ce7496faac">LOG</a> (<span class="stringliteral">&quot;Could not connect: &quot;</span> + String(<a class="code" href="errors_8c_09_09.html#afdc70ca04626818d2fd9a55da0b90e5f">irc_strerror</a> (<a class="code" href="errors_8c_09_09.html#a3a18336093ee74751244d996bc32247d">irc_errno</a>(ctx-&gt;irc_session))));</div>
<div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    }</div>
<div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;    <span class="comment">// start the main loop in this thread</span></div>
<div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;    <a class="code" href="libircclient_8h.html#a112631b75eb9997868d73fede17440d0">irc_run</a> (ctx-&gt;irc_session);</div>
<div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;    <a class="code" href="libircclient_8h.html#a30c6cea4f149632d1905b097a3a573f7">irc_destroy_session</a>(ctx-&gt;irc_session);</div>
<div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;}</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="preprocessor">#endif // USE_SOCKETW</span></div>
<div class="ttc" id="_settings_8h_html"><div class="ttname"><a href="_settings_8h.html">Settings.h</a></div></div>
<div class="ttc" id="libircclient_8h_html_adb50b9a3a78693266fb0a257b997831b"><div class="ttname"><a href="libircclient_8h.html#adb50b9a3a78693266fb0a257b997831b">irc_cmd_part</a></div><div class="ttdeci">int irc_cmd_part(irc_session_t *session, const char *channel)</div><div class="ttdoc">Leaves the IRC channel. </div></div>
<div class="ttc" id="structirc__callbacks__t_html"><div class="ttname"><a href="structirc__callbacks__t.html">irc_callbacks_t</a></div><div class="ttdoc">Event callbacks structure. </div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00160">libirc_events.h:160</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_aa4a728c3926384c3781aa65a18ebeb7a"><div class="ttname"><a href="structirc__callbacks__t.html#aa4a728c3926384c3781aa65a18ebeb7a">irc_callbacks_t::event_quit</a></div><div class="ttdeci">irc_event_callback_t event_quit</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00186">libirc_events.h:186</a></div></div>
<div class="ttc" id="structirc__session__s_html_a4f14fbbac50a5d9616f3c4a9677ac2b6"><div class="ttname"><a href="structirc__session__s.html#a4f14fbbac50a5d9616f3c4a9677ac2b6">irc_session_s::nick</a></div><div class="ttdeci">char * nick</div><div class="ttdef"><b>Definition:</b> <a href="libirc__session_8h_source.html#l00053">libirc_session.h:53</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_a0076faaabcf638dba3f08c2048956621"><div class="ttname"><a href="structirc__callbacks__t.html#a0076faaabcf638dba3f08c2048956621">irc_callbacks_t::event_part</a></div><div class="ttdeci">irc_event_callback_t event_part</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00209">libirc_events.h:209</a></div></div>
<div class="ttc" id="rornet_8h_html_a25f6f42fe5abd553c6aa818bbe952633"><div class="ttname"><a href="rornet_8h.html#a25f6f42fe5abd553c6aa818bbe952633">REPO_SERVER</a></div><div class="ttdeci">static const char VARIABLE_IS_NOT_USED * REPO_SERVER</div><div class="ttdoc">the web API URL </div><div class="ttdef"><b>Definition:</b> <a href="rornet_8h_source.html#l00044">rornet.h:44</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_a92a5b22ba900f06fa04ea9e79462ffc6"><div class="ttname"><a href="structirc__callbacks__t.html#a92a5b22ba900f06fa04ea9e79462ffc6">irc_callbacks_t::event_notice</a></div><div class="ttdeci">irc_event_callback_t event_notice</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00295">libirc_events.h:295</a></div></div>
<div class="ttc" id="libircclient_8h_html_a112631b75eb9997868d73fede17440d0"><div class="ttname"><a href="libircclient_8h.html#a112631b75eb9997868d73fede17440d0">irc_run</a></div><div class="ttdeci">int irc_run(irc_session_t *session)</div><div class="ttdoc">Goes into forever-loop, processing IRC events and generating callbacks. </div></div>
<div class="ttc" id="namespace_profiler_html_af79bb59414ef3ba134213bb6f2f2d292"><div class="ttname"><a href="namespace_profiler.html#af79bb59414ef3ba134213bb6f2f2d292">Profiler::exit</a></div><div class="ttdeci">void fastcall exit()</div></div>
<div class="ttc" id="structirc__callbacks__t_html_a765b4f0a622cedf2c26c1a615414a3a4"><div class="ttname"><a href="structirc__callbacks__t.html#a765b4f0a622cedf2c26c1a615414a3a4">irc_callbacks_t::event_unknown</a></div><div class="ttdeci">irc_event_callback_t event_unknown</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00352">libirc_events.h:352</a></div></div>
<div class="ttc" id="libircclient_8h_html_a71b0c8a534600d2b354be35e28735513"><div class="ttname"><a href="libircclient_8h.html#a71b0c8a534600d2b354be35e28735513">irc_cmd_user_mode</a></div><div class="ttdeci">int irc_cmd_user_mode(irc_session_t *session, const char *mode)</div><div class="ttdoc">Views or changes your own user mode. </div></div>
<div class="ttc" id="libircclient_8h_html_a341a8954613f29c7ff5a92413398ce7d"><div class="ttname"><a href="libircclient_8h.html#a341a8954613f29c7ff5a92413398ce7d">irc_get_ctx</a></div><div class="ttdeci">void * irc_get_ctx(irc_session_t *session)</div><div class="ttdoc">Returns the IRC session context. </div></div>
<div class="ttc" id="_i_r_c_wrapper_8h_html"><div class="ttname"><a href="_i_r_c_wrapper_8h.html">IRCWrapper.h</a></div></div>
<div class="ttc" id="libircclient_8h_html_ae0cf439a36aafce4abab8f4cce5ac5ff"><div class="ttname"><a href="libircclient_8h.html#ae0cf439a36aafce4abab8f4cce5ac5ff">irc_set_ctx</a></div><div class="ttdeci">void irc_set_ctx(irc_session_t *session, void *ctx)</div><div class="ttdoc">Sets the IRC session context. </div></div>
<div class="ttc" id="rornet_8h_html"><div class="ttname"><a href="rornet_8h.html">rornet.h</a></div></div>
<div class="ttc" id="libircclient_8h_html_af56687ccad2045204ae23f70d2f54860"><div class="ttname"><a href="libircclient_8h.html#af56687ccad2045204ae23f70d2f54860">irc_option_reset</a></div><div class="ttdeci">void irc_option_reset(irc_session_t *session, unsigned int option)</div><div class="ttdoc">Resets the libircclient option. </div></div>
<div class="ttc" id="libircclient_8h_html_a30c6cea4f149632d1905b097a3a573f7"><div class="ttname"><a href="libircclient_8h.html#a30c6cea4f149632d1905b097a3a573f7">irc_destroy_session</a></div><div class="ttdeci">void irc_destroy_session(irc_session_t *session)</div><div class="ttdoc">Destroys previously created IRC session. </div></div>
<div class="ttc" id="libircclient_8h_html_a121b23c9e131da651175ae779e1b6851"><div class="ttname"><a href="libircclient_8h.html#a121b23c9e131da651175ae779e1b6851">irc_connect</a></div><div class="ttdeci">int irc_connect(irc_session_t *session, const char *server, unsigned short port, const char *server_password, const char *nick, const char *username, const char *realname)</div><div class="ttdoc">Initiates a connection to IRC server. </div></div>
<div class="ttc" id="libircclient_8h_html_a19ae1ad61caf031e5c2dc950e24b7370"><div class="ttname"><a href="libircclient_8h.html#a19ae1ad61caf031e5c2dc950e24b7370">irc_cmd_nick</a></div><div class="ttdeci">int irc_cmd_nick(irc_session_t *session, const char *newnick)</div><div class="ttdoc">Changes your nick. </div></div>
<div class="ttc" id="_ro_r_prerequisites_8h_html_af855c94dc540e943632089ce7496faac"><div class="ttname"><a href="_ro_r_prerequisites_8h.html#af855c94dc540e943632089ce7496faac">LOG</a></div><div class="ttdeci">#define LOG(x)</div><div class="ttdef"><b>Definition:</b> <a href="_ro_r_prerequisites_8h_source.html#l00067">RoRPrerequisites.h:67</a></div></div>
<div class="ttc" id="_ro_r_version_8h_html"><div class="ttname"><a href="_ro_r_version_8h.html">RoRVersion.h</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_a1a8194bfdbf2622e9384fbd1ac1a67d7"><div class="ttname"><a href="structirc__callbacks__t.html#a1a8194bfdbf2622e9384fbd1ac1a67d7">irc_callbacks_t::event_kick</a></div><div class="ttdeci">irc_event_callback_t event_kick</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00257">libirc_events.h:257</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_af0fe4e42f9d675f0d844fc3c58b2dc5d"><div class="ttname"><a href="structirc__callbacks__t.html#af0fe4e42f9d675f0d844fc3c58b2dc5d">irc_callbacks_t::event_privmsg</a></div><div class="ttdeci">irc_event_callback_t event_privmsg</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00280">libirc_events.h:280</a></div></div>
<div class="ttc" id="libircclient_8h_html_a8c2ec03f1a9ce7c739e11b64fd088ae5"><div class="ttname"><a href="libircclient_8h.html#a8c2ec03f1a9ce7c739e11b64fd088ae5">irc_cmd_msg</a></div><div class="ttdeci">int irc_cmd_msg(irc_session_t *session, const char *nch, const char *text)</div><div class="ttdoc">Sends the message to the nick or to the channel. </div></div>
<div class="ttc" id="structirc__callbacks__t_html_a3d7add398f78ad0a3c5d96133411d60a"><div class="ttname"><a href="structirc__callbacks__t.html#a3d7add398f78ad0a3c5d96133411d60a">irc_callbacks_t::event_mode</a></div><div class="ttdeci">irc_event_callback_t event_mode</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00224">libirc_events.h:224</a></div></div>
<div class="ttc" id="_utils_8h_html"><div class="ttname"><a href="_utils_8h.html">Utils.h</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_a87d4401073ce8dba9a43fcbcaa20d341"><div class="ttname"><a href="structirc__callbacks__t.html#a87d4401073ce8dba9a43fcbcaa20d341">irc_callbacks_t::event_channel</a></div><div class="ttdeci">irc_event_callback_t event_channel</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00269">libirc_events.h:269</a></div></div>
<div class="ttc" id="libircclient_8h_html_ac5dada35ee77795d8bb77b6701853b98"><div class="ttname"><a href="libircclient_8h.html#ac5dada35ee77795d8bb77b6701853b98">irc_create_session</a></div><div class="ttdeci">irc_session_t * irc_create_session(irc_callbacks_t *callbacks)</div><div class="ttdoc">Creates and initiates a new IRC session. </div></div>
<div class="ttc" id="rornet_8h_html_abee9681e15dfd9c0e955dcc2a24c93dc"><div class="ttname"><a href="rornet_8h.html#abee9681e15dfd9c0e955dcc2a24c93dc">RORNET_VERSION</a></div><div class="ttdeci">static const char VARIABLE_IS_NOT_USED * RORNET_VERSION</div><div class="ttdoc">the protocol version information </div><div class="ttdef"><b>Definition:</b> <a href="rornet_8h_source.html#l00041">rornet.h:41</a></div></div>
<div class="ttc" id="struct_error_utils_html_a5877046712b57723ec40772afd980378"><div class="ttname"><a href="struct_error_utils.html#a5877046712b57723ec40772afd980378">ErrorUtils::ShowOgreWebError</a></div><div class="ttdeci">static int ShowOgreWebError(Ogre::UTFString title, Ogre::UTFString err, Ogre::UTFString url)</div><div class="ttdef"><b>Definition:</b> <a href="_error_utils_8cpp_source.html#l00078">ErrorUtils.cpp:78</a></div></div>
<div class="ttc" id="_utils_8h_html_adf01f31d14c27678973fd6603dae2feb"><div class="ttname"><a href="_utils_8h.html#adf01f31d14c27678973fd6603dae2feb">sleepMilliSeconds</a></div><div class="ttdeci">void sleepMilliSeconds(unsigned int ms)</div><div class="ttdef"><b>Definition:</b> <a href="_utils_8h_source.html#l00110">Utils.h:110</a></div></div>
<div class="ttc" id="class_ogre_1_1_improved_config_file_html_a363a3f31b43d883a6096ded72c7a3656"><div class="ttname"><a href="class_ogre_1_1_improved_config_file.html#a363a3f31b43d883a6096ded72c7a3656">Ogre::ImprovedConfigFile::getSettingBool</a></div><div class="ttdeci">bool getSettingBool(String key, String section=StringUtil::BLANK)</div><div class="ttdef"><b>Definition:</b> <a href="_improved_config_file_8h_source.html#l00126">ImprovedConfigFile.h:126</a></div></div>
<div class="ttc" id="_ro_r_version_8h_html_a69a4d74161655a3024e47ad8c70ac848"><div class="ttname"><a href="_ro_r_version_8h.html#a69a4d74161655a3024e47ad8c70ac848">ROR_VERSION_STRING</a></div><div class="ttdeci">#define ROR_VERSION_STRING</div><div class="ttdef"><b>Definition:</b> <a href="_ro_r_version_8h_source.html#l00035">RoRVersion.h:35</a></div></div>
<div class="ttc" id="structirc__session__s_html"><div class="ttname"><a href="structirc__session__s.html">irc_session_s</a></div><div class="ttdef"><b>Definition:</b> <a href="libirc__session_8h_source.html#l00030">libirc_session.h:30</a></div></div>
<div class="ttc" id="structcurl_memory_struct_html"><div class="ttname"><a href="structcurl_memory_struct.html">curlMemoryStruct</a></div><div class="ttdef"><b>Definition:</b> <a href="_game_script_8h_source.html#l00033">GameScript.h:33</a></div></div>
<div class="ttc" id="_settings_8h_html_a59d79e9512ab19f4eb8a322f1e32dc11"><div class="ttname"><a href="_settings_8h.html#a59d79e9512ab19f4eb8a322f1e32dc11">SSETTING</a></div><div class="ttdeci">#define SSETTING(x, y)</div><div class="ttdef"><b>Definition:</b> <a href="_settings_8h_source.html#l00032">Settings.h:32</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_a8f24c0e2b05425c2308a0106dbaaffec"><div class="ttname"><a href="structirc__callbacks__t.html#a8f24c0e2b05425c2308a0106dbaaffec">irc_callbacks_t::event_join</a></div><div class="ttdeci">irc_event_callback_t event_join</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00197">libirc_events.h:197</a></div></div>
<div class="ttc" id="_error_utils_8h_html"><div class="ttname"><a href="_error_utils_8h.html">ErrorUtils.h</a></div></div>
<div class="ttc" id="libircclient_8h_html_aa89bd6efb6dacf53f25ca5518a5aa4ee"><div class="ttname"><a href="libircclient_8h.html#aa89bd6efb6dacf53f25ca5518a5aa4ee">irc_cmd_quit</a></div><div class="ttdeci">int irc_cmd_quit(irc_session_t *session, const char *reason)</div><div class="ttdoc">Sends QUIT command to the IRC server. </div></div>
<div class="ttc" id="structirc__callbacks__t_html_a7294e75ca74ba6dc2b5c18ef8e7795a2"><div class="ttname"><a href="structirc__callbacks__t.html#a7294e75ca74ba6dc2b5c18ef8e7795a2">irc_callbacks_t::event_connect</a></div><div class="ttdeci">irc_event_callback_t event_connect</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00167">libirc_events.h:167</a></div></div>
<div class="ttc" id="libircclient_8h_html_a09c7e471bf4062b57df10d31ee275fc5"><div class="ttname"><a href="libircclient_8h.html#a09c7e471bf4062b57df10d31ee275fc5">irc_cmd_me</a></div><div class="ttdeci">int irc_cmd_me(irc_session_t *session, const char *nch, const char *text)</div><div class="ttdoc">Sends the /me (CTCP ACTION) message to the nick or to the channel. </div></div>
<div class="ttc" id="structcurl_memory_struct_html_aa008dca9064cc1ee751228002a6622b9"><div class="ttname"><a href="structcurl_memory_struct.html#aa008dca9064cc1ee751228002a6622b9">curlMemoryStruct::size</a></div><div class="ttdeci">size_t size</div><div class="ttdef"><b>Definition:</b> <a href="_game_script_8h_source.html#l00035">GameScript.h:35</a></div></div>
<div class="ttc" id="libirc__options_8h_html_a0dd67b0a5373a108d86d911fa5741e72"><div class="ttname"><a href="libirc__options_8h.html#a0dd67b0a5373a108d86d911fa5741e72">LIBIRC_OPTION_STRIPNICKS</a></div><div class="ttdeci">#define LIBIRC_OPTION_STRIPNICKS</div><div class="ttdoc">allows to strip origins automatically. </div><div class="ttdef"><b>Definition:</b> <a href="libirc__options_8h_source.html#l00046">libirc_options.h:46</a></div></div>
<div class="ttc" id="class_ogre_1_1_improved_config_file_html_a57e74b2661b9a10057c66830dd9652ad"><div class="ttname"><a href="class_ogre_1_1_improved_config_file.html#a57e74b2661b9a10057c66830dd9652ad">Ogre::ImprovedConfigFile::loadFromString</a></div><div class="ttdeci">void loadFromString(const Ogre::String str, const String &amp;separators, bool trimWhitespace)</div><div class="ttdef"><b>Definition:</b> <a href="_improved_config_file_8h_source.html#l00058">ImprovedConfigFile.h:58</a></div></div>
<div class="ttc" id="libircclient_8h_html_a4960c546c2a077e8fb01fc7aa5ae7add"><div class="ttname"><a href="libircclient_8h.html#a4960c546c2a077e8fb01fc7aa5ae7add">irc_cmd_join</a></div><div class="ttdeci">int irc_cmd_join(irc_session_t *session, const char *channel, const char *key)</div><div class="ttdoc">Joins the new IRC channel. </div></div>
<div class="ttc" id="structirc__callbacks__t_html_aa92693d9acb2013f6f4b54301ee54d61"><div class="ttname"><a href="structirc__callbacks__t.html#aa92693d9acb2013f6f4b54301ee54d61">irc_callbacks_t::event_umode</a></div><div class="ttdeci">irc_event_callback_t event_umode</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00234">libirc_events.h:234</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_ae5f3325ab13c3a36ed84435e3bcf7b61"><div class="ttname"><a href="structirc__callbacks__t.html#ae5f3325ab13c3a36ed84435e3bcf7b61">irc_callbacks_t::event_invite</a></div><div class="ttdeci">irc_event_callback_t event_invite</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00308">libirc_events.h:308</a></div></div>
<div class="ttc" id="structcurl_memory_struct_html_a087fa3e538f0241ab14b505bf6589fdb"><div class="ttname"><a href="structcurl_memory_struct.html#a087fa3e538f0241ab14b505bf6589fdb">curlMemoryStruct::memory</a></div><div class="ttdeci">char * memory</div><div class="ttdef"><b>Definition:</b> <a href="_game_script_8h_source.html#l00034">GameScript.h:34</a></div></div>
<div class="ttc" id="errors_8c_09_09_html_a3a18336093ee74751244d996bc32247d"><div class="ttname"><a href="errors_8c_09_09.html#a3a18336093ee74751244d996bc32247d">irc_errno</a></div><div class="ttdeci">int irc_errno(irc_session_t *session)</div><div class="ttdoc">Returns the last error code. </div><div class="ttdef"><b>Definition:</b> <a href="errors_8c_09_09_source.html#l00037">errors.c++:37</a></div></div>
<div class="ttc" id="class_ogre_1_1_improved_config_file_html"><div class="ttname"><a href="class_ogre_1_1_improved_config_file.html">Ogre::ImprovedConfigFile</a></div><div class="ttdef"><b>Definition:</b> <a href="_improved_config_file_8h_source.html#l00031">ImprovedConfigFile.h:31</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_a6151296f8a888132bd25d7db67ff70a5"><div class="ttname"><a href="structirc__callbacks__t.html#a6151296f8a888132bd25d7db67ff70a5">irc_callbacks_t::event_nick</a></div><div class="ttdeci">irc_event_callback_t event_nick</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00177">libirc_events.h:177</a></div></div>
<div class="ttc" id="_improved_config_file_8h_html"><div class="ttname"><a href="_improved_config_file_8h.html">ImprovedConfigFile.h</a></div></div>
<div class="ttc" id="class_ogre_1_1_improved_config_file_html_ae1f7f7fbf18b6f3f69442c2dfb510e8a"><div class="ttname"><a href="class_ogre_1_1_improved_config_file.html#ae1f7f7fbf18b6f3f69442c2dfb510e8a">Ogre::ImprovedConfigFile::hasSetting</a></div><div class="ttdeci">bool hasSetting(Ogre::String key, Ogre::String section=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> <a href="_improved_config_file_8h_source.html#l00066">ImprovedConfigFile.h:66</a></div></div>
<div class="ttc" id="errors_8c_09_09_html_afdc70ca04626818d2fd9a55da0b90e5f"><div class="ttname"><a href="errors_8c_09_09.html#afdc70ca04626818d2fd9a55da0b90e5f">irc_strerror</a></div><div class="ttdeci">const char * irc_strerror(int ircerrno)</div><div class="ttdoc">Returns the text error message associated with this error code. </div><div class="ttdef"><b>Definition:</b> <a href="errors_8c_09_09_source.html#l00043">errors.c++:43</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_a85951d45acff22aea37a822bb9c7aef7"><div class="ttname"><a href="structirc__callbacks__t.html#a85951d45acff22aea37a822bb9c7aef7">irc_callbacks_t::event_numeric</a></div><div class="ttdeci">irc_eventcode_callback_t event_numeric</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00361">libirc_events.h:361</a></div></div>
<div class="ttc" id="libircclient_8h_html_a90f826583118cb2e34135cb0e9b26cf8"><div class="ttname"><a href="libircclient_8h.html#a90f826583118cb2e34135cb0e9b26cf8">irc_is_connected</a></div><div class="ttdeci">int irc_is_connected(irc_session_t *session)</div><div class="ttdoc">Checks whether the session is connecting/connected to the IRC server. </div></div>
<div class="ttc" id="libircclient_8h_html_aa5f6dd73d3f0bdecb53f53362e253aab"><div class="ttname"><a href="libircclient_8h.html#aa5f6dd73d3f0bdecb53f53362e253aab">irc_disconnect</a></div><div class="ttdeci">void irc_disconnect(irc_session_t *session)</div><div class="ttdoc">Disconnects a connection to IRC server. </div></div>
<div class="ttc" id="class_ogre_1_1_improved_config_file_html_a7f110ad9b4ccb57322ceed5c8dc1d956"><div class="ttname"><a href="class_ogre_1_1_improved_config_file.html#a7f110ad9b4ccb57322ceed5c8dc1d956">Ogre::ImprovedConfigFile::getSettingInt</a></div><div class="ttdeci">int getSettingInt(String key, String section=StringUtil::BLANK)</div><div class="ttdef"><b>Definition:</b> <a href="_improved_config_file_8h_source.html#l00132">ImprovedConfigFile.h:132</a></div></div>
<div class="ttc" id="structirc__callbacks__t_html_a8a5ab3ffc89e19d5748c58bb675436b5"><div class="ttname"><a href="structirc__callbacks__t.html#a8a5ab3ffc89e19d5748c58bb675436b5">irc_callbacks_t::event_topic</a></div><div class="ttdeci">irc_event_callback_t event_topic</div><div class="ttdef"><b>Definition:</b> <a href="libirc__events_8h_source.html#l00245">libirc_events.h:245</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Oct 13 2015 20:09:34 for Rigs of Rods by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.7
</small></address>
</body>
</html>
