<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Rigs of Rods: source/main/gui/GUIFriction.cpp Source File</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  <td id="projectlogo"><img alt="Logo" src="rorlogo.png"/></td>
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Rigs of Rods
   
   </div>
   <div id="projectbrief">Soft-body Physics Simulation</div>
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.6.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">source/main/gui/GUIFriction.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="_g_u_i_friction_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment">This source file is part of Rigs of Rods</span>
<a name="l00003"></a>00003 <span class="comment">Copyright 2005-2012 Pierre-Michel Ricordel</span>
<a name="l00004"></a>00004 <span class="comment">Copyright 2007-2012 Thomas Fischer</span>
<a name="l00005"></a>00005 <span class="comment"></span>
<a name="l00006"></a>00006 <span class="comment">For more information, see http://www.rigsofrods.com/</span>
<a name="l00007"></a>00007 <span class="comment"></span>
<a name="l00008"></a>00008 <span class="comment">Rigs of Rods is free software: you can redistribute it and/or modify</span>
<a name="l00009"></a>00009 <span class="comment">it under the terms of the GNU General Public License version 3, as</span>
<a name="l00010"></a>00010 <span class="comment">published by the Free Software Foundation.</span>
<a name="l00011"></a>00011 <span class="comment"></span>
<a name="l00012"></a>00012 <span class="comment">Rigs of Rods is distributed in the hope that it will be useful,</span>
<a name="l00013"></a>00013 <span class="comment">but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00014"></a>00014 <span class="comment">MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00015"></a>00015 <span class="comment">GNU General Public License for more details.</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">You should have received a copy of the GNU General Public License</span>
<a name="l00018"></a>00018 <span class="comment">along with Rigs of Rods.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00019"></a>00019 <span class="comment">*/</span>
<a name="l00020"></a>00020 <span class="comment">// created by Thomas Fischer thomas{AT}thomasfischer{DOT}biz, 7th of September 2009</span>
<a name="l00021"></a>00021 <span class="preprocessor">#ifdef USE_MYGUI</span>
<a name="l00022"></a>00022 <span class="preprocessor"></span>
<a name="l00023"></a>00023 <span class="preprocessor">#include &quot;<a class="code" href="_g_u_i_friction_8h.html">GUIFriction.h</a>&quot;</span>
<a name="l00024"></a>00024 
<a name="l00025"></a>00025 <span class="preprocessor">#include &quot;<a class="code" href="_application_8h.html" title="Central object manager and communications hub.">Application.h</a>&quot;</span>
<a name="l00026"></a>00026 <span class="preprocessor">#include &quot;<a class="code" href="_beam_data_8h.html" title="Core data structures for simulation.">BeamData.h</a>&quot;</span>
<a name="l00027"></a>00027 <span class="preprocessor">#include &quot;<a class="code" href="_settings_8h.html">Settings.h</a>&quot;</span>
<a name="l00028"></a>00028 <span class="preprocessor">#include &quot;<a class="code" href="_collisions_8h.html">Collisions.h</a>&quot;</span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;<a class="code" href="_g_u_i_manager_8h.html">GUIManager.h</a>&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="_language_8h.html">Language.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;<a class="code" href="_utils_8h.html">Utils.h</a>&quot;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="keyword">using namespace </span>Ogre;
<a name="l00034"></a>00034 
<a name="l00035"></a>00035 GUI_Friction::GUI_Friction() :
<a name="l00036"></a>00036       col(0)
<a name="l00037"></a>00037     , active_gm(0)
<a name="l00038"></a>00038     , selected_gm(0)
<a name="l00039"></a>00039     , win(0)
<a name="l00040"></a>00040 {
<a name="l00041"></a>00041     <span class="keywordtype">int</span> x=0, y=0, by=0;
<a name="l00042"></a>00042     MyGUI::EditPtr e;
<a name="l00043"></a>00043     MyGUI::ScrollBar *h;
<a name="l00044"></a>00044     MyGUI::ButtonPtr b;
<a name="l00045"></a>00045     MyGUI::TextBox *t;
<a name="l00046"></a>00046 
<a name="l00047"></a>00047     msgwin = MyGUI::Gui::getInstance().createWidget&lt;MyGUI::Window&gt;(<span class="stringliteral">&quot;WindowCSX&quot;</span>, 0, 0, 400, 300,  MyGUI::Align::Center, <span class="stringliteral">&quot;Overlapped&quot;</span>);
<a name="l00048"></a>00048     msgwin-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Friction Help&quot;</span>));
<a name="l00049"></a>00049     msgwin-&gt;eventWindowButtonPressed += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::notifyHelpWindowButtonPressed);
<a name="l00050"></a>00050     e = msgwin-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBoxStretch&quot;</span>, 0, 0, 400, 300,  MyGUI::Align::Default, <span class="stringliteral">&quot;helptext&quot;</span>);
<a name="l00051"></a>00051     e-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00052"></a>00052     e-&gt;setEditWordWrap(<span class="keyword">true</span>);
<a name="l00053"></a>00053     e-&gt;setEditStatic(<span class="keyword">true</span>);
<a name="l00054"></a>00054     msgwin-&gt;setVisible(<span class="keyword">false</span>);
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 
<a name="l00057"></a>00057     win = MyGUI::Gui::getInstance().createWidget&lt;MyGUI::Window&gt;(<span class="stringliteral">&quot;WindowCSX&quot;</span>, 0, 0, 400, 500,  MyGUI::Align::Center, <span class="stringliteral">&quot;Overlapped&quot;</span>);
<a name="l00058"></a>00058     win-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Friction Settings&quot;</span>));
<a name="l00059"></a>00059 
<a name="l00060"></a>00060     <span class="comment">// active ground</span>
<a name="l00061"></a>00061     x=10, y=10;
<a name="l00062"></a>00062     t = win-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, x, y, 270, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;text_current_ground&quot;</span>); x+=275;
<a name="l00063"></a>00063     t-&gt;setCaption(<span class="stringliteral">&quot;Current active Ground: n/a&quot;</span>);
<a name="l00064"></a>00064     t-&gt;setFontHeight(18);
<a name="l00065"></a>00065     b = win-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, x, y, 70, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;select_current_ground&quot;</span>); x+=75;
<a name="l00066"></a>00066     b-&gt;setCaption(<span class="stringliteral">&quot;select&quot;</span>);
<a name="l00067"></a>00067     b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00068"></a>00068 
<a name="l00069"></a>00069     <span class="comment">// combo box</span>
<a name="l00070"></a>00070     x=20; y+=20;
<a name="l00071"></a>00071     t = win-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, x, y, 170, 20,  MyGUI::Align::Default); x+=175;
<a name="l00072"></a>00072     t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;selected Ground Type:&quot;</span>));
<a name="l00073"></a>00073     t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00074"></a>00074 
<a name="l00075"></a>00075     MyGUI::ComboBoxPtr cb = win-&gt;createWidget&lt;MyGUI::ComboBox&gt;(<span class="stringliteral">&quot;ComboBox&quot;</span>, x, y, 115, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;combo_grounds&quot;</span>);
<a name="l00076"></a>00076     cb-&gt;eventComboAccept += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_combo_grounds_eventComboAccept);
<a name="l00077"></a>00077     cb-&gt;eventComboChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_combo_grounds_eventComboAccept);
<a name="l00078"></a>00078     cb-&gt;setEditStatic(<span class="keyword">true</span>);
<a name="l00079"></a>00079     <span class="comment">// ground models are not loaded here yet, so we will add them once we show the dialog</span>
<a name="l00080"></a>00080     
<a name="l00081"></a>00081     x=10; y+=30;
<a name="l00082"></a>00082     t = win-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, x, y, 170, 20,  MyGUI::Align::Default); x+=175;
<a name="l00083"></a>00083     t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Solid ground settings&quot;</span>));
<a name="l00084"></a>00084     
<a name="l00085"></a>00085     <span class="comment">// adding panel for solid ground</span>
<a name="l00086"></a>00086     x=10; by = y + 20; <span class="comment">// set box start now</span>
<a name="l00087"></a>00087     MyGUI::WidgetPtr p = win-&gt;createWidget&lt;MyGUI::Widget&gt;(<span class="stringliteral">&quot;PanelSkin&quot;</span>, x, by, 370, 25,  MyGUI::Align::Default);
<a name="l00088"></a>00088     {
<a name="l00089"></a>00089         <span class="comment">// solid_level</span>
<a name="l00090"></a>00090         <span class="keywordtype">int</span> lx=0, ly=5; <span class="comment">// local coordinate system</span>
<a name="l00091"></a>00091         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00092"></a>00092         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Solid ground level:&quot;</span>));
<a name="l00093"></a>00093         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00094"></a>00094         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_level&quot;</span>); lx+=85;
<a name="l00095"></a>00095         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00096"></a>00096         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_level_edited&quot;</span>); lx+=20;
<a name="l00097"></a>00097         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_level_scroll&quot;</span>); lx+=65;
<a name="l00098"></a>00098         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00099"></a>00099         h-&gt;setScrollRange(1000);
<a name="l00100"></a>00100         helpTexts[<span class="stringliteral">&quot;solid_level&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Solid ground level&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;With this you can define how deep the solid ground is. If it is 0 then the surface will be solid. If it is 0.1 then you&#39;ll have 10 cm of fluid on top of solid ground. If it is 100 then the solid ground will be way deep (100m), with fluid on top.&quot;</span>));
<a name="l00101"></a>00101         minMaxs[<span class="stringliteral">&quot;solid_level&quot;</span>] = std::pair&lt;Real,Real&gt;(0, 200);
<a name="l00102"></a>00102         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_level_help&quot;</span>); lx+=25;
<a name="l00103"></a>00103         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00104"></a>00104         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00105"></a>00105 
<a name="l00106"></a>00106         <span class="comment">// solid_strength</span>
<a name="l00107"></a>00107         lx=0; ly+=20;
<a name="l00108"></a>00108         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00109"></a>00109         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Strength:&quot;</span>));
<a name="l00110"></a>00110         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00111"></a>00111         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_strength&quot;</span>); lx+=85;
<a name="l00112"></a>00112         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00113"></a>00113         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_strength_edited&quot;</span>); lx+=20;
<a name="l00114"></a>00114         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_strength_scroll&quot;</span>); lx+=65;
<a name="l00115"></a>00115         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00116"></a>00116         h-&gt;setScrollRange(1000);
<a name="l00117"></a>00117         helpTexts[<span class="stringliteral">&quot;solid_strength&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Strength&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;This parameter raises or diminishes surface friction in a generic way. It is here so as to be able to do quick calibrations of friction. Start with having this to 1.0 and after tuning the rest of the surface variables, come back and play with this.&quot;</span>));
<a name="l00118"></a>00118         minMaxs[<span class="stringliteral">&quot;solid_strength&quot;</span>] = std::pair&lt;Real,Real&gt;(0, 2);
<a name="l00119"></a>00119         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_strength_help&quot;</span>); lx+=25;
<a name="l00120"></a>00120         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00121"></a>00121         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00122"></a>00122 
<a name="l00123"></a>00123         <span class="comment">// solid_static_friction</span>
<a name="l00124"></a>00124         lx=0; ly+=20;
<a name="l00125"></a>00125         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00126"></a>00126         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Static friction coef:&quot;</span>));
<a name="l00127"></a>00127         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00128"></a>00128         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_static_friction&quot;</span>); lx+=85;
<a name="l00129"></a>00129         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00130"></a>00130         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_static_friction_edited&quot;</span>); lx+=20;
<a name="l00131"></a>00131         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_static_friction_scroll&quot;</span>); lx+=65;
<a name="l00132"></a>00132         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00133"></a>00133         h-&gt;setScrollRange(1000);
<a name="l00134"></a>00134         helpTexts[<span class="stringliteral">&quot;solid_static_friction&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Static friction coef&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Static friction keeps you in the same place when you are stopped on a hill. In the real world this friction is always bigger than dynamic friction (sliding friction). Start with 0.5 and work from there. It is better to try to find some experimentally validated values for this and the rest of surface friction variables in the net, and then to fine tune via strength.&quot;</span>));
<a name="l00135"></a>00135         minMaxs[<span class="stringliteral">&quot;solid_static_friction&quot;</span>] = std::pair&lt;Real,Real&gt;(0.1f, 2);
<a name="l00136"></a>00136         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_static_friction_help&quot;</span>); lx+=20;
<a name="l00137"></a>00137         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00138"></a>00138         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00139"></a>00139 
<a name="l00140"></a>00140         <span class="comment">// solid_adhension_velo</span>
<a name="l00141"></a>00141         lx=0; ly+=20;
<a name="l00142"></a>00142         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00143"></a>00143         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Adhesion velocity:&quot;</span>));
<a name="l00144"></a>00144         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00145"></a>00145         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_adhension_velo&quot;</span>); lx+=85;
<a name="l00146"></a>00146         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00147"></a>00147         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_adhension_velo_edited&quot;</span>); lx+=20;
<a name="l00148"></a>00148         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_adhension_velo_scroll&quot;</span>); lx+=65;
<a name="l00149"></a>00149         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00150"></a>00150         h-&gt;setScrollRange(1000);
<a name="l00151"></a>00151         helpTexts[<span class="stringliteral">&quot;solid_adhension_velo&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Adhesion velocity&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Below this velocity, static friction rules, above it dynamic friction takes command. It should be something small, in the range of 0.1-0.4 . This velocity threshold is also used by the fluid physics, so you should always define it. NEVER have it at 0.&quot;</span>));
<a name="l00152"></a>00152         minMaxs[<span class="stringliteral">&quot;solid_adhension_velo&quot;</span>] = std::pair&lt;Real,Real&gt;(0.1f, 0.5f);
<a name="l00153"></a>00153         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_adhension_velo_help&quot;</span>); lx+=20;
<a name="l00154"></a>00154         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00155"></a>00155         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00156"></a>00156 
<a name="l00157"></a>00157         <span class="comment">// solid_dynamic_friction</span>
<a name="l00158"></a>00158         lx=0; ly+=20;
<a name="l00159"></a>00159         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00160"></a>00160         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Dynamic friction coef:&quot;</span>));
<a name="l00161"></a>00161         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00162"></a>00162         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_dynamic_friction&quot;</span>); lx+=85;
<a name="l00163"></a>00163         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00164"></a>00164         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_dynamic_friction_edited&quot;</span>); lx+=20;
<a name="l00165"></a>00165         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_dynamic_friction_scroll&quot;</span>); lx+=65;
<a name="l00166"></a>00166         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00167"></a>00167         h-&gt;setScrollRange(1000);
<a name="l00168"></a>00168         helpTexts[<span class="stringliteral">&quot;solid_dynamic_friction&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Dynamic friction coef&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Or sliding friction coef. It should be smaller than static friction coef. This parameter defines how much friction you&#39;ll have when sliding. Try to find some values for it from the net.&quot;</span>));
<a name="l00169"></a>00169         minMaxs[<span class="stringliteral">&quot;solid_dynamic_friction&quot;</span>] = std::pair&lt;Real,Real&gt;(0.1f, 1.5f);
<a name="l00170"></a>00170         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_dynamic_friction_help&quot;</span>); lx+=20;
<a name="l00171"></a>00171         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00172"></a>00172         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00173"></a>00173 
<a name="l00174"></a>00174         <span class="comment">// solid_hydrodynamic</span>
<a name="l00175"></a>00175         lx=0; ly+=20;
<a name="l00176"></a>00176         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00177"></a>00177         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Hydrodynamic friction coef:&quot;</span>));
<a name="l00178"></a>00178         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00179"></a>00179         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_hydrodynamic&quot;</span>); lx+=85;
<a name="l00180"></a>00180         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00181"></a>00181         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_hydrodynamic_edited&quot;</span>); lx+=20;
<a name="l00182"></a>00182         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_hydrodynamic_scroll&quot;</span>); lx+=65;
<a name="l00183"></a>00183         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00184"></a>00184         h-&gt;setScrollRange(1000);
<a name="l00185"></a>00185         helpTexts[<span class="stringliteral">&quot;solid_hydrodynamic&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Hydrodynamic friction coef&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;This friction defines the added friction that you&#39;ll feel from a surface that has a little film of fluid on it. It is kind of redundant with all the fluid physics below, but it is here so as for experimentally validated values from the net to be usable. If you decide that you&#39;ll simulate the film of fluid with the more complex fluid physics below, then just set this to 0.&quot;</span>));
<a name="l00186"></a>00186         minMaxs[<span class="stringliteral">&quot;solid_hydrodynamic&quot;</span>] = std::pair&lt;Real,Real&gt;(0, 1.5f);
<a name="l00187"></a>00187         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_hydrodynamic_help&quot;</span>); lx+=25;
<a name="l00188"></a>00188         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00189"></a>00189         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00190"></a>00190 
<a name="l00191"></a>00191         <span class="comment">// solid_stribeck</span>
<a name="l00192"></a>00192         lx=0; ly+=20;
<a name="l00193"></a>00193         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00194"></a>00194         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Stribeck velocity:&quot;</span>));
<a name="l00195"></a>00195         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00196"></a>00196         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_stribeck&quot;</span>); lx+=85;
<a name="l00197"></a>00197         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00198"></a>00198         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_stribeck_edited&quot;</span>); lx+=20;
<a name="l00199"></a>00199         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_stribeck_scroll&quot;</span>); lx+=65;
<a name="l00200"></a>00200         helpTexts[<span class="stringliteral">&quot;solid_stribeck&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Stribeck velocity&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;You&#39;ll either find stribeck velocity in the net, or the inverse (1/stribeck velocity) of it described as &#39;stribeck coef&#39;. It defines the shape of the dynamic friction curve. Lets leave it at that. Just find some nice values for it from the net.&quot;</span>));
<a name="l00201"></a>00201         minMaxs[<span class="stringliteral">&quot;solid_stribeck&quot;</span>] = std::pair&lt;Real,Real&gt;(0, 1000);
<a name="l00202"></a>00202         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00203"></a>00203         h-&gt;setScrollRange(1000);
<a name="l00204"></a>00204         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_stribeck_help&quot;</span>); lx+=25;
<a name="l00205"></a>00205         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00206"></a>00206         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208         <span class="comment">// solid_alpha</span>
<a name="l00209"></a>00209         lx=0; ly+=20;
<a name="l00210"></a>00210         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00211"></a>00211         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;alpha:&quot;</span>));
<a name="l00212"></a>00212         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00213"></a>00213         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_alpha&quot;</span>); lx+=85;
<a name="l00214"></a>00214         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00215"></a>00215         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_alpha_edited&quot;</span>); lx+=20;
<a name="l00216"></a>00216         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_alpha_scroll&quot;</span>); lx+=65;
<a name="l00217"></a>00217         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00218"></a>00218         h-&gt;setScrollRange(1000);
<a name="l00219"></a>00219         helpTexts[<span class="stringliteral">&quot;solid_alpha&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Alpha&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Its usual value is 2. But you can try others.&quot;</span>));
<a name="l00220"></a>00220         minMaxs[<span class="stringliteral">&quot;solid_alpha&quot;</span>] = std::pair&lt;Real,Real&gt;(0, 200);
<a name="l00221"></a>00221         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;solid_alpha_help&quot;</span>); lx+=25;
<a name="l00222"></a>00222         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00223"></a>00223         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00224"></a>00224 
<a name="l00225"></a>00225         <span class="comment">// combo_fx_type</span>
<a name="l00226"></a>00226         lx=0; ly+=20;
<a name="l00227"></a>00227         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00228"></a>00228         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;fx_type:&quot;</span>));
<a name="l00229"></a>00229         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00230"></a>00230         cb = p-&gt;createWidget&lt;MyGUI::ComboBox&gt;(<span class="stringliteral">&quot;ComboBox&quot;</span>, lx, ly, 115, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;combo_fx_type&quot;</span>); lx+=120;
<a name="l00231"></a>00231         cb-&gt;addItem(<span class="stringliteral">&quot;dusty&quot;</span>);
<a name="l00232"></a>00232         cb-&gt;addItem(<span class="stringliteral">&quot;hard&quot;</span>);
<a name="l00233"></a>00233         cb-&gt;addItem(<span class="stringliteral">&quot;clumpy&quot;</span>);
<a name="l00234"></a>00234         cb-&gt;setEditStatic(<span class="keyword">true</span>);
<a name="l00235"></a>00235         cb-&gt;setIndexSelected(0);
<a name="l00236"></a>00236         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;combo_fx_type_edited&quot;</span>); lx+=20;
<a name="l00237"></a>00237         helpTexts[<span class="stringliteral">&quot;combo_fx&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;FX Type&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;The type of special effects that RoR will use to give the appearance of a surface. It doesn&#39;t affect the physics at all&quot;</span>));
<a name="l00238"></a>00238         minMaxs[<span class="stringliteral">&quot;combo_fx&quot;</span>] = std::pair&lt;Real,Real&gt;(0, 0);
<a name="l00239"></a>00239         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;combo_fx_help&quot;</span>); lx+=25;
<a name="l00240"></a>00240         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00241"></a>00241         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00242"></a>00242 
<a name="l00243"></a>00243         <span class="comment">// fx_color</span>
<a name="l00244"></a>00244         lx=0; ly+=20;       
<a name="l00245"></a>00245         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00246"></a>00246         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;fx_color:&quot;</span>));
<a name="l00247"></a>00247         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00248"></a>00248         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 140, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fx_color_text&quot;</span>); lx+=145;
<a name="l00249"></a>00249         t-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00250"></a>00250         t-&gt;setTextAlign(MyGUI::Align::Left);
<a name="l00251"></a>00251         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fx_color_text_edited&quot;</span>); lx+=20;
<a name="l00252"></a>00252         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fx_color_help&quot;</span>); lx+=25;
<a name="l00253"></a>00253         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00254"></a>00254         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00255"></a>00255         helpTexts[<span class="stringliteral">&quot;fx_color&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;FX Colour&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;The color of RoR&#39;s special effects&quot;</span>));
<a name="l00256"></a>00256         minMaxs[<span class="stringliteral">&quot;fx_color&quot;</span>] = std::pair&lt;Real,Real&gt;(0, 0);
<a name="l00257"></a>00257         <span class="comment">// TO BE DONE</span>
<a name="l00258"></a>00258 
<a name="l00259"></a>00259         lx=0; ly+=20;       
<a name="l00260"></a>00260         <span class="comment">// add height to global height</span>
<a name="l00261"></a>00261         y += ly;
<a name="l00262"></a>00262     }
<a name="l00263"></a>00263     p-&gt;setSize(370, y-by+25);
<a name="l00264"></a>00264 
<a name="l00265"></a>00265     x=10; y+=40;
<a name="l00266"></a>00266     t = win-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, x, y, 170, 20,  MyGUI::Align::Default); x+=175;
<a name="l00267"></a>00267     t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Fluid Settings&quot;</span>));
<a name="l00268"></a>00268     
<a name="l00269"></a>00269     <span class="comment">// adding panel for solid ground</span>
<a name="l00270"></a>00270     x=10; by = y + 20; <span class="comment">// set box start now</span>
<a name="l00271"></a>00271     p = win-&gt;createWidget&lt;MyGUI::Widget&gt;(<span class="stringliteral">&quot;PanelSkin&quot;</span>, x, by, 370, 25,  MyGUI::Align::Default);
<a name="l00272"></a>00272     {
<a name="l00273"></a>00273         <span class="keywordtype">int</span> lx=0, ly=5; <span class="comment">// local coordinate system</span>
<a name="l00274"></a>00274 
<a name="l00275"></a>00275         <span class="comment">// fluid_flowbeh</span>
<a name="l00276"></a>00276         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00277"></a>00277         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Flow behavior index:&quot;</span>));
<a name="l00278"></a>00278         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00279"></a>00279         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_flowbeh&quot;</span>); lx+=85;
<a name="l00280"></a>00280         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00281"></a>00281         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_flowbeh_edited&quot;</span>); lx+=20;
<a name="l00282"></a>00282         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_flowbeh_scroll&quot;</span>); lx+=65;
<a name="l00283"></a>00283         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00284"></a>00284         h-&gt;setScrollRange(1000);
<a name="l00285"></a>00285         helpTexts[<span class="stringliteral">&quot;fluid_flowbeh&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Flow behavior index&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;If it is 1.0 then the fluid will behave like water. The lower you get from 1.0, the more like mud the fluid will behave, meaning that for small velocities the fluid will resist motion and for large velocities the fluid will not resist so much. The higher you get from 1.0 the more like sand the fluid will behave. The bigger the velocity, the bigger the resistance of the fluid (try to hit sand hard it&#39;ll feel like stone).&quot;</span>));
<a name="l00286"></a>00286         minMaxs[<span class="stringliteral">&quot;fluid_flowbeh&quot;</span>] = std::pair&lt;Real,Real&gt;(-2, 2);
<a name="l00287"></a>00287         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_flowbeh_help&quot;</span>); lx+=25;
<a name="l00288"></a>00288         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00289"></a>00289         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291         <span class="comment">// fluid_flowcon</span>
<a name="l00292"></a>00292         lx=0; ly+=20;
<a name="l00293"></a>00293         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00294"></a>00294         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Flow consistency:&quot;</span>));
<a name="l00295"></a>00295         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00296"></a>00296         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_flowcon&quot;</span>); lx+=85;
<a name="l00297"></a>00297         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00298"></a>00298         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_flowcon_edited&quot;</span>); lx+=20;
<a name="l00299"></a>00299         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_flowcon_scroll&quot;</span>); lx+=65;
<a name="l00300"></a>00300         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00301"></a>00301         h-&gt;setScrollRange(1000);
<a name="l00302"></a>00302         helpTexts[<span class="stringliteral">&quot;fluid_flowcon&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Flow consistency&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Think of it as default fluid resistance. Behavior index above changes it at real time. Useful values in practice are quite large.&quot;</span>));
<a name="l00303"></a>00303         minMaxs[<span class="stringliteral">&quot;fluid_flowcon&quot;</span>] = std::pair&lt;Real,Real&gt;(10, 100000);
<a name="l00304"></a>00304         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_flowcon_help&quot;</span>); lx+=25;
<a name="l00305"></a>00305         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00306"></a>00306         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00307"></a>00307 
<a name="l00308"></a>00308         <span class="comment">// fluid_density</span>
<a name="l00309"></a>00309         lx=0; ly+=20;
<a name="l00310"></a>00310         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00311"></a>00311         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Fluid density:&quot;</span>));
<a name="l00312"></a>00312         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00313"></a>00313         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_density&quot;</span>); lx+=85;
<a name="l00314"></a>00314         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00315"></a>00315         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_density_edited&quot;</span>); lx+=20;
<a name="l00316"></a>00316         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_density_scroll&quot;</span>); lx+=65;
<a name="l00317"></a>00317         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00318"></a>00318         h-&gt;setScrollRange(1000);
<a name="l00319"></a>00319         helpTexts[<span class="stringliteral">&quot;fluid_density&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Fluid density&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;In mud (or sand) the resistance of the fluid described by the parameters above will stop you and so keep you from sinking. But for substances like water it isn&#39;t the drag that stops you from sinking. Its buoyancy. This parameter is here so as to keep you from sinking when you wish to simulate fluids with low drag (resistance). For fluids like mud or sand you can put it at 0, but it is best to keep it at some minimum value. For fluids with behavior index &gt;=1 it will behave like you are in water. For fluids with behavior index &lt;1 it&#39;ll behave like you are in mud.&quot;</span>));
<a name="l00320"></a>00320         minMaxs[<span class="stringliteral">&quot;fluid_density&quot;</span>] = std::pair&lt;Real,Real&gt;(10, 100000);
<a name="l00321"></a>00321         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_density_help&quot;</span>); lx+=25;
<a name="l00322"></a>00322         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00323"></a>00323         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00324"></a>00324 
<a name="l00325"></a>00325         <span class="comment">// fluid_drag_anisotropy</span>
<a name="l00326"></a>00326         lx=0; ly+=20;
<a name="l00327"></a>00327         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 170, 20,  MyGUI::Align::Default); lx+=175;
<a name="l00328"></a>00328         t-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Drag anisotropy:&quot;</span>));
<a name="l00329"></a>00329         t-&gt;setTextAlign(MyGUI::Align::Right);
<a name="l00330"></a>00330         e = p-&gt;createWidget&lt;MyGUI::Edit&gt;(<span class="stringliteral">&quot;EditBox&quot;</span>, lx, ly, 80, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_drag_anisotropy&quot;</span>); lx+=85;
<a name="l00331"></a>00331         e-&gt;eventEditTextChange += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_edit_TextChange);
<a name="l00332"></a>00332         t = p-&gt;createWidget&lt;MyGUI::TextBox&gt;(<span class="stringliteral">&quot;TextBox&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_drag_anisotropy_edited&quot;</span>); lx+=20;
<a name="l00333"></a>00333         h = p-&gt;createWidget&lt;MyGUI::ScrollBar&gt;(<span class="stringliteral">&quot;ScrollBarH&quot;</span>, lx, ly, 60, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_drag_anisotropy_scroll&quot;</span>); lx+=65;
<a name="l00334"></a>00334         h-&gt;eventScrollChangePosition += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_scroll_value);
<a name="l00335"></a>00335         h-&gt;setScrollRange(1000);
<a name="l00336"></a>00336         helpTexts[<span class="stringliteral">&quot;fluid_drag_anisotropy&quot;</span>] = std::pair&lt;UTFString,UTFString&gt;(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Drag anisotropy&quot;</span>), <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;This parameter is for making it easier(cheating) to get out from mud. To get stuck in real mud isn&#39;t fun at all, so this makes the mud push up. Ranges in this parameter are from 0 to 1 . If you set it at 1 then you&#39;ll get real mud. For values from 0 to 1, the behavior goes from real mud to easy mud depending on this parameter and the value of Adhesion velocity. For velocity 0 real mud it is. For velocity &gt;= adhesion velocity easy mud it is.&quot;</span>));
<a name="l00337"></a>00337         minMaxs[<span class="stringliteral">&quot;fluid_drag_anisotropy&quot;</span>] = std::pair&lt;Real,Real&gt;(0, 1);
<a name="l00338"></a>00338         b = p-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, lx, ly, 20, 20,  MyGUI::Align::Default, <span class="stringliteral">&quot;fluid_drag_anisotropy_help&quot;</span>); lx+=25;
<a name="l00339"></a>00339         b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00340"></a>00340         b-&gt;setCaption(<span class="stringliteral">&quot;?&quot;</span>);
<a name="l00341"></a>00341         
<a name="l00342"></a>00342         lx=0; ly+=20;       
<a name="l00343"></a>00343         <span class="comment">// add height to global height</span>
<a name="l00344"></a>00344         y += ly;
<a name="l00345"></a>00345     }
<a name="l00346"></a>00346     p-&gt;setSize(370, y-by+25);
<a name="l00347"></a>00347     
<a name="l00348"></a>00348     x=10; y+=40;
<a name="l00349"></a>00349     b = win-&gt;createWidget&lt;MyGUI::Button&gt;(<span class="stringliteral">&quot;Button&quot;</span>, x, y, 350, 30,  MyGUI::Align::Default, <span class="stringliteral">&quot;apply_changes&quot;</span>); x+=25;
<a name="l00350"></a>00350     b-&gt;eventMouseButtonClick += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::event_btn_MouseButtonClick);
<a name="l00351"></a>00351     b-&gt;setCaption(<a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Apply Changes&quot;</span>));
<a name="l00352"></a>00352 
<a name="l00353"></a>00353     <span class="comment">/*</span>
<a name="l00354"></a>00354 <span class="comment">    x=10; y+=20;</span>
<a name="l00355"></a>00355 <span class="comment">    t = win-&gt;createWidget&lt;MyGUI::TextBox&gt;(&quot;TextBox&quot;,  x, y, 170, 20,  MyGUI::Align::Default); x+=175;</span>
<a name="l00356"></a>00356 <span class="comment">    t-&gt;setCaption(_L(&quot;Ground Debug&quot;));</span>
<a name="l00357"></a>00357 <span class="comment">    */</span>
<a name="l00358"></a>00358 
<a name="l00359"></a>00359     win-&gt;eventWindowButtonPressed += MyGUI::newDelegate(<span class="keyword">this</span>, &amp;GUI_Friction::notifyWindowButtonPressed);
<a name="l00360"></a>00360     win-&gt;setVisible(<span class="keyword">false</span>);
<a name="l00361"></a>00361 }
<a name="l00362"></a>00362 
<a name="l00363"></a>00363 GUI_Friction::~GUI_Friction()
<a name="l00364"></a>00364 {
<a name="l00365"></a>00365 
<a name="l00366"></a>00366 }
<a name="l00367"></a>00367 
<a name="l00368"></a>00368 <span class="keywordtype">void</span> GUI_Friction::setShaded(<span class="keywordtype">bool</span> value)
<a name="l00369"></a>00369 {
<a name="l00370"></a>00370     <span class="keywordflow">if</span> (!win || !win-&gt;getVisible()) <span class="keywordflow">return</span>;
<a name="l00371"></a>00371     <span class="keywordflow">if</span> (value)
<a name="l00372"></a>00372     {
<a name="l00373"></a>00373         MyGUI::ControllerItem* item = MyGUI::ControllerManager::getInstance().createItem(MyGUI::ControllerFadeAlpha::getClassTypeName());
<a name="l00374"></a>00374         MyGUI::ControllerFadeAlpha* controller = item-&gt;castType&lt;MyGUI::ControllerFadeAlpha&gt;();
<a name="l00375"></a>00375         controller-&gt;setAlpha(0.9f);
<a name="l00376"></a>00376         controller-&gt;setCoef(3.0f);
<a name="l00377"></a>00377         controller-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00378"></a>00378         MyGUI::ControllerManager::getInstance().addItem(win, controller);
<a name="l00379"></a>00379     } <span class="keywordflow">else</span>
<a name="l00380"></a>00380     {
<a name="l00381"></a>00381         MyGUI::ControllerItem* item = MyGUI::ControllerManager::getInstance().createItem(MyGUI::ControllerFadeAlpha::getClassTypeName());
<a name="l00382"></a>00382         MyGUI::ControllerFadeAlpha* controller = item-&gt;castType&lt;MyGUI::ControllerFadeAlpha&gt;();
<a name="l00383"></a>00383         controller-&gt;setAlpha(0.2f);
<a name="l00384"></a>00384         controller-&gt;setCoef(3.0f);
<a name="l00385"></a>00385         controller-&gt;setEnabled(<span class="keyword">true</span>);
<a name="l00386"></a>00386         MyGUI::ControllerManager::getInstance().addItem(win, controller);
<a name="l00387"></a>00387     }
<a name="l00388"></a>00388 }
<a name="l00389"></a>00389 
<a name="l00390"></a>00390 <span class="keywordtype">void</span> GUI_Friction::setVisible(<span class="keywordtype">bool</span> value)
<a name="l00391"></a>00391 {
<a name="l00392"></a>00392     <span class="keywordflow">if</span> (!col) <span class="keywordflow">return</span>;
<a name="l00393"></a>00393     <span class="keywordflow">if</span> (value)
<a name="l00394"></a>00394     {
<a name="l00395"></a>00395         <span class="comment">// upon show, refresh list</span>
<a name="l00396"></a>00396         MyGUI::ComboBoxPtr cb = (MyGUI::ComboBoxPtr)win-&gt;findWidget(<span class="stringliteral">&quot;combo_grounds&quot;</span>);
<a name="l00397"></a>00397         cb-&gt;removeAllItems();
<a name="l00398"></a>00398 
<a name="l00399"></a>00399         std::map&lt;String, ground_model_t&gt;::iterator it;
<a name="l00400"></a>00400         std::map&lt;String, ground_model_t&gt; *gmm = col-&gt;getGroundModels();
<a name="l00401"></a>00401         <span class="keywordflow">for</span> (it=gmm-&gt;begin(); it!=gmm-&gt;end(); it++)
<a name="l00402"></a>00402         {
<a name="l00403"></a>00403             cb-&gt;addItem((*it).second.name);
<a name="l00404"></a>00404         }
<a name="l00405"></a>00405         cb-&gt;setEditStatic(<span class="keyword">true</span>);
<a name="l00406"></a>00406         cb-&gt;setIndexSelected(0);
<a name="l00407"></a>00407         <a class="code" href="structground__model__t.html">ground_model_t</a> *gm = col-&gt;getGroundModelByString(cb-&gt;getItemNameAt(0));
<a name="l00408"></a>00408         selected_gm = gm;
<a name="l00409"></a>00409         <span class="keywordflow">if</span> (gm)
<a name="l00410"></a>00410             updateControls(gm, <span class="keyword">false</span>);
<a name="l00411"></a>00411     } <span class="keywordflow">else</span>
<a name="l00412"></a>00412     {
<a name="l00413"></a>00413         <a class="code" href="class_ro_r_1_1_application.html#a3db1b8c7dc6bf465f5ed653ef4a8ce9a">RoR::Application::GetGuiManager</a>()-&gt;<a class="code" href="class_ro_r_1_1_g_u_i_manager.html#ab3b8db75686408c9ea70117e0cc9ef5c">UnfocusGui</a>();
<a name="l00414"></a>00414     }
<a name="l00415"></a>00415     win-&gt;setVisibleSmooth(value);
<a name="l00416"></a>00416     <span class="comment">//win-&gt;setVisible(value);</span>
<a name="l00417"></a>00417     <span class="comment">//MyGUI::PointerManager::getInstance().setVisible(value);</span>
<a name="l00418"></a>00418 }
<a name="l00419"></a>00419 
<a name="l00420"></a>00420 <span class="keywordtype">bool</span> GUI_Friction::getVisible()
<a name="l00421"></a>00421 {
<a name="l00422"></a>00422     <span class="keywordflow">return</span> win-&gt;getVisible();
<a name="l00423"></a>00423 }
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 <span class="keywordtype">void</span> GUI_Friction::setActiveCol(<a class="code" href="structground__model__t.html">ground_model_t</a> *gm)
<a name="l00426"></a>00426 {
<a name="l00427"></a>00427     <span class="keywordflow">if</span> (!gm) <span class="keywordflow">return</span>;
<a name="l00428"></a>00428     <span class="keywordflow">if</span> (active_gm == gm) <span class="keywordflow">return</span>; <span class="comment">//only set once</span>
<a name="l00429"></a>00429     active_gm = gm;
<a name="l00430"></a>00430     
<a name="l00431"></a>00431     UTFString tmp = <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Current active Ground: &quot;</span>) + <a class="code" href="_utils_8cpp.html#aebe76599ecdd7fc4db8b64cba0beb94e">ANSI_TO_UTF</a>(gm-&gt;<a class="code" href="structground__model__t.html#afea47c52a768b30dbd001cd0fd98f67e">name</a>);
<a name="l00432"></a>00432     MyGUI::TextBox *t = (MyGUI::TextBox*)win-&gt;findWidget(<span class="stringliteral">&quot;text_current_ground&quot;</span>);
<a name="l00433"></a>00433     <span class="keywordflow">if</span> (t) t-&gt;setCaption(convertToMyGUIString(tmp));
<a name="l00434"></a>00434     <span class="keywordflow">if</span> (selected_gm == gm)
<a name="l00435"></a>00435         updateControls(gm);
<a name="l00436"></a>00436 }
<a name="l00437"></a>00437 
<a name="l00438"></a>00438 <span class="keywordtype">void</span> GUI_Friction::updateControls(<a class="code" href="structground__model__t.html">ground_model_t</a> *gm, <span class="keywordtype">bool</span> setCombo)
<a name="l00439"></a>00439 {
<a name="l00440"></a>00440     <span class="keywordflow">if</span> (!gm) <span class="keywordflow">return</span>;
<a name="l00441"></a>00441 
<a name="l00442"></a>00442     <span class="keywordflow">if</span> (setCombo)
<a name="l00443"></a>00443     {
<a name="l00444"></a>00444         MyGUI::ComboBoxPtr cb = (MyGUI::ComboBoxPtr)win-&gt;findWidget(<span class="stringliteral">&quot;combo_grounds&quot;</span>);
<a name="l00445"></a>00445         <span class="keywordflow">if</span> (!cb) <span class="keywordflow">return</span>;
<a name="l00446"></a>00446 
<a name="l00447"></a>00447         <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0;i&lt;(int)cb-&gt;getItemCount();i++)
<a name="l00448"></a>00448         {
<a name="l00449"></a>00449             <span class="keywordflow">if</span> (cb-&gt;getItemNameAt(i) == MyGUI::UString(gm-&gt;<a class="code" href="structground__model__t.html#afea47c52a768b30dbd001cd0fd98f67e">name</a>))
<a name="l00450"></a>00450             {
<a name="l00451"></a>00451                 cb-&gt;setIndexSelected(i);
<a name="l00452"></a>00452                 selected_gm = gm;
<a name="l00453"></a>00453                 <span class="keywordflow">break</span>;
<a name="l00454"></a>00454             }
<a name="l00455"></a>00455         }
<a name="l00456"></a>00456     }
<a name="l00457"></a>00457 
<a name="l00458"></a>00458     MyGUI::EditPtr e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_adhension_velo&quot;</span>);
<a name="l00459"></a>00459     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#a3c2efbc7931b510bbded868b27c171aa" title="adhesion velocity">va</a>));
<a name="l00460"></a>00460     MyGUI::ScrollBar * h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_adhension_velo_scroll&quot;</span>);
<a name="l00461"></a>00461     MyGUI::TextBox * edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_adhension_velo_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00462"></a>00462     std::pair&lt;Real,Real&gt; f = minMaxs[<span class="stringliteral">&quot;solid_adhension_velo&quot;</span>];
<a name="l00463"></a>00463     <span class="keywordtype">size_t</span> fa = ((gm-&gt;<a class="code" href="structground__model__t.html#a3c2efbc7931b510bbded868b27c171aa" title="adhesion velocity">va</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00464"></a>00464     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00465"></a>00465     
<a name="l00466"></a>00466     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_level&quot;</span>);
<a name="l00467"></a>00467     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#a9401c016470fea08d34b1b4efba4b2f8" title="how deep the solid ground is">solid_ground_level</a>));
<a name="l00468"></a>00468     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_adhension_velo_scroll&quot;</span>);
<a name="l00469"></a>00469     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_level_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00470"></a>00470     f = minMaxs[<span class="stringliteral">&quot;solid_level&quot;</span>];
<a name="l00471"></a>00471     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#a9401c016470fea08d34b1b4efba4b2f8" title="how deep the solid ground is">solid_ground_level</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00472"></a>00472     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00473"></a>00473 
<a name="l00474"></a>00474     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_static_friction&quot;</span>);
<a name="l00475"></a>00475     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#ae90da116c88cbb3294ac28c716904a28" title="static friction coefficient">ms</a>));
<a name="l00476"></a>00476     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_static_friction_scroll&quot;</span>);
<a name="l00477"></a>00477     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_static_friction_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00478"></a>00478     f = minMaxs[<span class="stringliteral">&quot;solid_static_friction&quot;</span>];
<a name="l00479"></a>00479     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#ae90da116c88cbb3294ac28c716904a28" title="static friction coefficient">ms</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00480"></a>00480     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00481"></a>00481 
<a name="l00482"></a>00482     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_dynamic_friction&quot;</span>);
<a name="l00483"></a>00483     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#aadfe3a71edb757646b4c5e04d50ae53e" title="sliding friction coefficient">mc</a>));
<a name="l00484"></a>00484     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_dynamic_friction_scroll&quot;</span>);
<a name="l00485"></a>00485     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_dynamic_friction_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00486"></a>00486     f = minMaxs[<span class="stringliteral">&quot;solid_dynamic_friction&quot;</span>];
<a name="l00487"></a>00487     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#aadfe3a71edb757646b4c5e04d50ae53e" title="sliding friction coefficient">mc</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00488"></a>00488     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00489"></a>00489 
<a name="l00490"></a>00490     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_hydrodynamic&quot;</span>);
<a name="l00491"></a>00491     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#ade83e1a631b8a74e357b750444342158" title="hydrodynamic friction (s/m)">t2</a>));
<a name="l00492"></a>00492     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_hydrodynamic_scroll&quot;</span>);
<a name="l00493"></a>00493     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_hydrodynamic_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00494"></a>00494     f = minMaxs[<span class="stringliteral">&quot;solid_hydrodynamic&quot;</span>];
<a name="l00495"></a>00495     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#ade83e1a631b8a74e357b750444342158" title="hydrodynamic friction (s/m)">t2</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00496"></a>00496     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00497"></a>00497 
<a name="l00498"></a>00498     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_stribeck&quot;</span>);
<a name="l00499"></a>00499     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#aa84ff905dba3a065f3674a9c187b1cbb" title="stribeck velocity (m/s)">vs</a>));
<a name="l00500"></a>00500     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_stribeck_scroll&quot;</span>);
<a name="l00501"></a>00501     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_stribeck_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00502"></a>00502     f = minMaxs[<span class="stringliteral">&quot;solid_stribeck&quot;</span>];
<a name="l00503"></a>00503     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#aa84ff905dba3a065f3674a9c187b1cbb" title="stribeck velocity (m/s)">vs</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00504"></a>00504     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00505"></a>00505 
<a name="l00506"></a>00506     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_alpha&quot;</span>);
<a name="l00507"></a>00507     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#ac5b1e489b7a5bb9e6e296b0299e7eb4e" title="steady-steady">alpha</a>));
<a name="l00508"></a>00508     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_alpha_scroll&quot;</span>);
<a name="l00509"></a>00509     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_alpha_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00510"></a>00510     f = minMaxs[<span class="stringliteral">&quot;solid_alpha&quot;</span>];
<a name="l00511"></a>00511     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#ac5b1e489b7a5bb9e6e296b0299e7eb4e" title="steady-steady">alpha</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00512"></a>00512     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_strength&quot;</span>);
<a name="l00515"></a>00515     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#a64076e9e2522ba1b2da9c761a3258dcf" title="ground strength">strength</a>));
<a name="l00516"></a>00516     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_strength_scroll&quot;</span>);
<a name="l00517"></a>00517     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_strength_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00518"></a>00518     f = minMaxs[<span class="stringliteral">&quot;solid_strength&quot;</span>];
<a name="l00519"></a>00519     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#a64076e9e2522ba1b2da9c761a3258dcf" title="ground strength">strength</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00520"></a>00520     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00521"></a>00521 
<a name="l00522"></a>00522     <span class="comment">// fluid</span>
<a name="l00523"></a>00523     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowbeh&quot;</span>);
<a name="l00524"></a>00524     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#ac417d263eab180800821649fee776a83">flow_behavior_index</a>));
<a name="l00525"></a>00525     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowbeh_scroll&quot;</span>);
<a name="l00526"></a>00526     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowbeh_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00527"></a>00527     f = minMaxs[<span class="stringliteral">&quot;fluid_flowbeh&quot;</span>];
<a name="l00528"></a>00528     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#ac417d263eab180800821649fee776a83">flow_behavior_index</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00529"></a>00529     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00530"></a>00530 
<a name="l00531"></a>00531     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowcon&quot;</span>);
<a name="l00532"></a>00532     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#ad3516a30725dee82dad34f7f48a247e3" title="general drag coefficient">flow_consistency_index</a>));
<a name="l00533"></a>00533     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowcon_scroll&quot;</span>);
<a name="l00534"></a>00534     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowcon_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00535"></a>00535     f = minMaxs[<span class="stringliteral">&quot;fluid_flowcon&quot;</span>];
<a name="l00536"></a>00536     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#ad3516a30725dee82dad34f7f48a247e3" title="general drag coefficient">flow_consistency_index</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00537"></a>00537     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00538"></a>00538 
<a name="l00539"></a>00539     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_density&quot;</span>);
<a name="l00540"></a>00540     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#a102bc2b2fef6ec1297caaf7622606d1e" title="Density of liquid.">fluid_density</a>));
<a name="l00541"></a>00541     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_density_scroll&quot;</span>);
<a name="l00542"></a>00542     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_density_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00543"></a>00543     f = minMaxs[<span class="stringliteral">&quot;fluid_density&quot;</span>];
<a name="l00544"></a>00544     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#a102bc2b2fef6ec1297caaf7622606d1e" title="Density of liquid.">fluid_density</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00545"></a>00545     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00546"></a>00546 
<a name="l00547"></a>00547     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_drag_anisotropy&quot;</span>);
<a name="l00548"></a>00548     <span class="keywordflow">if</span> (e) e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(gm-&gt;<a class="code" href="structground__model__t.html#acc605a53dbac4afeae44cf702781dc47" title="Upwards/Downwards drag anisotropy.">drag_anisotropy</a>));
<a name="l00549"></a>00549     h = (MyGUI::ScrollBar *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_drag_anisotropy_scroll&quot;</span>);
<a name="l00550"></a>00550     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_drag_anisotropy_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00551"></a>00551     f = minMaxs[<span class="stringliteral">&quot;fluid_drag_anisotropy&quot;</span>];
<a name="l00552"></a>00552     fa = ((gm-&gt;<a class="code" href="structground__model__t.html#acc605a53dbac4afeae44cf702781dc47" title="Upwards/Downwards drag anisotropy.">drag_anisotropy</a> + f.first) / (f.second - f.first)) * h-&gt;getScrollRange();
<a name="l00553"></a>00553     <span class="keywordflow">if</span> (h) h-&gt;setScrollPosition(fa);
<a name="l00554"></a>00554 <span class="comment">/*</span>
<a name="l00555"></a>00555 <span class="comment">    MyGUI::ComboBoxPtr cb = (MyGUI::ComboBoxPtr)win-&gt;findWidget(&quot;combo_fx_type&quot;);</span>
<a name="l00556"></a>00556 <span class="comment">    if (gm-&gt;fx_type == FX_DUSTY)  cb-&gt;setIndexSelected(0);</span>
<a name="l00557"></a>00557 <span class="comment">    if (gm-&gt;fx_type == FX_HARD)  cb-&gt;setIndexSelected(1);</span>
<a name="l00558"></a>00558 <span class="comment">    if (gm-&gt;fx_type == FX_CLUMPY)  cb-&gt;setIndexSelected(2);</span>
<a name="l00559"></a>00559 <span class="comment">    edt = (MyGUI::TextBox *)win-&gt;findWidget(&quot;combo_fx_type_edited&quot;); if (edt) edt-&gt;setCaption(&quot;&quot;);</span>
<a name="l00560"></a>00560 <span class="comment"></span>
<a name="l00561"></a>00561 <span class="comment">    MyGUI::TextBox * t = (MyGUI::TextBox *)win-&gt;findWidget(&quot;fx_color_text&quot;);</span>
<a name="l00562"></a>00562 <span class="comment">    if (t) t-&gt;setCaption(TOSTRING(gm-&gt;fx_colour));</span>
<a name="l00563"></a>00563 <span class="comment">    edt = (MyGUI::TextBox *)win-&gt;findWidget(&quot;fx_color_text_edited&quot;); if (edt) edt-&gt;setCaption(&quot;&quot;);</span>
<a name="l00564"></a>00564 <span class="comment">*/</span>
<a name="l00565"></a>00565 
<a name="l00566"></a>00566 }
<a name="l00567"></a>00567 
<a name="l00568"></a>00568 <span class="keywordtype">void</span> GUI_Friction::event_combo_grounds_eventComboAccept(MyGUI::ComboBoxPtr _sender, <span class="keywordtype">size_t</span> _index)
<a name="l00569"></a>00569 {
<a name="l00570"></a>00570     <span class="keywordflow">if</span> (!col) <span class="keywordflow">return</span>;
<a name="l00571"></a>00571     <span class="keywordflow">if</span> (!win-&gt;getVisible()) <span class="keywordflow">return</span>;
<a name="l00572"></a>00572     MyGUI::ComboBoxPtr cb = (MyGUI::ComboBoxPtr)win-&gt;findWidget(<span class="stringliteral">&quot;combo_grounds&quot;</span>);
<a name="l00573"></a>00573     <span class="keywordflow">if</span> (!cb) <span class="keywordflow">return</span>;
<a name="l00574"></a>00574     <a class="code" href="structground__model__t.html">ground_model_t</a> *gm = col-&gt;getGroundModelByString(cb-&gt;getItemNameAt(_index).asUTF8_c_str());
<a name="l00575"></a>00575     <span class="keywordflow">if</span> (gm)
<a name="l00576"></a>00576         updateControls(gm, <span class="keyword">false</span>);
<a name="l00577"></a>00577     selected_gm = gm;
<a name="l00578"></a>00578 }
<a name="l00579"></a>00579 
<a name="l00580"></a>00580 <span class="keywordtype">void</span> GUI_Friction::event_edit_TextChange(MyGUI::EditPtr _sender)
<a name="l00581"></a>00581 {
<a name="l00582"></a>00582     String name = _sender-&gt;getName();
<a name="l00583"></a>00583     MyGUI::TextBox * edt = (MyGUI::TextBox *)win-&gt;findWidget(name + <span class="stringliteral">&quot;_edited&quot;</span>);
<a name="l00584"></a>00584     <span class="keywordflow">if</span> (edt)
<a name="l00585"></a>00585         edt-&gt;setCaption(<span class="stringliteral">&quot;!!&quot;</span>);
<a name="l00586"></a>00586 }
<a name="l00587"></a>00587 
<a name="l00588"></a>00588 <span class="keywordtype">void</span> GUI_Friction::event_btn_MouseButtonClick(MyGUI::WidgetPtr _sender)
<a name="l00589"></a>00589 {
<a name="l00590"></a>00590     String name = _sender-&gt;getName();
<a name="l00591"></a>00591 
<a name="l00592"></a>00592     <span class="keywordflow">if</span> (name.size() &gt; 5  &amp;&amp; name.substr(name.size() - 5, 5) == <span class="stringliteral">&quot;_help&quot;</span>)
<a name="l00593"></a>00593     {
<a name="l00594"></a>00594         String wname = name.substr(0, name.size() - 5);
<a name="l00595"></a>00595         std::pair&lt;UTFString,UTFString&gt; hText = helpTexts[wname];
<a name="l00596"></a>00596         std::pair&lt;Real,Real&gt; minmax =  minMaxs[wname];
<a name="l00597"></a>00597 
<a name="l00598"></a>00598         UTFString mTitle = hText.first;
<a name="l00599"></a>00599         UTFString mTxt = hText.second;
<a name="l00600"></a>00600         <span class="keywordflow">if</span> (fabs(minmax.first - minmax.second) &gt; 0.001f)
<a name="l00601"></a>00601         {
<a name="l00602"></a>00602             <span class="keywordtype">wchar_t</span> param[512] = L<span class="stringliteral">&quot;&quot;</span>;
<a name="l00603"></a>00603             UTFString fmt = <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;\nParameter range: %f to %f&quot;</span>);
<a name="l00604"></a>00604             swprintf(param, 512, fmt.asWStr_c_str(), minmax.first, minmax.second);
<a name="l00605"></a>00605             mTxt = mTxt + UTFString(param);
<a name="l00606"></a>00606         }
<a name="l00607"></a>00607         MyGUI::IntPoint p = _sender-&gt;getAbsolutePosition();
<a name="l00608"></a>00608         MyGUI::IntSize s = _sender-&gt;getSize();
<a name="l00609"></a>00609         showHelp(mTitle, mTxt, p.left + s.width, p.top + s.height*0.5f);
<a name="l00610"></a>00610         <span class="keywordflow">return</span>;
<a name="l00611"></a>00611     }
<a name="l00612"></a>00612 
<a name="l00613"></a>00613     <span class="keywordflow">if</span> (name == <span class="stringliteral">&quot;select_current_ground&quot;</span>)
<a name="l00614"></a>00614     {
<a name="l00615"></a>00615         updateControls(active_gm);
<a name="l00616"></a>00616     } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (_sender-&gt;getName() == <span class="stringliteral">&quot;apply_changes&quot;</span>)
<a name="l00617"></a>00617     {
<a name="l00618"></a>00618         applyChanges();
<a name="l00619"></a>00619     }
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 
<a name="l00622"></a>00622     <span class="comment">//LOG(&quot; Friction GUI button pressed: &quot; + _sender-&gt;getName());</span>
<a name="l00623"></a>00623 }
<a name="l00624"></a>00624 
<a name="l00625"></a>00625 <span class="keywordtype">void</span> GUI_Friction::event_scroll_value(MyGUI::ScrollBar *_sender, <span class="keywordtype">size_t</span> _value)
<a name="l00626"></a>00626 {
<a name="l00627"></a>00627     String name = _sender-&gt;getName();
<a name="l00628"></a>00628     <span class="keywordflow">if</span> (name.size() &gt; 7  &amp;&amp; name.substr(name.size() - 7, 7) == <span class="stringliteral">&quot;_scroll&quot;</span>)
<a name="l00629"></a>00629     {
<a name="l00630"></a>00630         String wName = name.substr(0, name.size() - 7);
<a name="l00631"></a>00631         MyGUI::EditPtr e = (MyGUI::EditPtr)win-&gt;findWidget(wName);
<a name="l00632"></a>00632         std::pair&lt;Real,Real&gt; f = minMaxs[wName];
<a name="l00633"></a>00633         MyGUI::ScrollBar * h = (MyGUI::ScrollBar *)_sender;
<a name="l00634"></a>00634         Real rvalue = ((((float)_value) / (float)(h-&gt;getScrollRange())) * (f.second - f.first)) + f.first;
<a name="l00635"></a>00635         <span class="keywordflow">if</span> (e)
<a name="l00636"></a>00636             e-&gt;setCaption(<a class="code" href="_ro_r_prerequisites_8h.html#a9063e80f8777300c93afde6e6f4c9cea">TOSTRING</a>(rvalue));
<a name="l00637"></a>00637         
<a name="l00638"></a>00638         MyGUI::TextBox * edt = (MyGUI::TextBox *)win-&gt;findWidget(wName + <span class="stringliteral">&quot;_edited&quot;</span>);
<a name="l00639"></a>00639         <span class="keywordflow">if</span> (edt)
<a name="l00640"></a>00640             edt-&gt;setCaption(<span class="stringliteral">&quot;!!&quot;</span>);
<a name="l00641"></a>00641 
<a name="l00642"></a>00642     }
<a name="l00643"></a>00643 
<a name="l00644"></a>00644 }
<a name="l00645"></a>00645 
<a name="l00646"></a>00646 <span class="keywordtype">void</span> GUI_Friction::applyChanges()
<a name="l00647"></a>00647 {
<a name="l00648"></a>00648     MyGUI::TextBox * edt;
<a name="l00649"></a>00649 
<a name="l00650"></a>00650     MyGUI::EditPtr e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_adhension_velo&quot;</span>);
<a name="l00651"></a>00651     selected_gm-&gt;va = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00652"></a>00652     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_adhension_velo_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00653"></a>00653     
<a name="l00654"></a>00654     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_level&quot;</span>);
<a name="l00655"></a>00655     selected_gm-&gt;solid_ground_level = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00656"></a>00656     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_level_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00657"></a>00657 
<a name="l00658"></a>00658     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_static_friction&quot;</span>);
<a name="l00659"></a>00659     selected_gm-&gt;ms = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00660"></a>00660     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_static_friction_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00661"></a>00661 
<a name="l00662"></a>00662     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_dynamic_friction&quot;</span>);
<a name="l00663"></a>00663     selected_gm-&gt;mc = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00664"></a>00664     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_dynamic_friction_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00665"></a>00665 
<a name="l00666"></a>00666     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_hydrodynamic&quot;</span>);
<a name="l00667"></a>00667     selected_gm-&gt;t2 = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00668"></a>00668     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_hydrodynamic_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00669"></a>00669 
<a name="l00670"></a>00670     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_stribeck&quot;</span>);
<a name="l00671"></a>00671     selected_gm-&gt;vs = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00672"></a>00672     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_stribeck_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00673"></a>00673 
<a name="l00674"></a>00674     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_alpha&quot;</span>);
<a name="l00675"></a>00675     selected_gm-&gt;alpha = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00676"></a>00676     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_alpha_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00677"></a>00677 
<a name="l00678"></a>00678     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;solid_strength&quot;</span>);
<a name="l00679"></a>00679     selected_gm-&gt;strength = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00680"></a>00680     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;solid_strength_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00681"></a>00681 
<a name="l00682"></a>00682     <span class="comment">// fluid</span>
<a name="l00683"></a>00683     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowbeh&quot;</span>);
<a name="l00684"></a>00684     selected_gm-&gt;flow_behavior_index = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00685"></a>00685     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowbeh_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00686"></a>00686 
<a name="l00687"></a>00687     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowcon&quot;</span>);
<a name="l00688"></a>00688     selected_gm-&gt;flow_consistency_index = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00689"></a>00689     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_flowcon_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00690"></a>00690 
<a name="l00691"></a>00691     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_density&quot;</span>);
<a name="l00692"></a>00692     selected_gm-&gt;fluid_density = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00693"></a>00693     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_density_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00694"></a>00694 
<a name="l00695"></a>00695     e = (MyGUI::EditPtr)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_drag_anisotropy&quot;</span>);
<a name="l00696"></a>00696     selected_gm-&gt;drag_anisotropy = StringConverter::parseReal(e-&gt;getCaption());
<a name="l00697"></a>00697     edt = (MyGUI::TextBox *)win-&gt;findWidget(<span class="stringliteral">&quot;fluid_drag_anisotropy_edited&quot;</span>); <span class="keywordflow">if</span> (edt) edt-&gt;setCaption(<span class="stringliteral">&quot;&quot;</span>);
<a name="l00698"></a>00698 
<a name="l00699"></a>00699     <span class="comment">/*</span>
<a name="l00700"></a>00700 <span class="comment">    MyGUI::ComboBoxPtr cb = (MyGUI::ComboBoxPtr)win-&gt;findWidget(&quot;combo_fx_type&quot;);</span>
<a name="l00701"></a>00701 <span class="comment">    if (cb-&gt;getIndexSelected() == 0)</span>
<a name="l00702"></a>00702 <span class="comment">        selected_gm-&gt;fx_type = FX_DUSTY;</span>
<a name="l00703"></a>00703 <span class="comment">    else if (cb-&gt;getIndexSelected() == 1)</span>
<a name="l00704"></a>00704 <span class="comment">        selected_gm-&gt;fx_type = FX_HARD;</span>
<a name="l00705"></a>00705 <span class="comment">    else if (cb-&gt;getIndexSelected() == 2)</span>
<a name="l00706"></a>00706 <span class="comment">        selected_gm-&gt;fx_type = FX_CLUMPY;</span>
<a name="l00707"></a>00707 <span class="comment">    edt = (MyGUI::TextBox *)win-&gt;findWidget(&quot;combo_fx_type_edited&quot;); if (edt) edt-&gt;setCaption(&quot;&quot;);</span>
<a name="l00708"></a>00708 <span class="comment">    */</span>
<a name="l00709"></a>00709 
<a name="l00710"></a>00710 }
<a name="l00711"></a>00711 
<a name="l00712"></a>00712 <span class="keywordtype">void</span> GUI_Friction::notifyWindowButtonPressed(MyGUI::WindowPtr _sender, <span class="keyword">const</span> std::string&amp; _name)
<a name="l00713"></a>00713 {
<a name="l00714"></a>00714     <span class="comment">//LOG(&quot;notifyWindowButtonPressed: &quot; + String(_name));</span>
<a name="l00715"></a>00715     <span class="keywordflow">if</span> (_name == <span class="stringliteral">&quot;close&quot;</span>)
<a name="l00716"></a>00716         setVisible(<span class="keyword">false</span>);
<a name="l00717"></a>00717 }
<a name="l00718"></a>00718 
<a name="l00719"></a>00719 <span class="keywordtype">void</span> GUI_Friction::notifyHelpWindowButtonPressed(MyGUI::WindowPtr _sender, <span class="keyword">const</span> std::string&amp; _name)
<a name="l00720"></a>00720 {
<a name="l00721"></a>00721     <span class="keywordflow">if</span> (_name == <span class="stringliteral">&quot;close&quot;</span>) msgwin-&gt;setVisibleSmooth(<span class="keyword">false</span>);
<a name="l00722"></a>00722 }
<a name="l00723"></a>00723 
<a name="l00724"></a>00724 <span class="keywordtype">void</span> GUI_Friction::showHelp(UTFString title, UTFString msg, <span class="keywordtype">int</span> x, <span class="keywordtype">int</span> y)
<a name="l00725"></a>00725 {
<a name="l00726"></a>00726     MyGUI::EditPtr e = (MyGUI::EditPtr)msgwin-&gt;findWidget(<span class="stringliteral">&quot;helptext&quot;</span>);
<a name="l00727"></a>00727     e-&gt;setCaption(convertToMyGUIString(msg));
<a name="l00728"></a>00728     UTFString tmp = <a class="code" href="_error_utils_8cpp.html#a23b3808d12342e40e7459e77fccb85b6">_L</a>(<span class="stringliteral">&quot;Friction Help: &quot;</span>) + title;
<a name="l00729"></a>00729     msgwin-&gt;setCaption(convertToMyGUIString(tmp));
<a name="l00730"></a>00730     msgwin-&gt;setPosition(x + 20, y - 150);
<a name="l00731"></a>00731     msgwin-&gt;setVisibleSmooth(<span class="keyword">true</span>);
<a name="l00732"></a>00732 }
<a name="l00733"></a>00733 
<a name="l00734"></a>00734 <span class="preprocessor">#endif //MYGUI</span>
<a name="l00735"></a>00735 <span class="preprocessor"></span>
</pre></div></div><!-- contents -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>



<hr class="footer"/><address class="footer"><small>
Generated on Mon Oct 12 2015 11:55:30 for Rigs of Rods by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.6.1
</small></address>

</body>
</html>
